<!--
***************************************************************************
* Software Testing Automation Framework (STAF)
* (C) Copyright IBM Corp. 2002, 2004, 2005
*
* This software is licensed under the Eclipse Public License (EPL) V1.0.
****************************************************************************
-->

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.76 [en] (Windows NT 5.0; U) [Netscape]">
   <title>STAF Execution Engine (STAX) Service User's Guide</title>
</head>
<body bgcolor="#FFFFFF">
<!-- End Header Records  ============================================ --><a NAME="Top_Of_Page"></a>
<h1>
STAX Service User's Guide</h1>
<b>STAf eXecution engine</b>
<br>
<b>Version 3.5.0 Beta 1</b>
<p><b>December 2, 2010</b>
<p>Document Owners: Sharon Lucas, David Bender
<p>
<hr>
<h2><a name="ToC"></a>Table of Contents</h2>
<p>
<a name="ToC_Overview" href="#Header_Overview"><b>Overview</b></a>
<p>
<a name="ToC_Concepts" href="#Header_Concepts"><b>Concepts</b></a>
<p>
<a name="ToC_XML" href="#Header_XML"><b>Using XML to Define STAX Jobs</b></a>
<p>
<a name="ToC_Python" href="#Header_Python"><b>Using Python for Expression Evaluation</b></a>
<p>
<a name="ToC_StaxXmlElements" href="#Header_StaxXmlElements"><b>Element Syntax and Usage</b></a>
<menu>
<li><a name="ToC_Root_Element" href="#Header_Root_Element">Root Element</a></li>
  <menu>
  <li><a name="ToC_Stax_Element" href="#Header_Stax_Element"><b>stax</b></a></li>
  </menu>
<li><a name="ToC_Stax_Data" href="#Header_Stax_Data">Python Code Execution</a></li>
  <menu>
  <li><a name="ToC_Script_Element" href="#Header_Script_Element"><b>script</b>:  Run Python Code</a></li>
  </menu>
<li><a name="ToC_Stax_Actions" href="#Header_Stax_Actions">Actions</a></li>
  <menu>
  <li><a name="ToC_Process"   href="#Header_Process"><b>process</b>:  Run a Process</a></li>
  <li><a name="ToC_Stafcmd"   href="#Header_Stafcmd"><b>stafcmd</b>:  Run a STAF Command</a></li>
  <li><a name="ToC_SubJob"    href="#Header_SubJob"><b>job</b>:  Execute a STAX Sub-Job</a></li>
  <li><a name="ToC_Nop"       href="#Header_Nop"><b>nop</b>:  Perform No Operation</a></li>
  </menu>
<li><a name="ToC_Stax_Groups" href="#Header_Stax_Groups">Sequential Execution</a></li>
  <menu>
  <li><a name="ToC_Sequence"  href="#Header_Sequence"><b>sequence</b>:  Run Tasks In Sequence</a></li>
  </menu>
<li><a name="ToC_Stax_Parallels" href="#Header_Stax_Parallels">Parallel Execution</a></li>
  <menu>
  <li><a name="ToC_Parallel"  href="#Header_Parallel"><b>parallel</b>:  Run Tasks in Parallel</a></li>
  <li><a name="ToC_ParallelIterate" href="#Header_ParallelIterate"><b>paralleliterate</b>:  Run a Task for Each Entry in a List in Parallel</a></li>
  </menu>
<li><a name="ToC_Stax_Function_Calls" href="#Header_Stax_Function_Calls">Functions</a></li>
  <menu>
  <li><a name="ToC_Function" href="#Header_Function"><b>function</b>:  Define a Named Task</a></li>
  <li><a name="ToC_Call" href="#Header_Call"><b>call</b>:  Call a Function</a></li>
  <li><a name="ToC_call-with-list" href="#Header_call-with-list"><b>call-with-list</b>:  Call a Function with a Argument List</a></li>
  <li><a name="ToC_call-with-map"  href="#Header_call-with-map"><b>call-with-map</b>:  Call a Function with a Argument Map</a></li>
  <li><a name="ToC_Defaultcall"    href="#Header_Defaultcall"><b>defaultcall</b>:  Specify Default Starting Function To Call</a></li>
  <li><a name="ToC_Return"         href="#Header_Return"><b>return</b>:  Return From a Function</a></li>
  <li><a name="ToC_Import"         href="#Header_Import"><b>import</b>:  Import Functions From Another STAX XML Job File</a></li>
  </menu>
<li><a name="ToC_Stax_Loops" href="#Header_Stax_Loops">Loops</a></li>
  <menu>
  <li><a name="ToC_Loop"    href="#Header_Loop"><b>loop</b>:  Run a Task Repeatedly</a></li>
  <li><a name="ToC_Iterate" href="#Header_Iterate"><b>iterate</b>:  Iterate a List and Run Each Iteration In Sequence</a></li>
  <li><a name="ToC_Break"   href="#Header_Break"><b>break</b>:  Jump out of the Closest Enclosing Loop or Iterate</a></li>
  <li><a name="ToC_Continue" href="#Header_Continue"><b>continue</b>:  Jump to the Top of the Closest Enclosing Loop or Iterate</a></li>
  </menu>
<li><a name="ToC_Stax_Logic" href="#Header_Stax_Logic">Conditional</a></li>
  <menu>
  <li><a name="ToC_If" href="#Header_If"><b>if / elseif / else</b>:  Select a Task To Perform</a></li>
  </menu>
<li><a name="ToC_Stax_Wrappers" href="#Header_Stax_Wrappers">Wrappers</a></li>
  <menu>
  <li><a name="ToC_Block"    href="#Header_Block"><b>block</b>:  Define a Task for which Execution Control is Provided</a></li>
  <li><a name="ToC_Testcase" href="#Header_Testcase"><b>testcase / tcstatus</b>:  Define a Testcase and Record Status</a></li>
  <li><a name="ToC_Timer"    href="#Header_Timer"><b>timer</b>:  Define a Task for which Time Control is Provided</a></li>
  </menu>
<li><a name="ToC_Stax_Directives" href="#Header_Stax_Directives">Directives</a></li>
  <menu>
  <li><a name="ToC_Hold_Element" href="#Header_Hold_Element"><b>hold</b>:  Hold a Block</a></li>
  <li><a name="ToC_Release_Element" href="#Header_Release_Element"><b>release</b>:  Release a Block</a></li>
  <li><a name="ToC_Terminate_Element" href="#Header_Terminate_Element"><b>terminate</b>:  Terminate a Block</a></li>
  </menu>
<li><a name="ToC_Stax_Exceptions" href="#Header_Stax_Exceptions">Exceptions</a></li>
  <menu>
  <li><a name="ToC_TryCatch" href="#Header_TryCatch"><b>try / catch / finally</b>:  Run a Task, Catch Exceptions and/or Run a Finalization Task</a></li>
  <li><a name="ToC_Throw"    href="#Header_Throw"><b>throw</b>:  Throw an Exception</a></li>
  <li><a name="ToC_Rethrow"  href="#Header_Rethrow"><b>rethrow</b>:  Rethrow an Exception</a></li>
  <li><a name="ToC_TryExample" href="#Header_TryExample">Example of Nested Try Blocks</a></li>
  </menu>
<li><a name="ToC_Stax_Signals" href="#Header_Stax_Signals">Signals</a></li>
  <menu>
  <li><a name="ToC_Raise"           href="#Header_Raise"><b>raise</b>:  Raise a Signal</a></li>
  <li><a name="ToC_Signalhandler"   href="#Header_Signalhandler"><b>signalhandler</b>:  Handle a Signal</a></li>
  <li><a name="ToC_CleanupExamples" href="#Header_CleanupExamples">How to Perform Cleanup Before Job Termination</a></li>
  </menu>
<li><a name="ToC_Stax_LogMessage"   href="#Header_Stax_LogMessage">Logging / Messages</a></li>
  <menu>
  <li><a name="ToC_Log_Element"     href="#Header_Log_Element"><b>log</b>:  Log a Message in the STAX Job User Log</a></li>
  <li><a name="ToC_Message_Element" href="#Header_Message_Element"><b>message</b>:  Send a Message to the STAX Monitor</a></li>
  </menu>
<li><a name="ToC_Stax_Breakpoint"   href="#Header_Stax_Breakpoint">Breakpoints</a></li>
  <menu>
  <li><a name="ToC_Breakpoint_Element" href="#Header_Breakpoint_Element"><b>breakpoint</b>:  Settings Breakpoints in a STAX Job</a></li>
  </menu>
</menu>
<p>
<a name="ToC_Requirements" href="#Header_Requirements"><b>System Requirements</b></a>
<menu>
<li><a name="ToC_SWReqs" href="#Header_SWReqs">Software Requirements</a></li>
<li><a name="ToC_HWReqs" href="#Header_HWReqs">Hardware Requirements</a></li>
</menu>
<p>
<a name="ToC_Installation" href="#Header_Installation"><b>Installation and Configuration</b></a>
<menu>
<li><a name="ToC_StaxServiceMach" href="#Header_StaxServiceMach">STAX Service Machine</a></li>
<li><a name="ToC_RequestingMach" href="#Header_RequestingMach">Requesting Machine</a></li>
<li><a name="ToC_ExecutionMach" href="#Header_ExecutionMach">Execution Machine</a></li>
<li><a name="ToC_MonitoringMach" href="#Header_MonitoringMach">Monitoring Machine</a></li>
</menu>
<p>
<a name="ToC_RequestSyntax" href="#Header_RequestSyntax"><b>Request Syntax</b></a>
<menu>
<li><a name="ToC_Execute" href="#Header_Execute">EXECUTE</a></li>
<li><a name="ToC_GetResult" href="#Header_GetResult">GET RESULT</a></li>
<li><a name="ToC_GetDTD" href="#Header_GetDTD">GET DTD</a></li>
<li><a name="ToC_Help" href="#Header_Help">HELP</a></li>
<li><a name="ToC_Hold" href="#Header_Hold">HOLD</a></li>
<li><a name="ToC_List" href="#Header_List">LIST</a></li>
<li><a NAME="ToC_Log" HREF="#Header_Log">LOG</a></li>
<li><a name="ToC_Query" href="#Header_Query">QUERY</a></li>
<li><a name="ToC_Release" href="#Header_Release">RELEASE</a></li>
<li><a NAME="ToC_Send" HREF="#Header_Send">SEND</a></li>
<li><a NAME="ToC_Add" HREF="#Header_Add">ADD</a></li>
<li><a NAME="ToC_Remove" HREF="#Header_Remove">REMOVE</a></li>
<li><a NAME="ToC_Resume" HREF="#Header_Resume">RESUME</a></li>
<li><a NAME="ToC_Step" HREF="#Header_Step">STEP</a></li>
<li><a NAME="ToC_StopThread" HREF="#Header_StopThread">STOP THREAD</a></li>
<li><a NAME="ToC_PyExec" HREF="#Header_PyExec">PYEXEC</a></li>
<li><a NAME="ToC_Set" HREF="#Header_Set">SET</a></li>
<li><a NAME="ToC_Start" HREF="#Header_Start">START</a></li>
<li><a NAME="ToC_Stop" HREF="#Header_Stop">STOP</a></li>
<li><a name="ToC_Terminate" href="#Header_Terminate">TERMINATE</a></li>
<li><a name="ToC_Update" href="#Header_Update">UPDATE</a></li>
<li><a name="ToC_NotifyRegister" href="#Header_NotifyRegister">NOTIFY REGISTER/UNREGISTER</a></li>
<li><a name="ToC_NotifyList" href="#Header_NotifyList">NOTIFY LIST</a></li>
<li><a name="ToC_Purge" href="#Header_Purge">PURGE &lt;FILECACHE | MACHINECACHE></a></li>
<li><a name="ToC_Version" href="#Header_Version">VERSION</a></li>
</menu>
<p>
<a name="ToC_StaxMonitoring" href="#Header_StaxMonitoring"><b>STAX Monitoring</b></a>
<menu>
<li><a name="ToC_StartMonitor" href="#Header_StartMonitor">Starting the STAX Monitor</a></li>
<li><a name="ToC_MonProperties" href="#Header_MonProperties">Setting STAX Monitor Properties</a></li>
<li><a name="ToC_MonJobList" href="#Header_MonJobList">Displaying a List of Active Jobs</a></li>
<li><a name="ToC_MonSubmitJob" href="#Header_MonSubmitJob">Submitting a New Job for Execution</a></li>
  <menu>
  <li><a name="ToC_JobWizard" href="#Header_JobWizard">Using the Job Wizard</a></li>
  </menu>
<li><a name="ToC_MonitorJob" href="#Header_MonitorJob">Monitoring a Job</a></li>
<li><a name="ToC_DisplayJobLog" href="#Header_DisplayJobLog">Displaying a Job Log</a></li>
<li><a name="ToC_DisplayJVMLog" href="#Header_DisplayJVMLog">Displaying a JVM Log</a></li>
</menu>
<p>
<a name="ToC_StaxLogging" href="#Header_StaxLogging"><b>STAX Logging</b></a>
<p>
<a name="ToC_StaxVariables" href="#Header_StaxVariables"><b>STAX Variables</b></a>
<p>
<a name="ToC_StaxGlobal" href="#STAXGlobal_Class"><b>STAXGlobal Class</b></a>
<p>
<a name="ToC_StaxPythonInterfaces" href="#Header_StaxPythonInterfaces"><b>STAX Python Interfaces (STAFMarshalling)</b></a>
<p>
<a name="ToC_StafJavaClasses" href="#Header_StafJavaClasses"><b>STAF Java Classes (STAFUtil, STAFRC, STAFVersion, etc)</b></a>
<p>
<a name="ToC_FileCache" href="#Header_StaxFileCache"><b>STAX File and Machine Caching</b></a>
<p>
<a name="ToC_Extensions" href="#Header_Extensions"><b>STAX Extensions</b></a>
<menu>
<li><a name="ToC_RegServiceExt" href="#Header_RegServiceExt">Registering STAX Service Extensions</a></li>
<li><a name="ToC_ExtensionXMLFile" href="#Header_ExtensionXMLFile">Creating a STAX Extensions XML File</a></li>
<li><a name="ToC_RegMonitorExt" href="#Header_RegMonitorExt">Registering STAX Monitor Extensions</a></li>
</menu>
<p>
<a name="ToC_GenerateDoc" href="#Header_GenerateDoc"><b>Generating STAX Function Documentation</b></a>
<menu>
<li><a name="Toc_STAXDoc" href="#Header_STAXDoc">Using STAXDoc</a>
<li><a name="Toc_XSLT" href="#Header_XSLT">Using StyleSheet FunctionList.xsl</a>
</menu>
<p>
<a name="ToC_Debugging" href="#Header_Debugging"><b>Debugging</b></a>
<p>
<a name="ToC_UsingBreakpoints" href="#Header_UsingBreakpoints"><b>Using Breakpoints to Debug STAX Jobs</b></a>
<p>
<a name="ToC_STAXEvents" href="#Header_STAXEvents"><b>Events Generated by STAX that Provide Job Status</b></a>
<p>
<a name="ToC_Comments" href="#Header_Comments"><b>Support Information</b></a>
<menu>
<li><a name="ToC_Problems" href="#Header_Problems">Known Problems</a></li>
<li><a name="ToC_History" href="#Header_History">History of Changes</a></li>
</menu>
<p>
<a name="ToC_StaxXmlExamples" href="#Header_StaxXmlExamples"><b>Appendix A: STAX XML Document Examples</b></a>
<menu>
<li><a name="ToC_STAXLibraries" href="#Header_STAXLibraries">STAX Libraries Containing Common Utility Functions</a>
  <menu>
  <li><a name="ToC_STAFUpgradeUtil" href="#Header_STAFUpgradeUtil">STAF Upgrade Functions</a></li>
  <li><a name="ToC_STAXUtil" href="#Header_STAXUtil">STAX Utility Functions</a></li>
  </menu>
<li><a name="ToC_Samples" href="#Header_Samples">Sample STAX Jobs</a></li>
  <menu>
  <li><a name="ToC_SampleJob1" href="#Header_SampleJob1">Sample STAX Job 1 - Basic Example How to Run Processes and STAF Commands</a></li>
  <li><a name="ToC_SampleJob2" href="#Header_SampleJob2">Sample STAX Job 2 - Executing Tests in Parallel on Multiple Machines</a></li>
  <li><a name="ToC_SampleJob3" href="#Header_SampleJob3">Sample STAX Job 3 - Creating a STAF Handle and Using it's Queue</a></li>
  </menu>
</menu>
<p>
<a name="ToC_StaxErrorCodes" href="#Header_StaxErrorCodes"><b>Appendix B: STAX Error Code Reference</b></a>
<p>
<a name="ToC_StaxDTD" href="#Header_StaxDTD"><b>Appendix C: STAX Document Type Definition (DTD)</b></a>
<p>
<a name="ToC_ExtDTD" href="#Header_ExtDTD"><b>Appendix D: STAX Extensions Document Type Definition (DTD)</b></a>
<p>
<a name="ToC_References" href="#Header_References"><b>Appendix E: References</b></a>
<p>
<a name="ToC_CPythonDiffs" href="#Header_CPythonDiffs"><b>Appendix F: Jython and CPython Differences</b></a>
<p>
<a name="ToC_Licenses" href="#Header_Licenses"><b>Appendix G: Licenses and Acknowledgements</b></a>
<p>
<hr>

<h1><a name="Header_Overview" href="#ToC_Overview">Overview</a></h1>

STAX (STAf eXecution engine) is an XML-based execution engine implemented
as an external STAF service. STAX was designed to make it significantly
easier to automate the workflow of your tests and test environments.
<p>STAX accepts job definitions, in the form of XML documents. Fundamentally,
these job definitions allow you to specify the processes and STAF commands
necessary to perform the job. STAX provides a wealth of expressive functionality
on top of this, making it easy to implement, manage, track, and monitor
your jobs.
<p>STAX uses the Python scripting language for variable and expression evaluation.
The Python code is executed by Jython, a version of Python written entirely in Java.
This allows STAX to take advantage of the powerful and easy-to-use
features of Python.
<p>The sections that follow describe the basic concepts behind STAX, explain
the STAX XML language used to define your jobs, and detail the commands
externalized by the STAX service. Read on to find out more about the exciting
new world of STAX.
<br>&nbsp;

<h1><a name="Header_Concepts" href="#ToC_Concepts">Concepts</a></h1>

<h4>
STAX Elements</h4>
A STAX Element is a node in a STAX XML document. Some of the items that
STAX Elements can represent are:&nbsp; data to be used during the job,
commands/processes to be executed, definitions of the logic and control
flow within the job, exceptions and signals, and wrappers such as functions and
blocks that encompass other STAX Elements.
<h4>
Processes and Commands</h4>

A STAX job definition describes the execution flow for processes and STAF
commands.
<p>
<ul>  
<li>A process element really defines the execution information for
a STAF PROCESS START command.  A process element specifies a command to be executed
and the machine where it should run.  For example, the command could specify to
run a Java application or a Python file which is one of your testcases.
A process element may contain many optional elements (which corrrespond to
optional options that you can specify for a STAF PROCESS START command).
For example, the parms, workdir, env, stdin, stdout, and stderr elements
are some of the optional elements that can be specified within a process
element.  Note that you may specify an "if" attribute for each of these
optional elements which provides a convenient shortcut to deal with many
variations of optional process elements that, otherwise, would have to be
specified using the if/elseif logic elements and multiple different
process elements.
<p>
<li>A stafcmd element defines execution information for other STAF commands.
A stafcmd element specifies the STAF service and request to be executed
(e.g. RESPOOL REQUEST POOL, FS COPY FILE) and the machine where it should be run.
</ul>
<p>
Processes and stafcmds may be put into sequential and/or parallel wrappers which can be nested.

<h4>
Expression Evaluation via Python</h4>

STAX allows you to avoid hard-coding information in your job definition by
using Python to assign values to variables and then using Python scripting
language to evaluate expressions and to execute Python code.  STAX also sets some
variables in Python that provide runtime information about the
job definition's execution.
<p>
For example, instead of hardcoding the name of the machines where processes
and commands are executed during the job, a Python variable can be assigned
the name of the machine and specified for the location element.  Python
variables also be provided at the time the job is requested to be executed.
A Python variable may also be assigned a list of machine names.
<p>
After STAX processes some elements (e.g. process and stafcmd), the return code
and result (if applicable) are accessible via STAX variables.  These variables
can be referenced by other STAX elements (e.g. via the if element's expression
attribute) to determine logic flow within the job.
<h4>
Groups</h4>
STAX can execute groups of STAX Elements sequentially or in parallel.&nbsp;
When Elements are executed in parallel, STAX will run each of the Elements
on a separate thread.
<h4>
Loops</h4>
Loop Elements are available which allow a STAX Element to be executed repeatedly.&nbsp;
Additionally, there are Iterate Elements which allow a STAX Element to
be executed repeatedly while stepping through a list of data for each iteration
(this could be used, for example, to execute a sequence of commands for
each machine in a list).
<h4>
STAX-Threads</h4>
When the STAX Service executes elements in parallel, rather than using
real system threads (and thereby potentially creating an overabundance
of system threads), the STAX Service will simulate the threading capabilities
via a thread pool which will utilize a manageable number of real system
threads.&nbsp; These simulated threads are called STAX-Threads.
<p>
Whenever a new STAX-Thread is created, existing variables are cloned from the parent
STAX-Thread.  To create a global variable that can be accessed across STAX-Threads,
use the STAXGlobal class described in <a href="#STAXGlobal_Class">"STAXGlobal Class"</a>
section.  STAX elements that can create STAX-Threads include the following: &lt;parallel>,
&lt;paralleliterate>, &lt;process-action>, &lt;job-action>, and &lt;function> elements
with a local scope.
<h4>
Wrappers</h4>
STAX has several Wrapper Elements which simply provide additional functionality
to another STAX Element.&nbsp; These Wrapper Elements can denote Testcases
(with testcase status), Blocks (for which execution control
can be manipulated), Timers (for time-based execution control), and Functions
(which provide a unique name that can be called from other STAX Elements
in the Job Definition.

<h4>
Functions</h4>
Functions are a nearly universal program-structuring device.  Functions
serve two primary development roles: code reuse and procedural decomposition.
Functions are the simplest way to package logic you may wish to use in more
than one place and more than one time.  Functions allow us to group
and parametize chunks of XML to be used arbitrarily many times later.
Functions also provide a tool for splitting jobs into pieces that have
a well-defined role.  STAX allows functions to be imported from other XML
files so that you can build up libraries of STAX functions that can be
reused by many different STAX jobs.

<h4>Sub-Jobs</h4>
STAX provides a "job" element so that sub-jobs can be executed within a
parent job with synchronized completion as well as providing access to
the sub-job result.

<h4>
Logic Flow</h4>
STAX provides an "if" element which can evaluate conditions using Python
(for example, a return code) to determine logic flow within the STAX Job
Definition, thus allowing job flow to branch dynamically.
<h4>
Exceptions and Signals</h4>
The STAX Service provides exception and signal handling capabilities.&nbsp;
STAX exception handlers, as well as finally blocks, alter the execution
flow of the job.  STAX signal handlers provide asynchronous error handling
of raised signals.&nbsp; The STAX execution engine may also raise signals
or throw exceptions for errors which occur during job execution.
<h4>
Monitoring STAX Jobs</h4>
A STAX Monitor application is available for the STAX Service.&nbsp; This application
displays a graphical representation of the currently running elements of
a given Job.  The STAX Monitor makes it easy to see which processes and STAF
commands are currently running as well as the blocks which contain them.
You may select a process or STAF command to get more detailed information about
it.  You may also select a block and then control the
execution of the job by choosing to hold, release, or terminate the block.
The STAX Monitor also displays a list of testcases that
have been run and the number of passes and fails for each.
Also, a messages panel displays any messages that are sent by the job.  This can
help make debugging a job definition easy.
<h4>
Logging</h4>
The STAX Service maintains a service log which records high level information
about all jobs that have been submitted.
<p>The STAX Service also maintains an individual job log for each submitted
job.&nbsp; These job-specific logs record information such as testcase
status and job execution tracing.  If the "log" element is used within the
STAX Job Definition, then a user log is also created for the submitted job.
<h4>Queues</h4>
The STAX Service uses the STAF QUEUE service for sending messages.
Each STAF handle has a queue (see the STAF User's Guide for more information
on STAF handles, queues, and the QUEUE service).
Each STAX job has a handle associated with it (and, thus, a queue).
A STAX job uses it's STAF Queue for lots of things, so you should not
use the STAX job handle's queue (e.g. don't get try to get data off a
STAX job handle's queue) as that can interfere with the use of the queue
by the STAX service.
<p>Alternatively, if you want your STAX job to use a queue on the STAX
service side to send and receive messages, you can create your own
STAF handle and use it's queue.  Refer to <a href="#Header_SampleJob3">Sample
STAX Job 3 - Creating a STAF Handle and Using it's Queue</a> for an example
of how to create a STAF handle within a STAX job and use it's queue to get
messages.

<br>&nbsp;
<p>
<hr>

<h1><a name="Header_XML" href="#ToC_XML">Using XML to Define STAX Jobs</a></h1>

<p>STAX uses XML (Extensible Markup Language) to describe STAX job definitions.
XML is a language defined by the World Wide Web Consortium (W3C), the body that sets the
standards for the Web.
It is called extensible because it is not a fixed format like HTML (a single, predefined markup language).
Instead, XML is actually a 'metalanguage' -- a language for describing other languages -- which lets you
design your own customized markup languages for limitless different types of documents.
This section reviews some XML fundamentals.  Refer to the <a href="#Header_References">"References"</a> section
for where to get more information about XML.
<p>
Both markup and text in an XML document are case-sensitive.
All XML processing instructions start with &lt;? and end with ?>.
XML comments start with &lt;!-- and end with -->.
In XML, tags always start with &lt; and end with >.
The names that can be used for a tag are defined by the DTD (Document Type Definition).
<p>
XML documents are made up of XML <i>elements</i>.  Much like in HTML, you create XML
elements with an opening tag, such as &lt;stax>, followed by the element content (if any),
such as text or other elements, and ending with the matching closing tag that starts with &lt;/,
such as &lt;/stax>.  It's necessary to enclose the entire document, except for
processing instructions, in one element, called the <i>root element</i> -- that's the &lt;stax>
element here:
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">
&lt;stax>
   .
   .
   .
&lt;/stax>
</pre>

<h4>Empty Elements</h4>

Empty elements have only one tag, not a start and end tag.  In XML, you close an empty
element with />.  For example, nop is an empty element:
<pre>
&lt;nop/>
</pre>

<h4>Attributes</h4>

Attributes in XML are name-value pairs that let you specify additional data in start and
empty tags.  To assign a value to an attribute, you use an equal sign.
Because markup is always text, attributes are also text.  Even if you're assigning
a number to an attribute, you treat that number as a text string and
enclose it in quotes.  In XML, you must enclose attribute values in quotation marks.
Usually, you use double quotes, but if the attribute value itself contains
double quotes, you can use single quotes to surround the text.
<p>
If the attribute value contains both single and double quotes, you can use the XML-defined
entity &amp;apos; for a single quote and &amp;quot; for double quotes.
<p>
An example of a defaultcall element with a function attribute is:
<pre>
&lt;defaultcall function="MainFunction"/>
</pre>

<h4>Creating a STAX XML document</h4>

The root element can contain other elements, of course.
Here, I added elements for three functions to the document and added one element that defines the
function to call first by default.  Note that the function element has an
attribute called name and the defaultcall element is empty and has an attribute called function.
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">
&lt;stax>
  &lt;defaultcall function="FunctionA"/>

  &lt;function name="FunctionA">
      ...
  &lt;/function>

  &lt;function name="FunctionB">
      ...
  &lt;/function>

  &lt;function name="FunctionC">
      ...
  &lt;/function>
&lt;/stax>
</pre>
<p>
The function element can contain a single task element as defined by the STAX DTD.
Here, I added a process element to FunctionA, a stafcmd element to FunctionB, and
a log element to functionC.  A process element can contain other elements.  In this
case I added location, command, and parms.  A stafcmd element can contain other elements.
In this case I added location, service, and request.
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">
&lt;stax>
  &lt;defaultcall function="FunctionA"/>

  &lt;function name="FunctionA">
      &lt;process>
        &lt;location>'local'&lt;/location>
        &lt;command>'java'&lt;/command>
        &lt;parms>'com.ibm.staf.service.stax.TestProcess 2 4 0'&lt;/parms>
      &lt;/process>
  &lt;/function>

  &lt;function name="FunctionB">
      &lt;stafcmd>
        &lt;location>'local'&lt;/location>
        &lt;service>'misc'&lt;/service>
        &lt;request>'version'&lt;/request>
      &lt;/stafcmd>
  &lt;/function>

  &lt;function name="FunctionC">
      &lt;log>'This function logs this message'&lt;/log>
  &lt;/function>
&lt;/stax>
</pre>

<h4>Document Type Definition (DTD)</h4>

The STAX DTD specifies the correct syntax of the document.
A STAX XML document is valid if it complies with the STAX DTD.
A DTD is a formal description in XML Declaration Syntax of a particular type of document. It defines
what names are to be used for the different types of elements, where they may occur, and how they all fit
together. Refer to the <a href="#Header_StaxDTD">"STAX Document Type Definition (DTD)"</a> section
to see the entire STAX DTD.

<p>
For example, the STAX DTD allows you to describe a STAF Command which has a name attribute and contains
location, service, and request elements.
The relevant part of the STAX DTD contains:
<pre>
            &lt;!ELEMENT stafcmd   (location, service, request)>
            &lt;!ATTLIST stafcmd
                      name      CDATA    #IMPLIED
            >
            &lt;!ELEMENT location  (#PCDATA)>
            &lt;!ELEMENT service   (#PCDATA)>
            &lt;!ELEMENT request   (#PCDATA)>
</pre>
This defines a stafcmd as an element type containing location, service, and request elements; and it defines
location, service, and request as element types containing just plain text (Parsed Character Data or PCDATA)
and defines name as an attribute type containing just plain text (Character Data or CDATA).
Validating parsers read the DTD before they read your document so that they can identify where every element type ought
to come and how each relates to the other, so that applications which need to know this in advance (such as the
STAX service) can set themselves up correctly. The example above lets
you create STAF commands like:
<pre>
            &lt;stafcmd name="'Delay'">
              &lt;location>'local'&lt;/location>
              &lt;service>'delay'&lt;/service>
              &lt;request>'delay 5000'&lt;/request>
            &lt;/stafcmd>
</pre>
A DTD provides applications with advance notice of what names and structures can be used in a
particular document type. Using a DTD when editing files means you can be certain that all documents
which belong to a particular type will be constructed and named in a consistent and conformant manner.

The STAX service parses an XML document to break it down into its component parts and then handles the
resulting data.  STAX uses the XML Parser for Java which is a validating XML parser.
<p>
Refer to the <a href="#Header_References">References</a> section for
where to get more information about the XML Parser for Java.
<p>
You can use your favorite text editor to create a STAX XML document,
or you can use an XML editor such as <a href="http://www.xmlcooktop.com/">
Cooktop</a>.  If you use an XML editor, you'll probably want to get the
STAX DTD file so that the XML editor can use it to validate the XML syntax
by updating the DOCTYPE statement in the xml file so that the SYSTEM value
is the location of the stax.dtd file you created.
The stax.dtd file is not provided with the STAX service because its contents
can vary because you can extend it by registering STAX service extensions.
You can get the stax.dtd file by running the following from a command prompt
on your STAX service machine:
<pre>
  set STAF_QUIET_MODE=1               (or if on Unix:  export STAF_QUIET_MODE=1)
  STAF local STAX GET DTD > stax.dtd
  set STAF_QUIET_MODE=                (or if on Unix:  unset STAF_QUIET_MODE)
</pre>
This creates a stax.dtd file in the current directory.
Or, see <a href="#Header_ExtDTD">Appendix D: STAX Extensions Document Type
Definition (DTD)</a> for the contents of the STAX DTD (without any extensions).
<br>&nbsp;
<p>
<hr>

<h1><a name="Header_Python" href="#ToC_Python">Using Python for Expression Evaluation</a></h1>

<p>STAX uses the Python for variable and expression evaluation.
STAX uses Jython to execute the Python code.  Jython is an implementation
of the Python scripting language written in 100% pure Java that runs under
any compliant Java Virtual Machine (JVM).  Using Jython, you can write
Python code that interacts with any Java code.
<p>
STAX variable names must follow the Python variable naming conventions. In Python,
variable names come into existence when you assign values to them, but
there are a few rules to follow when picking names for variables.
<p>
<ul>
<li>
<i>Syntax: (underscore or letter) + (any number of letters, digits or underscores)</i></li>

<ul>Variable names must start with an underscore or letter, and be followed
by any number of letters, digits, or underscores. _machine, machine, and
Mach_1 are legal names, but 1_Mach, mach$, and @#! are not.</ul>
<p>
<li>
<i>Case matters: MACHNAME is not the same as machname</i></li>

<ul>Python always pays attention to case, both in names you create and
in reserved words. For instance, X and x refer to two different variable names.</ul>
<p>
<li>
<i>Python reserved words are off limits</i></li>

<ul>You cannot define variable names to be the same as words that mean
special things in the Python language. Following are reserved words in
Python: and, assert, break, class, continue, def, del, elif, else, except,
exec, finally, for, from global, if, import, in, is, lambda, not, or, pass,
print, raise, return, try, while.
<p>
  <b>Note:</b>  Python lets you use the names of Python built-in functions as
  variable names.  However, we recommend that you don't use the name
  of a Python built-in function as a variable name because you may want
  to use the Python built-in function at some point in your STAX job.
  Following are names of Python built-in functions:  abs, basestring, bool,
  callable, chr, classmethod, cmp, compile, complex, delattr, dict, dir,
  divmod, enumerate, eval, execfile, file, filter, float, getattr, globals,
  hasattr, hash, help, hex, id, input, int, isinstance, issubclass, iter,
  len, locals, long, map, max, min, object, oct, open, ord, pow, property,
  range, raw_input, reduce, reload, repr, round, setattr, slice, staticmethod,
  str, sum, super, tuple, type, unichr, unicode, vars, xrange, zip.
</ul>
<p>
<li>
<i>STAX reserved words are off limits</i></li>

<ul>You should not define variable names to be the same as words that mean
special things to the STAX service. Following are reserved words in STAX:
  <ul>
  <li>RC
  <li>STAFResult
  <li>any word beginning with STAX  (e.g. STAXJobName, STAXThreadID)
  <li>any word beginning with STAF  (e.g. STAFResult, STAFRC)
  </ul>
</ul>
</ul>
Python string constants can be enclosed in single or double quotes, which
allows embedded quotes of the opposite flavor.
<p>For example, the following two lines do exactly the same thing in a
STAX XML document.&nbsp; They assign a string constant (literal) "CoolTest"
to the value of a variable named testName.
<pre>&lt;script>testName = "CoolTest1"&lt;/script>
&lt;script>testName = 'CoolTest1'&lt;/script></pre>
However, the following line is not the same.&nbsp; It assigns the value
of a variable named CoolTest1 to the value of a variable named
testName.  If this was not what you intended and a variable named
CoolTest1 does not exist, a STAXPythonEvaluationError signal is raised.
<pre>&lt;script>testName = CoolTest1&lt;/script></pre>
<p>For elements and attributes whose values are evaluated via Python, we
need to distinguish between literals and variables.
<p>For example, the following request element's value contains a string
constant which is concatenated with the value of a variable named
machName.&nbsp; So, if the value of variable machName is 'testA.austin.ibm.com',
after being evaluated by Python, the request element's value would be:&nbsp;
'RELEASE POOL ClientMachPool ENTRY testA.austin.ibm.com'.
<pre>&lt;request>'RELEASE POOL ClientMachPool ENTRY ' + machName&lt;/request></pre>
Another way to do this is:
<pre>&lt;request>'RELEASE POOL ClientMachPool ENTRY %s' % (machName)&lt;/request></pre>
where the %s indicates a String format (and can also be used for decimal format, etc.),
and where the value of the machName variable would replace the %s marker.
<p>
Also, note that the following two lines do exactly the same thing in a STAX
XML document.&nbsp; They assign a string constant (literal) "VerifyRC"
to the function attribute's value.
<pre>&lt;call function="'VerifyRC'"/>
&lt;call function='"VerifyRC"'/></pre>
However, the following line is not the same.&nbsp; It assigns the value
of a variable named VerifyRC to the function attribute's value.
If a variable named VerifyRC does not exist, a STAXPythonEvaluationError
signal is raised.
<pre>&lt;call function="VerifyRC"/></pre>
Also, note that XML processors assume that &lt; always starts a tag and that &amp; always
starts an entity reference, so you should avoid using those characters for anything else.
You must use the entity reference &amp;lt; instead of &lt; and
entity reference &amp;amp; instead of &amp; or else you'll get an XML parsing error.
This can be difficult sometimes as the &lt; character is used as the less-than operator
in Python, as in this example, where RC &lt; 0 is being assigned to the expression attribute.
<pre>&lt;if expr="RC &amp;lt; 0"></pre>
Here's another example that shows a &lt;script> element that contains Python code using
the regular expression (re) module to look for pattern '<b>&lt;pass></b>' anywhere in the
STAFResult string variable and must use the entity reference &amp;lt; instead of &lt;.
<pre>&lt;script>
  import re
  matchstr = r'.*?&amp;lt;pass>.*?'
  matchFlag = re.match(matchstr, STAFResult)
&lt;/script></pre>

Refer to the <a href="#Header_References">"References"</a> section for
where to get more information about Jython and Python.
<p>
If you are already a CPython programmer, or are hoping to use CPython
code under Jython, refer to the <a href="#Header_CPythonDiffs">
"Jython and CPython Differences"</a> section for information about
differences in the two implementations of Python.
<br>&nbsp;
<p>
<hr>

<h1><a name="Header_StaxXmlElements" href="#ToC_StaxXmlElements">Element Syntax and Usage</a></h1>

A job to be executed by the STAX Service is described by an XML document.
The XML document must comply with the STAX document type definition (DTD)
shown in <a href="#Header_StaxDTD">"STAX Document Type Definition (DTD)"</a>.
The function of the STAX XML document is to describe STAF command and process
execution.
<p>
The first line in an XML document should start with an XML declaration.
This indicates the document is written in XML and specifies the XML version,
the language encoding for the document, and indicates that the document refers
to an external DTD (standalone="no").
<p>
The second line in an XML document should be the document type declaration.  This
is used to indicate the DTD used for the document. It defines the name of the root
element (stax), and the DTD to be used.  STAX checks the syntax of XML
documents using a validating XML parser to verify that the document complies with the DTD.
Note that DTDs are all about specifying the structure and syntax of XML documents (not their content).
<p>
So, the first two lines in a STAX XML document should look like:
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">
</pre>
<p>
The DOCTYPE statement's value for SYSTEM must end in <tt>stax.dtd</tt> (not case-sensitive)
or a STAXXMLParseException error will be returned when executing the STAX XML document.
<p>
Note that references to external entities in a STAX XML document are not supported.
If a STAX XML document references an external entity (other than the stax.dtd in
the DOCTYPE statement), a STAXXMLParseException error will be returned when
executing the STAX XML document.
<p>
This section describes the elements that can be used in a STAX XML document.
<p>To ease the description of the elements, some elements will be grouped
as follows so that they can be referenced as a group and will be shown
in bold italics:
<pre>&nbsp;&nbsp; <u><font size=+1>Reference</font></u>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u><font size=+1>Elements</font></u></pre>

<pre>&nbsp;&nbsp; <b><i>task&nbsp;&nbsp;</i></b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; process | stafcmd | nop |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sequence | parallel | paralleliterate |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; call | call-with-list | call-with-map | return | import |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if | loop | iterate | break | continue |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try | throw | rethrow |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; signalhandler | raise |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hold | release | terminate |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; testcase | tcstatus | script |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; block | timer | log | message</pre>
Notes:
<ul>
<li>
Elements and attribute names in an XML document are case sensitive. That
is, element &lt;sequence> is different from &lt;Sequence> and &lt;SEQUENCE>.</li>

<li>
Only <b>sequence</b>, <b>parallel</b> and <b>stax</b> elements can contain
multiple <b><i>task</i></b> elements.</li>

<li>Names for elements (e.g. function names, block names, etc.) should not begin with STAX as these names are
reserved for future extensions and enhancements.
</ul>
<p>
Also, some examples of the usage of elements use "..." for brevity to represent that additional XML would be
included in place of the "...".

<h2><a name="Header_Root_Element" href="#ToC_Root_Element">Root Element</a></h2>

An XML document must contain a root element which contains all other elements
in the document. The root element of a STAX XML document is <b>stax</b>.

<h2><a name="Header_Stax_Element" href="#ToC_Stax_Element">stax</a></h2>

The <b>stax</b> element consists of any number of <b>function</b>,
<b>script</b>, and/or <b>signalhandler</b> elements and an optional
<b>defaultcall</b> element.
<h4>
Usage:</h4>

<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">

<b>&lt;stax></b>

&nbsp; &lt;defaultcall function="FunctionA"/>
&nbsp; &lt;script>machName = "test1.austin.ibm.com"&lt;/script>

&nbsp; &lt;function name="FunctionA">
&nbsp;&nbsp;&nbsp; ...
&nbsp; &lt;/function>

&nbsp; &lt;function name="FunctionB">
&nbsp;&nbsp;&nbsp; ...
&nbsp; &lt;/function>
&nbsp; ...

<b>&lt;/stax></b></pre>

<h2><a name="Header_Stax_Data" href="#ToC_Stax_Data">Python Code Execution</a></h2>

STAX uses Python, which is an object-oriented scripting language.  To specify Python code to be executed, you
can use the <b>script</b> element.  The Python code can include any Python statements such as variable
assignments, importing and running Python modules, accessing Java libraries, and running built-in Python tools.
<p>
All <b>script</b> elements contained in the root <b>stax</b> element are initialized at the beginning of
the job, as each is encountered in sequential order, regardless of their
placement within the <b>stax </b>element, and are accessible throughout the job
(like global variables).&nbsp; All <b>script</b> elements contained in
elements other than the <b>stax</b> element (e.g. such as the <b>sequence</b> element)
are assigned as each is encountered and are accessible within their scope and
are inherited from parent STAX-Threads.
<p>
Whenever a new STAX-Thread is created, existing variables are cloned from the parent
STAX-Thread.  To create a global variable that can be accessed across STAX-Threads,
use the STAXGlobal class described in <a href="#STAXGlobal_Class">"STAXGlobal Class"</a>
section.  STAX elements that can create STAX-Threads include the following: <b>parallel</b>,
<b>paralleliterate</b>, <b>process-action</b>, <b>job-action</b>, and <b>function</b>
elements with a local scope.

<h2><a name="Header_Script_Element" href="#ToC_Script_Element">script:  Run Python Code</a></h2>

The <b>script</b> element is used to specify Python code to be executed.  For example,
the <b>script</b> element can be used to define STAX variables which are
utilized during the parsing of the XML document and the subsequent execution
of the STAX job. Note that a STAX variable is used solely by the STAX job
and is not associated with STAF variables. You can also use the <b>script</b>
element to import and run Python modules and built-in Python tools.

<h4>
Usage:</h4>
Goal: Create a variable named testName and assign it value "CoolTest1"
<pre><b>&lt;script>testName = "CoolTest1"&lt;/script></b></pre>
Goal: Create a variable named machName and assign it the value of the
STAFResult variable.
<pre><b>&lt;script>machName = STAFResult&lt;/script></b></pre>
Goal: Create a list called machList containing 10 machine names by running
the STAF Resource Pool Request command in a loop ten times, each time adding
the STAF Result value from the RESPOOL REQUEST POOL command (which contains
a machine name) to the list. Note that this example first creates an empty
list and then adds a machine name to the list 10 times.
<pre><b>&lt;script>machList = []&lt;/script>
&lt;script>clientPool = 'ClientMachinePool'&lt;/script>
</b>&lt;loop var="i" from="1" to="10">
&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp; &lt;stafcmd>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>'server1.austin.ibm.com'&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service>'RESPOOL'&lt;/service>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;request>'REQUEST POOL %s' % (clientPool)&lt;/request>
&nbsp;&nbsp;&nbsp; &lt;/stafcmd>
&nbsp;&nbsp;&nbsp; <b>&lt;script>machList.append(STAFResult)&lt;/script>
</b>&nbsp; &lt;/sequence>
&lt;/loop></pre>
Goal: Create a list called allMachList by combining lists named unallocMachList
and allocMachList. New list allMachList contains ['MachA','MachB','MachC','MachD','AllocMachA','AllocMachB'].
<pre><b>&lt;script>unallocMachList = ['MachA','MachB','MachC','MachD']&lt;/script>
&lt;script>allocMachList = ['AllocMachA','AllocMachB']&lt;/script>
&lt;script>allMachList = unallocMachList + allocMachList&lt;/script></b></pre>
Goal: Generate a random number (which could be used to randomly select which function to call) using
the random module provided by Python.
Note that in Python, you can use a semicolon to separate multiple statements on the same line.
<pre><b>&lt;script>from random import random; r=random()*100&lt;/script></b></pre>
Goal: Use a Java class, com.ibm.staf.STAFUtil (provided in JSTAF.jar), and it's wrapData() method
to turn strings containing spaces into the colon-length-colon form needed for submitting a STAF
Notify request.  Note that the Java class STAFUtil needs to be imported in order to use its
wrapData() method.  For more information on the STAFUtil Java class, see the
<a href="#STAFUtil">STAF Java Classes (STAFUtil, STAFRC, STAFVersion, etc)</a> section.
This example also shows that for statements that are too long to fit on one line,
Python lets you continue typing the statement on the next line, if you're coding
something enclosed in (), {}, or [] pairs. Continuation lines can start at any
indentation level.
<pre>
<b>&lt;script>
  NotifyProfile = 'Jane Smith'
  Message = 'STAX Job ID %s failed.' % (STAXJobID)

  from com.ibm.staf import STAFUtil

  Request = ('NOTIFY PROFILE %s LEVEL NORMAL MESSAGE %s' %
            (STAFUtil.wrapData(NotifyProfile), STAFUtil.wrapData(Message)))
&lt;/script>

&lt;message>NotifyRequest&lt;/message></b>
</pre>
The message element would display something like:
<pre>
NOTIFY PROFILE :10:Jane Smith LEVEL NORMAL MESSAGE :21:STAX Job ID 6 failed.
</pre>

Goal: Create a Python class object, Server, and generate three instance objects from the class
and create a list of these Server objects.  Then iterate through the server list, logging
information about each server object in the server list.
<pre>
<b>&lt;script>
  # Define Server class
  class Server:
    def __init__(self, hostname, dir):
      self.hostname = hostname
      self.dir      = dir
    def __repr__(self):
      return "&lt;Server: hostname=%s, directory=%s>" % (self.hostname, self.dir)
    def getHostname(self):
      return self.hostname
    def getDir(self):
      return self.dir

  # Create an array of 3 Server objects
  serverList = [
                 Server('myServer.austin.ibm.com', 'C:/install'),
                 Server('serverA.portland.ibm.com', 'D:/install'),
                 Server('linuxServer.austin.ibm.com', '/usr/local/install')
               ]
&lt;/script></b>

&lt;iterate var="server" in="serverList" indexvar="i">
  &lt;log>
    'Server #%s: hostname=%s, directory=%s' % (i+1, <b>server.getHostname()</b>, <b>server.getDir()</b>)
  &lt;/log>
&lt;/iterate>
</pre>
<br>

<h2><a name="Header_Stax_Actions" href="#ToC_Stax_Actions">Actions</a></h2>

The <a href="#Header_Process">process</a>, <a href="#Header_Stafcmd">stafcmd</a>,
<a href="#Header_SubJob">job</a>, and <a href="#Header_Nop">nop</a> elements perform actions.

<h2><a name="Header_Process" href="#ToC_Process">process:  Run a process</a></h2>

The <b>process</b> element represents a STAF process which will be executed
on a specified machine.  It submits a START request to the STAF PROCESS service
to run the specified command on the specified machine and waits for the
process to complete running before continuing to the next element in the STAX job.
You should use the <b>process</b> element instead of a <b>stafcmd</b> element if
you want to start a process and wait for it to complete.
<p>
After a process has completed (or if it could not be started) the following variables are set and
can be referenced by the job:
<ul>
<li>
<b>RC</b> - the return code from the process.  It is numeric.   
If it's the actual return code from the process, it is a Python Long numeric type  (e.g. 0L, 25L).
If an error occurred starting the process, it is a Python Integer numeric type.</li>
<P>
<li>
<b>STAFResult</b> - the STAF result from starting the process.  If the process failed to start
successfully, it contains any error messages from starting the process in a Python string type.
If the process started successfully, it is set to special Python object None.</li>
<P>
<LI>
<b>STAXResult</b> - contains any files specified by <b>returnstdout</b>, <b>returnstderr</b>, and/or
<b>returnfile(s)</b>.  If no files are returned, STAXResult is set to special Python object None.
If one or more files are returned, the format of STAXResult is a list as follows:
<PRE>[ [&lt;File 1 rc>, &lt;File 1 data>], [&lt;File 2 rc>, &lt;File 2 data> ], ... ]</PRE>
Each entry in the list represents a returned file and consists of a 2-element list as follows:
  <ol>
  <li>&lt;File n rc> is a number containing the STAF return code indicating the success or failure of retrieving
  the file's contents
  <li>&lt;File n data> is a string containing the file's contents
  </ol>
<P>
Files will be returned in the order of standard output, then standard error, then any files
specified with the <b>returnfile(s)</b> element(s).
<p>
For example, assume that the standard output of a process was simply "This is stdout data", and
that the standard error of a process was "This is stderr data", and that you asked for both of
these to be returned.  STAXResult would look like the following.
<PRE>[ [0, 'This is stdout data'], [0, 'This is stderr data'] ]</PRE>
</ul>

The process element has one optional attribute:
<ul>
<li>
<b>name</b> - specifies the name that the STAX Monitor uses to refer to the &lt;process>
element.  It defaults to <tt>'Process&lt;number>'</tt>, where <tt>&lt;number></tt> is a
unique number for each process executed in a job.  The value is evaluated via Python to
a string.  This element is optional.
</ul>
<p>
The process element contains two required elements (location and command) with
many optional elements.  The location element must be specified first, followed  
by the command element.  The rest of the elements are optional.
<p>
Note that the process elements are equivalent to the options allowed for the
STAF Process Service's START request (except where noted), so see the STAF User's Guide
for more information.
<p>
<b><i>Required process elements:</i></b>
<ul>
<li>
<b>location</b> - specifies the machine where the process should be run.
The value is evaluated via Python to a string.  This element is required.
<p>
To run the process on the local STAX service machine, specify <tt>'local'</tt>.
To run the process on a remote machine, specify the endpoint of the remote
machine.  The format for an endpoint is:
<pre>
  [&lt;Interface>://]&lt;System Identifier>[@&lt;Port>]
</pre>
where: 
<ul>
<li><tt>&lt;Interface></tt> is the name of the network interface (e.g. ssl, tcp).
    If not specified, it defaults to thee default interface defined on the
    STAX service machine. 
<li><tt>&lt;System Identifier></tt> is a valid network identifier for the interface
    in question.  You may specify logical or physical identifiers.
    For example, for a TCP/IP interface, the physical identifier for a system
    is the IP address, while the logical identifier is the hostname. 
<li><tt>&lt;Port></tt> is a valid port to use for a TCP/IP interface. If not specified,
    it defaults to the port for the network interface being used.
    One of the things this allows you to do is communicate with an instance
    of STAF that is using a different TCP/IP port. Note that the port specified
    does not have to be configured on the machine submitting the request. 
</ul>
<p>
Some examples of possible values for the location element are:
<tt>'local'</tt>, <tt>'server1.company.com'</tt>, <tt>'9.3.77.999'</tt>,
<tt>'ssl://client.company.com'</tt>, and <tt>'tcp://client2.company.com@6500'</tt>.
</li>
<p>
<li>
<b>command</b> - specifies the command to be executed by the process element.
The value is evaluated via Python to a string.  This element is required.</li>
<p>
This element has the following optional attributes:
  <ul>
  <li><b>mode</b> - specifies whether the command should be executed as though you were at a shell prompt.
  The value must evaluate via Python to one of the following:
    <ul>
    <li>'default' - specifies that the command should not be started via a separate shell.
    This is the default.
    <li>'shell'  - specifies that the command should be started via a separate shell.
    This allows complex commands involving pipelines to be readily executed.
    </ul>
  <li><b>shell</b> - specifies the shell to use when starting the process via a separate shell.
  This attribute is used only if the command's mode is set to 'shell'.  The value overrides
  any shell defaults specified in the STAF configuration file.
  The value is evaluated via Python to a string.
  </ul>
<p>
</ul>
<p>
<b><i>Optional process elements:</i></b>
<p>
Here are some important notes about optional process elements:
<p>
<ol>
<li>If specified, these optional process elements must be specified in
the order listed below (with some variations).
Refer to the <a href="#Header_StaxDTD">"STAX Document Type
Definition (DTD)"</a> section to see the DTD for the process element and to
see the variations in process element order that are allowed.
<p>
<li>Each of these optional elements may specify an <b>if</b> attribute.
The <b>if</b> attribute must evaluate via Python to a true or false value.
If it does not evaluate to a true value, the element is ignored.  The default
value for the <b>if</b> attribute is 1, a true value.  Note that in
Python, true means any nonzero number or nonempty object; false means
not true, such as a zero number, an empty object, or None.  Comparisons
and equality tests return 1 or 0 (true or false).
<p>Using the <b>if</b> attribute provides a convenient shortcut to deal
with many variations of optional process elements that, otherwise, would
have to be specified using the <b>if</b>/<b>elseif</b> elements and
multiple different process elements.
</ol>
<p>
The process element may contain any of the following optional elements
in the order listed (with some variations):
<ul>
<li>
<b>parms</b> - specifies any parameters that you wish to
pass to the command.
The value is evaluated via Python to a string.
This element is optional.</li>
<p>
<li>
<b>workdir</b> - specifies the directory from which the
command should be executed.  If you do not specify this
element, the command will be started from whatever directory
STAFProc is currently in.
The value is evaluated via Python to a string.
This element is optional.</li>
<p>
<li>
<b>title</b> - specifies the program title of the process.
Unless overridden by the process, the title will be the text
that is displayed on the title bar of the application.
The value is evaluated via Python to a string.
This element is optional.</li>
<p>
<li>
<b>workload</b> - specifies the name of the workload for which this
process is a member.  This may be useful in conjunction with other
process elements.  The value is evaluated via Python to a string.
This element is optional.</li>
<p>
<li>
<b>vars</b> (or <b>var</b>) - specifies STAF variables that go into the
process specific STAF variable pool.
The value must evaluate via Python to a string or a list of
strings. Multiple vars elements may be specified for a process.
The format for each variable is:  'varname=value'
So, a list containing 3 variables could look like:
['var1=value1', 'var2=value2', 'var3=value3'].
Specifying only one variable could look like either:
['var1=value1'] or 'var1=value1'.
There can be 0 or more occurrences of this element.</li>
<p>
<li>
<b>envs</b> (or <b>env</b>) - specifies environment variables that will be
set for the process.  Environment variables may be mixed case,
however most programs assume environment variable names will
be uppercase, so, in most cases, ensure that your environment
variable names are uppercase.
The value must evaluate via Python to a string or a list of
strings. Multiple envs elements may be specified for a process.
The format for each variable is: 'varname=value'
So, a list containing 3 variables could look like:
['ENV_VAR_1=value1', 'ENV_VAR_2=value2', 'ENV_VAR_3=value3'].
Specifying only one variable could look like either:
['ENV_VAR_1=value1'] or 'ENV_VAR_1=value1'.
There can be 0 or more occurrences of this element.</li>
<p>
<li>
<b>useprocessvars</b> - specifies that STAF variable
references should try to be resolved from the STAF variable
pool associated with the process being started first.
If the STAF variable is not found in this pool, the STAF
global variable pool should then be searched.
This element is optional and is an empty element.</li>
<p>
<li>
<b>username</b> - specifies the username under which
the process should be started.
The value is evaluated via Python to a string.
This element is optional.</li>
<p>
<li>
<b>password</b> - specifies the password with which to
authenticate the user specified with the username element.
The value is evaluated via Python to a string.
This element is optional.
</li>
<p>
<li>
<b>disabledauth</b> - allows you to specify the action to take if a
username/password is specified but authentication has been disabled.
This element is optional and is an empty element.
<p>
This element has the following required attribute (in addition to the <b>if</b> attribute):
  <ul>
  <li><b>action</b> - Must evaluate via Python to a string containing either:
    <ul>
    <li>'error' - specifies that an error should be returned.
    <li>'ignore' - specifies that any username/password specified
    is ignored if authentication is desabled.
    </ul>
    This action overrides any default specified in the STAF
    configuration file.
  </ul>
<p>
<li>
<b>stdin</b> - specifies the name of the file from which
standard input will be read.  The value is evaluated via
Python to a string.
This element is optional.</li>
<p>
<li>
<b>stdout</b> - specifies the name of the file to which
standard output will be redirected.
The value is evaluated via Python to a string.
This element is optional.</li>
<p>
This element has the following required attribute (in addition to
the <b>if</b> attribute):
  <ul>
  <li><b>mode</b> - specifies what to do if the file already exists.
  The value must evaluate via Python to one of the following:
    <ul>
    <li>'replace' - specifies that the file will be replaced.  This is the default.
    <li>'append'  - specifies that the process' standard
    output will be appended to the file.
    </ul>
  </ul>
<p>
<li>
<b>stderr</b> - specifies the file to which standard error will be redirected.
The value is evaluated via Python to a string.
This element is optional.</li>
<p>
This element has the following attribute (in addition to the <b>if</b> attribute):
  <ul>
  <li><b>mode</b> - specifies what to do if the file already exists or to
  redirect standard error to the same file as standard output.
  The value must evaluate via Python to one of the following:
    <ul>
    <li>'replace' - specifies that the file will be replaced.  This is the default.
    <li>'append'  - specifies that the process' standard error will be appended to the file.
    <li>'stdout'  - specifies that standard error will be redirected to the same file to
    which standard output is being redirected.  If a file name is specified, it is ignored.
    </ul>
  </ul>
<p>
<li>
<b>returnstdout</b> - specifies to return in STAXResult the contents of the file where standard
output was redirected when the process completes.  This element is optional and is an
empty element.</li>
<p>
<li>
<b>returnstderr</b> - specifies to return in STAXResult the contents of the file where standard
error was redirected when the process completes.  This element is optional and is an
empty element.</li>
<p>
<li>
<b>returnfiles</b> (or <b>returnfile</b>) - specifies to return in STAXResult the contents of the
specified file(s) when the process completes.
The value must evaluate via Python to a string (containing a file name) or a list of
strings (each containing a file name). There can be 0 or more occurrences of this element.</li>
<p>
<li>
<b>stopusing</b> - allows you to specify the method by
which this process will be STOPed, if not overridden on the
STOP command.
The value is evaluated via Python to a string.
This element is optional.</li>
<p>
<li>
<b>console</b> - allows you to specify if the process should
get a new console window or share the STAFProc console.
This element is optional and is an empty element.
<p>
This element has the following required attribute (in
addition to the <b>if</b> attribute):
  <ul>
  <li><b>use</b> - Must evaluate via Python to a string containing either:
    <ul>
    <li>'new' - specifies that the process should get a new console
    window.  This option only has effect on Windows systems.
    This is the default for Windows systems.
    <li>'same' - specifies that the process should share the
    STAFProc console.  This option only has effect on Windows systems.
    This is the default for Unix systems.
    </ul>
  </ul>
<p>
<li>
<b>focus</b> - allows you to specify the focus that is to be
given to any new windows opened when starting a process on a Windows
system.  The window(s) it effects depends on whether you are using
the 'default' or the 'shell' command mode.  If the process is started
using the default command mode, then the specified focus specified is
given to any new windows opened by the specified command.  Otherwise,
if the process is started using the shell command mode, then the
specified focus is given only to the new shell command window opened,
not to any windows opened by the specified command.
This element only has effect on Windows systems and requires
STAF V3.1.4 or later on the machine where the process is run.
This element is optional and is an empty element.
<p>
This element has the following required attribute (in addition to
the optional <b>if</b> attribute):
  <ul>
  <li><b>mode</b> - Must evaluate via Python to a string containing
    one of the following values:
    <ul>
    <li>'background' - indicates to display a window in the background
    (not give it focus) in its most recent size and position.
    This is the default mode.
    <li>'foreground' - indicates to display a window in the foreground
    (give it focus) in its most recent size and position.
    <li>'minimized' - indicates to display a window as minimized.
    </ul>
  </ul>
<p>
Note: This element was added in STAX V3.1.3.
<p>
<li>
<b>statichandlename</b> - specifies that a static handle should be
created for this process.
The value is evaluated via Python to a string.  It will be the
registered name of the static handle.  Using this option will also
cause the environment variable STAF_STATIC_HANDLE to be set
appropriately for the process.
This element is optional.</li>
<p>
<li>
<b>other</b> - specifies any other STAF parameters that may arise in the future.
It is used to pass additional data to the STAF PROCESS START request.
The value is evaluated via Python to a string.
This element is optional.</li>
<p>
<li>
<b>process-action</b> - specifies a task which will be executed after the process has started.
This task will be executed in parallel with the process via a new STAX-Thread.
If the <b>mode="'shell'"</b> attribute is not specified for the &lt;command> element, the task will
be able to use the variable STAXProcessHandle to obtain the process' handle in order to
interact with the process.
If the process completes before the task completes, the process will remain in a non-complete
state until the task completes.  If the process cannot be started, the process-action task is
not executed.  This element is optional, but if specified must be the last element
in the &lt;process> element.
<p>
<b>Note:</b>  To create a global variable that can be accessed across STAX-Threads,
use the STAXGlobal class described in <a href="#STAXGlobal_Class">"STAXGlobal Class"</a>
section.
<br><br>
<b>Note:</b>  Currently, the STAXProcessHandle variable will only be valid if
the <b>mode="'shell'"</b> attribute is not specified for the &lt;command> element.
If you need to specify the <b>mode="'shell'"</b> attribute, then you will need
to use the handle's name.  For more information on this problem, see
<a href="https://sourceforge.net/tracker2/index.php?func=detail&aid=1172800&group_id=33142&atid=407381">
Bug #1172800 - Using SHELL option causes incorrect handle # to be returned</a>.
</li>
</ul>
Options allowed for the STAF Process Service which are not allowed for
the STAX process element are as follows.
<ul>
<li>
WAIT</li>

<li>
ASYNC</li>

<li>
NOTIFY ONEND</li>
</ul>
These options should not be put in the <b>other</b> element.
<p>
<b>Notes:</b>
<ol>
<li>See the <a href="#Header_Timer">timer</a> element section for special
considerations regarding accessing stdout/stderr data when using a &lt;timer>
element to terminate a process that runs continously.  An example is also
provided in the timer's "Usage" section.
<p>
<li>You can use the &lt;stdout> and/or &lt;stderr> elements to stream a process's
standard output and standard error, respectively, into a specified file. 
The contents of the file won't be returned to the user (e.g. via the STAXResult
variable if using the &lt;returnstdout> and/or &lt;returnstderr> elements) until the process
has completed.  But, you could look at the contents of the stdout/stderr file while the
process is still running by using a &lt;parallel> or &lt;process-action> element to do
this in parallel with the process running. 
<p>
<li>After you obtain the content of a file created by the &lt;stdout> or &lt;stderr>
element, if you no longer need the file, you can delete it using a &lt;stafcmd>
element to run the FS service's DELETE ENTRY command.  Or, if you didn't need the
file deleted immediately, you could create the stdout/stderr file in the
{STAF/DataDir}/tmp directory.  All contents of the {STAF/DataDir}/tmp directory
are deleted when STAFProc is restarted.
</ol>

<h4>
<b>Usage:</b></h4>
In the following example of a <b>process</b> element, a Java program is executed.
When the process completes, the <b>if</b> element is run which checks the
return code from the process.
<pre>&lt;sequence>

&nbsp; <b>&lt;process name="'TestProcess'">
&nbsp;&nbsp;&nbsp; &lt;location>'local'&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;command>'java'&lt;/command>
&nbsp;&nbsp;&nbsp; &lt;parms>'com.ibm.staf.service.stax.TestProcess 5 1 0'&lt;/parms>
&nbsp;&nbsp;&nbsp; &lt;title>'Test Process'&lt;/title>
&nbsp; &lt;/process>

</b>&nbsp; &lt;if expr="<b>RC</b> != 0">
&nbsp;&nbsp;&nbsp; &lt;raise signal="'NonZeroRCError'"/>
&nbsp; &lt;/if>

&lt;/sequence></pre>

In the following example of a <b>process</b> element, a ping command is executed as though
you were at a shell prompt.  The ping is executed within a loop contained within
a timer.  If the ping command does not complete successfully (indicated by RC 0)
within 30 seconds, a failure message is sent.
<pre>
&lt;sequence>

  &lt;timer duration="'30s'">
    &lt;loop until="<b>RC</b> == 0">
      <b>&lt;process name="'Ping'">
        &lt;location>'local'&lt;/location>
        &lt;command mode="'shell'">'ping -n 1 -w 1 %s' % machName&lt;/command>
      &lt;/process></b>
    &lt;/loop>
  &lt;/timer>

  &lt;if expr="RC != 0">
    &lt;message>'Ping of machine %s failed' % machName&lt;/message>
  &lt;/if>

&lt;/sequence>
</pre>

The following example of a <b>process</b> element shows many of the
optional elements that a process can contain and shows the use of the
<b>if</b> element to specify whether an optional element should be
used based on an expression evaluated while the job is running.
<pre>
&lt;script>
  machName = 'local'
  opSys = 'Win32'
  className = 'com.ibm.staf.service.stax.TestProcess'
  commonEnvVarList = ['COMMON_ENV_VAR_1=value1','COMMON_ENV_VAR_2=value2']
&lt;/script>

<b>&lt;process name="'aProcess'">
  &lt;location>machName&lt;/location>
  &lt;command>'java'&lt;/command>

  &lt;parms if="opSys != 'Linux'">
    '%s 2 15 100' % className
  &lt;/parms>

  &lt;title>'Title example for process with many elements'&lt;/title>

  &lt;vars if="opSys == 'Win32'">
    ['tempPath=C:/temp', 'winRunPath=C:/temp/processa']
  &lt;/vars>

  &lt;vars if="opSys == 'Linux'">
    ['tempPath=/test/temp']
  &lt;/vars>

  &lt;var>
    'commonMachName=%s' % (machName)
  &lt;/var>

  &lt;envs if="opSys == 'Win32'">
    ['TEMP_DIR=C:/temp']
  &lt;/envs>

  &lt;envs>commonEnvVarList&lt;/envs>

  &lt;useprocessvars if="opSys == 'Win32'"/>

  &lt;disabledauth if="opSys == 'Win32'" action="'ignore'"/>

  &lt;stdout mode="'replace'">
    'c:/temp/aProcess.out'
  &lt;/stdout>

  &lt;stderr mode="'append'">
    'c:/temp/aProcess.err'
  &lt;/stderr>

  &lt;console if="opSys == 'Win32'" use="'same'"/>

  &lt;focus if="opSys == 'Win32'" mode="'minimized'"/>

&lt;/process></b>
</pre>

In the following example of a <b>process</b> element, a command which writes to stdout and
stderr and produces a couple of files (C:\process1.inf and C:\process2.inf) is run.
The contents of the stdout file and the two additional files are returned
in STAXResult when the process completes.
Note that the stdout file also contains stderr output because &lt;stderr> specified
mode 'stdout' instead of specifying a different file name.
Then the contents all returned files are written to one central place, the STAX Job User Log.
<pre>
&lt;sequence>

  <b>&lt;process>
    &lt;location>machName&lt;/location>
    &lt;command>cmd&lt;/command>
    &lt;stdout>'C:/temp.out'&lt;/stdout>
    &lt;stderr mode="'stdout'"/>
    &lt;returnstdout/>
    &lt;returnfiles>['C:/process1.inf', 'C:/process2.inf']&lt;/returnfiles>
  &lt;/process></b>

  &lt;if expr="<b>RC</b> != 0">
    &lt;log level="'error'">
      'Process failed with RC=%s, Result=%s' % (RC, STAFResult)
    &lt;/log>

    &lt;elseif expr="<b>STAXResult</b> != None">
      &lt;iterate var="fileInfo" in="<b>STAXResult</b>" indexvar="i">
        &lt;if expr="fileInfo[0] == 0">
          &lt;sequence>
            &lt;log level="'info'">fileInfo[1]&lt;/log>
          &lt;/sequence>
          &lt;else>
            &lt;log level="'error'">
              'Retrieval of file %s contents failed with RC=%s' % (i, fileInfo[0])
            &lt;/log>
          &lt;/else>
        &lt;/if>
      &lt;/iterate>
    &lt;/elseif>

    &lt;else>
      &lt;log level="'info'">'STAXResult is None'&lt;/log>
    &lt;/else>

  &lt;/if>

&lt;/sequence>
</pre>

In the following example of a <b>process</b> element, the following shell-style command
is executed, "grep 'Node Count = ' /tests/cli.out | awk '{print $8}'" redirecting its
standard output and standard error to /tests/awk.out and returning the output.
Note the use of the caret (^) as an escape character for "{" so that it doesn't try to
resolve a variable named "print $8".
<pre>
<b>&lt;process name="'Grep_and_awk_numClustNodes'">
  &lt;location>machName&lt;/location>
  &lt;command mode="'shell'">
    "/bin/grep 'Node Count = '  /tests/cli.out | awk '{print $8}'"
  &lt;/command>
  &lt;stdout mode="'replace'" >'tests/awk.out'&lt;/stdout>
  &lt;stderr mode="'stdout'"/>
  &lt;returnstdout/>
&lt;/process></b>
</pre>

In the following example of a <b>process</b> element, the command is started in a
separate Cygwin shell on Windows, redirecting its standard output and standard error
to D:/temp/copy.out and returning the output (if any).
<pre>
<b>&lt;process name="'copyFiles'">
  &lt;location>machName&lt;/location>
  &lt;command mode="'shell'" shell="'D:/Cygwin/bin/bash -c %C'">
    'cp -fr D:/tests/test1/*.java D:/output/test1'
  &lt;/command>
  &lt;stdout mode="'replace'" >'D:/temp/copy.out'&lt;/stdout>
  &lt;stderr mode="'stdout'"/>
  &lt;returnstdout/>
&lt;/process></B>
</pre>

In the following examples of a <b>process</b> element, a <b>process-action</b>
element is specified.  The <b>process-action</b> task will be executed after
the process starts and will send several messages via the QUEUE service to the
process.  Here is the Java application used in these examples:
<pre>
import com.ibm.staf.*;
import java.util.*;

public class QueueListener implements Runnable
{
    private STAFHandle fHandle;
    private Thread fQueueThread;
    private static String delimiter = "";

    public static void main(String[] args)
    {
        QueueListener queueListener = new QueueListener();
        return;
    }

    public QueueListener()
    {
        try
        {
            fHandle = new STAFHandle("QueueListener");
            System.out.println("QueueListener's handle is: " +
                fHandle.getHandle() + ". Send a \"QueueListenerExit\" message" +
                " to terminate the program.");
        }
        catch (STAFException e)
        {
            System.out.println(e);
        }

        char[] delimiterArray = new char[80];
        Arrays.fill(delimiterArray, '=');
        delimiter = new String(delimiterArray);

        fQueueThread = new Thread(this);
        fQueueThread.start();
    }

    public void run()
    {
        STAFResult queueGetResult;

        while (true)
        {
            queueGetResult = fHandle.submit2("local", "QUEUE", "GET WAIT");

            STAFMarshallingContext mc =
                STAFMarshallingContext.unmarshall(queueGetResult.result);

            Map queueMap = (Map)mc.getRootObject();
            String message = (String)queueMap.get("message");

            System.out.println(delimiter);
            System.out.println(message);

            // is this a special exit message to tell the program to terminate?
            if (queueGetResult .result.indexOf("QueueListenerExit") >  -1)
            {
                System.out.println(delimiter);
                System.out.println("Exiting");
                System.exit(0);
             }
        }
    }
}
</pre>
In the following example, since the mode="'shell'" attribute is not specified
for the &lt;command> element, the queued messages can be sent using the
STAXProcessHandle variable.
<pre>
&lt;script>
  machName = 'local'
  from com.ibm.staf import STAFUtil
  messages = [
               STAFUtil.wrapData('First message'),
               STAFUtil.wrapData('Second message'),
               STAFUtil.wrapData('QueueListenerExit')
             ]
&lt;/script>

<b>&lt;process>
  &lt;location>machName&lt;/location>
  &lt;command>'java'&lt;/command>
  &lt;parms>'QueueListener'&lt;/parms>
  &lt;stderr mode="'stdout'"/>
  &lt;returnstdout/>
  &lt;process-action>
    &lt;sequence>
      &lt;iterate var="message" in="messages">
        &lt;stafcmd>
          &lt;location>'local'&lt;/location>
          &lt;service>'QUEUE'&lt;/service>
          &lt;request>'QUEUE HANDLE %s MESSAGE %s' % (STAXProcessHandle, message)&lt;/request>
        &lt;/stafcmd>
      &lt;/iterate>
    &lt;/sequence>
  &lt;/process-action>
&lt;/process></b>
</pre>

In the following example, since the mode="'shell'" attribute is specified
for the &lt;command> element, the queued messages must be sent using the
handle name.
<pre>
&lt;script>
  machName = 'local'
  from com.ibm.staf import STAFUtil
  messages = [
               STAFUtil.wrapData('First message'),
               STAFUtil.wrapData('Second message'),
               STAFUtil.wrapData('QueueListenerExit')
             ]
  processHandleName = 'QueueListener'
&lt;/script>

<b>&lt;process>
  &lt;location>machName&lt;/location>
  &lt;command mode="'shell'">'java QueueListener'&lt;/command>
  &lt;stderr mode="'stdout'"/>
  &lt;returnstdout/>
  &lt;process-action>
    &lt;sequence>
      &lt;iterate var="message" in="messages">
        &lt;stafcmd>
          &lt;location>'local'&lt;/location>
          &lt;service>'QUEUE'&lt;/service>
          &lt;request>'QUEUE NAME %s MESSAGE %s' % (processHandleName, message)&lt;/request>
        &lt;/stafcmd>
      &lt;/iterate>
    &lt;/sequence>
  &lt;/process-action>
&lt;/process></b>
</pre>

<p>
<h2><a name="Header_Stafcmd" href="#ToC_Stafcmd">stafcmd:  Run a STAF Command</a></h2>

The <b>stafcmd</b> element represents a STAF command which will be executed
on a specified machine.
<p>
<b>Note</b>: If you want to start a process and wait for it to complete (e.g. if you
want to submit a START request to the PROCESS service and wait for the
process to complete), you should use the <a href="#Header_Process"><b>process</b></a>
element instead of the <b>stafcmd</b> element.
<p>
After the STAF command has completed, the following variables are
set and can be referenced by the job:
<ul>
<li>
<b>RC</b> - the return code from the STAF command. It is an integer.</li>
<li>
<b>STAFResult</b> - the result from the STAF command. It can be a string, or,
if the result is marshalled, it is the root object of the marshalled result
which could be a Python List or a Python Dictionary (aka Map).</li>
<li>
<b>STAFResultContext</b> - the STAF marshalling context object for the result
from the STAF command. It is an object of type org.python.core.PyInstance.
The STAFMarshallingContext class provides a container for map class definitions
and an object that uses (or is defined in terms of) them. 
Its string representation is equivalent to the "verbose format" (the hierarchical
nested format) provided by the STAF executable.
<li>
<b>STAFResultString</b> - The result string from the STAF command.  It is
a string.  If the result is marshalled, it is the marshalled result string.
Note:  This variable would only be used if you needed the actual result string
from  a STAF command, such as if submitting a GET FILE request to the FS service
when the specified file contains marshalled data and you want the actual contents
of the file.
</li>
</ul>
<p>
The <b>stafcmd</b> element has one optional attribute:
<ul>
<li>
<b>name</b> - specifies the name that the STAX Monitor uses to refer to the
&lt;stafcmd> element.  It defaults to <tt>'STAFCommand&lt;number>'</tt>, where
<tt>&lt;number></tt> is a unique number for each STAF command executed in a job.
The value is evaluated via Python to a string.  This element is optional.
</ul>
<p>
The <b>stafcmd</b> element contains the following required elements.
These elements must be specified in the order listed here: 
<p>
<ul>
<li>
<b>location</b> - specifies the machine where the STAF command should be run.
The value is evaluated via Python to a string.  This element is required.
<p>
To run the STAF command on the local STAX service machine, specify <tt>'local'</tt>.
To run the STAF command on a remote machine, specify the endpoint of the
remote machine.  The format for an endpoint is:
<pre>
  [&lt;Interface>://]&lt;System Identifier>[@&lt;Port>]
</pre>
where: 
<ul>
<li><tt>&lt;Interface></tt> is the name of the network interface (e.g. ssl, tcp).
    If not specified, it defaults to thee default interface defined on the
    STAX service machine. 
<li><tt>&lt;System Identifier></tt> is a valid network identifier for the interface
    in question.  You may specify logical or physical identifiers.
    For example, for a TCP/IP interface, the physical identifier for a system
    is the IP address, while the logical identifier is the hostname. 
<li><tt>&lt;Port></tt> is a valid port to use for a TCP/IP interface. If not specified,
    it defaults to the port for the network interface being used.
    One of the things this allows you to do is communicate with an instance
    of STAF that is using a different TCP/IP port. Note that the port specified
    does not have to be configured on the machine submitting the request. 
</ul>
<p>
Some examples of possible values for the location element are:
<tt>'local'</tt>, <tt>'server1.company.com'</tt>, <tt>'9.3.77.999'</tt>,
<tt>'ssl://client.company.com'</tt>, and <tt>'tcp://client2.company.com@6500'</tt>.
</li>
<p>
<li>
<b>service</b> - specifies the name of the STAF service to which you are
submitting a request.
The value is evaluated via Python to a string.  This element is required.
<p>
Some examples of possible values for the service element are:
<tt>'PING'</tt>, <tt>'FS'</tt>, <tt>'RESPOOL'<tt>, and </tt>'SEM'</tt>.
</li>
<p>
<li>
<b>request</b> - specifies the actual request string that you wish to submit
to the STAF service.
The value is evaluated via Python to a string.  This element is required.
</li>
</ul>

<h4>
<b>Usage:</b></h4>

<p>
This is an example of a <b>stafcmd</b> element that submits a PING request
to the PING service on machine server1.company.com to see if STAFProc is
running on that machine.  When the STAF command completes, the <b>if</b>
element checks the return code variable (RC) set by the STAF command. If the
return code is not 0, the PING request failed and a message is logged.
<pre>&lt;sequence>

  <b>&lt;stafcmd>
    &lt;location>'server1.company.com'&lt;/location>
    &lt;service>'PING'&lt;/service>
    &lt;request>'PING'&lt;/request>
  &lt;/stafcmd></b>

  &lt;if expr="<b>RC</b> != 0">
    &lt;log>
      'STAF %s PING PING request failed with RC: %s, Result: %s' % (<b>RC</b>, <b>STAFResult</b>)
    &lt;/log>
  &lt;/if>

&lt;/sequence></pre>
<p>
This is an example of a <b>stafcmd</b> element that submits a request to the RESPOOL
(Resource Pool) service on a machine specified by a variable named resPoolServer.
The STAF RESPOOL request is requesting a machine name from a pool specified
by a variable named clientPool. When the STAF command completes, the <b>if</b>
element checks the return code variable set by the STAF command. If the
return code is 0 (aka STAFRC.Ok), the value of the STAFResult variable
is stored to another variable named machName, otherwise, the RC and
error message are logged.
For more information on the STAFRC alias for the com.ibm.staf.STAFResult
Java class, see the <a href="#STAFRC">STAF Java Classes (STAFUtil,
STAFRC, STAFVersion, etc)</a> section.
<pre>&lt;sequence>

&nbsp; &lt;script>resPoolServer = "server1.austin.ibm.com"&lt;/script>
&nbsp; &lt;script>clientPool = "clientMachinePool"&lt;/script>

<b>&nbsp; &lt;stafcmd name="'Respool Request Pool'">
&nbsp;&nbsp;&nbsp; &lt;location>resPoolServer&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;service>'RESPOOL'&lt;/service>
&nbsp;&nbsp;&nbsp; &lt;request>'REQUEST POOL %s' % (clientPool)&lt;/request>
&nbsp; &lt;/stafcmd>

</b>&nbsp; &lt;if expr="<b>RC</b> == STAFRC.Ok">
&nbsp;&nbsp;&nbsp; &lt;script>machName = <b>STAFResult</b>&lt;/script>
&nbsp;&nbsp;&nbsp; &lt;else>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;log message="1">'RC=%s STAFResult=%s' % (<b>RC</b>, <b>STAFResult</b>)&lt;/log>
&nbsp;&nbsp;&nbsp; &lt;/else>
&nbsp; &lt;/if>

&lt;/sequence></pre>
<p>
If you want to submit a START request to the PROCESS service and wait for the
process to complete, you should use the <a href="#Header_Process"><b>process</b></a>
element, not the <b>stafcmd</b> element.  However, if you want to submit a START
request to the PROCESS service and not wait for it to complete (e.g. start the process
asynchronously) before continuing to the next element in the STAX job, then
you can use the <b>stafcmd</b> element.  Here's an example of starting
notepad on a Windows machine:
<pre>
&lt;sequence>

<b>&nbsp; &lt;stafcmd name="'Start Notepad'">
&nbsp;&nbsp;&nbsp; &lt;location>'client1.company.com'&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;service>'PROCESS'&lt;/service>
&nbsp;&nbsp;&nbsp; &lt;request>'START COMMAND notepad'&lt;/request>
&nbsp; &lt;/stafcmd>

</b>&nbsp; &lt;if expr="<b>RC</b> != STAFRC.Ok">
&nbsp;&nbsp;&nbsp; &lt;log message="1">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'Starting Notepad failed with RC=%s STAFResult=%s' % (<b>RC</b>, <b>STAFResult</b>)
&nbsp;&nbsp;&nbsp; &lt;/log>
&nbsp; &lt;/if>

&lt;/sequence>
</pre>

<p>
In the following example of a <b>stafcmd</b> element, a "SEND MESSAGE" request
is submitted to the Email service on machine server1.company.com to send
message "STAX Job ID 6 failed" to Jane Smith@company.com.
<p>Note that STAFUtil's wrapData() method is used to turn strings containing spaces into
the colon-length-colon form needed for submitting a SEND MESSAGE request to
the Email service.  Java class STAFUtil needs to be imported from com.ibm.staf
in order to use its wrapData() method.  For more information on the STAFUtil Java class,
see the <a href="#STAFUtil">STAF Java Classes (STAFUtil, STAFRC, STAFVersion, etc)</a>
section.
<pre>
&lt;sequence>

  &lt;script>
    from com.ibm.staf import STAFUtil

    emailServiceMachine = 'server1.company.com'
    message = 'STAX Job ID %s failed.' % (STAXJobID)
    subject = 'STAX Job Failed'
    address = 'JaneSmith@company.com'
    request = 'SEND MESSAGE %s' % (STAFUtil.wrapData(message))
    request += ' SUBJECT %s' % (STAFUtil.wrapData(subject))
    request += ' TO %s' % (address)
  &lt;/script>

  <b>&lt;stafcmd>
    &lt;location>emailServiceMachine&lt;/location>
    &lt;service>'Email'&lt;/service>
    &lt;request>request&lt;/request>
  &lt;/stafcmd></b>

  &lt;if expr="<b>RC</b> != 0">
    &lt;log message="1">
      'Email request failed with RC=%s STAFResult=%s' % (<b>RC</b>, <b>STAFResult</b>)
    &lt;/log>
  &lt;/if>

&lt;/sequence></pre>
<p>
In the following example of a <b>stafcmd</b> element which executes a
FS QUERY ENTRY request on the local machine.  A FS QUERY ENTRY
request returns a PyDictionary (aka Map) if successful containing
information about the file such as its name, type, size, and timestamp
that it was last modified.  Log the file information in a verbose
format by specifying the STAFResultContext variable:
<pre>&lt;sequence>

  <b>&lt;stafcmd>
    &lt;location>'local'&lt;/location>
    &lt;service>'FS'&lt;/service>
    &lt;request>'QUERY ENTRY C:/tmp/testA.exe'&lt;/request>
  &lt;/stafcmd></b>

  &lt;if expr="<b>RC</b> == STAFRC.Ok">
    &lt;log message="1"><b>STAFResultContext</b>&lt;/log>
    &lt;else>
      &lt;log message="1">'FS QUERY failed with RC=%s STAFResult=%s' % (<b>RC</b>, <b>STAFResult</b>)&lt;/log>
    &lt;/else> 
  &lt;/if>

&lt;/sequence></pre>
<p>
The message logged in verbose mode could look like:
<pre>
{
  Name              : C:/tmp/testA.exe
  Type              : F
  Upper 32-bit Size : 0
  Lower 32-bit Size : 12505
  Modified Date-Time: 20030506-19:14:40
}</pre>
<p>
In the following example of a <b>stafcmd</b> element which executes a
FS LIST DIRECTORY LONG DETAILS request on the local machine.
A FS LIST DIRECTORY LONG DETAILS request returns a PyList of PyDictionary
(aka Map) if successful, where each PyDictionary represents an entry in
the specified directory and has keys such as 'name', 'lowerSize', 'type',
and 'lastModifiedTimestamp'.  It then checks for entries in the directory
which are files with a size > 500000 bytes and logs a message containing
the names of all the files meeting this criteria, along with their
size and the timestamp that they were last modified.
<pre>&lt;sequence>

  <b>&lt;stafcmd>
    &lt;location>'local'&lt;/location>
    &lt;service>'FS'&lt;/service>
    &lt;request>'LIST DIRECTORY C:/tmp LONG DETAILS'&lt;/request>
  &lt;/stafcmd></b>

  &lt;script>
    msg = ''

    if <b>RC</b> == STAFRC.Ok:
      for entryMap in <b>STAFResult</b>:
        # Check if the entry is a file whose size is greater than 500000 bytes
        if entryMap['type'] == 'F' and int(entryMap['lowerSize']) > 500000:
          # Print the name, size, and last Modified Timestamp for the entry:
          msg += 'Name: %s, Size: %s, Timestamp: %s\n' % \
               (entryMap['name'], entryMap['lowerSize'], entryMap['lastModifiedTimestamp'])
    else:
      msg = 'FS LIST ENTRY failed with RC=%s Result=%s' % (<b>RC</b>, <b>STAFResult</b>)
  &lt;/script>
 
  &lt;log message="1">msg&lt;/log>

&lt;/sequence></pre>
<p>
The message logged could look like:
<pre>
Name: en_platformsdk_win2003.exe, Size: 340488704, Timestamp: 20040512-18:07:52
Name: project-docs.tar, Size: 1239040, Timestamp: 20040517-11:57:10</pre>

<h2><a name="Header_SubJob" href="#ToC_SubJob">job:  Execute a STAX Sub-Job</a></h2>

The <b>job</b> element represents a sub-job which will be executed within the parent job.
<p>
Notes:
<ul>
<li>A sub-job will appear as a separate job.</li>
<li>Terminating a parent job will terminate any sub-jobs as well.</li>
<li>Holding/releasing a parent job will not hold/release its sub-jobs.</li>
</ul>
<p>After a sub-job has completed (or if it could not be started) the following variables are set and
can be referenced by the job:
<ul>
<li>
<b>RC</b> - the return code from submitting the request to execute the sub-job.  It is an integer.</li>
<P>
<li>
<b>STAFResult</b> - the STAF result from submitting the request to execute the sub-job.  If the sub-job
failed to start successfully, it contains any error messages from trying the execute the sub-job.
It is a string.</li>
<p>
<li>
<b>STAXSubJobID</b> - the job ID of the sub-job.  If the sub-job was not successfully submitted
for execution and a job ID was not yet assigned, it is set to 0.  It is an integer.</li>
<P>
<LI>
<b>STAXResult</b> - contains the result returned by the starting function of the sub-job.
If nothing is returned (due to a problem submitting the request to execute the sub-job, or
an error running the sub-job, or if an empty &lt;return> element or if no &lt;return> element
is specified in the starting function), STAXResult is set to special Python object None.
<p>
<li>
<b>STAXSubJobStatus</b> - contains the completion status of the sub-job.
The sub-job completion status is a string that will be set to one of the following values:
<ul compact>
<li><tt>'Normal'</tt> if the sub-job ended normally
<li><tt>'Terminated'</tt> if the sub-job was terminated (this means if the 'main'
block was terminated) or if the sub-job was not successfully submitted for execution
(e.g. due to an XML parsing error, etc)
<li><tt>'Abnormal'</tt> if the sub-job ended abnormally.  A couple of examples of 
a sub-job ending abnormally are when at least one unhandled inherited condition remains
on the condition stack when the sub-job completes.  This can occur when a break or
continue condition remains on the condition stack because there was no outer loop
or iterate element, or when an exception is thrown but there's no catch element for it.
This state takes precedence if the sub-job is also terminated.
<li><tt>'Unknown'</tt> if an unknown error occurred submitting the sub-job
(should not occur).
</ul>
</ul>
<p>
The job element has the following optional attributes:
<ul>
<li>
<b>name</b> - specifies the name of the sub-job that is used to identify the sub-job.
This attribute is equivalent to the JOBNAME option for a STAX EXECUTE command.
The value is evaluated via Python to a string.    
</li>
<p>
<li>
<b>clearlogs</b> - specifies whether to delete the STAX Job and Job User logs before
the sub-job is executed to ensure that only this sub-job's contents are in the log.
This attribute is equivalent to the CLEARLOGS option for a STAX EXECUTE command.
The value must evaluate via Python to one of the following (not case-sensitive):
  <ul>
  <li>'parent' - specifies to use the same value that was specified for the parent job.
      This is the default.</li>
  <li>'default' - specifies to use the default STAX service setting for "Clear Logs".</li>
  <li>'enabled' - specifies to clear its job logs</li>
  <li>'disabled' - specifies to not clear its job logs</li>
  <li>otherwise, if it evaluates to a true value, the job logs are cleared;
      if it evaluates to a false value, the job logs are not cleared.</li>
  </ul>
</li>
<p>
<li>
<b>monitor</b> - specifies whether the job should be automatically monitored
by the STAX Monitor (when the current job is already being monitored by the
STAX Monitor).  Note that "Automatically monitor recommended sub-jobs" must be
selected in the STAX Job Monitor properties in order for it to be used.
The value is evaluated via Python to a boolean value.  The default value is 0,
a false value.
</li>
<p>
<li>
<b>logtcelapsedtime</b> - specifies whether to log the elapsed time for testcases in the
summary records at the end of a STAX Job log and in the LIST TESTCASES output for the
sub-job.  This attribute is equivalent to the LOGTCELAPSEDTIME option for a STAX
EXECUTE command.  The value must evaluate via Python to one of the following
(not case-sensitive):
  <ul>
  <li>'parent' - specifies to use the same value that was specified for the parent job.
      This is the default.</li>
  <li>'default' - specifies to use the default STAX service setting for "Log TC
      Elapsed Time".</li>
  <li>'enabled' - specifies to log the elapsed time for testcases</li>
  <li>'disabled' - specifies to not log the elapsed time for testcases</li>
  <li>otherwise, if it evaluates to a true value, the elapsed time for testcases
      is logged; if it evaluates to a false value, the elapsed time for testcases
      is not logged.</li>
  </ul>
</li>
<p>
<li>
<b>logtcnumstarts</b> - specifies whether to log the number of starts for testcases
in the summary records at the end of a STAX Job log and in the LIST TESTCASES output
for the sub-job.  This attribute is equivalent to the LOGTCNUMSTARTS option for a STAX
EXECUTE command.  The value must evaluate via Python to one of the following
(not case-sensitive):
  <ul>
  <li>'parent' - specifies to use the same value that was specified for the parent job.
      This is the default.</li>
  <li>'default' - specifies to use the default STAX service setting for "Log TC
      Num Starts".</li>
  <li>'enabled' - specifies to log the number of starts for testcases</li>
  <li>'disabled' - specifies to not log the number of starts for testcases</li>
  <li>otherwise, if it evaluates to a true value, the number of starts for testcases
      is logged; if it evaluates to a false value, the number of starts for testcases
      is not logged.</li>
  </ul>
</li>
<p>
<li>
<b>logtcstartstop</b> - specifies whether to log 'start' and 'stop' level records
for testcases in the STAX Job log.  This attribute is equivalent to the
LOGTCSTARTSTOP option for a STAX EXECUTE command.  The value must evaluate via Python
to one of the following (not case-sensitive):
  <ul>
  <li>'parent' - specifies to use the same value that was specified for the parent job.
      This is the default.</li>
  <li>'default' - specifies to use the default STAX service setting for "Log TC
      Start/Stop".</li>
  <li>'enabled' - specifies to log the 'start' and 'stop' records for testcases</li>
  <li>'disabled' - specifies to not log the 'start' and 'stop' records for testcases</li>
  <li>otherwise, if it evaluates to a true value, the 'start' and 'stop' records
      for testcases are logged; if it evaluates to a false value, the 'start' and 'stop'
      records for testcases are not logged</li>
  </ul>
</li>
<p>
<li>
<b>pythonoutput</b> - specifies where Python stdout/stderr should be redirected
(e.g. if you use the print statement in a &lt;script> element in the sub-job).
This attribute is equivalent to the PYTHONOUTPUT option for a STAX EXECUTE
command.  The value must evaluate via Python to one of the following (not
case-sensitive):
  <ul>
  <li>'parent' - specifies to use the same value that was specified for the parent job.
      This is the default.</li>
  <li>'default' - specifies to use the default STAX service setting for "Python
      Output".</li>
  <li>'jobuserlog' - specifies to redirect Python stdout/stderr to the STAX Job
      User Log</li>
  <li>'message' - specifies to redirect Python stdout/stderr to the Messages panel
      in the STAX Monitor.</li>
  <li>'jobuserlogandmsg' - specifies to redirect Python stdout/stderr to the STAX
      Job User Log and to the Messages panel in the STAX Monitor.</li>
  <li>'jvmlog' - specifies to redirect Python stdout/stderr to the JVM Log for the
      STAX service.</li>
  <li>otherwise, if it evaluates to something else, an error will occur when
      the job is submitted for execution and the RC variable will be set to 47 
      (Invalid value) with additional information in the STAFResult variable.</li>
  </ul>
</li>
<p>
<li>
<b>pythonloglevel</b> - specifies the STAF log level to use when Python stdout is
  redirected to the STAX Job User Log (so it only has an effect if <b>pythonloglevel</b>
  is set to 'jobuserlog' or 'jobuserlogandmsg'). This attribute is equivalent
  to the PYTHONLOGLEVEL option for a STAX EXECUTE command.  The value must
  evaluate via Python to one of the following (not case-sensitive):
  <ul>
  <li>'parent' - specifies to use the same value that was specified for the parent job.
      This is the default.</li>
  <li>'default' - specifies to use the default STAX service setting for "Python
      Log Level".</li>
  <li>One of the STAF logging levels: 'fatal', 'error', 'warning', 'info', 'trace',
      'trace2', 'trace3', 'debug', 'debug2', 'debug3', 'start', 'stop', 'pass', 'fail',
      'status', 'user1', 'user2', 'user3', 'user4', 'user5', 'user6', 'user7', or
      'user8'.</li>
  <li>otherwise, if it evaluates to something else, an error will occur when
      the job is submitted for execution and and the RC variable will be set to 47
      (Invalid value) with additional information in the STAFResult variable.
  </ul>

</ul>
<p>
The job element contains the following elements in the order listed (with some
variations).  Refer to the <a href="#Header_StaxDTD">"STAX Document Type
Definition (DTD)"</a> section to see the DTD for the job element.
<p>
Note that these elements are equivalent to the options allowed for the
EXECUTE request (except where noted), so refer to the <a href="#Header_Execute">"EXECUTE"</a>
section for more information.
<p>
The job element must contain either a job-file or job-data element as follows:
<ul>
<li>
<b>job-file</b> - specifies the fully qualified name of a file containing the XML document
for the sub-job to be executed.  The job-file element is equivalent to the FILE option
for an EXECUTE request.  The value is evaluated via Python to a string.
This element has the following optional attribute:
  <ul>
  <li><b>machine</b> - specifies the name of the machine where
  the XML document is located.  If not specified, it defaults to Python variable STAXJobXMLMachine.
  The machine attribute is equivalent to the MACHINE option for an EXECUTE request.
  </li>
  </ul>
<p>
<li>
<b>job-data</b> - specifies a string containing the XML document contents for the job to be
executed.  This element is equivalent to the DATA option for an EXECUTE request.
Its value is evaluated via Python to a string only if its <b>eval</b> attribute
evaluates to a true value via Python.
This element has the following optional attribute:
  <ul>
  <li><b>eval</b> - specifies whether the job-data is to be evaluated by Python in the
  parent job.  This value must evaluate via Python to a true or false value.
  For example, if the job-data value is dynamically generated and
  assigned to a Python variable, rather then just containing the literal XML value,
  you would need to set the <b>eval</b> attribute to true (e.g. eval="1").
  The default is false (eval="0").
  </li>
  </ul>
</li>
</ul>
<p>
The job element has the following optional elements.  Each of these
optional elements may specify an <b>if</b> attribute.  The <b>if</b>
attribute must evaluate via Python to a true or false value.  If it
does not evaluate to a true value, the element is ignored.  The default
value for the <b>if</b> attribute is 1, a true value.  Note that in
Python, true means any nonzero number or nonempty object; false means
not true, such as a zero number, an empty object, or None.  Comparisons
and equality tests return 1 or 0 (true or false).
<p>
<ul>
<li>
<b>job-function</b> - specifies the name of the function element to call
to start the job, overriding the defaultcall element, if specified, in the
XML document.  It must specify the name of a function element specified
in the XML document.  This element is equivalent to the FUNCTION option
for an EXECUTE request.  The value is evaluated via Python to a string.
This element is optional.
</li>
<p>
<li>
<b>job-function-args</b> - specifies arguments to pass to the function
element called to start the job, overriding any arguments for the
defaultcall element, if specified, in the XML document.
This element is equivalent to the ARGS option for an EXECUTE
request.
Its value is evaluated via Python only if its <b>eval</b> attribute
evaluates to a true value via Python.
This element is optional and has the following optional attribute:
  <ul>
  <li><b>eval</b> - specifies whether the job-function-args value is to be evaluated by
  Python in the parent job.  The default is false (eval="0").
  </li>
  </ul>
<p>
<li>
<b>job-script</b> - specifies Python code to be executed.
This element is equivalent to the SCRIPT option for an EXECUTE request.
Multiple job-script elements may be specified for a job.
Its value is evaluated via Python only if its <b>eval</b> attribute
evaluates to a true value via Python.
This element has the following optional attribute:
  <ul>
  <li><b>eval</b> - specifies whether the job-script value is to be evaluated by
  Python in the parent job.  The default is false (eval="0").
  </li>
  </ul>
<p>
<li>
<b>job-scriptfile</b> (or <b>job-scriptfiles</b>) - specifies the
fully qualified name of a file containing Python code to be executed,
or a list of file names containing Python code to be executed.
The value must evaluate via Python to a string or a list of strings.
This element is equivalent to the SCRIPTFILE option for a STAX
EXECUTE command.
<p>
Specifying only one script file could look like either:
<pre>
'C:/stax/scriptfiles/scriptfile1.py'   or    ['C:/stax/scriptfiles/scriptfile1.py']
</pre>
Specifying a list containing three script files could look like:
<pre>
['C:/stax/scriptfiles/scriptfile1.py', 'C:/stax/scriptfiles/scriptfile2.py', 'C:/stax/scriptfiles/scriptfile3.py']
</pre>
The job-scriptfile element has the following optional attribute:
  <ul>
  <li><b>machine</b> - specifies the name of the machine where the
  script file(s) are located.  If not specified, it defaults to
  Python variable STAXJobScriptFileMachine.  This attribute is
  equivalent to the SCRIPTFILEMACHINE option for an EXECUTE
  request.
  </li>
  </ul>
</li>
<p>
<li>
<b>job-action</b> - specifies a task which will be executed after
the sub-job has started execution.  This task will be executed in
parallel with the sub-job via a new STAX-Thread.  The task will
be able to use the variable STAXSubJobID to obtain the sub-job's
job ID in order to interact with the sub-job, if desired.
If the sub-job completes before the task completes, the sub-job
will remain in a non-complete state until the task completes.
If the sub-job cannot start execution, the job-action task is
not executed.  This element is optional, but if specified, it must
be the last element in the &lt;job> element.
<p>
<b>Note:</b>  To create a global variable that can be accessed across STAX-Threads,
use the STAXGlobal class described in <a href="#STAXGlobal_Class">"STAXGlobal Class"</a>
section.
</li>
</ul>
Options allowed for the EXECUTE command which are not allowed for
the job element are as follows.
<ul>
<li>WAIT</li>
<li>HOLD</li>
<li>TEST</li>
</ul>
<p>
<h4>
<b>Usage:</b></h4>
In the following example of a <b>job</b> element, a sub-job defined
by an XML file named
C:/stax/xml/myJob2.xml (located on the machine specified by STAXJobXMLMachine)
is executed and given a job name of "MyJob".  Since the monitor attribute is set to a true value, if the current job is being monitored by the STAX Monitor, and the "Automatically monitor recommended sub-jobs" option has been selected in the STAX Job Monitor Properties, a STAX Monitor window will be opened automatically for the sub-job.
<pre>
&nbsp; <b>&lt;job name="'Job 2'" monitor="1">
&nbsp;&nbsp;&nbsp; &lt;job-file>'C:/stax/xml/myJob2.xml'&lt;/job-file>
&nbsp; &lt;/job></b>
</pre>

In the following example of a <b>job</b> element, a sub-job defined
by an XML file named tests/testB/xml located on machine myMachine
is executed and given a job name of 'Test B'.  The job is
started by calling function 'Main' and passing this function an argument list of
[1, 'server'].  In addition, two scriptfiles are specified as well as a couple
of script elements.  This sub-job is similar to the following STAX EXECUTE request:
<pre>
  EXECUTE FILE /tests/testB.xml MACHINE myMachine JOBNAME "Test B" CLEARLOGS
          FUNCTION Main ARGS "[1, 'server1']" SCRIPTFILEMACHINE myMachine
          SCRIPTFILE /tests/testB1.py SCRIPTFILE /tests/testB2.py
          SCRIPT "MachineList = ['machA', 'machB'] SCRIPT "maxTime = '1h'"
          WAIT RETURNRESULT
</pre>
In addition, a <b>job-action</b> element is run in parallel with
the sub-job after the sub-job has been started.  In this example, it
simply logs a message containing the job ID for the sub-job being
executed.  When the sub-job completes, the return code (RC) set when
starting the sub-job is checked so that either a message is logged providing
information about the sub-job that run (e.g. it's job ID, status, and result)
or a message is logged providing information about why the sub-job could not
be started.  Checking the RC after a &lt;job> element and logging an error
message if the RC is not 0, is highly recommended.
<pre><b>&lt;job name="'Test B'" clearlogs="'Enabled'">
  &lt;job-file machine="'myMachine'">'/tests/testB.xml'&lt;/job-file>
  &lt;job-function>'Main'&lt;/job-function>
  &lt;job-function-args>[1, 'server1']&lt;/job-function-args>
  &lt;job-scriptfiles machine="'myMachine'">['/tests/testB1.py', '/tests/testB2.py']&lt;/job-scriptfiles>
  &lt;job-script>machineList = ['machA', 'machB']&lt;job-script>
  &lt;job-script>maxTime = '1h'&lt;/job-script>
  &lt;job-action>
    &lt;log>'Started sub-job %s' % (STAXSubJobID)&lt;/log>
  &lt;/job-action>
&lt;/job></b>

&lt;if expr="<b>RC</b> == 0">
  &lt;log message="1">
    'Sub-job %s completed.  Status: %s  Result: %s' % (<b>STAXSubJobID</b>, <b>STAXSubJobStatus</b>, <b>STAXResult</b>)
  &lt;/log>
  &lt;else>
    &lt;log message="1" level="'Error'">
      'Sub-job could not be started. RC: %s  Result: %s' % (<b>RC</b>, <b>STAFResult</b>)
    &lt;/log>
  &lt;/else>
&lt;/if>
</pre>

In the following example of a <b>job</b> element, a sub-job defined
by an XML file named C:/tests/Scenario01.xml located on machine myMachine
is executed and given a job name of 'Scenario 01'.
The option to clear the job logs is enabled, and all of the testcase
logging options are enabled as well, and the python output is being
redirected to both the STAX Job User Log and to the STAX Monitor's
Messages panel and Python stdout is logged to the STAX Job User Log
using logging level 'User1'.
<pre>
  EXECUTE FILE C:/tests/Scenario01.xml MACHINE myMachine JOBNAME "Scenario 01"
          CLEARLOGS Enabled LOGTCELAPSEDTIME Enabled LOGTCNUMSTARTS Enabled
          LOGTCSTARTSTOP Enabled PYTHONOUTPUT JobUserLogAndMsg PYTHONLOGLEVEL User1
</pre>
<pre><b>&lt;job name="'Scenario 01'" clearlogs="'Enabled'"
     logtcelapsedtime="'Enabled'" logtcnumstarts="'Enabled'" logtcstartstop="'Enabled'"
     pythonoutput="'JobUserLogAndMsg'" pythonloglevel="'User'">
  &lt;job-file machine="'myMachine'">'C:/tests/Scenario01.xml'&lt;/job-file>
&lt;/job></b>
</pre>

This example of a <b>job</b> element uses the <b>job-data</b> sub-element
instead of the <b>job-file</b> sub-element to define the STAX XML job to be
run and evaluates it via Python to a string in the parent job.
<pre>
  &lt;script>
    machine = 'myMachine'

    xml = '&amp;lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>\n'
    xml = xml + '&amp;lt;!DOCTYPE stax SYSTEM "stax.dtd">\n'
    xml = xml + '&amp;lt;stax>\n'
    xml = xml + '  &amp;lt;defaultcall function="Main"/>\n'
    xml = xml + '  &amp;lt;function name="Main">\n'
    xml = xml + '    &amp;lt;function-single-arg>\n'
    xml = xml + '      &amp;lt;function-required-arg name="machList"/>\n'
    xml = xml + '    &amp;lt;/function-single-arg>\n'
    xml = xml + '    &amp;lt;sequence>\n'
    xml = xml + '      &amp;lt;log message="1">\'machList=%s\' % (machList)&amp;lt;/log>\n'
    xml = xml + '      &amp;lt;return>machList&amp;lt;/return>\n'
    xml = xml + '    &amp;lt;/sequence>\n'
    xml = xml + '  &amp;lt;/function>\n'
    xml = xml + '&amp;lt;/stax>'
  &lt;/script>

  <b>&lt;job name="'My Sub Job'">
    &lt;job-data eval="1">xml&lt;/job-data>
    &lt;job-function-args eval="1">[ machine ]&lt;/job-function-args>
  &lt;/job></b>

  &lt;if expr="RC == 0">
    &lt;log message="1">
      'Sub-job %s completed.  Status: %s  Result: %s' % (STAXSubJobID, STAXSubJobStatus, STAXResult)
    &lt;/log>
    &lt;else>
      &lt;log message="1" level="'Error'">
        'Sub-job could not be started. RC: %s  Result: %s' % (RC, STAFResult)
      &lt;/log>
    &lt;/else>
  &lt;/if>
</pre>

This example of a <b>job</b> element uses the <b>job-data</b> sub-element
instead of the <b>job-file</b> sub-element to define the STAX XML job to be
run and does not evaluate the value in the <b>job-data</b> sub-element via
Python.
<pre>
  <b>&lt;job name="'My Job'">
    &lt;job-data eval="0">
      &amp;lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
      &amp;lt;!DOCTYPE stax SYSTEM "stax.dtd">
      &amp;lt;stax>
        &amp;lt;defaultcall function="Main"/>
        &amp;lt;function name="Main">
          &amp;lt;function-single-arg>
            &amp;lt;function-required-arg name="machList"/>
          &amp;lt;/function-single-arg>
          &amp;lt;sequence>
            &amp;lt;log message="1">'machList=%s' % (machList)&amp;lt;/log>
            &amp;lt;return>machList&amp;lt;/return>
          &amp;lt;/sequence>
        &amp;lt;/function>
      &amp;lt;/stax>
    &lt;/job-data>
    &lt;job-function-args eval="0">[ 'myMachine' ]&lt;/job-function-args>
  &lt;/job></b>

  &lt;if expr="RC == 0">
    &lt;log message="1">
      'Sub-job %s completed.  Status: %s  Result: %s' % (STAXSubJobID, STAXSubJobStatus, STAXResult)
    &lt;/log>
    &lt;else>
      &lt;log message="1" level="'Error'">
        'Sub-job could not be started. RC: %s  Result: %s' % (RC, STAFResult)
      &lt;/log>
    &lt;/else>
  &lt;/if>
</pre>
<br>

<h2><a name="Header_Nop" href="#ToC_Nop">nop:  Perform No Operation</a></h2>

The nop element indicates that no operation should be performed.&nbsp;
This element is typically used in conjunction with the if, elseif, and
else elements.
<p>
The <b>nop</b> element is an empty element and no attributes.

<h4>
<b>Usage:</b></h4>
In the following example of a <b>nop</b> element, if an expression is true,
then use the <b>nop</b> element to do nothing; else perform function "ErrorRoutine".
<pre>&lt;if expr="RC == 0">
<b>&nbsp; &lt;nop/>
</b>&nbsp; &lt;else>
&nbsp;&nbsp;&nbsp; &lt;call function="'ErrorRoutine'"/>
&nbsp; &lt;/else>
&lt;/if></pre>

<br>

<h2><a name="Header_Stax_Groups" href="#ToC_Stax_Groups">Sequential Execution</a></h2>

The <a href="#Header_Sequence">sequence</a> element may contain any number of STAX elements and executes them
serially.

<h2><a name="Header_Sequence" href="#ToC_Sequence">sequence:  Run Tasks In Sequence</a></h2>

The <b>sequence</b> element represents a container of STAX elements which
will be executed serially, in the order in which the contained elements
are listed in the sequence.&nbsp; A <b>sequence</b> element may contain
any number of <b><i>task</i></b> elements. You may nest sequence elements.
<h4>
<b>Usage:</b></h4>
In the following example of a <b>sequence</b> element, a variable
is created. Then the <b>stafcmd</b> element is executed. When the <b>stafcmd</b>
element completes, the <b>process</b> element is executed. When the <b>process</b>
element completes, the <b>call</b> element is executed. When the <b>call</b>
element completes, the <b>sequence</b> element is complete.
<pre><b>&lt;sequence>

</b>&nbsp; &lt;script>server1 = "machine1.test.austin.ibm.com"&lt;/script>

&nbsp; &lt;stafcmd>
&nbsp;&nbsp;&nbsp; ...
&nbsp; &lt;/stafcmd>

&nbsp; &lt;process>&nbsp;
&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;
&nbsp; &lt;/process>

&nbsp; &lt;call function="'VerifyRC'"/>

<b>&lt;/sequence></b></pre>
<br>

<h2><a name="Header_Stax_Parallels" href="#ToC_Stax_Parallels">Parallel Execution</a></h2>

The <a href="#Header_Parallel">parallel</a> and
<a href="#Header_ParallelIterate">paralleliterate</a> elements
execute tasks in parallel.

<h2><a name="Header_Parallel" href="#ToC_Parallel">parallel:  Run Tasks In Parallel</a></h2>

The <b>parallel</b> element represents a container of <b><i>task</i></b>
elements which will be executed in parallel.&nbsp; Each <b><i>task</i></b>
element it contains will be executed on a separate STAX-Thread and existing
variables are cloned for each thread.  The <b>parallel</b> element
is considered to be complete when each of its contained <b><i>task</i></b>
elements has completed.&nbsp; A <b>parallel</b> element
may contain any number of <b><i>task</i></b> elements.&nbsp; You may nest
<b>parallel</b>
elements.
<p>
<b>Note:</b>  To create a global variable that can be accessed across STAX-Threads,
use the STAXGlobal class described in <a href="#STAXGlobal_Class">"STAXGlobal Class"</a>
section.
<p>
<h4>
<b>Usage:</b></h4>
In the following example of a <b>parallel</b> element, the <b>stafcmd</b>,
<b>process</b>,
and <b>call</b> elements are executed at the same time. When all three
tasks are complete, the <b>parallel </b>element is complete and processing
will continue on to the next element defined after the <b>&lt;/parallel></b>
element.
<pre><b>&lt;parallel>

</b>&nbsp; &lt;stafcmd>
&nbsp;&nbsp;&nbsp; ...
&nbsp; &lt;/stafcmd>

&nbsp; &lt;process>&nbsp;
&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;
&nbsp; &lt;/process>

&nbsp; &lt;call function="'VerifyRC'"/>

<b>&lt;/parallel></b></pre>

<h2><a name="Header_ParallelIterate" href="#ToC_ParallelIterate">paralleliterate:  
Run a Task for Each Entry in a List in Parallel</a></h2>

<p>The <b>paralleliterate</b> element contains a single <b><i>task</i></b>
element.&nbsp; The <b>paralleliterate</b> element performs the task for
each value in a list. The iterations of the contained <b><i>task</i></b>
element are executed in parallel (unlike the <b>iterate</b> element whose
tasks are performed serially).&nbsp; Each iteration will be executed on
a separate STAX-Thread and existing variables are cloned for each
thread.&nbsp; The <b>paralleliterate</b> element is considered to be complete
when all its iterations of the <b><i>task</i></b> element have completed.
<p>
<b>Notes:</b>
<ol>
<li>To create a global variable that can be accessed across STAX-Threads,
use the STAXGlobal class described in <a href="#STAXGlobal_Class">"STAXGlobal Class"</a>
section.</li>
<li>If the list being iterated can contain a large number of items,
you may want to specify the <b>maxthreads</b> attribute to perform the
task in parallel for a subset of the list so that you don't exceed
available memory if too many STAX-Threads are running concurrently.</li>
</ol>
<p>The <b>paralleliterate</b> element has the following attributes:
<ul>
<li>
<b>var</b> - is the name of the variable which will contain the current
item in the list/tuple being iterated. It is a literal and
is required.</li>

<li>
<b>in</b> - is the list to be iterated. It is evaluated via Python and
must evaluate to be a list or tuple. It is required.
Note that the list may be assigned in many ways.  Here are some examples
of <b>in</b> attribute assignments: </li>
  <ul>
    <li>the name of the variable that is a list or tuple:  in="machList"</li>
    <li>a literal list:  in="['machA','machB','machC']"</li>
    <li>a literal tuple:  in="('testA','testB')"</li>
    <li>a slice of a list/tuple:  in="machList[1:]"</li>
    <li>a concatenation of lists/tuples:  in="machList1 + ['machD','machE']"</li>
  </ul>

<li>
<b>indexvar</b> - is the name of a variable which will contain the index of
the current item in the list/tuple being iterated. It
is a literal and is optional.  Note that the index for the first element
in the list/tuple is 0.</li>
<li>
<b>maxthreads</b> - specifies the maximum number of STAX-Threads that the
paralleliterate element can run simultaneously at a time.  It is optional
and must evaluate to an integer value >= 0 via Python.  The default value
is 0 which means there is no maximum number of threads (and has the same effect
as if the maxthreads attribute was not specified).</li>
</ul>

<h4>
<b>Usage:</b></h4>
The following example of a <b>paralleliterate</b> element runs ProcessA
simultaneously on a group of machines whose names are contained in a list.
The <b>paralleliterate</b> element is not complete until "ProcessA" has
completed on all of the machines whose names are contained in the list.
<pre>&lt;script>machList = ['machA','machB','machC','machD']&lt;/script>
<b>&lt;paralleliterate var="machName" in="machList">
</b>&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;command>'ProcessA'&lt;/command>
&nbsp; &lt;/process>
<b>&lt;/paralleliterate></b></pre>

The following example of a <b>paralleliterate</b> element submits a
STAF request to the PING service to ping each machine in a list.
If the ping fails, the name of the machine which could not be pinged
is added to a list.  The STAXGlobal class was used to store this list
so that it can be accessed across STAX-Threads that are running in
parallel.
<pre>&lt;script>
  machineList = ['machA', 'machB', 'machC' ]
  <B>gPingFailList = STAXGlobal([])</B>
&lt;/script>

<b>&lt;paralleliterate var="machName" in="machineList"></B>
  &lt;sequence>

    &lt;stafcmd>
      &lt;location>machName&lt;/location>
      &lt;service>'PING'&lt;/service>
      &lt;request>'PING'&lt;/request>
    &lt;/stafcmd>

    &lt;if expr="RC != 0">
      <b>&lt;script>gPingFailList.append(machName)&lt;/script></b>
    &lt;/if>

  &lt;/sequence>
<b>&lt;/paralleliterate></b>

&lt;if expr="len(gPingFailList) != 0">
  &lt;message>
    'Could not ping the following machines: %s' % (<b>gPingFailList.get()</b>)
  &lt;/message>
&lt;/if>
</pre>

The following example of a <b>paralleliterate</b> element calls
a function to run a test on each machine in an input list of
machines.  Since this machine list could contain hundreds of machines,
the maxthreads attribute is being specified to run the test in parallel
on a subset (20) of the machines at a time since running hundreds of
STAX-Threads simultaneously could cause the STAX JVM to run out of
memory.

<pre>
<b>&lt;paralleliterate var="machine" indexvar="i" in="machineList" maxthreads="20"></b>
  &lt;block name="'#%s: %s' % (i + 1, machine)">
    &lt;call function="'RunTest'">machine&lt;/call>
  &lt;/block> 
<b>&lt;/paralleliterate></b>
</pre>

<h2><a name="Header_Stax_Function_Calls" href="#ToC_Stax_Function_Calls">Functions</a></h2>

The <a href="#Header_Function">function</a>,
<a href="#Header_Call">call</a>,
<a href="#Header_call-with-list">call-with-list</a>,
<a href="#Header_call-with-map">call-with-map</a>,
<a href="#Header_Defaultcall">defaultcall</a>,
<a href="#Header_Return">return</a>, and
<a href="#Header_Import">import</a> elements
deal with functions and how they are invoked.

<h2><a name="Header_Function" href="#ToC_Function">function: Define a Named Task</a></h2>

To understand how to use the <B>function</B> element, you need to understand the following
concepts:
<ul>
<li><i>&lt;function> creates a function object and assigns it to a name</I><BR>
The <B>function</B> element creates a function object and assigns it to a name.
The function name becomes a reference to the function object. There are really two
sides to the function picture: a <I>definition</I> (the function element that creates
a function) and a <i>call</I> (a call element that tells the STAX Job to run the function).
<p>
<li><i>&lt;return> sends a result object back to the caller</I><br>
When a function is called, the caller stops until the function finishes its work
and returns control to the caller.  Functions that compute a value send it back
to the caller with a <B>return</B> element. The <B>return</B> element can send back
any sort of object, including multiple values.
<p>
<li><I>Scope determines how variables are to be assigned</I><br>
By default, all variables assigned in a function are global to the job's current
STAX-Thread.  However, you can assign a <B>local</B> scope to a function such that
all names assigned in a function are local to that function and exist only while
the function runs.  Functions defined with a local scope provide a nested namespace,
which contains a copy of variables in the caller's scope and which localizes
any new variables created or changes to existing variables.
<p>
<li><I>STAXGlobal class provides the ability to create truly global variables</I><br>
An exception to the above scoping rules are variables that are instances
of the STAXGlobal class.  A STAXGlobal class is a Python class which STAX provides
as a wrapper to provide for the creation of truly global variables, even across
STAX-Threads and when used in functions declared with a local scope.
See the <a href="#STAXGlobal_Class">STAXGlobal Class</a> section for more information
on how to create and use STAXGlobal variables.
</ul>
<P>
The <b>function</b> element defines a named task and contains a single
<b><i>task</i></b>
element.&nbsp; A<b> function</b> element may only be defined within the
root <b>stax </b>element.
<p>
The first function called when a job is started is determined by the <b>defaultcall</b> element
or by the FUNCTION parameter of an EXECUTE request.
Functions are called within a job definition file using the <b>call</b>, <b>call-with-list</b>,
or <b>call-with-map</b> elements.
<p>
The <b>function</b> element has the following attributes:
<ul>
<li><b>name</b> - is the name of the function.  It is required. No two function elements may have
the same name.  It is a literal.  It cannot contain a variable as it is not evaluated via Python.
It must be a proper XML name which means it must start with a letter, an underscore,
or a colon.  The next characters may be letters, digits, underscores, hyphens,
periods, and colons (but no whitespace).
<P>
<li><b>requires</b> - specifies other functions in the same job that must be imported
along with the specified function.  This allows the function's users to only import
the function itself, without having to worry about any other functions it may call.
It is used by the &lt;function-import> and &lt;import> elements.  The function names
must be separated by a space (e.g. <tt>requires="Function1 Function2 Function3"</tt>).
It is a literal.  This attribute is optional.
<P>
<LI><B>scope</B> - specifies the scope of the function.  It is a literal and, if specified, must be
set to either global or local.  It is optional and the default is global.
<P>
<UL>
  <LI><B>global</B> - the function uses the same namespace so that the effects of
   variables defined/changed inside the function are global (within the same STAX-Thread).
  <P>
  <LI><B>local</B> - the function provides a nested namespace which localizes the
variables it uses.  All variables assigned in a function are local to
that function and exist only while the function runs. Variables previously defined in other
functions with a global scope are still visible, however, any changes to these variables or
new variables created are not visible to the caller after the function completes, unless the
variable is an instance of the STAXGlobal class.
Changes to STAXGlobal variables persist after a function completes.
</UL>
</ul>
<P>
The <B>function</B> element can also optionally contain the following elements, in
the order listed, before the <B><I>task</I></B> element:
<UL>
<li><B>function-prolog</B> element - Contains a textual description of the function
that can be used when transforming a STAX XML document to a Function Description document in
HTML.  This information will be placed before the function argument table in the Function
Description document in HTML.  This element replaces the deprecated <B>function-description</B>
element.
<P>Note:  This information is not used by STAX in any way and is completely ignored.
In particular, this value is never passed to the Python interpreter, and thus, it should
be a literal, not a quoted string.  If you want to use standard HTML markup such as &lt;p>,
&lt;b>, and &lt;ol> in the description, then enclose the text in a CDATA section.
<P>
<li><B>function-epilog</B> element - Contains a textual description of the function
that can be used when transforming a STAX XML document to a Function Description document in
HTML.  This information will be placed after the function argument table in the Function
Description document in HTML.
<P>Note:  This information is not used by STAX in any way and is completely ignored.
In particular, this value is never passed to the Python interpreter, and thus, it should
be a literal, not a quoted string.  If you want to use standard HTML markup such as &lt;p>,
&lt;b>, and &lt;ol> in the description, then enclose the text in a CDATA section.
<p>
<li><b>function-import</b> element - Specifies to import functions from
    other STAX XML files.  You can specify any number of <b>function-import</b>
    elements.  The <b>function-import</b> element has the following attributes:
<ul>
<li><b>file</b> - is the name of the STAX XML file from which the functions will be
imported.  It is a literal.  Any STAF variables contained in the file name will be
resolved on the STAX service machine.  You must specify either the <b>file</b> attribute
or the <b>directory</b> attribute, but not both.  
<p>
  <ul>
  <li>If the <b>machine</b> attribute is specified, the <b>file</b> attribute should
      specify the fully-qualified path to the STAX XML file (an absolute file name).
  <p>
  <li>If the <b>machine</b> attribute is not specified, the <b>file</b> attribute can
      specify either the fully-qualified path to the STAX XML file (an absolute file name),
      or a relative path to the STAX XML file.  It must be relative to the parent directory
      of the STAX XML file that contains the <b>function-import</b> element.
      A relative path can only be specified if the file being imported resides on
      the same machine as the STAX XML file that is importing the file.
      Using the relative path name allows a group of STAX XML files to be moved to
      different machines without modification to the <b>function-import</b> elements
      in your STAX XML files (assuming the same sub-directory structure that contains
      these files is maintained).
  </ul>
<p>
<li><b>directory</b> - is the name of a directory that contains STAX XML files from which
    functions will be imported.  It is a literal.  Any STAF variables contained in the
    directory name will be resolved on the STAX service machine.  You must specify
    either the <b>file</b> attribute or the <b>directory</b> attribute, but not both.
    All functions from the files contained within this directory that end in .xml
    (case-insensitive) will be imported.  Subdirectories within the directory are
    ignored.  You cannot specify a subset of functions to import when using the
    <b>directory</b> attribute.  
<p>
  <ul>
  <li>If the <b>machine</b> attribute is specified, the <b>directory</b> attribute should
      specify the fully-qualified path (an absolute path) to the directory containing
      STAX XML files.
  <p>
  <li>If the <b>machine</b> attribute is not specified, the <b>directory</b> attribute can
      specify either the fully-qualified path (an absolute path) to a directory containing
      STAX XML files, or a relative path to the directory.  It must be relative to the
      parent directory of the STAX XML file that contains the <b>function-import</b> element.
      A relative path can only be specified if the directory being imported resides on
      the same machine as the STAX XML file that is importing the file.
      Using the relative path name allows a group of STAX XML files to be moved to
      different machines without modification to the <b>function-import</b> elements
      in your STAX XML files (assuming the same sub-directory structure that contains
      these files is maintained).
  </ul>
<p>
<p>
<li><b>machine</b> - is the name of the machine where the STAX XML file or directory
    is located.  It is optional.  It is a literal.  Any STAF variables contained in
    the machine name will be resolved on the STAX service machine.
    If the machine attribute is not specified, it will default to the machine where
    the STAX XML file that contains the <b>function-import</b> element resides.
</ul>
<p>
The <b>function-import</b> element may optionally specify a subset of functions
to import only if the <b>file</b> attribute is specified.  The function names must
be separated by whitespace (e.g. Function1 Function2 Function3).  It is a literal.
If you don't specify any functions to import, then all functions in the specified
file will be imported.
<p>
If an error occurs while processing a <b>function-import</b> element:
<ul>
<li>If the job hasn't started executing, RC 4001 (Error submitting execute
    request) will be returned with detailed information about the
    STAXFunctionImportException in the result.
<p>
<li>If the job is already running (e.g. because the <b>function-import</b>
    element is triggered by the <b>import</b> element), a STAXFunctionImportError
    signal is raised during run-time (which will log an error and terminate
    the job if using the default signal handler provided for this signal).
</ul>
<p>
Using a <b>function-import</b> element instead of a <b>import</b> element
within the function's task, provides the ability to import functions from
xml files sooner, even before run-time if you only use <b>function-import</b>
elements, not <b>import</b> elements.  This allows any errors in the imported
xml files to be discovered earlier.  However, since <b>function-import</b> 
elements can be processed before run-time, you cannot specify Python variables
in the attributes or contents of a <b>function-import</b> element, unlike a
<b>import</b> element which dynamically imports an xml file during run-time.
<p>
Possible errors that could occur while processing a <b>function-import</b>
element include:
<ul>
<li>The machine specified could not be contacted
<li>An error occurred while getting the contents of an xml file (e.g. the
    file or directory does not exist, insufficient STAF trust, etc)
<li>An XML parse error occurred while parsing an imported XML file
<li>A Python Compile error occurred while compiling the Python code in an
imported XML file,
</ul>
<p>
After a <b>function-import</b> element has imported a function from a file,
any function can then call the imported function during execution of the
STAX job.
<p>
If file caching is enabled, the file cache will be checked for an up-to-date
copy of the imported file before loading and parsing the XML from the target
machine.  For a file cache hit to occur, the imported file's name and machine
must match a file cache entry.  If the file is retrieved from cache,
there can be an increase in the performance of the import operation.
For more information on how caching works, refer to the
<a href="#Header_StaxFileCache">"STAX File and Machine Caching"</a> section.

<P>
<LI>One of the following elements can be specified to define formal function arguments.
Defining arguments can help prevent unintended namespace collisions and allows STAX
to detect argument validation errors when calling functions at runtime.
<P>
  <ul>
    <LI><B>function-no-args</B> - is an empty element that specifies that
    the function does not allow any arguments to be passed to it.
    <P>
    <LI><B>function-single-arg</B> - contains either a &lt;function-required-arg>,
    &lt;function-optional-arg>, or a &lt;function-arg-def> element.
    <P>
    <LI><B>function-list-args</B> - specifies a list of arguments.  This element can
    contain zero or more &lt;function-required-arg> elements, followed by zero or
    more &lt;function-optional-arg</B> elements (but must contain at least one of these arguments),
    followed by an optional &lt;function-other-args> element, or it can contain
    one or more &lt;function-arg-def> elements.  Note, the order of the
    arguments is important.  All &lt;function-required-args> must precede all &lt;function-optional-args>,
    and the &lt;function-other-args> element must be last (if present).
    <P>
    <LI><B>function-map-args</B> - specifies a map of arguments (recorded as name/value pairs).
    This element can contain any combination of one or more
    &lt;function-required-arg> and &lt;function-optional-arg> elements, followed by an optional
    &lt;function-other-args> element, or it can contain one or more
    &lt;function-arg-def> elements..  Note that the order of the &lt;function-required-arg>
    and &lt;function-optional-arg> elements is not relevant, unless an argument's default value
    specifies another argument's value.  However, the &lt;function-other-args>
    element must be specified last (if present).
  </ul>
  <P>
  If more arguments are passed to the function when called than are defined (assuming a
  &lt;function-other-args> element, or a &lt;function-arg def> with a "type"
  attribute set to "other", is not specified) or if not all required arguments are
  passed to the function when called, a STAXFunctionArgValidate signal
  is raised to indicate the failure and the function is not executed.
</UL>
The function argument elements are defined as follows:
<UL>
<LI><B>function-required-arg</b> - defines an argument that must be passed when calling
a function.  It may optionally contain a description for the argument.
This element has the following attribute:
  <UL>
  <LI><B>name</B> - is the name of the argument as it will appear inside the function.
  It is a literal and is required.
  </UL>
<P>
<LI><B>function-optional-arg</B> - defines an argument that may optionally be passed when
calling a function.  It may optionally contain a description for the argument.
This element has the following attributes:
  <UL>
  <LI><B>name</B> - is the name of the argument as it will appear inside the function.
  It is a literal and is required.
  <LI><B>default</B> - is the default value for the argument.  Its value is evaluated via Python.
  It is optional, and defaults to the special Python object None.  If an optional argument is
  not provided when calling a function, its default value is used.
  </UL>
<P>
<LI><B>function-other-args</B> - defines the name of a list (if defined within a
&lt;function-list-args> element) or a map (if defined within a &lt;function-map-args> element)
which will contain any additional arguments passed when calling a function.  If additional
arguments are not provided when calling a function, its value is either an empty list or an
empty map, depending on whether it was defined within a &lt;function-list-args> element or
a &lt;function-map-args> element, respectively.  It may optionally contain a description
for the argument.  The &lt;function-other-args> element has the following attribute:
  <UL>
  <LI><B>name</B> - is the name of the argument list or map as it will appear
  inside the function.  It is a literal and is required.
  </UL>
<P>
<LI><B>function-arg-def</B> - defines an argument which can contain private
data, as well as other user-defined properties. This element has the following attributes:
  <UL>
  <LI><B>name</B> - is the name of the argument as it will appear inside the function.
  It is a literal and is required.
  <LI><B>type</B> - is the type of the argument.  It is a literal and is
  optional.  The allowed values are "required", "optional", and "other".  The
  default value is "required".
  <LI><B>default</B> - is the default value for the argument.  Its value is evaluated via Python.
  It is optional, and defaults to the special Python object None.  If an optional argument is
  not provided when calling a function, its default value is used.
  </UL>
  Note: When using &lt;function-arg-def> elements to define arguments within a
  &lt;function-list-args> element, the order of the arguments is important.
  All arguments with type "required" must precede all arguments with type
  "optional", and the argument with type "other" must be specified last (if
  present).
  <br>Note: When using &lt;function-arg-def> elements to define arguments within
  a &lt;function-maps-args> element, the order of the arguments with
  types "required" and "optional" is not relevant, unless an argument's default
  value specifies another argument's value.  However, the argument with type
  "other" must be specified last (if present).
<P>
</UL>
<P>
A function that does not define its arguments is implicitly defined as:
<PRE>&lt;function-single-arg>
  &lt;function-optional-arg name="STAXArg" default="None"/>
&lt;/function-single-arg></PRE>

Note that the function argument elements (<b>function-required-arg</b>,
<b>function-optional-arg</b>, and <b>function-other-args</b>) can contain a description of
the argument.  This information, along with the values of the <b>function-prolog</b> element
(or the deprecated <b>function-description</b> element) and the <b>function-epilog</b> element,
can be used in conjunction with an XSLT stylesheet to generate a nicely formatted HTML file
documentating functions and their associated arguments specified in a STAX job.
Refer to the <a href="#Header_GenerateDoc">"Generating STAX Function Documentation"</a> section
for more information on how to generate HTML documentation for your STAX functions.
<P>
<P>
The <B>function-arg-def</B> element can also optionally contain the following elements, in
the order listed:
<UL>
<li><B>function-arg-description</B> element - Contains a description of
the argument.  This information, along with the values of the <b>function-prolog</b> element
(or the deprecated <b>function-description</b> element) and the <b>function-epilog</b> element,
can be used in conjunction with an XSLT stylesheet to generate a nicely formatted HTML file
documentating functions and their associated arguments specified in a STAX job.
Refer to the <a href="#Header_GenerateDoc">"Generating STAX Function Documentation"</a> section
for more information on how to generate HTML documentation for your STAX functions.
<P>
<li><B>function-arg-private</B> element - Indicates that the argument contains
private data.  This element is optional and is an empty element.
<P>
<li><B>function-arg-property</B> element - Allows you to specify properties
for the argument.  You may have multiple &lt;function-arg-property> elements.
</UL>
<P>
<p>
The <b>function-arg-property</b> element has the following required attributes:
<ul>
<li><b>name</b> - is the name of the property.  It is a literal.
<li><b>value</b> - is the value of the property.  It is a literal.
</ul>
<P>
The <B>function-arg-property</B> element can also optionally contain the following elements, in
the order listed:
<UL>
<li><B>function-arg-property-description</B> element - Contains a description of
the argument property.  This information, along with the attributes of the <b>function-property-data</b> element
can be used in conjunction with an XSLT stylesheet to generate a nicely formatted HTML file
documentating function arguments and their associated properties specified in a STAX job.
Refer to the <a href="#Header_GenerateDoc">"Generating STAX Function Documentation"</a> section
for more information on how to generate HTML documentation for your STAX functions.
<P>
<li><B>function-arg-property-data</B> element - Contains data associated with
the argument property.  You may have multiple &lt;function-arg-property-data>
elements.  A &lt;function-arg-property> element can contain nested
&lt;function-arg-property-data> elements, which can be self-nested.  This allows
you to define an enumerated list of values for a function argument.
</UL>
<p>
The <b>function-arg-property-data</b> element has the following required attributes:
<ul>
<li><b>type</b> - is the type of the property data.  It is a literal.
<li><b>value</b> - is the value of the property data.  It is a literal.
</ul>
<P> 
<h4>
Usage:</h4>
<P>
Goal: Define a simple function containing a sequence element (which can then contain any number of
other elements).
<pre><b>&lt;function name="FunctionA">
</b>&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp; ...
&nbsp; &lt;/sequence>
<b>&lt;/function></b></pre>
Goal: Define a function which you intend to import into other STAX XML job files.  The requires
attribute defines the two additional functions it requires so that they will be automatically
imported as well when FunctionB is imported.
<pre><b>&lt;function name="FunctionB" requires="FunctionC FunctionD">
</b>&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp; ...
&nbsp;&nbsp;&nbsp; &lt;call function="'FunctionC'"/>
&nbsp;&nbsp;&nbsp; ...
&nbsp;&nbsp;&nbsp; &lt;call function="'FunctionD'"/>
&nbsp;&nbsp;&nbsp; ...
&nbsp; &lt;/sequence>
<b>&lt;/function></b></pre>
Goal: Illustrate the use of local function scope and the STAXGlobal class.
Note that only changes to globalVar (which is an instance of the STAXGlobal class) are visible
after function Bar completes.  Also, all existing variables are visible inside functions with
"local" scope.  Thus, variables localVar and globalVar are visible inside function Bar, even
though function Bar has "local" scope and had not defined them.  The following messages are
displayed in the STAX Monitor when this example is run:
<PRE>Before Bar: localVar=[1, 2], globalVar=[1, 2]
After  Bar: localVar=[1, 2], globalVar=[1, 2, 3]</PRE>

<PRE>&lt;stax>

  &lt;script>
    localVar = [1, 2]
    globalVar = <B>STAXGlobal([1, 2])</B>
  &lt;/script>

  &lt;defaultcall function="Main"/>

  <b>&lt;function name="Main" scope="local">

    &lt;sequence>

      &lt;message>
        'Before Bar: localVar=%s, globalVar=%s' % (localVar, globalVar)
      &lt;/message>

      &lt;call function="'Bar'"/>

      &lt;message>
        'After  Bar: localVar=%s, globalVar=%s' % (localVar, globalVar)
      &lt;/message>

    &lt;/sequence>

  &lt;/function>

  &lt;function name="Bar" scope="local">

    &lt;script>
      localVar.append(3)
      globalVar.append(3)
    &lt;/script>

  &lt;/function></B>

&lt;/stax></PRE>

Goal: Illustrate the use of the <b>function-import</b> element using
an absolute paths and specifying the machine attribute.
<p>
The following imports all functions from file C:/stax/baseFunctions.xml
that resides on machine server1.company.com:
<pre>
  <b>&lt;function-import file="C:/stax/commonFunctions.xml" machine="server1.company.com"/></b>
</pre>

The following only imports functions FunctionA, FunctionB, and
FunctionC from this file:
<pre>
  <b>&lt;function-import file="C:/stax/commonFunctions.xml" machine="server1.company.com">
    FunctionA FunctionB FunctionC
  &lt;/function-import></b>
</pre>

The following imports all xml files from directory C:/stax/libraries
that resides on machine server1.company.com:
<pre>
  <b>&lt;function-import directory="C:/stax/libraries" machine="server1.company.com"/></b>
</pre>

Goal: Illustrate the use of the <b>function-import</b> element using
relative file names.  Assume the following STAX XML files reside on the
same machine:
<pre>
  /stax/MyApp/job1.xml
  /stax/MyApp/commonLib.xml
  /stax/libraries/library1.xml
  /stax/libraries/library2.xml
</pre>
and you wanted function "Main" in the /stax/MyApp/job1.xml file to
import all functions from files /stax/MyApp/commonLib.xml,
/stax/libraries/library1.xml and /stax/libraries/library2.xml so
that it could call functions from these imported files.
You could do this as follows:
<pre>
  &lt;function name="Main"/>
    <b>&lt;function-import file="commonLib.xml"/>
    &lt;function-import file="../libraries/library1.xml"/>
    &lt;function-import file="../libraries/library2.xml"/></b>
    
    &lt;sequence>
      ...
    &lt;/sequence>

  &lt;/function>
</pre>
Instead of specifying two <b>function-import</b> elements to import
the two xml files for /stax/libraries, you could use the
<b>directory</b> attribute and do it as follows:
<pre>
  &lt;function name="Main"/>
    <b>&lt;function-import file="commonLib.xml"/>
    &lt;function-import directory="../libraries"/></b>
    
    &lt;sequence>
      ...
    &lt;/sequence>

  &lt;/function>
</pre>

Goal: Illustrate the specification of a function which does not allow any arguments to be
passed to it.  If any arguments are passed to it when called, a STAXFunctionArgValidate signal
is raised and the function is not run.
<PRE>
  <b>&lt;function name="NoArgsFunction">
    &lt;function-no-args/>

    &lt;sequence>
      ...
    &lt;/sequence>

  &lt;/function></B>
</PRE>

Goal: Illustrate the specification of a function which requires one argument, duration, to be
passed to it.  If zero or more than one argument is passed to it when called,
a STAXFunctionArgValidate signal is raised and the function is not run.
<PRE>
  <b>&lt;function name="OneRequiredArgFunction" scope="local">

    &lt;function-single-arg>
      &lt;function-required-arg name="duration"/>
    &lt;/function-single-arg>

    &lt;timer duration="duration"></b>
      &lt;loop>
        ...
      &lt;/loop>
    <b>&lt;/timer>

  &lt;/function></b>

  This function could be called in any of the following ways with the same result:

  <b>&lt;call function="'OneRequiredArgFunction'">'24h'&lt;/call>

  &lt;call-with-list function="'OneRequiredArgFunction'">
    &lt;call-list-arg>'24h'&lt;/call-list-arg>
  &lt;/call-with-list></b>
</PRE>

Goal: Illustrate the specification of a function which requires two map arguments (returnCode
and result) and has one optional argument (msg).  If the two required arguments are
not passed to it when called, a STAXFunctionArgValidate signal is raised and the function is
not run.  A function prolog element is provided to describe what this function does
and descriptions of the arguments passed to the function are also provided.
<PRE>
  <b>&lt;function name="Check-STAFCmd-RC" scope="local">

    &lt;function-prolog>
      Checks if a STAFCmd was successful and updates testcase status
    &lt;/function-prolog>

    &lt;function-map-args>

      &lt;function-required-arg name="returnCode">
        Return Code from a STAF Command
      &lt;/function-required-arg>

      &lt;function-required-arg name="result">
        Result from a STAF Command
      &lt;/function-required-arg>

      &lt;function-optional-arg name="msg" default="''">
        Message to display if an error occurs
      &lt;/function-optional-arg>

    &lt;/function-map-args></B>

    &lt;if expr="RC == 0">
      &lt;tcstatus result="'pass'"/>
      &lt;else>
        &lt;tcstatus result="'fail'">
          '%s; RC=%s, Result=%s' % (msg, returnCode, result)
        &lt;/tcstatus>
      &lt;/else>
    &lt;/if>

  <b>&lt;/function></b>

  This function could be called in any of the following ways with the same result:

  <b>&lt;call function="'Check-STAFCmd-RC'">
    { 'returnCode': RC, 'result': STAFResult, 'msg': 'This is the error message' }
  &lt;/call>

  &lt;call-with-map function="'Check-STAFCmd-RC'">
    &lt;call-map-arg name="'result'">STAFResult&lt;/call-map-arg>
    &lt;call-map-arg name="'returnCode'">RC&lt;/call-map-arg>
    &lt;call-map-arg name="'msg'">'This is the error message'&lt;call-map-arg>
  &lt;/call-with-map></B>
</PRE>

Goal: Illustrate the specification of a function which requires a list argument (machName)
and may have any number of additional arguments which will be stored in a list called
testList.  This example also shows the use of a STAXGlobal variable which is updated
across STAX-Threads.
<PRE>
<b>&lt;function name="RunTests" scope="local">

    &lt;function-list-args>
      &lt;function-required-arg name="machName"/>
      &lt;function-other-args name="testList"/>
    &lt;/function-list-args></B>

    &lt;sequence>

      <b>&lt;script>
        testsRun = STAXGlobal([0])   # Number of tests run
      &lt;/script></B>

      &lt;paralleliterate var="testName" in="testList">

        &lt;sequence>

          &lt;process>
            &lt;location>machName&lt;/location>
            &lt;command mode="'shell'">testName&lt;/command>
          &lt;/process>

          <b>&lt;script>testsRun[0] += 1&lt;/script></B>

        &lt;/sequence>

      &lt;/paralleliterate>

      &lt;message>'Ran %s tests' % testsRun[0]&lt;/message>

    &lt;/sequence>

  <b>&lt;/function></B>

  This function could be called in any of the following ways with the same result:

  <b>&lt;call function="'RunTests'">
    'local', 'ping machineA', 'dir C:\ > C:\out'
  &lt;/call>

  &lt;call function="'RunTests'">
    [ 'local', 'ping machineA', 'dir C:\ > C:\out' ]
  &lt;/call>

  &lt;call-with-list function="'RunTests'">
    &lt;call-list-arg>'local'&lt;/call-list-arg>
    &lt;call-list-arg>'ping machineA'&lt;/call-list-arg>
    &lt;call-list-arg>'dir C:\ > C:\out'&lt;call-list-arg>
  &lt;/call-with-list></B>
</PRE>

Goal: Illustrate the specification of a function that includes a complete desription of
the function using the <B>function-prolog</B> and <B>function-epilog</B> elements.  These
elements utilize a CDATA section so that the text can include standard HTML markup so that
when transformed via an XSLT processor (or by using the STAXDoc tool), the text is easily readable.
Note this function is actually provided in the sample STAXUtil.xml file provides in the
STAX zip/tar file.
<PRE>
  <b>&lt;function name="STAXUtilLogAndMsg" scope="local">

    &lt;function-prolog>
      &lt;![CDATA[
      &lt;p>
        Logs a message and sends the message to the STAX Monitor.
        It's a shortcut for specifying the &lt;message> and &lt;log> elements
        for the same message.
      &lt;/p>
      ]]>
    &lt;/function-prolog>

    &lt;function-epilog>
      &lt;![CDATA[
      &lt;h4>Returns:&lt;/h4>
      &lt;p>Nothing.  That is, STAXResult = None.&lt;/p>
      &lt;h4>Example:&lt;/h4>
      &lt;pre>
  &lt;call function="'STAXUtilLogAndMsg'">'Here is my message'&lt;/call>&lt;/pre>
      ]]>
    &lt;/function-epilog>

    &lt;function-list-args>

      &lt;function-required-arg name="message">
        The message you want to log in the STAX Job User log and to send to
        the STAX Monitor.
      &lt;/function-required-arg>

      &lt;function-optional-arg name="level" default="'info'">
        The level of the message to be logged in the STAX Job User log.
      &lt;/function-optional-arg>

    &lt;/function-list-args></B>

    &lt;sequence>

      &lt;message>message&lt;/message>

      &lt;log level="level">message&lt;/log>

    &lt;/sequence>

  <b>&lt;/function></B>
</PRE>

Goal: Illustrate the specification of a function that accepts a map of
&lt;function-arg-def> elements.  It also demonstrates how function arguments
can be denoted as containing private data, as well as defining an enumerated
list of values for a function argument.  This example includes an argument
named "color" that allows values of "red" (which would be the default
selection in any form of graphical selection), "blue", and "green".
<PRE>
  <b>&lt;function name="RunCommand"></B>
  <b>
    &lt;function-map-args>
      
      &lt;function-arg-def name="command">
        &lt;function-arg-description>
           A command to execute
        &lt;/function-arg-description>
      &lt;/function-arg-def>

      &lt;function-arg-def name="user" type="optional" default="'anonymous'">
        &lt;function-arg-description>
          The user id to run the command under
        &lt;/function-arg-description>
      &lt;/function-arg-def>

      &lt;function-arg-def name="password" type="optional">
        &lt;function-arg-description>
          The password for the user id
        &lt;/function-arg-description>
        &lt;function-arg-private/>
      &lt;/function-arg-def>

      &lt;function-arg-def name="numTimes" type="optional" default="1">
        &lt;function-arg-description>
          The number of times to run the command
        &lt;/function-arg-description>
        &lt;function-arg-property name="type" value="int"/>
      &lt;/function-arg-def>

      &lt;function-arg-def name="color" type="required">
        &lt;function-arg-description>
          This is the color of the entity
        &lt;/function-arg-description>
        &lt;function-arg-property name="type" value="enum">
          &lt;function-arg-property-description>
            This defines this argument as an enumeration
          &lt;/function-arg-property-description>
          &lt;function-arg-property-data type="choice" value="'red'">
            &lt;function-arg-property-data type="default"/>
          &lt;/function-arg-property-data>
          &lt;function-arg-property-data type="choice" value="'blue'"/>
          &lt;function-arg-property-data type="choice" value="'green'"/>
        &lt;/function-arg-property>
      &lt;/function-arg-def>

    &lt;/function-map-args>
  </b>
  <b>&lt;function></B>
  
  Here is an example of calling this function:

  <b>
  &lt;call function="'RunCommand'">
    {
      'command' : 'TestA', 
      'user'    : 'test',
      'password': 'secret',
      'numTimes': 5,
      'color'   : 'red'
    }
  &lt;/call></b>
</PRE>

<h2><a name="Header_Call" href="#ToC_Call">call:  Call a Function</a></h2>

The <b>call</b> element specifies the name of a <b>function</b> element
to be executed. When a <b>call</b> element is executed during the job execution,
the function referred to is executed.  The <b>call</b> element has the following required attribute:
<ul>
<li><b>function</b> - is the name of the function to call.  Its value must evaluate via
Python to a string.  There must be a function element that exists whose name exactly matches,
including case, the evaluated string.
</ul>
<P>
Optionally, arguments may be passed when calling a function. The arguments are
evaluated via Python in the caller's namespace.  If no argument data is specified,
then special Python object None is passed to the function.
Any kind of argument data can be passed to functions using the &lt;call> element and all of the
types of function arguments (&lt;function-no-args>, &lt;function-single-arg>, &lt;function-list-args>,
or &lt;function-map-args>) may be specified via this mechanism.

<h4>
Usage:</h4>
Goal: Call a function named 'FunctionA', passing no arguments.
<pre>  <b>&lt;call function="'FunctionA'"/></b></pre>
Goal: Serially call each function (passing no arguments) whose name is in a list.
<pre>  &lt;iterate var="funcName" in="['FuncA','FuncB','FuncC','FuncD']">
  <b>&nbsp; &lt;call function="funcName"/>
  </b>&lt;/iterate></pre>

Goal: Call a function which expects one argument.
<PRE>  <B>&lt;call function="'FunctionWithOneArg'">'Hi'&lt;/call></B></PRE>

Goal: Call a function which expects a list of three arguments.
<pre>
  <b>&lt;call function="'FunctionWithThreeArgs'">
    5, 'This is a message', ['test1', 'test2']
  &lt;/call></b>
or
  <B>&lt;call function="'FunctionWithThreeArgs'">
    [ 5, 'This is a message', ['test1', 'test2'] ]
  &lt;/call></B></pre>

Goal: Call a function which expects a map of two required values named "testList" and
"machineList":
<PRE>  <b>&lt;call function="'Foo'">
    {
      'testList' : ['test1', 'test2'],
      'machineList' : ['machine1', 'machine2']
    }
  &lt;/call></B></PRE>

<h2><a name="Header_call-with-list" href="#ToC_call-with-list">call-with-list:  Call a Function with a Argument List</a></h2>

The <b>call-with-list</b> element specifies the name of a <b>function</b> element
to be executed. When a <b>call-with-list</b> element is executed during the job execution,
the function referred to is executed.The <b>call-with-list</b> element has the following
required attribute:
<ul>
<li><b>function</b> - is the name of the function to call.  Its value must evaluate via
Python to a string.  There must be a function element that exists whose name exactly matches,
including case, the evaluated string.
</ul>
<P>
The <B>call-with-list</B> element can contain any number of <B>call-list-arg</B> elements.
Each <B>call-list-arg</B> element contains a value for an argument which is evaluated via
Python in the caller's namespace and will be passed to the function in the form of a list.
<h4>
Usage:</h4>
Goal: Call a function named 'FunctionWithArgs' passing it three arguments in the form of a list.
<pre>
  <b>&lt;call-with-list function="'FunctionWithArgs'">
    &lt;call-list-arg>5&lt;/call-list-arg>
    &lt;call-list-arg>'This is a message'&lt;/call-list-arg>
    &lt;call-list-arg>['test1', 'test2']&lt;/call-list-arg>
  &lt;/call-with-list></b></pre>

Note that this is equivalent to the following examples which use the <B>call</B> element instead:
<pre>
  <B>&lt;call function="'FunctionWithArgs'">
    5, 'This is a message', ['test1', 'test2']
  &lt;/call>

  &lt;call function="'FunctionWithArgs'">
    [ 5, 'This is a message', ['test1', 'test2'] ]
  &lt;/call></B></pre>

<h2><a NAME="Header_call-with-map" href="#ToC_call-with-map">call-with-map:  Call a Function with a Argument Map</a></h2>

The <b>call-with-map</b> element specifies the name of a <b>function</b> element
to be executed. When a <b>call-with-map</b> element is executed during the job execution,
the function referred to is executed.
The <b>call-with-map</b> element has the following required attribute:
<ul>
<li><b>function</b> - is the name of the function to call.  Its value must evaluate via
Python to a string.  There must be a function element that exists whose name exactly matches,
including case, the evaluated string.
</ul>
<P>
The <B>call-with-map</B> element can contain any number of <B>call-map-arg</B> elements.
Each <B>call-map-arg</B> element has a required name attribute and contains an argument value.
Both the name attribute and the argument value are evaluated via Python in the caller's namespace.
The arguments are passed to the function in the form of a map of name/value pairs (also known
as a dictionary in Python).
<h4>
Usage:</h4>
Goal: Call a function named 'FunctionWithArgs' passing it three arguments in the form of a map (Python dictionary).
<pre>
  <b>&lt;call-with-map function="'FunctionWithArgs'">
    &lt;call-map-arg name="'size'">5&lt;/call-map-arg>
    &lt;call-map-arg name="'msg'">'This is a message'&lt;/call-map-arg>
    &lt;call-map-arg name="'testList'">['test1', 'test2']&lt;/call-map-arg>
  &lt;/call-with-map></b></pre>

Note that this is equivalent to the following example which uses the <B>call</B> element instead:
<pre>  <B>&lt;call function="'FunctionWithArgs'">
    {'size' : 5, 'msg' : 'This is a message', 'testList' : ['test1', 'test2'] }
  &lt;/call></B></pre>

<h2><a name="Header_Defaultcall" href="#ToC_Defaultcall">defaultcall:  Specify Default Starting Function To Call</a></h2>

The <b>defaultcall</b> element specifies the name of the function to
call to start the job if no FUNCTION parameter is specified when the job
is started using an EXECUTE request.  The <b>defaultcall</b> element
has the following required attribute:
<ul>
<li><b>function</b> - is the name of the function to call.
It is a literal and so it cannot contain a variable as it is not evaluated via Python.
There must be a function element that exists whose name exactly matches (including case).
</ul>
<P>
Optionally, arguments may be passed via the <b>defaultcall</b> element. The arguments are
evaluated via Python.  If no argument data is specified, then special Python object None
is passed to the function.
Any kind of argument data can be passed to functions using the <b>defaultcall</b> element and all of the
types of function arguments (<B>function-no-args</b>, <b>function-single-arg</b>, <b>function-list-args</B>,
or <b>function-map-args</B>) may be specified via this mechanism.
<p>
A <b>defaultcall</b> element may only be defined within
the root <b>stax</b> element, but it is not required.&nbsp; If a <b>defaultcall</b>
element is not specified, a FUNCTION parameter on the STAX EXECUTE request
must be specified.
<h4>
Usage:</h4>
Goal: Call FunctionA by default to start the STAX job.  No arguments are passed to FunctionA.
<pre>&lt;stax>
&nbsp;
<b>&nbsp; &lt;defaultcall function="FunctionA"/></b>

&nbsp; &lt;function name="FunctionA">
&nbsp;&nbsp;&nbsp; ...
&nbsp; &lt;/function>
&nbsp; ...
&nbsp;
&lt;/stax></pre>
Goal: Call FunctionA by default to start the STAX job.  Pass a list of 2 arguments (duration and
testList) to FunctionA.
<pre>&lt;stax>
&nbsp;
<b>&nbsp; &lt;defaultcall function="FunctionA">[ '24h', ['machA', 'machB'] ]&lt;/defaultcall></b>

  &lt;function name="FunctionA">
    &lt;function-list-args>
      &lt;function-required-arg name="duration"/>
      &lt;function-optional-arg name="testList" default="['local']"/>
    &lt;/function-list-args>
    ...
  &lt;/function>
  ...

&lt;/stax></pre>

<h2><a name="Header_Return" href="#ToC_Return">return:  Return from a Function</a></h2>

The <b>return</b> element ends the function call and sends a result back to the caller.
The <b>return</b> element is optional; if it's not present, a function exits when control
flow falls off the end of the function body.
<p>
<p>After the call of a function has completed, the <B>STAXResult</b> variable
contains the result sent back from the call. It can be set to any type of object.
For example, an integer, a list, a string, etc.
This can be especially useful when the function called is defined with a <B>local</B> scope.
<P>
If no <b>return</b> element is specified within a function, or if no value is specified
for the result object, STAXResult is set to the special Python None object.
If an error occurred calling the function (e.g. invalid arguments, Python Evaluation error),
STAXResult is set to a result object called STAXFunctionError.
<P>
Note that because the return sends back any sort of object, it can return multiple values,
by packaging them as a tuple.  Thus, call by reference can be simulated by
returning tuples and assigning back to the original argument names in the caller.  See the
last example in the Usage section.
<p>
If a value is specified for the return element, it is evaluated via Python.
<p>
The <b>return</b> element has no attributes.

<h4>
Usage:</h4>
Goal: Return control to the caller with STAXResult set to RC (e.g. an integer value
set by a process or STAF command).
<pre>
  <b>&lt;return>RC&lt;/return></b>
</PRE>
Goal: Return control to the caller with STAXResult set to None.
<PRE>
  <b>&lt;return/></b>
</PRE>
Goal: Return control to the caller with STAXResult set to a list.  The caller can access the
RC by specifying STAXResult[0] and the message by specifying STAXResult[1].
<PRE>
  <b>&lt;return>[RC, 'A descriptive message']&lt;/return></b>
</PRE>
Goal: Simulate call by reference by returning new values in a tuple and assigning the
results to the caller's names.  After the call, A = 3 and B = ['test1', 'test2', 'test3']
<PRE>
&lt;function name="FunctionPassByReference" scope="local">

  &lt;function-list-args>
    &lt;function-required-arg name="x"/>
    &lt;function-required-arg name="y"/>
  &lt;/function-list-args>

  &lt;sequence>
    &lt;script>
      x = x + 2
      y.append('test3')
    &lt;/script>
    <b>&lt;return>x, y&lt;/return></B>
  &lt;/sequence>

&lt;/function>

The above function is called from another function as follows:

&lt;script>
  A = 1
  B = ['test1', 'test2']
&lt;/script>

&lt;call function="'FunctionPassByReference'">A, B&lt;/call>

&lt;script>
  <B>A, B = STAXResult</B>
&lt;/script>
</PRE>

<h2><a name="Header_Import" href="#ToC_Import">import: Import Functions From Other STAX XML Job Files</a></h2>

The <b>import</b> element specifies a set of functions to be imported from other STAX XML file(s).
The <b>import</b> element has the following attributes:
<ul>
<li><b>file</b> - is the name of the STAX XML file from which the function(s) will be
imported.  Its value is evaluated via Python.  Any STAF variables contained in the
file name will be resolved on the STAX service machine.  You must specify either the
<b>file</b> attribute or the <b>directory</b> attribute, but not both. 
<p>
  <ul>
  <li>If the <b>machine</b> attribute is specified, the <b>file</b> attribute should
      specify the fully-qualified path to the STAX XML file (an absolute file name).
  <p>
  <li>If the <b>machine</b> attribute is not specified, the <b>file</b> attribute can
      specify either the fully-qualified path to the STAX XML file (an absolute file name),
      or a relative path to the STAX XML file.  It must be relative to the parent directory
      of the current STAX XML file (STAXCurrentXMLFile).  A relative path can only be
      specified if the file being imported resides on the same machine as the STAX XML
      file that is importing the file (STAXCurrentXMLMachine).
      Using the relative path name allows a group of STAX XML files to be moved to
      different machines without modification to the <b>import</b> elements in your
      STAX XML files (assuming the same sub-directory structure that contains these
      files is maintained).
  </ul>
<p>
<li><b>directory</b> - is the name of a directory that contains STAX XML files from which
    functions will be imported.  Its value is evaluated via Python.  Any STAF variables
    contained in the directory name will be resolved on the STAX service machine.
    You must specify either the <b>file</b> attribute or the <b>directory</b> attribute,
    but not both.  All functions from the files contained within this directory that end
    in .xml (case-insensitive) will be imported.  Subdirectories within the directory are
    ignored.  You cannot specify a subset of functions to import when using the
    <b>directory</b> attribute (that is, you cannot specify the <b>import-include</b> or
    the <b>import-exclude</b> element when the <b>directory</b> attribute is specified).  
<p>
  <ul>
  <li>If the <b>machine</b> attribute is specified, the <b>directory</b> attribute should
      specify the fully-qualified path (an absolute path) to the directory containing
      STAX XML files.
  <p>
  <li>If the <b>machine</b> attribute is not specified, the <b>directory</b> attribute can
      specify either the fully-qualified path (an absolute path) to a directory containing
      STAX XML files, or a relative path to the directory.  It must be relative to the
      parent directory of the current STAX XML file (STAXCurrentXMLFile).
      A relative path can only be specified if the directory being imported resides on
      the same machine as the STAX XML file that is importing the file (STAXCurrentXMLMachine).
      Using the relative path name allows a group of STAX XML files to be moved to
      different machines without modification to the <b>import</b> elements in your
      STAX XML files (assuming the same sub-directory structure that contains
      these files is maintained).
  </ul>
<p>
<li><b>machine</b> - is the name of the machine where the STAX XML file or directory is located.
It is optional.  Its value is evaluated via Python.  Any STAF variables contained in the machine
name will be resolved on the STAX service machine.  If the machine attribute is not specified,
it will default to STAXCurrentXMLMachine which specifies the machine where the STAX XML
job file that contains the &lt;import> element resides.
<p>
<li><b>replace</b> - specifies what to do if a function already exists.  It is optional.
    Its value is evaluated via Python.  Its default value is 0, a false value.
  <p>
  <ul>
    <li>If it evaluates to a "false" value (e.g. 0), then functions that already exist
        will not be replaced.   This is the default.
    <li>If it evaluates to a "true" value (e.g. 1), then functions that already exist
        (e.g. have already been imported or were defined in the STAX xml file
        being executed) will be replaced.
  </ul>
  <p>
  Note that in Python, true means any nonzero number or nonempty object;
  false means not true, such as a zero number, an empty object, or None.
<p>
<li><b>mode</b> - specifies what happens when an error occurs when importing functions.
    It is optional.  Its value must evaluate via Python to one of the following:
  <p>
  <ul>
    <li>'error' - specifies that a signal will be raised if an error occurs.  This is the default.
    <li>'ignore' - specifies that no signal will be raised if an error occurs.  However,
    STAXResult will contain information about the error.
  </ul>
</ul>
<p>
The <b>import</b> element contains the following optional elements:
<ul>
<li>
<b>import-include</b> - It specifies a list of the the functions to import from the xml file.
Its value must evaluate via Python to a list.
This element cannot be specified when the <b>directory</b> attribute is used.
</li>
<li>
<b>import-exclude</b> - It specifies a list of functions which will not be imported from the xml file.
Its value must evaluate via Python to a list.
This element cannot be specified when the <b>directory</b> attribute is used.
</li>
</ul>
If <b>&lt;import-include></b> is not present, then all functions will be imported (bound by any exclude list).
If <b>&lt;import-exclude></b> is not present, then no functions will be excluded.
<p>
The <b>&lt;import-include></b> and <b>&lt;import-exclude></b> elements support grep matching.
<p>After executing an <b>import</b> element, the STAXResult variable will be set as follows:
<ul>
  <li>If the <b>file</b> attribute was specified, STAXResult will be set to a list containing:
  <ul>
  <li>STAXResult[0]: Either None (if the xml file wass imported successfully),
      or a list containing a STAXImportError object and a text string with details about the error.
  <li>STAXResult[1]: A list of the successfully imported functions that were requested to be imported.
  <li>STAXResult[2]: A list of the successfully imported functions that were required by other functions.
  <li>STAXResult[3]: A list of the functions that were requested to be imported but already existed and replace was not specified (so they were not imported).
  <li>STAXResult[4]: A list of the functions that were required by other functions but already existed and replace was not specified (so they were not imported).
  <li>STAXResult[5]: A list of the functions that were not requested to be imported and were not required by other functions.
  <li>STAXResult[6]: A list of functions requested to be imported that were not found.
  </ul>
  <p>
  <li>If the <b>machine</b> attribute was specified, STAXResult will be set to a list containing:
  <ul>
  <li>STAXResult[0]: Either None (if all the xml files in the directory were imported successfully),
      or a list containing a STAXImportDirectoryError object and a string containing an error message
      identifying the directory that could not be successfully imported.
  <li>STAXResult[1]: A list containing information about the files in the directory that were successfully
      imported, and/or detailed information about any errors that occurred while importing files from
      the directory.  Each entry in this list will contain:
      <ul>
      <li>STAXResult[0]: Either the name of the file in the directory that was successfully imported, or
          (if an error occurred), a list containing a STAXImportError object and a text string with details
          about the error.
      <li>STAXResult[1]: A list of the successfully imported functions that were requested to be imported.
      <li>STAXResult[2]: A list of the successfully imported functions that were required by other functions.
      <li>STAXResult[3]: A list of the functions that were requested to be imported but already existed and replace was not specified (so they were not imported).
      <li>STAXResult[4]: A list of the functions that were required by other functions but already existed and replace was not specified (so they were not imported).
      <li>STAXResult[5]: A list of the functions that were not requested to be imported and were not required by other functions.
      <li>STAXResult[6]: A list of functions requested to be imported that were not found.
      </ul>
  </ul>
<p>
If an error occurs while executing an <b>import</b> element, a STAXImportError signal will be raised
if its mode is 'error' (or if it's mode is invalid, e.g. not 'error' or 'ignore').
When a STAXImportError signal is raised, the variable STAXSignalData will be set to a list containing
an error type object and a string containg the error description.
The possible error types for STAXImportError are:
<ul>
<li>STAXNoResponseFromMachine - the machine specified could not be contacted
<li>STAXFileCopyError - an error occurred while copying the xml file
<li>STAXXMLParseError - an XML parse error occurred while parsing the imported XML file
<li>STAXImportModeError - an import mode specified is not valid
<li>STAXImportDirectoryError - an error occurred while importing xml files from a directory
</ul>
<p>
If you override the default Signal Handler for STAXImportError, you can access the error type in this manner:
<pre>
<b>&nbsp;&nbsp;&lt;if expr="STAXSignalData[0] is STAXNoResponseFromMachine"></b>
</pre>
<p>
If file caching is enabled, the file cache will be checked for an up-to-date copy of the imported file
before loading and parsing the XML from the target machine.  For a file cache hit to occur, the
imported file's name and machine must match a file cache entry.  If the file is retrieved from cache, there can be
an increase in the performance of the import operation.  For more information on how caching works,
refer to the <a href="#Header_StaxFileCache">"STAX File and Machine Caching"</a> section.
<h4>
Usage:</h4>
The <b>import</b> element may be specified anywhere except in the root &lt;stax> element.
This allows it to be executed at runtime, allowing Python expressions to be used in the <import>
element and enabling dynamic importing of functions.
The <b>import</b> element acts like any other element and is not executed until runtime.
This is unlike the <b>function-import</b> element which is handled before runtime (if not using
any <b>import</b> elements), so you cannot use Python expressions in the <b>function-import</b>
element.
<p>
Note that after an <b>import</b> element is executed, any other function can then call the imported function.
So, for example, if functionA calls functionB and then functionC, and functionB imports functionX,
functionC can call functionX without doing another import.  If you have many functions to import,
you can also create a function which does all of the imports and is the first function which is called
in your job.
<p>
The following example of the <b>import</b> element specifies a relative path
to the files to be imported.  Using the relative path name allows a group of
STAX XML files to be moved to different machines without modification
to the &lt;import> elements in your STAX XML files (assuming the same
sub-directory structure that contains these files is maintained).
So if the following STAX XML files resided on the same machine:
<pre>
  /stax/MyApp/job1.xml
  /stax/MyApp/commonLib.xml
  /stax/libraries/library1.xml
  /stax/libraries/library2.xml
</pre>
and you wanted file <tt>/stax/MyApp/job1.xml</tt> to import all functions from
files <tt>/stax/MyApp/commonLib.xml</tt>, <tt>/stax/common/library1.xml</tt>,
and <tt>stax/common/library2.xml</tt>,
you could do this as follows:
<pre>
  <b>&lt;import file="'commonLib.xml'"/></b>
  <b>&lt;import file="'../libraries/library1.xml'"/></b>
  <b>&lt;import file="'../libraries/library2.xml'"/></b>
</pre>
Or, instead of specifying two <b>import</b> elements to import the two xml files from /stax/libraries,
you could use the directory attribute and do it as follows:
<pre>
  <b>&lt;import file="'commonLib.xml'"/></b>
  <b>&lt;import directory="'../libraries'"/></b>
</pre>
Note that this would be equivalent to specifying:
<pre>
  <b>&lt;import machine="STAXCurrentXMLMachine" file="'%s/../commonLib.xml' % (STAXCurrentXMLFile)"/></b>
  <b>&lt;import machine="STAXCurrentXMLMachine" directory="'%s/../../libraries' % (STAXCurrentXMLFile)"/></b>
</pre>
<p>
The following example of an <b>import</b> element imports all functions from file c:\util\library.xml,
which is located on machine Server1A.
&nbsp;
<pre>
<b>&nbsp; &lt;import machine="'Server1A'" file="'c:/util/library.xml'"/></b>
</pre>
<p>
The following example of an <b>import</b> element imports all functions from file c:\util\library.xml,
which is located on machine Server1A and replaces any functions that already exist (e.g. that were
already imported or defined in the xml file being executed).
&nbsp;
<pre>
<b>&nbsp; &lt;import machine="'Server1A'" file="'c:/util/library.xml'" replace="1"/></b>
</pre>
<p>
The following example of an <b>import</b> element only imports functions FunctionA and FunctionB.
<pre>
<b>&nbsp; &lt;import machine="'Server1A'" file="'c:/util/library.xml'">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;import-include>['FunctionA', 'FunctionB']&lt;/import-include>
&nbsp; &lt;/import></b>
</pre>
The following example of an <b>import</b> element imports all functions except those that start with "FunctionA".
<pre>
<b>&nbsp; &lt;import machine="'Server1A'" file="'c:/util/library.xml'">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;import-exclude>['FunctionA.*']&lt;/import-exclude>
&nbsp; &lt;/import></b>
</pre>
The following example of an <b>import</b> element imports all functions that start with "MyFuncs" but
do not start with "MyFuncsWin32".
<pre>
<b>&nbsp; &lt;import machine="'Server1A'" file="'/usr/local/util/library.xml'">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;import-include>['MyFuncs.*']&lt;/import-include>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;import-exclude>['MyFuncsWin32.*']&lt;/import-exclude>
&nbsp; &lt;/import></b>
</pre>
<p>
The following example of an <b>import</b> element imports all functions from all .xml files
in directory /stax/common which is located on the STAXCurrentXMLMachine:
<pre>
<b>&nbsp; &lt;import directory="'/stax/common'"/></b>
</pre>
<p>
The following example of an <b>import</b> element imports all functions from
file '{STAF/Config/STAFRoot}/services/stax/libraries/STAXUtil.xml' which is
located on the STAXCurrentXMLMachine.  Note that the STAF variable denoted by
{STAF/Config/STAFRoot} will be resolved on the STAX service machine.
<pre>
<b>&nbsp; &lt;import file="'{STAF/Config/STAFRoot}/services/stax/libraries/STAXUtil.xml'"/></b>
</pre>
<p>
Here's is a more complete snippet of a STAX job that shows an <b>import</b> element that is called by the
job's starting function so that the imported functions can then be called throughout the job, from any function.
This <b>import</b> element imports all of the functions provided in STAXUtil.xml.
Refer to the <a href="#Header_STAXUtil">"STAX Utility Functions"</a> section for more information
about common functions like STAXUtilLogAndMsg that are provided in the STAXUtil.xml file.
<pre>
&lt;stax>

  &lt;defaultcall function="main"/>

  &lt;script>
    # ImportMachine should be set to the machine where STAXUtil.xml resides
    # (e.g. 'local' if the file resides on the STAX service machine).
    # ImportDirectory should be set to the directory which contains file STAXUtil.xml.

    ImportMachine = 'local'
    ImportDirectory = 'C:/STAF/services/stax/libraries'
    ImportFile1 = '%s/STAXUtil.xml' % (ImportDirectory)
  &lt;/script>
  
  &lt;function name="main">
    &lt;sequence>

      <b>&lt;import machine="ImportMachine" file="ImportFile1"/></b>
      
      &lt;call function="'STAXUtilLogAndMsg'">
        'This is the beginning of the job'
      &lt;/call>

      &lt;call function="'FunctionA'"/>
      &lt;call function="'FunctionB'"/>

    &lt;/sequence>
  &lt;/function>

  &lt;function name="FunctionA">
    &lt;sequence>

      &lt;call function="'STAXUtilLogAndMsg'">
        'This is the beginning of FunctionA'
      &lt;/call>

      &lt;!-- Add elements as needed -->

    &lt;/sequence>
  &lt;/function>

  &lt;function name="FunctionB">
    &lt;sequence>

      &lt;call function="'STAXUtilLogAndMsg'">
        'This is the beginning of FunctionB'
      &lt;/call>

      &lt;!-- Add elements as needed -->

    &lt;/sequence>
  &lt;/function>

&lt;/stax>
</pre>

<h2><a name="Header_Stax_Loops" href="#ToC_Stax_Loops">Loops</a></h2>

The <a href="#Header_Loop">loop</a>, <a href="#Header_Iterate">iterate</a>,
<a href="#Header_Break">break</a>, and <a href="#Header_Continue">continue</a> elements
deal with repeatedly executing a task.

<h2><a name="Header_Loop" href="#ToC_Loop">loop:  Run a Task Repeatedly</a></h2>

The <b>loop</b> element contains a single <b><i>task</i></b> element which
may be executed a specified number of times, allowing specification of
an upper and lower bound with an increment value and where the index counter
is available to the contained <i><b>task</b></i> element. In addition,
specification of a while and/or until expression is allowed.  If no
constraint attributes (e.g. to, until, or while) are specified for the
<b>loop</b> element, then it loops "forever".
<p>
The <b>loop</b> element has the following optional attributes:
<ul>
<li>
<b>var</b> - is the name of the variable which will contain the loop index variable.
It is a literal.  It is optional.</li>

<li>
<b>from</b> - is the starting value of the loop index variable. It defaults
to 1 if not specified.  It must evaluate to an integer value via Python.</li>

<li>
<b>to</b> - is the maximum value of the loop index variable.
It must evaluate to an integer value via Python.  It is optional.</li>

<li>
<b>by</b> - is the increment value for the loop index variable. It defaults
to 1 if not specified.  It must evaluate to an integer value via Python.</li>

<li>
<b>while</b> - is an expression that must evaluate to a boolean value via Python and
is performed at the top of each loop. If it evaluates to false, it breaks
out of the loop. It is optional.</li>

<li>
<b>until</b> - is an expression that must evaluate to a boolean value via Python and
is performed at the bottom of each loop. If it evaluates to true, it breaks
out of the loop. It is optional.</li>
</ul>

<h4>
Usage:</h4>
The following example of a <b>loop</b> element executes a process five
times.
<pre><b>&lt;loop from="1" to="5">
</b>&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp; &lt;location>'machA.austin.ibm.com'&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;command>'P3.exe'&lt;/command>
&nbsp; &lt;/process>
<b>&lt;/loop></b></pre>
The following example of a <b>loop</b> element serially calls each function
in a list named funcList until the return code set in a called function
is not 0.
<pre>&lt;script>funcList = ['Func1','Func2','Func3','Func4']&lt;/script>
<b>&lt;loop var="funcIndex" from="0" to="3" until="RC != 0">
</b>&nbsp; &lt;call function="funcList[<b>funcIndex</b>]"/>
<b>&lt;/loop></b></pre>
The following example of a <b>loop</b> element loops "forever".  The job
will not end until the block containing the continuous loop is terminated.
Function 'LongFunction' runs in parallel with a block that runs
function 'ShortFunction' in a forever loop.  When function 'LongFunction'
completes, the block containing the "forever" loop is terminated so
that the job may complete.
<pre>
&lt;parallel>

  &lt;sequence>
    &lt;call function="'LongFunction'"/>
    &lt;terminate block name="'main.LoopForever'"/>
  &lt;/sequence>

  &lt;block name="'LoopForever'">
    <b>&lt;loop></b>
      &lt;call function="'ShortFunction'"/>
    <b>&lt;/loop></b>
  &lt;/block>

&lt;/parallel>
</pre>

<h2><a name="Header_Iterate" href="#ToC_Iterate">iterate:  Iterate a List and Run Each Iteration In Sequence</a></h2>

The <b>iterate</b> element contains a single <b><i>task</i></b> element.&nbsp;
The<b> iterate</b> element performs the task for each value in a list.
The iterations of the contained <b><i>task</i></b> element are executed
serially (unlike the <b>paralleliterate</b> element whose tasks are performed
in parallel). The <b>iterate</b> element has the following attributes:
<ul>
<li>
<b>var</b> - is the name of the variable which will contain the current
item in the list/tuple being iterated. It is a literal and
is required.</li>

<li>
<b>in</b> - is the list to be iterated. It is evaluated via Python and
must evaluate to be a list or tuple. It is required.  Here are some examples
of <b>in</b> attribute assignments: </li>
  <ul>
    <li>the name of the variable that is a list or tuple:  in="machList"</li>
    <li>a literal list:  in="['machA','machB','machC']"</li>
    <li>a literal tuple:  in="('testA','testB')"</li>
    <li>a slice of a list/tuple:  in="machList[1:]"</li>
    <li>a concatenation of lists/tuples:  in="machList1 + ['machD','machE']"</li>
  </ul>

<li>
<b>indexvar</b> - is the name of the variable which will contain the index of
the current item in the list/tuple being iterated. It
is a literal and is optional.  Note that the index for the first element
in the list/tuple is 0.</li>
</ul>

<h4>
Usage:</h4>
The following example of an <b>iterate</b> element runs a STAF RESPOOL RELEASE
request to release each machine name in a list.
<pre>&lt;script>allocMachList = ['machA','machB','machC']&lt;/script>
<b>&lt;iterate var="machName" in="allocMachList">
</b>&nbsp; &lt;stafcmd>
&nbsp;&nbsp;&nbsp; &lt;location>'machine1.austin.ibm.com'&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;service>'RESPOOL'&lt;/service>
&nbsp;&nbsp;&nbsp; &lt;request>'RELEASE POOL ClientMachPool ENTRY %s' % <b>machName</b>&lt;/request>
&nbsp; &lt;/stafcmd>
<b>&lt;/iterate></b></pre>
The following example of an <b>iterate</b> element runs each process whose
name is in a list on a machine. In addition, the <b>iterate</b> element
is nested within a <b>paralleliterate</b> element such that this occurs
simultaneously on all machines in the machine list.
<pre>&lt;paralleliterate var="machName" in="['machA','machB','machC']">
<b>&nbsp; &lt;iterate var="procName" in="['proc1','proc2','proc3','proc4']">
</b>&nbsp;&nbsp;&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;command><b>procName</b>&lt;/command>
&nbsp;&nbsp;&nbsp; &lt;/process>
<b>&nbsp; &lt;/iterate>
</b>&lt;/paralleliterate></pre>

<h2><a name="Header_Break" href="#ToC_Break">break:  Jump out of the Closest Enclosing Loop or Iterate</a></h2>

The <b>break</b> element may be used to break out of a <b>loop</b> or<b>
iterate</b> element.
<p>
The <b>break</b> element is an empty element and no attributes.

<h4>
Usage:</h4>
The following example of a <b>break</b> element breaks out of an <b>iterate</b>
element when a non-zero return code is encountered. So if the list contains
"ProcessA", "ProcessB", and "ProcessC" and ProcessA returns 0 but then
ProcessB returns a non-zero RC, ProcessC will not be executed.
<pre><b>&lt;iterate var="processName" in="processList">
</b>&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>'machineA'&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;command>processName&lt;/command>
&nbsp;&nbsp;&nbsp; &lt;/process>
&nbsp;&nbsp;&nbsp; &lt;if expr="RC != 0">
<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;break/>
</b>&nbsp;&nbsp;&nbsp; &lt;/if>
&nbsp; &lt;/sequence>
<b>&lt;/iterate></b></pre>

The following example of a <b>break</b> element breaks out of a <b>loop</b> element when
a non-zero return code is encountered after running ShortTestProcess.  However, since
the loop contains a <b>parallel</b> element, when the break occurs, the other task
running in parallel, LongTestProcess, will be killed in order to exit the loop.
<pre>
&lt;script>className = 'com.ibm.staf.service.stax.TestProcess'&lt;/script>

&lt;function name="LoopParallelBreakTest">

  &lt;loop var="i" from="0" by="1" to="3">

    &lt;sequence>

      &lt;message>'Beginning loop #%s' % i&lt;/message>

      &lt;parallel>

        &lt;sequence>

          &lt;process name="'ShortTestProcess'">
            &lt;location>machName&lt;/location>
            &lt;command>'java'&lt;/command>
            &lt;parms>'%s 2 2 %s' % (className, i-1)&lt;/parms>
          &lt;/process>

          &lt;if expr="RC != 0">
            &lt;sequence>
              &lt;message>'  ShortTestProcess failed with RC=%s' % RC&lt;/message>
              &lt;message>'  Breaking out of loop #%s' % i&lt;/message>
              <b>&lt;break/></b>
            &lt;/sequence>
            &lt;else>
              &lt;message>'  ShortTestProcess completed'&lt;/message>
            &lt;/else>
          &lt;/if>

        &lt;/sequence>

        &lt;sequence>
          &lt;process name="'LongTestProcess'">
            &lt;location>machName&lt;/location>
            &lt;command>'java'&lt;/command>
            &lt;parms>'%s 4 2 0' % className&lt;/parms>
          &lt;/process>
          &lt;message>'  TestProcess2 completed'&lt;/message>
        &lt;/sequence>

      &lt;/parallel>

      &lt;message>'Completed loop #%s' % i&lt;/message>

    &lt;/sequence>

  &lt;/loop>

&lt;/function>

</pre>

Note that the TestProcess class is provided as part of STAX.  Its last input parameter
is the return code that the process will return.
The "Messages" output that you would see if you were monitoring a job running this
function using the STAX Job Monitor would be:
<pre>
Beginning loop #0
  ShortTestProcess completed
  LongTestProcess completed
Completed loop #0
Beginning loop #1
  ShortTestProcess completed
  LongTestProcess completed
Completed loop #1
Beginning loop #2
  ShortTestProcess failed with RC=1
  Breaking out of loop #2
</pre>

<h2><a name="Header_Continue" href="#ToC_Continue">continue:  
Jump to the Top of the Closest Enclosing Loop or Iterate</a></h2>

The <b>continue</b> element may be used to continue to the top of a <b>loop</b>
or <b>iterate</b> element.
<p>
The <b>continue</b> element is an empty element and no attributes.

<h4>
Usage:</h4>
The following example of a <b>continue</b> element continues to the top
of the loop when a non-zero return code is encountered so that ProcessB
is not executed if ProcessA fails on a loop iteration.
<pre><b>&lt;loop var="i" from="1" to="10">
</b>&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>'machA.austin.ibm.com'&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;command>'cmd.exe'&lt;/command>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parms>'ProcessA.exe'&lt;/parms>
&nbsp;&nbsp;&nbsp; &lt;/process>
&nbsp;&nbsp;&nbsp; &lt;if expr="RC != 0">
<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;continue/>
</b>&nbsp;&nbsp;&nbsp; &lt;/if>
&nbsp;&nbsp;&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>'machA.austin.ibm.com'&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;command>'cmd.exe'&lt;/command>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parms>'ProcessB.exe'&lt;/parms>
&nbsp;&nbsp;&nbsp; &lt;/process>
&nbsp; &lt;/sequence>
<b>&lt;/loop></b></pre>

<br>

<h2><a name="Header_Stax_Logic" href="#ToC_Stax_Logic">Conditional</a></h2>

The <a href="#Header_If">if</a> element is a conditional that can control the
logic and flow of the job.

<h2><a name="Header_If" href="#ToC_If">if / elseif / else:  Select a Task To Perform</a></h2>

The <b>if</b> element specifies a conditional. It allows you to specify
a task to execute if an expression is evaluated to be true. It allows optional
<b>elseif</b>
elements and an optional <b>else</b> element to be performed if the expression
is evaluated to be false. The <b>if</b>, <b>else</b>, and <b>elseif</b> elements
may contain a single <b><i>task</i></b> element.
<p>STAX uses Python as the expression evaluator engine.
<h4>
Usage:</h4>
The following example of an <b>if</b> and <b>else</b> element checks the
value of a variable named index to see if it has a zero remainder (even
number), and if so, calls function Ogre1 and, otherwise, calls function
Ogre2.
<pre><b>&lt;if expr="(index % 2) == 0">
</b>&nbsp; &lt;call function="'Ogre1'"/>
<b>&nbsp; &lt;else>
</b>&nbsp;&nbsp;&nbsp; &lt;call function="'Ogre2'"/>
<b>&nbsp; &lt;/else>
&lt;/if></b></pre>
The following example uses a Python random number generator to determine
which of four functions to randomly call:
<pre>
&lt;sequence>

  &lt;script>from random import random&lt;/script>
  &lt;script>r=random()*100&lt;/script>

  <b>&lt;if expr="r > 75"></b>
    &lt;call function="'Function1'"/>
    <b>&lt;elseif expr="r > 50"></b>
      &lt;call function="'Function2'"/>
    <b>&lt;/elseif>
    &lt;elseif expr="r > 25"></b>
      &lt;call function="'Function3'"/>
    <b>&lt;/elseif>
    &lt;else></b>
      &lt;call function="'Function4'"/>
    <b>&lt;/else>
  &lt;/if></b>

&lt;/sequence>
</pre>

<br>

<h2><a name="Header_Stax_Wrappers" href="#ToC_Stax_Wrappers">Wrappers</a></h2>

The <a href="#Header_Block">block</a>, <a href="#Header_Testcase">testcase</a>,
and <a href="#Header_Timer">timer</a> elements
act as a wrapper around a single <b><i>task</i></b> element
and provide additional functionality to the <b><i>task</i></b> element.
<p>
The <a href="#Header_Tcstatus">tcstatus</a> element records the status of a testcase
and must be contained within a testcase wrapper.

<h2><a name="Header_Block" href="#ToC_Block">block:  Define a Task for which Execution Control is Provided</a></h2>

The <b>block</b> element is a wrapper which defines a task for which execution
control is provided. The <b>block</b> element contains a single <b><i>task</i></b>
element. It may be used in conjunction with the <b>hold</b>, <b>release</b>, and
<b>terminate</b> elements and the STAX Service HOLD, RELEASE, and TERMINATE requests to
define a task block that may be held, released, or terminated. Only blocks
that are currently in use (e.g. running or held) can have actions (e.g.
hold, release, or terminate) performed on them.
Note that holding a block means that no additional elements within the block
will be run while the block is held.  However, any elements (e.g. processes,
STAF commands, timers, etc.) within the block that have already started will
continue to run.
<p>Blocks may be nested. A block named 'main' exists that wraps
everything in the job.  For nested blocks, the block name will be in the
hierarchical form of:
<pre>  main.ParentBlockName[.ChildBlockName]...</pre>
when recorded in the STAX logs and queries, so don't use periods, ".", in your
block names. The hierarchical block name must be unique with the parent block's scope.
<p>
The <b>block</b> element has the following attribute:
<ul>
<li>
<b>name</b> - specifies the name of the block.
The value is evaluated via Python to a string.
It is required.  It should not contain periods (for the reason described above).
The hierarchical block name must be unique with the parent block's scope, or
a STAXInvalidBlockName signal will be raised and the &lt;block> element will be
bypassed.</li>
</ul>
<p>
The following variable is set by the STAX execution engine
upon completion of a <b>block</b> element:
<ul>
<li>
<b>STAXBlockRC</b> - specifies the block's return code
  <ul>
  <li>Set to -1 if the block's task could not be started, possibly due to an 
  invalid value for the block name.
  <li>Set to 0 if the block's task was started and the block was not terminated.
  <li>Set to 1 if the block's task was started and the block was terminated.
  </ul>
</ul>

<h4>
Usage:</h4>
This example shows a block which contains a process. The block's name is
the value of a variable named machName. The <b>block </b>element provides
execution control (the ability to hold, release, terminate) for the <b>process</b>
element contained in the <b>block</b> element.
<pre><b>&lt;block name="machName">
</b>&nbsp; &lt;process>&nbsp;
&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;command>'P4.exe'&lt;/command>
&nbsp; &lt;/process>&nbsp;&nbsp;&nbsp;
<b>&lt;/block></b></pre>
Using the following example of the <b>block</b> element, here are some
comments about holding and terminating the blocks:
<ul>
<li>
You can hold Block2, then hold Block1, and then release Block2, and then
release Block1.</li>

<li>
If you hold Block1, you cannot hold Block2 since it's already blocked from
holding Block1.</li>

<li>
If you terminate Block2, then process P4 would be terminated and process
P5 would start running.</li>

<li>
If you terminate Block1, then all the processes currently running in it
would be terminated and process P3 would start running.</li>
</ul>

<pre>&lt;sequence>

&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;command>'P1.exe'&lt;/command>
&nbsp; &lt;/process>


<b>&nbsp; &lt;block name="'Block1'">

</b>&nbsp;&nbsp;&nbsp; &lt;parallel>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;command>'P2.exe'&lt;/command>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/process>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;sequence>

<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;block name="'Block2'">&nbsp;

</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;process>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;command>'P4.exe'&lt;/command>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/process>&nbsp;&nbsp;&nbsp;

<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/block>

</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;command>'P5.exe'&lt;/command>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/process>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/sequence>

&nbsp;&nbsp;&nbsp; &lt;/parallel>&nbsp;&nbsp;

<b>&nbsp; &lt;/block>

</b>&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;command>'P3.exe'&lt;/command>
&nbsp; &lt;/process>

&lt;/sequence></pre>

<p>
Here's another example of using the <b>block</b> element to control
execution of tasks in a STAX job.  This example runs two tasks in paralllel.
The first task run in parallel contains a block named "ServerTest" and
runs a ServerTest process.
The second task run in parallel contains a block named "ClientTest" and
runs a ClientTest process.  After the ClientTest process completes, it
uses the <b>terminate</b> element to terminate the "main.ServerTest" block.
It also logs the block return codes for these two blocks.
<pre>
&lt;parallel>

  &lt;sequence>

    <b>&lt;block name="'ServerTest'"></b>
      &lt;process name="'Server Test'">
        &lt;location>'server1.company.com'&lt;/location>
        &lt;command>'/tests/ServerTest'&lt;/command>
      &lt;/process>
    <b>&lt;/block></b>

    &lt;log message="1">'ServerTest Block RC: %s' % (<b>STAXBlockRC</b>)&lt;/log>

  &lt;/sequence>

  &lt;sequence>

    <b>&lt;block name="'ClientTest'"></b>
      &lt;sequence>

        &lt;process name="'Client Test'">
          &lt;location>'client1.company.com'&lt;/location>
          &lt;command>'/tests/ClientTest'&lt;/command>
        &lt;/process>
        
        &lt;!-- Terminate the Server Test Block after Client Test process runs -->
        <b>&lt;terminate block="'main.ServerTest'"/></b>

      &lt;/sequence>
    <b>&lt;/block></b>

    &lt;log message="1">'ClientTest Block RC: %s' % (<b>STAXBlockRC</b>)&lt;/log>

  &lt;/sequence>

&lt;/parallel>
</pre>

<h2><a name="Header_Testcase" href="#ToC_Testcase">testcase and tcstatus:  
Define a Testcase and Record Status</a></h2>

The testcase element is a wrapper which defines a testcase and contains
a single<b> <i>task</i></b> element for which testcase status is recorded.
The <b>testcase</b> element is used in conjunction with the <b>tcstatus</b>
element to increment testcase pass/fail counters.
<p>A <b>testcase</b> element has the following attributes:
<ul>
<li>
<b>name</b> - the name of the testcase.&nbsp; It is required and its value
must evaluate via Python to a string.
</li>
<li>
<b>mode</b> - the mode of the testcase.  This attribute defines whether information about the testcase should be reported even if no tcstatus elements have been encountered.  It is optional and its value must evaluate via Python to a string.  The default value is "default", and indicates that information about the testcase should only be reported if a tcstatus element has been encountered.  If the attribute's value is "strict", then information about the testcase will be reported even if no tcstatus elements have been encountered (in this case, pass and fail for the testcase will be 0).
</li>
</ul>
A <b>tcstatus</b> element has the following attribute:
<ul>
<li>
<b>result</b> - indicates the status for the current testcase.
It is required and it's value must evaluate via Python to one of
the following values (not case-sensitive):
<ul compact>
<li><tt>'pass'</tt> - This increments the number of passes for the testcase.</li>
<li><tt>'fail'</tt> - This increments the number of fails for the testcase.</li>
<li><tt>'info'</tt> - This is used to update the last status information
for the testcase, so you should also specify additional information about the
testcase status.</li>
</ul>    
</ul>
You may also specify additional information about the testcase status
in the <b>tcstatus</b> element (e.g. an error message, percent complete,
step number, etc). It is optional and its value must evaluate via Python
to a string.  For example:
<pre>
&lt;tcstatus result="'fail'">'Error in Step 5'&lt;/tcstatus>
&lt;tcstatus result="'info'">'50% complete'&lt;/tcstatus>
</pre>

<p>
You may nest <b>testcase</b> elements. For nested testcases, the testcase
name will be recorded in the form of ParentTestcase.ChildTestcase
in the STAX logs and queries (so don't use periods, ".", in your testcase
names).
<p>
You can see the testcase status information using any of the following methods:
<ul>
<li>While a STAX job is currently running, testcase status information for
    all testcases is displayed in the "Testcase Information" section of
    the STAX Monitor GUI.</li>
<li>While a STAX job is currently running, you can submit a
    <tt>LIST TESTCASES JOB &lt;JobID></tt> request to the STAX service
    to list all testcases.
<li>When the STAX job completes, a summary of the number of passes and fails
    for each testcase is logged in the STAX Job log.  Also, unless the testcase
    status is <tt>'info'</tt> , if you specified additional information about
    the status of a testcase, it is also logged in the STAX Job log.
    logged in the STAX Job log.
</ul>

<h4>Usage:</h4>

In the following example of a <b>testcase</b> element, the testcase consists
of a process that is run 10 times. Each time the process runs successfully,
the test status pass counter is incremented, otherwise the test status
fail counter is incremented and additional information about the error
is recorded (and automatically sent to the STAX Monitor and logged in the STAX job log).
<pre><b>&lt;testcase name="'TestA'">
</b>&nbsp; &lt;loop var="i" from="1" to="10">
&nbsp;&nbsp;&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;if expr="RC == 0">
<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tcstatus result="'pass'"/>
</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;else>
<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tcstatus result="'fail'">'RC=%s on loop %s' % (RC, i)&lt;/tcstatus>
</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/else>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/if>
&nbsp;&nbsp;&nbsp; &lt;sequence>
&nbsp; &lt;/loop>
<b>&lt;/testcase></b></pre>

In the following example of a <b>testcase</b> element, the testcase consists
of a process that is run 10 times.  Each time the process runs successfully,
the testcase's last status information is updated with a percent complete
message.  If a process fails, the test status fail counter is incremented and
the testcase's last status information is updated with an error message and 
it breaks out of the loop.  If the process ran successfully 10 times, the
test status pass counter is incremented and the last status information is
updated.
<pre>
<b>&lt;testcase name="'MyTest'"></b>
  &lt;sequence>

    &lt;loop var="i" from="1" to="10">
      &lt;sequence>

        &lt;process name="'My Test'">
          ...
        &lt;/process>

        &lt;if expr="RC == 0">
          <b>&lt;tcstatus result="'info'">
            'Percent Complete: %s%%' % (i*10)
          &lt;/tcstatus></b>
          &lt;else>
            &lt;sequence>
              <b>&lt;tcstatus result="'fail'">
                'ERROR:  Percent Complete: %s%%' % (i*10)
              &lt;/tcstatus></b>
              &lt;break/>
            &lt;/sequence>
          &lt;/else>
        &lt;/if>

      &lt;/sequence>
    &lt;/loop>

    &lt;if expr="i == 11">
      <b>&lt;tcstatus result="'pass'">
        'Percent Complete: 100%'
      &lt;/tcstatus></b>
    &lt;/if>

  &lt;/sequence>
<b>&lt;/testcase></b>
</pre>

In the following example of a <b>testcase</b> element, mode 'strict' is used so that
an entry for each testcase will be logged, even if no &lt;tcstatus> elements were
executed.  For example, an entry for testcase 'Test1' is logged in the STAX job
log and sent to the STAX Monitor with 0 passes and 0 fails even if no
&lt;tcstatus> elements were executed within it.
<pre>
  &lt;function name="Main" scope="local">
    <b>&lt;testcase name="'Test1'" mode="'strict'"></B>
      &lt;paralleliterate var="machine" in="machList">
        <b>&lt;testcase name="machine" mode="'strict'"></B>
          &lt;sequence>
            &lt;process>
              &lt;location>machine&lt;/location>
              &lt;command>'test1.exe'&lt;/command>
            &lt;/process>
            &lt;if expr="RC == 0">
              <b>&lt;tcstatus result="'pass'"/></B>
              &lt;else>
                <b>&lt;tcstatus result="'fail'">'Failed with RC=%s' % RC&lt;/tcstatus></B>
              &lt;/else>
            &lt;/if>
           &lt;/sequence>
        <b>&lt;/testcase></B>
      &lt;/paralleliterate>
    <b>&lt;/testcase></b>
  &lt;/function>
</pre>

<h2><a name="Header_Timer" href="#ToC_Timer">timer:  
Define a Task for which Time Control is Provided</a></h2>

The <b>timer</b> element is a wrapper which defines a task for which time
control is provided. The <b>timer</b> element contains a single <b><i>task</i></b>
element and runs the task for a specified duration, stopping the task at
the end of the specified duration (if the task is still running).
<p>The <b>timer</b> element has the following attribute:
<ul>
<li>
<b>duration</b> - specifies the maximum length of time to run the task.
The value is evaluated via Python to a string.
It is required. The time may be expressed in milliseconds, seconds, minutes,
hours, days, weeks, or years. For example:</li>
<ul>
<li>duration="'50'" specifies 50 milliseconds.</li>
<li>duration="'90s'" specifies 90 seconds.</li>
<li>duration="'5m'" specifies 5 minutes.</li>
<li>duration="'36h'" specifies 36 hours.</li>
<li>duration="'3d'" specifies 3 days.</li>
<li>duration="'1w'" specifies 1 week.</li>
<li>duration="'1y'" specifies 1 year.</li>
</ul>
</ul>
Also, the following variable is set by the STAX execution engine
upon completion of a <b>timer</b> element:
<ul>
<li>
<b>RC</b> - specifies the timer's return code
  <ul>
  <li>Set to -1 if the task could not begin, possibly due to an invalid value for
  the duration attribute.
  <li>Set to 1 if the task is still running at the end of the specified duration.
  <li>Set to 0 if the task ended before the specified duration.
  </ul>
</ul>
<p>
A common use of the &lt;timer> element is to terminate a process that
runs continuously.  When a timer expires, it stops any processes contained
within the timer element that are still running.
Note that to obtain the stdout/stderr data for a process that is stopped
by a &lt;timer> element, you must use the &lt;stdout>/&lt;stderr> element
within the &lt;process> element to redirect the process's stdout/stderr to
a specified file.  After the timer has expired, you can obtain the contents
of the process stdout/stderr file using the FS service GET FILE request.
Note that a &lt;timer> element could contain a  &lt;parallel>
and/or &lt;paralleliterate> element with multiple &lt;process> elements
running simultaneously.  So, if a timer pops and terminates the processes,
if a process's stdout/stderr was being redirected to a temporary file (e.g.
by using a &lt;returnstdout> element but no &lt;stdout> element), there
isn't a way to obtain the process stdout/stderr data because the data
is only accessible via the STAXResult variable which no longer contains
that data after the timer expires.  An example of how to obtain the
stdout/stderr data for a process that is terminated by a &lt;timer> element
is provided in the following "Usage" section.

<h4>
Usage:</h4>
The following example of a <b>timer</b> element simultaneously calls function
P3 in a continuous loop on a list of machines. A loop is not complete until
function P3 has been run on all of the machines. After 24 hours, the test
is stopped. The test is successful if it did not end before 24 hours.
<pre>&lt;testcase name="'TestP3'">

&nbsp; &lt;sequence>

&nbsp;&nbsp;&nbsp; &lt;script>timerDuration = '24h'&lt;/script>

<b>&nbsp;&nbsp;&nbsp; &lt;timer duration="timerDuration">
</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;loop>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;paralleliterate var="machName" in="MachList">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;call function="'P3'"/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/paralleliterate>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/loop>
<b>&nbsp;&nbsp;&nbsp; &lt;/timer>

</b>&nbsp;&nbsp;&nbsp; &lt;if expr="<b>RC == 1</b>">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tcstatus result="'pass'">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   'Timer ran for %s' % timerDuration
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tcstatus>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;else>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tcstatus result="'fail'">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   'Timer did not run for %s. RC=%s' % (timerDuration, RC)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tcstatus>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/else>&nbsp;
&nbsp;&nbsp;&nbsp; &lt;/if>

&nbsp; &lt;/sequence>

&lt;/testcase></pre>

The following example of a <b>timer</b> element is like the previous example,
but it also uses Python to calculate the elapsed time that the timer element ran so
that it can record the elapsed time in the testcase status message.
<pre>
&lt;testcase name="'TimerTest'">

  &lt;sequence>

    &lt;script>
      timerDuration = '45m'
      import time
      starttime = time.time(); # record starting time
    &lt;/script>

    <b>&lt;timer duration="timerDuration"></b>
      &lt;loop>
        &lt;paralleliterate var="machName" in="MachList">
          &lt;call function="'aProcess'"/>
        &lt;/paralleliterate>
      &lt;/loop>
    <b>&lt;/timer></b>

    &lt;script>
      stoptime = time.time()             # record ending time
      elapsedSecs = stoptime - starttime # yields time elapsed in seconds
    &lt;/script>

    &lt;if expr="<b>RC == 1</b>">
      &lt;tcstatus result="'pass'">
        'Timer ran for %s seconds' % elapsedSecs
      &lt;/tcstatus>
      &lt;else>
        &lt;tcstatus result="'fail'">
          'Timer only ran for %s seconds. RC=%s' % (elapsedSecs, RC)
        &lt;/tcstatus>
      &lt;/else>
    &lt;/if>

  &lt;/sequence>

&lt;/testcase>
</pre>

<p>
The following example of a <b>timer</b> element uses the timer element to
stop a process that runs continuously.  After 1 hour, the
process is stopped.  This process's stdout and stderr are redirected to a file.
The content of the process's stdout file is obtained by using the FS
service's GET FILE request and it logs the stdout/stderr content to
the STAX Job User log.  Then, it deletes the stdout file using the FS
service's DELETE ENTRY request.  If the timer expired (e.g. if the process
was still running after 4 hours), it logs a testcase pass result.
Otherwise, it logs a testcase fail result.
 
<pre>
&lt;testcase name="'TestP4'">

&nbsp; &lt;sequence>

&nbsp;   &lt;script>
&nbsp;     timerDuration = '1h'
&nbsp;     target = 'client1.company.com'
&nbsp;     command = 'java TestP4 50000 1 0'
&nbsp;     testDir = 'C:/tests/TestP4'
&nbsp;     stdoutFile = '%s/TestP4.out' % (testDir)
&nbsp;   &lt;/script>

&nbsp;   <b>&lt;timer duration="timerDuration"></b>
&nbsp;     &lt;sequence>

&nbsp;       &lt;process name="'TestP4'">
&nbsp;         &lt;location>target&lt;/location>
&nbsp;         &lt;command mode="'shell'">command&lt;/command>
&nbsp;         &lt;env>'CLASSPATH=%s{STAF/Config/Sep/Path}{STAF/Env/ClassPath}' % (testDir)</env>
&nbsp;         &lt;stdout>stdoutFile&lt;/stdout>
&nbsp;         &lt;stderr mode="'stdout'"/>
&nbsp;         &lt;stopusing>'WM_CLOSE'&lt;/stopusing>
&nbsp;       &lt;/process>

&nbsp;       &lt;if expr="RC != 0">
&nbsp;         &lt;log message="1">
&nbsp;           ('Process TestP4 failed to start or completed too soon.\n' +
&nbsp;            'RC=%s STAFResult=%s' % (RC, STAFResult))
&nbsp;         &lt;/log>
&nbsp;       &lt;/if>

&nbsp;     &lt;/sequence>
&nbsp;   <b>&lt;/timer></b>

&nbsp;   &lt;script>timerRC = RC&lt;/script>

&nbsp;   &lt;if expr="timerRC == 1 or timerRC == 0">
&nbsp;     &lt;sequence>

&nbsp;       &lt;stafcmd name="'Get TestP4 Stdout/Stderr'">
&nbsp;         &lt;location>target&lt;/location>
&nbsp;         &lt;service>'FS'&lt;/service>
&nbsp;         &lt;request>'GET FILE %s' % (stdoutFile)&lt;/request>
&nbsp;       &lt;/stafcmd>

&nbsp;       &lt;if expr="RC == 0">
&nbsp;         &lt;sequence>

&nbsp;           &lt;log message="1">'TestP4 Stdout/Stderr:\n%s' % (STAFResult)&lt;/log>

&nbsp;           &lt;stafcmd name="'Delete file %s' % (stdoutFile)">
&nbsp;             &lt;location>target&lt;/location>
&nbsp;             &lt;service>'FS'&lt;/service>
&nbsp;             &lt;request>'DELETE ENTRY %s CONFIRM' % (stdoutFile)&lt;/request>
&nbsp;           &lt;/stafcmd>

&nbsp;         &lt;/sequence>

&nbsp;         &lt;else>
&nbsp;           &lt;log message="1">
&nbsp;             'STAF %s FS GET FILE %s failed with RC=%s Result=%s' % \
&nbsp;               (target, stdoutFile, RC, STAFResult)
&nbsp;           &lt;/log>
&nbsp;         &lt;/else>

&nbsp;       &lt;/if>

&nbsp;       &lt;if expr="timerRC == 1">
&nbsp;         &lt;tcstatus result="'pass'"/>
&nbsp;         &lt;else>
&nbsp;           &lt;tcstatus result="'fail'">
&nbsp;             'Process TestP4 ended before timer duration: %s' % (timerDuration)
&nbsp;           &lt;/tcstatus>
&nbsp;         &lt;/else>
&nbsp;       &lt;/if>

&nbsp;     &lt;/sequence>

&nbsp;     &lt;else>
&nbsp;       &lt;tcstatus result="'fail'">'Timer failed to begin.'&lt;/tcstatus>
&nbsp;     &lt;/else>

&nbsp;   &lt;/if>

&nbsp; &lt;/sequence>

&lt;/testcase></pre>

<br>

<h2><a name="Header_Stax_Directives" href="#ToC_Stax_Directives">Directives</a></h2>

The <a href="#Header_Hold_Element">hold</a>, <a href="#Header_Release_Element">release</a>,
and <a href="#Header_Terminate_Element">terminate</a> elements specify execution
control of blocks during the execution of a job.
<p>
A block named 'main' exists that wraps everything in the job.
Remember that blocks may be nested.  For nested blocks, the block name is in
the hierarchical form of:
<pre>  main.ParentBlockName[.ChildBlockName]...</pre>

<h2><a name="Header_Hold_Element" href="#ToC_Hold_Element">hold:  Hold a Block</a></h2>

The <b>hold</b> element specifies to hold a block in the STAX job.  A signal
is raised if you try to hold a block that doesn't exist.  If you try to hold
a block that isn't RUNNING, the hold is silently ignored.
<p>
The <b>hold</b> element is an empty element.
<p>
The <b>hold</b> element has the following optional attributes:
<ul>
<li><b>block</b> - is the name of the block to hold.  Its value must evaluate
via Python to a string.  It defaults to the current block (STAXCurrentBlock).
To hold the entire job, specify 'main'. 
<li><b>if</b> - is an expression that is evaluated via Python to a boolean value.
If it evaluates to false, the block is not held.  It defaults to true ('1').
</ul>

<h2><a name="Header_Release_Element" href="#ToC_Release_Element">release:
Release a Block</a></h2>

The <b>release</b> element specifies to release a block in the STAX job.
A signal is raised if you try to release a block that doesn't exist.  If you
try to release a block that isn't HELD, the release is silently ignored.
<p>
The <b>release</b> element is an empty element.
<p>
The <b>release</b> element has the following optional attributes:
<ul>
<li><b>block</b> - is the name of the block to release.  Its value must evaluate
via Python to a string.  It defaults to the current block (STAXCurrentBlock).
<li><b>if</b> - is an expression that is evaluated via Python to a boolean value.
If it evaluates to false, the block is not released.  It defaults to true ('1').
</ul>

<h2><a NAME="Header_Terminate_Element" href="#ToC_Terminate_Element">terminate:
Terminate a Block</a></h2>

The<b> terminate</b> element specifies to terminate a block in the STAX job.
A signal is raised if you try to terminate a block that doesn't exist.
<p>
The <b>terminate</b> element is an empty element.
<p>
The <b>terminate</b> element has the following optional attributes:
<ul>
<li><b>block</b> - is the name of the block to terminate.  Its value must evaluate
via Python to a string.  It defaults to the current block (STAXCurrentBlock).
To terminate the entire job, specify 'main'. 
<li><b>if</b> - is an expression that is evaluated via Python to a boolean value.
If it evaluates to false, the block is not terminated.  It defaults to true ('1').
</ul>

<h4>
Usage:</h4>
In the following example of the <b>hold</b> and <b>terminate</b> elements:
<ul>
<li>
If process P1 ended with a non-zero return code, then the job would be
terminated.</li>

<li>
If process P2 ended with a non-zero return code, then Block1 would be held.</li>

<li>
If process P4 ended with a non-zero return code, then Block1 would be terminated
and processing would continue at process P5.</li>
</ul>

<pre>&lt;sequence>

&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;command>'P1.exe'&lt;/command>
&nbsp; &lt;/process>

<b>&nbsp; &lt;terminate block="'main'" if="RC != 0"/></b>

&nbsp; &lt;block name="'Block1'">

&nbsp;&nbsp;&nbsp; &lt;parallel>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;sequence>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;command>'P2.exe'&lt;/command>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/process>

<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;hold if="RC != 0"/></b>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/sequence>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;sequence>&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;command>'P4.exe'&lt;/command>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/process>

<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;terminate block="'main.Block1'" if expr="RC != 0"/></b>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/sequence>

&nbsp;&nbsp;&nbsp; &lt;/parallel>&nbsp;&nbsp;

&nbsp; &lt;/block>

&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp; &lt;command>'P5.exe'&lt;/command>
&nbsp; &lt;/process>

&lt;/sequence></pre>

<br>

<h2><a name="Header_Stax_Exceptions" href="#ToC_Stax_Exceptions">
Exceptions</a></h2>

The <a href="#Header_TryCatch">try / catch / finally</a>,
<a href="#Header_Throw">throw</a>, and <a href="#Header_Rethrow">rethrow</a>
elements deal with the processing of STAX exceptions.
STAX exceptions alter the flow control of the job (unlike signals).
<p>
Note that the STAX execution engine does not currently throw any STAX exceptions.
Currently, only STAX jobs you write in which you use the <b>throw</b> element
throw exceptions.

<h2><a name="Header_TryCatch" href="#ToC_TryCatch">try / catch / finally:  
Run a Task, Catch Exceptions and/or Run a Finalization Task</a></h2>

<p>The <b>try</b> element allows you to perform a task.  If an exception
is thrown and the <b>try</b> element has one or more <b>catch</b> elements
(aka exception handlers) that can catch it, then control will be transferred
to the first such <b>catch</b> element.  If the <b>try</b> element has a
<b>finally</b> element, then the <b>finally</b> element's task is executed,
no matter whether the try task completes normally or abruptly, and no matter
whether a <b>catch</b> element is first given control.
<p>
A <b>try</b> element:
<ul>
<li>Contains a single <b><i>task</i></b>.
<li>Must contain at least one <b>catch</b> or <b>finally</b> element.
<li>Must contain one or more <b>catch</b> elements if no <b>finally</b>
element is specified.
<li>Can contain one or more <b>catch</b> elements if a <b>finally</b>
element is specified.
<li>Can contain at most one <b>finally</b> element.
<li>can be nested within other <b>try</b> elements.
</ul>
<p>
A <b>catch</b> element performs a task when the specified exception
is caught. A <b>catch</b> element contains a single <b><i>task</i></b> and 
has the following attributes:
<ul>
<li><b>exception</b> - is the name of the exception that the <b>catch</b> element handles.
All exceptions that are a sub-type of this exception are caught as well.  For example,
a sub-type of an exception named 'STAXException' is 'STAXException.SubType1'.
You may specify '...' to indicate that all exceptions are to be caught by this
catch block.
This attribute is required and its value must evaluate via Python to a string.
<li><b>var</b> - is the name of a variable containing any additional information provided when
the exception was thrown.  It is a literal.  This attribute is optional.
<li><b>typevar</b> - is the name of a variable containing the specific type of exception thrown.
It is a literal.  This attribute is optional.
<li><b>sourcevar</b> - is the name of a variable containing the source
information for the exception.  It is a literal.  This attribute is optional.
This variable will be a Python class containing the following functions:
<ul>
<li><b>getSource</b> - a Python string containing the source information in the
format: <i>throw: &lt;exception-name> (Line: &lt;number>, File: &lt;xml-file>, Machine: &lt;machine>)</i>
</xmp>
<li><b>getStackTrace</b> - a Python list containing the stack trace.  Each item
in the Python list represents a single stack frame (as a string). The frame at
the bottom of the stack represents the execution point at which the stack trace
was generated (i.e. the execution point where the exception was thown)
</ul>
Accessing the sourcevar class directly will return a formatted representation
</ul>
<p>
The first catch block that can handle the exception will be performed.  For example,
if a 'STAXException.SubType1' exception is thrown and there is
a &lt;catch exception="'STAXException'"> element and
a &lt;catch exception="'STAXException.SubType1'"> element, the catch
element which is listed first will handle the exception.  However, note that if the
&lt;catch exception="'STAXException'"> element is listed first, the
&lt;catch exception="'STAXException.SubType1'"> block will never handle
any exceptions since it is a sub-type of 'STAXException'.
<p>
A <b>finally</b> element ensures that the finally task is executed after the
try task and any catch task that might be executed, no matter how control leaves
the try task or catch task.  A <b>finally</b> element contains a single
<b><i>task</i></b>.  When a <b>finally</b> element is specified and a condition
occurs that alters the flow synchronously or asynchronously, the finally task
will always be executed no matter the condition (e.g block terminated, timer
expired, a return, or an exception is thown).
Thus, the <b>finally</b> element provides a way to ensure that a finally task
is performed for potential cleanup if a job ends due to being terminated for
any reason.
<p>
Note that if you want to have a guaranteed way to stop a finally task, you
should have the first element contained in your finally task be a block or timer
element.  For example, if you submit a request to terminate the job, it will not
terminate the job until the finally task(s) complete.  But if you submit a request
to terminate a block that is currently running which is contained within a
finally task, then the block will be terminated (it will not wait until that
finally task completes).
<p>
Handling of the <b>finally</b> element is rather complex, so the two cases of a
<b>try</b> element with and without a <b>finally</b> element are described
as follows:
<p>
<ol>
<li><b>Execution of try-catch</b>
<p>
A try element without a finally element is executed by first executing
the try task.  Then there is a choice:
<p>
<ul>
<li>If execution of the try task completes normally, then no further
  action is taken and the try element completes normally.
<p>
<li>If execution of the try task completes abruptly because of a throw of
  exception E, then there is a choice:
  <ul>
  <li>If exception E can be handled by any catch element of the try
    element, then the first such catch element is selected and the task
    of that catch element is executed.  If that task completes normally,
    then the try element completes normally;  if that task completes
    abruptly for any reason, then the try element completes abruptly for
    the same reason.  
  <li>If exception E cannot be handled by any catch element of the try
    element, then the try element completes abruptly because of a throw
    of exception E.
  </ul>
<p>
<li>If execution of the try task completes abruptly for any other reason,
  then the try element completes abruptly for the same reason.
</ul>
<p>
<li><b>Execution of try-catch-finally</b>
<p>
A try element with a finally element is executed by first executing the
try task.  Then there is a choice:
<p>
<ul>
<li>If execution of the try task completes normally, then the finally task
  is executed, and then there is a choice:
  <ul>
  <li>If the finally task completes normally, then the try element
    completes normally.
  <li>If the finally task completes abruptly for reason S, then the try
    element completes abruptly for reason S.
  </ul>
<p>
<li>If execution of the try task completes abruptly because of a throw of
  exception E, then there is a choice:
  <ul>
  <li>If exception E can be handled by any catch element of the try
    element, then the first such catch element is selected and the task
    of that catch element is executed.  Then there is a choice:
    <ul>
    <li>If the catch task completes normally, then the finally task is
      executed.  Then there is a choice:
      <ul>
      <li>If the finally task completes normally, then the try element
        completes normally.
      <li>If the finally task completes abruptly for any reason, then the
        try element completes abruptly for the same reason.
      </ul>
    <li>If the catch task completes abruptly for reason R, then the
      finally task is executed. Then there is a choice:
      <ul>
      <li>If the finally task completes normally, then the try element
        completes abruptly for reason R.
      <li>If the finally task completes abruptly for reason S, then the
        try element completes abruptly for reason S (and reason R is
        discarded).
      </ul>
    </ul>
  <li>If exception E cannot be handled by any catch element of the try
    element, then the finally task is executed.  Then there is a choice:
    <ul>
    <li>If the finally task completes normally, then the try element
      completes abruptly because of a throw of exception E.
      Note that if the STAX job does not catch this exception in any
      try block it may be nested in, then an error is logged and the
      job is terminated. 
    <li>If the finally task completes abruptly for reason S, then the try
      element completes abruptly for reason S (and the throw of
      exception R is discarded).
    </ul>
  </ul>
<p>
<li>If execution of the try task completes abruptly for any other reason
  R (e.g. return, timer expired, etc), then the finally task is executed.
  Then there is a choice:
  <ul>
  <li>If the finally task completes normally, then the try element
    completes abruptly for reason R.
  <li>If the finally task completes abruptly for reason S, then the try
    element completes abruptly for reason S (and reason R is discarded).
  </ul>
</ul>
</ol>

<h4>
Usage:</h4>
The following example of the <b>try/catch</b> elements shows a <b>try</b> block
containing a sequence of tasks to perform. If an exception is thrown, the
<b>catch</b> block for the exception thrown is run and then processing will continue
by executing the element following the end of the <b>try</b> block.
If a 'Timeout.ServerStart' or 'Timeout.ClientStart' exception is thrown, the catch block for
exception 'Timeout' can handle these exceptions because they are
sub-types of exception 'Timeout'.
<pre><b>&lt;try>

</b>&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp; &lt;call function="'CheckServerAvailability'"/>
&nbsp;&nbsp;&nbsp; &lt;if expr="STAXResult != 0">
<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;throw exception="'ServerNotAvailable'"/>
</b>&nbsp;&nbsp;&nbsp; &lt;/if>
&nbsp;&nbsp;&nbsp; &lt;call function="'StartServers'"/>
&nbsp;&nbsp;&nbsp; &lt;if expr="STAXResult != 0">
<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;throw exception="'Timeout.ServerStart'">'Server %s' % machine&lt;/throw>
</b>&nbsp;&nbsp;&nbsp; &lt;/if>
&nbsp;&nbsp;&nbsp; &lt;call function="'StartClients'"/>
&nbsp;&nbsp;&nbsp; &lt;if expr="STAXResult != 0">
<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;throw exception="'Timeout.ClientStart'"/>'Client %s' % machine&lt;/throw>
</b>&nbsp;&nbsp;&nbsp; &lt;/if>
&nbsp; &lt;/sequence>

  <b>&lt;catch exception="'ServerNotAvailable'"></b>
    &lt;log>'Handler: ServerNotAvailable'&lt;/log>
  <b>&lt;/catch>

  &lt;catch exception="'Timeout'" typevar="exceptionType" var="eInfo"></b>
    &lt;log>'Handler: Timeout, eType: %s, eInfo: %s' % (exceptionType, eInfo)&lt;/log>
  <b>&lt;/catch>

&lt;/try></b>
</pre>
<p>
The following example of the <b>try/finally</b> elements show a <b>try</b> block
containing a sequence of tasks to perform and a <b>return</b> element.
The <b>finally</b> block is executed after the try block, no matter now control
leaves the try block.  That is, even though the try block contains a <b>return</b>
element, the finally block will be executed.  Thus, the <b>finally</b> element
provides a way to ensure that a clean-up task is performed no matter what
condition may occur (e.g. terminate, timer expired, exception thrown, return, etc). 

<pre>
&lt;function name="Main">

  <b>&lt;try></b>

    &lt;block name="'RunTest'">
      &lt;sequence>
        &lt;call function="'InitJob'"/>
        &lt;call function="'CheckServerAvailability'"/>
        &lt;call function="'StartServers'"/>
        &lt;call function="'StartClients'"/>
        &lt;return>'Success'&lt;/return>
      &lt;/sequence>
    &lt;/block>

    <b>&lt;finally></b>
      &lt;block name="'Cleanup'">
        &lt;timer duration="'1h'">
          &lt;sequence>
            &lt;log message="1">'Perform Clean-up'&lt;/log>
            &lt;call function="'Cleanup'"/>
          &lt;/sequence>
        &lt;/timer>
      &lt;/block>
    <b>&lt;/finally></b>

  <b>&lt;/try></b>

&lt;/function>
</pre>
<p>
Note that in the above example, if <tt>&lt;return>'Clean-up complete'&lt;/return></tt>
was added to the finally block, then if the try block returns 'Success',
and the finally block returns 'Clean-up complete', then the try element
completes by returning 'Clean-up complete' as per the rules discussed above
in the <b>Execution of try-catch-finally</b> section.
<p>
The following example of the <b>try/catch/finally</b> elements show a try
block containing a sequence of tasks to perform.  If an exception is thrown,
the catch block is run.  The finally block is run, no matter how control
leaves the try block or catch block.

<pre>
&lt;function name="Main">

  <b>&lt;try></b>

    &lt;block name="'RunTest'">
      &lt;sequence>
        &lt;call function="'InitJob'"/>
        &lt;call function="'CheckServerAvailability'"/>
        &lt;call function="'StartServers'"/>
        &lt;call function="'StartClients'"/>
      &lt;/sequence>
    &lt;/block>

    <b>&lt;catch exception="'...'" typevar="eType" var="eInfo"></b>
      &lt;sequence>
        &lt;log message="1">
          "Handler: ..., eType: %s, eInfo: %s" % (eType, eInfo)
        &lt;/log>
        &lt;call function="'HandleException'"/>
      &lt;/sequence>
    <b>&lt;/catch></b>

    <b>&lt;finally></b>
      &lt;block name="'Cleanup'">
        &lt;sequence>
          &lt;log message="1">'Perform Clean-up'&lt;/log>
          &lt;call function="'Cleanup'"/>
        &lt;/sequence>
      &lt;/block>
    <b>&lt;/finally></b>

  <b>&lt;/try></b>

&lt;/function>
</pre>
<p>
The following example of the <b>catch</b> element demonstrates how to use the
<b>sourcevar</b> attribute:
<pre>
&lt;catch exception="'...'" typevar="exceptionType" var="eInfo" sourcevar="eSource">
  &lt;sequence>
    &lt;log>'Caught exception exceptionType=%s eInfo=%s' % (exceptionType, eInfo)&lt;/log>
    &lt;log>eSource&lt;/log>
    &lt;log>eSource.getSource()&lt;/log>
    &lt;log>eSource.getStackTrace()&lt;/log>
    &lt;log>STAFMarshalling.formatObject(eSource.getStackTrace())&lt;/log>
  &lt;/sequence>
&lt;/catch>
</pre>


<h2><a name="Header_Throw" href="#ToC_Throw">throw:  Throw an Exception</a></h2>

The <b>throw</b> element specifies an exception to throw.
<p>
A <b>throw</b> element may be an empty element or you can optionally
specify additional information when the exception is thrown.
If additional information is specified in its value, it must evaluate
via Python to a string value.
<p>
A <b>throw</b> element has the following attribute:
<ul>
<li><b>exception</b> - is the name of the exception being thrown.
It must evaluate via Python to a string value.
This attribute is required.
</ul>

<h4>
Usage:</h4>

The following example of the <b>throw</b> element shows a "NotAvailableException" exception being thrown.
<pre>
<b>&lt;throw exception="'NotAvailableException'"/></b>
</pre>

The following example shows a "TimerFailedException" exception being thrown with
additional information provided about how long the timer ran.
<pre>
<b>&lt;throw exception="'TimerFailedException'">
  'Only ran for %s seconds' % elapsedTime
&lt;/throw></b></pre>

<br>

<h2><a name="Header_Rethrow" href="#ToC_Rethrow">rethrow:  Rethrow an Exception</a></h2>

The <b>rethrow</b> element specifies to rethrow the exception up the chain
to a higher level try/catch block.  The <b>rethrow</b> element should only
be used in a <b>catch</b> block.
<p>
The <b>rethrow</b> element is an empty element and has no attributes.

<h4>
Usage:</h4>

The following is an example of the <b>rethrow</b> element.
<pre>
<b>&lt;rethrow/></b>
</pre>

<h2><a name="Header_TryExample" href="#Toc_TryExample">Example of Nested Try Blocks</a></h2>

The following STAX job contains three nested try blocks and shows how you
can use the <b>try/catch</b>, <b>try/catch/finally</b>,
<b>throw</b>, and <b>rethrow</b> elements.
<p>
<ul>
<font color="darkblue">
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">

&lt;stax>

  &lt;defaultcall function="Main"/>

  &lt;script>
    serverMachine = 'server1.company.com'
    clientMachines = ['client1.company.com', 'client2.company.com']
  &lt;/script>

  &lt;function name="Main">
    &lt;sequence>


      <b>&lt;try></b>

        <b>&lt;try></b>

          <b>&lt;try></b>

            &lt;sequence>

              &lt;call function="'CheckServerAvailability'"/>
              &lt;if expr="STAXResult != 0">
                <b>&lt;throw exception="'STAXException.ServerNotAvailable'">
                  'Server: %s' % serverMachine
                &lt;/throw></b>
              &lt;/if>

              &lt;log message="1">'Servers are available'&lt;/log>

              &lt;call function="'StartServers'"/>
              &lt;if expr="STAXResult != 0">
                <b>&lt;throw exception="'STAXException.Timeout.StartingServer'">
                  'Server: %s' % serverMachine
                &lt;/throw></b>
              &lt;/if>

              &lt;log message="1">'Servers are started'&lt;/log>

              &lt;call function="'StartClients'"/>
              &lt;if expr="STAXResult != 0">
                <b>&lt;throw exception="'STAXException.Timeout.StartingClient'">
                  'Clients: %s' % clientMachines
                &lt;/throw></b>
              &lt;/if>

              &lt;log message="1">'Clients are started'&lt;/log>

              &lt;call function="'RunTest'"/>
              &lt;log message="1">'Ran the test'&lt;/log>

            &lt;/sequence>

            <b>&lt;catch exception="'STAXException.Timeout.StartingClient'"
                   typevar="eType" var="eInfo"></b>
              &lt;sequence>
                &lt;log message="1">
                  'Handler: STAXException.Timeout.StartingClient, ' + \
                  'eType: %s, eInfo: %s' % (eType, eInfo)
                &lt;/log>
              &lt;/sequence>
            <b>&lt;/catch></b>
       
            <b>&lt;catch exception="'STAXException.Timeout'" typevar="eType" var="eInfo"></b>
               &lt;sequence>
                 &lt;log message="1">
                   'Handler: STAXException.Timeout, ' + \
                   'eType: %s, eInfo: %s' % (eType, eInfo)
                 &lt;/log>
                 <b>&lt;rethrow/></b>
               &lt;/sequence>
            <b>&lt;/catch></b>

          <b>&lt;/try></b>

          <b>&lt;catch exception="'STAXException'" typevar="eType" var="eInfo"></b>
            &lt;sequence>
              &lt;log message="1">
                "Handler: STAXException, eType: %s, eInfo: %s" % (eType, eInfo)
              &lt;/log>
              <b>&lt;throw exception="'OtherException'"/></b>
            &lt;/sequence>
          <b>&lt;/catch></b>

        <b>&lt;/try></b>

        <b>&lt;catch exception="'...'" typevar="eType" var="eInfo"></b>
          &lt;log message="1">
            "Handler: ..., eType: %s, eInfo: %s" % (eType, eInfo)
          &lt;/log>
        <b>&lt;/catch></b>

        <b>&lt;finally></b>
          &lt;block name="'Cleanup'">
            &lt;sequence>
              &lt;log message="1">'Perform Clean-up'&lt;/log>
              &lt;call function="'Cleanup'"/>
            &lt;/sequence>
          &lt;/block>
        <b>&lt;/finally></b>

      <b>&lt;/try></b>

    &lt;/sequence>
  &lt;/function>

&lt;/stax>
</pre>
</font>
</ul>
<p>
If function 'CheckServerAvailability' returns a non-zero valueo,
exception 'STAXException.ServerNotAvailable' is thrown.  There is no catch block
for this exception in this try block so the exception is thrown up the chain to its
parent try block which has a catch block for this exception since it is a sub-type
of exception 'STAXException'.  The catch block throws exception 'OtherException' which
is handled by its parent try block which contains a catch handler for all exceptions.
Then, the finally block is run.  The following messages are logged:
<ul>
<font color="darkblue">
<pre>
  Handler: STAXException eType: STAXException.ServerNotAvailable, eInfo: Server: server1.company.com
  Handler: ..., eType: OtherException, eInfo: None
  Perform Clean-up
</pre>
</font>
</ul>
<p>
If function 'StartServers' returns a non-zero value, exception
'STAXException.Timeout.StartingServer' is thrown.  The exception is handled by the
catch block that handles exception 'STAXException.Timeout' since it's a sub-type this
exception.  The catch block rethrows the exception up the chain to its parent try block.
The exception is then handled by it's catch block since it is a sub-type of exception
'STAXException'.  The catch block throws exception 'OtherException' which is handled
by its parent try block which contains a catch handler for all exceptions.  Then, the
finally block is run.  The following messages are logged:
<ul>
<font color="darkblue">
<pre>
  Servers are available
  Handler: STAXException.Timeout, eType: STAXException.Timeout.StartingServer, eInfo: Server: server1.company.com
  Handler: STAXException, eType: STAXException.Timeout.StartingServer, eInfo: Server: server1.company.com
  Handler: ..., eType: OtherException, eInfo: None
  Perform Clean-up
</pre>
</font>
</ul>
<p>
If function 'StartClients' returns a non-zero valueo, exception
'STAXException.Timeout.StartingClient' is thrown.  The catch handler that handles this
exception is run.  Then the finally block is run.  The following messages are logged:
<ul>
<font color="darkblue">
<pre>
  Servers are available
  Servers are started
  Handler: STAXException.Timeout.StartingClient, eType: STAXException.Timeout.StartingClient, eInfo: Clients: ['client1.company.com', 'client2.company.com']
  Perform Clean-up
</pre>
</font>
</ul>
<p>
If no exceptions were thrown (all functions returned 0), the following messages are
logged:
<ul>
<font color="darkblue">
<pre>
  Servers are available
  Servers are started
  Clients are started
  Ran the Test
  Perform Clean-up
</pre>
</font>
</ul>

<br>

<h2><a name="Header_Stax_Signals" href="#ToC_Stax_Signals">Signals</a></h2>

The <a href="#Header_Raise">raise</a> and
<a href="#Header_Signalhandler">signalhandler</a> elements deal
with the raising and handling of STAX signals. Unlike
STAX exceptions, STAX signals, by themselves, do not alter execution flow.
Signal handlers provide asynchronous error handling while executing a STAX
job. The STAX execution engine may also raise signals for errors such as
if a variable is referenced which does not exist or if a function
is called that does not exist.
<p>
The following table contains the names of signals that may be raised by
the STAX execution engine, the conditions in which STAX raises these signals,
and a description of the default signal handlers provided by STAX.
<p>
<table border width="85%">
<th width=18%>Signal Name
<th width=35%>Raised When:
<th width=32%>Default Signal Handler
<tr>
<td><b>STAXProcessStartError</b>
<td>A specified process cannot be successfully started.
The process is bypassed.  Information about the process that could not be
started is provided in a variable named STAXProcessStartErrorMsg.
<td>Sends a message that includes the variable named STAXProcessStartErrorMsg
to the STAX Monitor and logs a message in the STAX Job Log with level 'error'.
<tr>
<td><b>STAXProcessStartTimeout</b>
<td>A specified process was not started within the ProcessTimeout parameter value
for the STAX service.
Information about the process that could not be started within the timeout
value is provided in a variable named STAXProcessStartTimeoutMsg.
<td>Sends a message that includes the variable named STAXStartProcessTimeoutMsg
to the STAX Monitor and logs a message in the STAX Job Log with level 'error'.
<tr>
<td><b>STAXCommandStartError</b>
<td>A specified STAF Command request cannot be
successfully started.  The &lt;stafcmd> request is bypassed.
Information about the command that could not be started is provided in a
variable named STAXCommandStartErrorMsg.
<td>Sends a message that includes
the variable named STAXCommandStartErrorMsg to the STAX Monitor,
logs a message in the STAX Job Log with level 'error',
and terminates the job.
<tr>
<td><b>STAXPythonEvaluationError</b>
<td>Python cannot successfully evaluate a value,
expression, or statement(s).  The element is bypassed.  Information
about the element which could not be successfully evaluated by Python
is provided in a variable named STAXPythonEvalMsg.
<td>Sends a message that includes
the variable named STAXPythonEvalMsg to the STAX Monitor,
logs a message in the STAX Job Log with level 'error',
and terminates the job.
<tr>
<td><b>STAXFunctionDoesNotExist</b>
<td>A function is called that does not
exist.  The call request is bypassed.  Information about the call
request is provided in a variable named STAXFunctionDoesNotExistMsg.
<td>Sends a message that includes
the variable named STAXFunctionDoesNotExistMsg to the STAX Monitor,
logs a message in the STAX Job Log with level 'error',
and terminates the job.
<tr>
<td><b>STAXFunctionArgValidate</b>
<td>A function is called with arguments that are not valid. The call request
is bypassed.  Information about the call request is provided in a
variable named STAXFunctionArgValidateMsg.
<td>Sends a message that includes the variable named STAXFunctionArgValidateMsg
to the STAX Monitor, logs a message in the STAX Job Log with level 'error',
and terminates the job.
<tr>
<td><b>STAXBlockDoesNotExist</b>
<td>A block name referenced by a &lt;hold>, &lt;release>, or &lt;terminate> element
does not exist.  The hold/release/terminate block request is bypassed.
Information about the hold/release/terminate block
request is provided in a variable named STAXBlockDoesNotExistMsg.
<td>Sends a message that includes
the variable named STAXBlockDoesNotExistMsg to the STAX
Monitor and logs a message in the STAX Job Log with level 'error'.
<tr>
<td><b>STAXInvalidBlockName</b>
<td>A block with the name specified by the &lt;block> element already exists.
The &lt;block> request is bypassed.  Information about the invalid &lt;block>
request is provided in a variable named STAXInvalidBlockNameMsg.
Note that this situation can easily
occur if you have a block executing in parallel on multiple machines and
you specify a literal block name, like name="'BlockA'", instead of one like
name="'BlockA_%s' % machName" to uniquely identify each block.</li>
<td>Sends a message that includes
the variable named STAXInvalidBlockNameMsg to the STAX Monitor,
logs a message in the STAX Job Log with level 'error',
and terminates the job.
<tr>
<td><b>STAXLogError</b>
<td>A &lt;log> or &lt;message> element that specifies to log a message
is encountered but the LOG request to the STAF Log service failed (possibly
due to an invalid log level, etc).  The &lt;log> element is bypassed.
Information about the invalid &lt;log> element is provided in a STAX variable
named STAXLogMsg.
<td>Sends a message that includes
the variable named STAXLogMsg to the STAX Monitor and
logs a message in the STAX Job Log with level 'error'.
<tr>
<td><b>STAXTestcaseMissingError</b>
<td>A &lt;tcstatus> element is encountered but there is no
&lt;testcase> wrapper element containing it.  The &lt;tcstatus> element is
bypassed.  Information about the invalid &lt;tcstatus> element is provided in a STAX
variable named STAXMissingTestcaseMsg.
<td>Sends a message that includes
the variable named STAXTestcaseMissingMsg to the STAX Monitor, and
logs a message in the STAX Job Log with level 'error'.
<tr>
<td><b>STAXInvalidTcStatusResult</b>
<td>A &lt;tcstatus> element is encountered with an invalid result
value (not 'pass' or 'fail').  The &lt;tcstatus> element is
bypassed.  Information about the invalid &lt;tcstatus> element is provided in a STAX
variable named STAXInvalidTcStatusResultMsg.
<td>Sends a message that includes
the variable named STAXInvalidTcStatusResultMsg to the STAX Monitor, and
logs a message in the STAX Job Log with level 'error'.
<tr>
<td><b>STAXNoSuchSignalHandler</b>
<td>A &lt;raise> element specifies a signal for which there
is no signal handler.  The &lt;raise> element is bypassed.
Information about the invalid &lt;raise> element is provided in a STAX
variable named STAXNoSuchSignalHandlerMsg.
<td>Sends a message that includes
the variable named STAXNoSuchSignalHandlerMsg to the STAX Monitor, and
logs a message in the STAX Job Log with level 'error'.
<tr>
<td><b>STAXInvalidTimerValue</b>
<td>A &lt;timer> element specifies an invalid value for its duration attribute.
The element is bypassed.  Information about the invalid &lt;timer> element
is provided in a variable named STAXInvalidTimerValueMsg.
<td>Sends a message that includes
the variable named STAXInvalidTimerValueMsg to the STAX Monitor,
logs a message in the STAX Job Log with level 'error',
and terminates the job.
<tr>
<td><b>STAXEmptyList</b>
<td>An &lt;iterate> or &lt;paralleliterate> element specifies a list
which is empty or set to None.
Information about the element which specified the empty list
is provided in a STAX variable named STAXEmptyListMsg.
<td>Does nothing
<!--
<td>Sends a message that includes
the variable named STAXEmptyListMsg to the STAX Monitor, and
logs a message in the STAX Job Log with level 'error'.
-->
<tr>
<td><b>STAXImportError</b>
<td>An error occurred while processing an &lt;import> element.
Information about the error is provided in a STAX variable named STAXImportErrorMsg.
When a STAXImportError signal is raised, the variable STAXSignalData will be set to a
list containing an error type and an error description.
<td>Sends a message that includes
the variable named STAXImportErrorMsg to the STAX Monitor,
logs a message in the STAX Job Log with level 'error', and terminates the job.
<tr>
<td><b>STAXFunctionImportError</b>
<td>An error occurred while processing a &lt;function-import> element
during runtime.  Information about the error is provided in a STAX variable
named STAXFunctionImportErrorMsg.  When a STAXFunctionImportError signal is
raised, the variable STAXSignalData will be set to a list containing an error
type and an error description.
<td>Sends a message that includes the variable named STAXFunctionImportErrorMsg
to the STAX Monitor, logs a message in the STAX Job Log with level 'error',
and terminates the job.
<tr>
<td><b>STAXInvalidTestcaseMode</b>
<td>An invalid mode attribute was specified for a &lt;testcase> element.  The valid values for the attribute are 'default' and 'strict'.
<td>Sends a message that includes the variable named STAXInvalidTestcaseModeMsg to the STAX Monitor and logs a message in the STAX Job Log with level 'error'.
<tr>
<td><b>STAXMaxThreadsExceeded</b>
<td>A &lt;paralleliterate> or &lt;parallel> element tries to start more
than the maximum number of STAX Threads allowed by the STAX service's
"Max STAX-Threads" setting (if it is set to a non-zero value) which
specifies the maximum number of STAX Threads that can be running
simultaneously in a job.
Information about the error is provided in a STAX variable named
STAXMaxThreadsExceededMsg.
<td>Sends a message that includes
the variable named STAXMaxThreadsExceededMsg to the STAX Monitor,
logs a message in the STAX Job Log with level 'error', and terminates the job.
<tr>
<td><b>STAXInvalidMaxThreads</b>
<td>A &lt;paralleliterate> element specifies an invalid negative value
for its maxthreads attribute.  The element is bypassed.  Information 
about the invalid &lt;paralleliterate> element is provided in a
variable named STAXInvalidMaxThreadsMsg.
<td>Sends a message that includes the variable named
STAXInvalidMaxThreadsMsg to the STAX Monitor, logs a message in the STAX
Job Log with level 'error', and terminates the job.</td>
</table>
<p>
You may override a default signalhandler by providing your own signalhandler.
See <a href="#Header_CleanupExamples">How to Perform Cleanup Before Job
Termination</a> for some examples.
<p>

<h2><a name="Header_Raise" href="#ToC_Raise">raise:  Raise a Signal</a></h2>

The <b>raise</b> element may be used to raise a specified signal. Signals
may also be raised by the STAX execution engine. A signal interrupts the
STAX job's normal flow of execution and allows a signal handler to take
control. A signal handler is a function
that is called when the corresponding signal
occurs. When the signal handler returns, the STAX job continues to execute
from the point in the job following where the signal was raised, assuming
the signal handler did not terminate the job or block.
If a signal handler is not provided for a generated signal, a
STAXNoSuchSignalHandler signal is raised.
<p>
The <b>raise</b> element is an empty element.
<p>
The <b>raise</b> element has the following required attribute: 
<ul>
<li><b>signal</b> - specifies the name of the signal being raised.
It must evaluate via Python to a string value.
</ul>

<h4>
Usage:</h4>
The following example of the raise element raises a signal named 'NonZeroRCError'
when a non-zero return code is encountered.
<pre>&lt;function name="Valid-if-RC-0">
&nbsp; &lt;if expr="RC != 0">
<b>&nbsp;&nbsp;&nbsp; &lt;raise signal="'NonZeroRCError'"/>
</b>&nbsp; &lt;/if>&nbsp;
&lt;/function></pre>

<h2><a name="Header_Signalhandler" href="#ToC_Signalhandler">signalhandler:  Handle a Signal</a></h2>

The <b>signalhandler</b> element defines how to handle a specified signal.
Signal handlers are inherited from parent threads. The <b>signalhandler</b>
element contains a single <b><i>task</i></b> element.
A <b>signalhandler</b> element can be contained in the <b>stax</b> root element
as well as anywhere where a <b><i>task</i></b> element can be.
<p>
A <b>signalhandler</b> element has the following required attribute:
<ul>
<li><b>signal</b> - specifies the name of the signal that the signalhandler handles.
It must evaluate via Python to a string value. This attribute is required.
</ul>

<h4>
Usage:</h4>
The following example of the <b>signalhandler</b> element handles signals
named 'NonZeroRCError' by setting the testcase status to fail and terminating
the job.
<pre><b>&lt;signalhandler signal="'NonZeroRCError'">
</b>&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp; &lt;tcstatus result="'fail'">'RC=%s' % RC&lt;/tcstatus>
&nbsp;&nbsp;&nbsp; &lt;terminate block="'main'"/>
&nbsp; &lt;/sequence>
<b>&lt;/signalhandler></b></pre>

<h2><a name="Header_CleanupExamples" href="#ToC_CleanupExamples">How to Perform Cleanup Before Job Termination</a></h2>

The default signal handler for a STAXPythonEvaluationError signal logs a message (containing
the value of the variable named STAXPythonEvalMsg) in the STAX Job Log with level 'Error'
and sends the message to the STAX Monitor, and then it terminates the STAX job.
But what if you wanted to do some "clean up" before the signal handler for a
STAXPythonEvaluationError signal terminated the STAX job? 
<p> 
Here are three examples that show how you could make sure that cleanup gets
performed whenever a STAXPythonEvaluationError signal is raised.  The first two
examples override the default signal handler for a STAXPythonEvaluationError.
The last example (and perhaps the simplest) uses a <a href="#Header_TryCatch">
<b>try / finally</b></a> element where the finally element calls a function
to perform clean-up (no matter what -- e.g. if the job is terminated, etc).
<p> 
<ol>
<li>This example overrides the default signal handler for a STAXPythonEvaluationError
signal.  The new signal handler logs a message in the STAX Job User Log with level 'Error'
and sends the message to the STAX Monitor, calls the Cleanup function, and then
terminates the STAX job.
<ul>
<font color="darkblue">
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">

&lt;stax>

  &lt;defaultcall function="Main"/>

  <b>&lt;signalhandler signal="'STAXPythonEvaluationError'">
    &lt;sequence>

      &lt;log message="1" level="'Error'">
        'STAXPythonEvaluationError signal raised.  Clean up and terminate the job.%s' % \
        (STAXPythonEvalMsg)
      &lt;/log>
      &lt;call function="'Cleanup'"/>
      &lt;terminate block="'main'"/>

    &lt;/sequence>
  &lt;/signalhandler></b>

  &lt;function name="Main">
    &lt;sequence>

      &lt;log message="1">'Starting the Main function...'&lt;/log>
       
      &lt;log message="1">
        'Create a Python evaluation error here: %s' % (NonExistingVar)
      &lt;/log>

      &lt;call function="'Cleanup'"/>

      &lt;log message="1">'Ending the Main function...'&lt;/log>

    &lt;/sequence>
   &lt;/function>

  &lt;function name="Cleanup">
    &lt;sequence>

      &lt;log message="1">'Starting clean-up...'&lt;/log>

    &lt;/sequence>
  &lt;/function>

&lt;/stax>
</pre>      
</font>
</ul>
<p>
After running the above STAX job, the STAX Job User log contains 3 messages,
including the STAXPythonEvaluationError message and the Starting clean-up...
message.  For example: 
<ul>
<font color="darkblue">
<pre>
STAF local LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Job_8_User
Response
--------
Date-Time         Level Message
----------------- ----- -------------------------------------------------------
20070419-18:19:45 Info  Starting the Main function...
20070419-18:19:45 Error STAXPythonEvaluationError signal raised.  Clean up and
                        terminate the job.  ===== Element Information =====  &lt;l
                        og message="1">'Create a Python evaluation error here:
                        %s' % (NonExistingVar) &lt;/log>  ===== Python Error Infor
                        mation =====  com.ibm.staf.service.stax.STAXPythonEvalu
                        ationException:  Python string evaluation failed for: '
                        Create a Python evaluation error here: %s' % (NonExisti
                        ngVar)   Traceback (innermost last):    File "&lt;pyEval s
                        tring>", line 1, in ?  NameError: NonExistingVar   ====
                        = Call Stack for STAX Thread 1 =====  [    Block: main
                           Sequence: 23/23    Function: Main    Sequence: 2/4
                        ]
20070419-18:19:45 Info  Starting clean-up...
</pre>
</font>
</ul>
<p>
Note that the STAX Job log contains a terminating job message, but does not
contain the STAXPythonEvaluationError, as it is now being logged via a
<b>log</b> element in the new signal handler, instead of being logged by the
STAX service's default signal handler.  For example:
<ul>
<font color="darkblue">
<pre>
STAF local LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Job_8
Response
--------
Date-Time         Level  Message
----------------- ------ ------------------------------------------------------
20070419-18:19:45 Start  JobID: 8, File: C:/dev/src/stax/overridePythonError.xm
                         l, Machine: local://local, Function: Main, Args: null,
                          JobName: Test Overriding a SignalHandler
20070419-18:19:45 Info   Terminating block: main
20070419-18:19:45 Status Testcase Totals: Tests: 0, Pass: 0, Fail: 0
20070419-18:19:45 Status Job Result: None
20070419-18:19:45 Stop   JobID: 8
</pre>
</font>
</ul>
<p>
<li>This example overrides the default signal handler for a STAXPythonEvaluationError
signal.  The new signal handler throws a STAX Exception of type 'MyPythonException'
and with additional information about the Python error.
The Main function has a try/catch block that catches STAX Exceptions with type
'MyPythonException' and any other STAX exception.  If a STAX Exception is caught,
the catch block logs a message with level 'Error' ands sends it to the STAX Monitor.
Following the try/catch block is a call to the Cleanup function.
<ul>
<font color="darkblue">
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">

&lt;stax>

  &lt;defaultcall function="Main"/>

  <b>&lt;signalhandler signal="'STAXPythonEvaluationError'">
    &lt;sequence>

      &lt;throw exception="'MyPythonException'">
        'STAXPythonEvaluationError signal raised.%s' % (STAXPythonEvalMsg)
      &lt;/throw>

    &lt;/sequence>
  &lt;/signalhandler></b>

  &lt;function name="Main">
    &lt;sequence>

      &lt;try>

        &lt;sequence>
          &lt;log message="1">'Starting the try block for the Main function...'&lt;/log>
          &lt;log message="1">'Create a Python evaluation error here: %s' % (NonExistingVar)&lt;/log>
          &lt;log message="1">'Ending the try block for the Main function...'&lt;/log>
        &lt;/sequence>

        &lt;catch exception="'MyPythonException'" typevar="eType" var="eInfo">
          <b>&lt;log message="1" level="'Error'">
            'Handler: MyPythonException, eType: %s, eInfo: %s' % (eType, eInfo)
          &lt;/log></b>
        &lt;/catch>

        &lt;catch exception="'...'" typevar="eType" var="eInfo">
          &lt;log message="1" level="'Error'">
            "Handler: ..., eType: %s, eInfo: %s" % (eType, eInfo)
          &lt;/log>
        &lt;/catch>

      &lt;/try>

      <b>&lt;call function="'Cleanup'"/></b>
      &lt;log message="1">'Ending the Main function...'&lt;/log>

    &lt;/sequence>
   &lt;/function>

  &lt;function name="Cleanup">
    &lt;sequence>

      &lt;log message="1">'Starting clean-up...'&lt;/log>

    &lt;/sequence>
  &lt;/function>

&lt;/stax>
</pre>
</font>
</ul>
<p>
After running the above job, the STAX Job User log contains 4 messages,
including the STAXPythonEvaluationError message and the Starting clean-up...
message.
For example: 
<ul>
<font color="darkblue">
<pre>
STAF local LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Job_10_User
Response
--------
Date-Time         Level Message
----------------- ----- -------------------------------------------------------
20070419-18:24:40 Info  Starting the try block for the Main function...
20070419-18:24:40 Error Handler: MyPythonException, eType: MyPythonException, e
                        Info: STAXPythonEvaluationError signal raised.  ===== E
                        lement Information =====  &lt;log message="1">'Create a Py
                        thon evaluation error here: %s' % (NonExistingVar) &lt;/lo
                        g>  ===== Python Error Information =====  com.ibm.staf.
                        service.stax.STAXPythonEvaluationException:  Python str
                        ing evaluation failed for: 'Create a Python evaluation
                        error here: %s' % (NonExistingVar)   Traceback (innermo
                        st last):    File "&lt;pyEval string>", line 1, in ?  Name
                        Error: NonExistingVar   ===== Call Stack for STAX Threa
                        d 1 =====  [    Block: main    Sequence: 23/23    Funct
                        ion: Main    Sequence: 1/3    Try:     Sequence: 2/3  ]
20070419-18:24:40 Info  Starting clean-up...
20070419-18:24:40 Info  Ending the Main function...
</pre>
</font>
</ul>
<p>
Note that the STAX Job log does not contain the STAXPythonEvaluationError,
as it is now being logged via a <b>log</b> element within the catch element,
instead of being logged by the STAX service's default signal handler.
For example:
<ul>
<font color="darkblue">
<pre>
STAF local LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Job_10
Response
--------
Date-Time         Level  Message
----------------- ------ ------------------------------------------------------
20070419-18:24:40 Start  JobID: 10, File: C:/dev/src/stax/overridePythonError2.
                         xml, Machine: local://local, Function: Main, Args: nul
                         l, JobName: Test Overriding a SignalHandler
20070419-18:24:40 Status Testcase Totals: Tests: 0, Pass: 0, Fail: 0
20070419-18:24:40 Status Job Result: None
20070419-18:24:40 Stop   JobID: 10
</pre>
</font>
</ul>
<p>
<li>You don't have to override the default signal handler for a
STAXPythonEvaluationError signal in order to do some "clean up" before
the signalhandler for a STAXPythonEvaluationError signal terminates the
STAX job.  Instead, you could use a <a href="#Header_TryCatch"><b>try / finally</b></a>
element because the <b>finally</b> task is executed no matter what -- even when a
STAXPythonEvaluationError signal is raised and the STAX job is terminated.
For example:
<ul>
<font color="darkblue">
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">

&lt;stax>

  &lt;defaultcall function="Main"/>

  &lt;function name="Main">
    &lt;sequence>

      <b>&lt;try></b>
        
        &lt;sequence>
          &lt;log message="1">'Starting the try block for the Main function...'&lt;/log>
          &lt;log message="1">'Create a Python evaluation error here: %s' % (NonExistingVar)&lt;/log>
          &lt;log message="1">'Ending the try block for the Main function...'&lt;/log>
        &lt;/sequence>

        <b>&lt;finally>
          &lt;call function="'Cleanup'"/>
        &lt;/finally>

      &lt;/try></b>

      &lt;log message="1">'Ending the Main function...'&lt;/log>

    &lt;/sequence>
   &lt;/function>

  &lt;function name="Cleanup">
    &lt;sequence>

      &lt;log message="1">'Starting clean-up...'&lt;/log>

    &lt;/sequence>
  &lt;/function>

&lt;/stax>
</pre>
</font>
</ul>
<p>
After running the above job, the STAX Job User log contains 2 messages,
including the Starting clean-up... message.  For example: 
<ul>
<font color="darkblue">
<pre>
STAF local LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Job_12_User
Response
--------
Date-Time         Level Message
----------------- ----- -----------------------------------------------
20070419-18:35:23 Info  Starting the try block for the Main function...
20070419-18:35:23 Info  Starting clean-up...
</pre>
</font>
</ul>
<p>
Note that the STAX Job log contains the STAXPythonEvaluationError
as it is being logged by the STAX service's default signal handler and
the terminating job message.
For example:
<ul>
<font color="darkblue">
<pre>
STAF local LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Job_12
Response
--------
Date-Time         Level  Message
----------------- ------ -------------------------------------------------------
20070419-18:35:22 Start  JobID: 12, File: C:/dev/src/stax/overridePythonError3.x
                         ml, Machine: local://local, Function: Main, Args: null,
                          JobName: Use Try/Finally to do Clean-up"
20070419-18:35:23 Error  STAXPythonEvaluationError signal raised. Terminating jo
                         b.   ===== Element Information =====  &lt;log message="1">
                         'Create a Python evaluation error here: %s' % (NonExist
                         ingVar) &lt;/log>  ===== Python Error Information =====  c
                         om.ibm.staf.service.stax.STAXPythonEvaluationException:
                           Python string evaluation failed for: 'Create a Python
                          evaluation error here: %s' % (NonExistingVar)   Traceb
                         ack (innermost last):    File "&lt;pyEval string>", line 1
                         , in ?  NameError: NonExistingVar   ===== Call Stack fo
                         r STAX Thread 1 =====  [    Block: main    Sequence: 22
                         /22    Function: Main    Sequence: 1/2    Finally:
                         Try:     Sequence: 2/3  ]
20070419-18:35:23 Info   Terminating block: main
20070419-18:35:23 Status Testcase Totals: Tests: 0, Pass: 0, Fail: 0
20070419-18:35:23 Status Job Result: None
20070419-18:35:23 Stop   JobID: 12
</pre>
</font>
</ul>
</ol>

<br>

<h2><a name="Header_Stax_LogMessage" href="#ToC_Stax_LogMessage">Logging / Messages</a></h2>

The <a href="#Header_Log_Element">log</a> and
<a href="#Header_Message_Element">message</a> elements deal
with logging a message to a STAX job user log and sending a message to the STAX Monitor.

<h2><a name="Header_Log_Element" href="#ToC_Log_Element">log:  
Log a Message in the STAX Job User Log</a></h2>

The <b>log</b> element may be used to log a message in the
STAX job user log. The log value and log level must evaluate via Python to a string value.
<p>
The <b>log</b> element has the following optional attributes:
<ul>
<li><b>level</b> - is the logging level of the message to be logged.  It must evaluate
via Python to be one of the
STAF logging levels ('fatal', 'error', 'warning', 'info', 'trace', 'trace2', 'trace3', 'debug',
'debug2', 'debug3', 'start', 'stop', 'pass', 'fail', 'status', 'user1', 'user2',
'user3', 'user4', 'user5', 'user6', 'user7', or 'user8').  It defaults to 'info'.
<li><b>if</b> - is an expression that is evaluated via Python to a boolean value.
If it evaluates to false, the message is not logged.  It defaults to true ('1').
<li><b>message</b> - is an expression that is evaluated via Python to a boolean value.
If it evaluates to true, the message is also sent to the STAX Monitor and displayed via
its GUI in the message panel.  It defaults to the STAXMessageLog variable whose value
will default to 0 (false), but can be changed within the STAX job to turn on messaging
(for the whole job or just within a function or block, etc.)
</ul>
<p>
Refer to the <a href="#Header_StaxLogging">"STAX Logging"</a> section for more information
on how to query a STAX job user log.
<h4>
Usage:</h4>
<p>
The following example of the <b>log</b> element logs a message of level 'info' (the
default log level) in the STAX job user log.  If the STAXMessageLog variables evaluates
via Python to true, the message will also be sent to the STAX Monitor:
<pre>
<b>&lt;log>'The test is successful'&lt;/log></b>
</pre>
<p>
The following example of the <b>log</b> element logs a message of level 'info' (the
default log level) in the STAX job user log and sends the message to the STAX Monitor:
<pre>
<b>&lt;log message="1">'The test is successful'&lt;/log></b>
</pre>
<p>
The following example of the <b>log</b> element logs two messages in the STAX job user
log and sends the messages to the STAX Monitor,
since the STAXMessageLog variable has been set to 1 (true):
<pre>
&lt;script>STAXMessageLog = 1&lt;/script>
<b>&lt;log>'The test was successful'&lt;/log>
&lt;log level="'warning'">'File xyz was not found'&lt;/log></b>
</pre>
<p>
The following example of the <b>log</b> element logs a message of level 'info' (the
default log level) in the STAX job user log after successfully running a STAF command
If the STAF command fails, it logs a message of level 'warning' in the STAX job user
log.
<pre>
&lt;sequence>

  &lt;stafcmd>
    &lt;location>machName&lt;/location>
    &lt;service>"misc"&lt;/service>
    &lt;request>"version"&lt;/request>
  &lt;/stafcmd>

  &lt;if expr="RC == STAFRC.Ok">
    <b>&lt;log>'Machine %s is running STAF Version %s' % (machName,STAFResult)&lt;/log></b>
    &lt;else>
      <b>&lt;log level="'warning'">'RC=%s on %s' % (RC, machName)&lt;/log></b>
    &lt;/else>
  &lt;/if>

&lt;/sequence>
</pre>

Note that instead of using the "if" element, could use the "if" attribute of the log element
as follows:
<pre>
  <b>&lt;log if="RC == STAFRC.Ok">'Machine %s is running STAF Version %s' % (machName, STAFResult)&lt;/log>
  &lt;log if="RC != STAFRC.Ok" level="'warning'">'RC=%s on %s' % (RC, machName)&lt;/log></b>
</pre>

<h2><a name="Header_Message_Element" href="#ToC_Message_Element">message:  
Send a Message to the STAX Monitor</a></h2>

The <b>message</b> element specifies a message which will be sent
to the STAX Monitor and displayed via its GUI.
The message value must evaluate via Python to a string value.
<p>
The <b>message</b> element has the following optional attribute:
<ul>
<li><b>if</b> - is an expression that is evaluated via Python to a boolean value.
If it evaluates to false, the message element is ignored (meaning the message is
not sent (or logged).  It defaults to true ('1').
<li><b>log</b> - is an expression that is evaluated via Python to a boolean value.
If it evaluates to true, the message is also logged in the STAX Job User log.
It defaults to the STAXLogMessage variable whose value will default to 0 (false),
but can be changed within the STAX job to turn on logging (for the whole job or
just within a function or block, etc).
<li><b>level</b> - is the logging level of the message to be logged in the STAX Job
User log.  It must evaluate via Python to be one of the
STAF logging levels ('fatal', 'error', 'warning', 'info', 'trace', 'trace2', 'trace3', 'debug',
'debug2', 'debug3', 'start', 'stop', 'pass', 'fail', 'status', 'user1', 'user2',
'user3', 'user4', 'user5', 'user6', 'user7', or 'user8').  It defaults to 'info'.
If the log attribute evaluates to false, this attribute is ignored.
</ul>
Note that any private data contained in a message will be masked (replaced with asterisks)
before the message is sent.
<h4>
Usage:</h4>

The following example of the <b>message</b> element sends a message to the
STAX Monitor which displays it in the "Messages" panel.  If the STAXLogMessage
variable evaluates via Python to true, the message will also be logged in
the STAX Job User log with a logging level of 'info' (the default).
<pre>
<b>&lt;message>'The test is successful'&lt;/message></b>
</pre>
<p>
The following example of the <b>message</b> element sends a message to the
STAX Monitor and logs the message with a logging level of 'info' (the
default log level) in the STAX Job User log:
<pre>
<b>&lt;message log="1">'The test is successful'&lt;/message></b>
</pre>
<p>
The following example of the <b>message</b> element sends two messages to the
STAX Monitor and logs the two messages in the STAX Job User log since the
STAXLogMessage variable has been set to 1 (true):
<pre>
&lt;script>STAXLogMessage = 1&lt;/script>
<b>&lt;message>'The test was successful'&lt;/message>
&lt;message level="'warning'">'File xyz was not found'&lt;/message></b>
</pre>
<p>
The following example of the <b>message</b> element sendss a message
to the STAX Monitor which displays it in the "Messages" panel:
<pre>&lt;function name="Valid-if-RC-0">
&nbsp; &lt;if expr="RC != 0">
<b>&nbsp;&nbsp;&nbsp; &lt;message>'RC=%s on machine %s' % (RC, machName)&lt;/message></b>
&nbsp; &lt;/if>&nbsp;
&lt;/function></pre>
Note that instead of using the "if" element, could use the "if" attribute of the message element
as follows:
<pre>
  <b>&lt;message if="RC != 0">'RC=%s on machine %s' % (RC, machName)&lt;/message></b>
</pre>


<h2><a name="Header_Stax_Breakpoint" href="#ToC_Stax_Breakpoint">Breakpoint</a></h2>

The <a href="#Header_Breakpoint_Element">breakpoint</a> element allows you to
denote a breakpoint in the STAX job.  Breakpoints can be used to debug STAX
jobs.
<p>
When a breakpoint is reached within the STAX job, the current STAX thread's
execution will pause, and the user can perform the following tasks:
<ul>
<li>retrieve all of the Python variables that are currently set in the thread
<li>execute Python code when a thread is at a breakpoint (to change
 the values of existing variables or define new variables)
<li>resume the breakpoint
<li>step into the breakpoint
<li>step over the breakpoint
</ul>
<p>Note that when you add a <b>breakpoint</b> element to your STAX job, the
STAX job will always stop execution at the breakpoint.  When you have finished
debugging your STAX job, you must remove any <b>breakpoint</b> elements.
<p>
If you do not want to modify your STAX job to include <b>breakpoint</b>
elements, you can set any number of breakpoints (for specific functions or
line numbers) when submitting the job (via the STAX EXECUTE BREAKPOINT option),
or dynamically after the STAX job has started (via the STAX ADD BREAKPOINT
request).
<p>
For more information on using breakpoints, see 
<a href="#Header_UsingBreakpoints"><b>Using Breakpoints to Debug STAX Jobs</b></a>.

<h2><a name="Header_Breakpoint_Element" href="#ToC_Breakpoint_Element">breakpoint:
Setting Breakpoint in a STAX Job</a></h2>
<p>
The <b>breakpoint</b> element is an empty element and has no attributes.
<h4>
Usage:</h4>

In the following example a <b>breakpoint</b> element has been added to a
<b>sequence</b>.  After the STAX job completes testcase "Java2D", the current
STAX thread will be at a breakpoint.  After the thread is resumed or stepped,
testcase "Print" will be executed.
<pre>
&lt;sequence>

  &lt;call function="'Setup'"/>

  &lt;testcase name="Java2D">
    &lt;sequence>
      &lt;script>variationList = Java2DAPI[:]&lt;/script> 
      &lt;script>jarName = '%s/%s' % (TestCaseDir, TestCaseFiles[0])&lt;/script>
      &lt;call function="'RunVariations'"/>          
    &lt;/sequence>
  &lt;/testcase>

  &lt;breakpoint/>

  &lt;testcase name="Print">
    &lt;sequence>
      &lt;script>variationList = PrintAPI[:]&lt;/script> 
      &lt;script>jarName = '%s/%s' % (TestCaseDir, TestCaseFiles[1])&lt;/script>
      &lt;call function="'RunVariations'"/>
    &lt;/sequence>
  &lt;/testcase>

&lt;/sequence>

</pre>
<p><br>
<hr>

<h1><a name="Header_Requirements" href="#ToC_Requirements">System Requirements</a></h1>

A STAX Service machine is where the STAX Service is installed. The STAX
Service machine has the following software and hardware requirements:

<h2><a name="Header_SWReqs" href="#ToC_SWReqs">Software Requirements</a></h2>

<ul>
<li>STAF Version 3.3.4 or higher must be installed on
    the STAX Service machine.

<li>The STAX Service code.</li>

<li>The STAX Service is written in Java and requires Java 1.5 or higher.

<li>A file system that supports long file names.</li>

<li>Any operating system that is supported by STAF.  See the STAF
User's Guide for a list of supported operating systems.</li>
</ul>

<h2><a name="Header_HWReqs" href="#ToC_HWReqs">Hardware Requirements</a></h2>

<ul>
<li>
Pentium 300 Mhz CPU minimum</li>

<li>
64M memory minimum</li>
</ul>
<p>
<hr>

<h1><a name="Header_Installation" href="#ToC_Installation">Installation and Configuration</a></h1>

<p>
Following is a diagram showing a typical configuration when using STAX.  Usually, you install
a single server-type system to be the STAX service machine.  It has STAF installed with the
STAX and Event services configured.  This system must be up and running STAF while STAX jobs are
running on it.
<p>
You can request STAX jobs to be executed and monitor them using the STAX Monitor (or via
command-line requests).  This can be done from any machine, such as your office or home machine,
as long as it is running STAF and has TCP/IP network capabilities such that it can
communicate with the STAX service machine.  Note that the same job can be monitored from
multiple systems simultaneously.
<p>
The execution machines are the machines where you want tests to be run.  Any number of
execution machines can be involved in a single STAX job.
A STAX job generally consists of processes and STAF commands that make up various testcases
that run on any number of execution machines.  The &lt;location> element, which is
part of each &lt;process> and &lt;stafcmd> element in a job, specifies the execution machine
where the process or STAF command is run.
You can pass additional information (e.g. a list of execution machines and/or tests) when
submitting a STAX job for execution using SCRIPT/SCRIPTFILE parameters or by passing
arguments to the starting function for the job.
<p>
<img src="staxconfig.gif" alt="Typical Configuration for STAX">

<h2><a name="Header_StaxServiceMach" href="#ToC_StaxServiceMach">STAX Service Machine</a></h2>

<ol>
<li>Install Java 1.5 or later from Sun or IBM.
<p>
The STAX Service is written in Java, so you need to install a JVM
(e.g. Sun or IBM) on the STAX Service machine.
IBM employees must download the Sun or IBM JVM from the internal JIM site.
Non-IBM users can download from http://java.sun.com.  We recommend that
you install the most recent fixpack for the JVM you want to use, so that
you will have all of the latest fixes.
You cannot use the GNU libgcj compiler for Java on Linux.
<p>Verify that the PATH environment variable contains the Java bin directory
(e.g. C:\j2sdk1.5.0\bin).  You can type "java -version" to check the
version of Java that's in the PATH.  Or you can override the version
of Java that you want the STAX service to use when registering the
STAX service via the OPTION JVM=&lt;Java Path> option when creating a
new JVM (e.g. OPTION JVM=C:\j2sdk1.5.0\bin\java).
</li>
<p>
<li>Install STAF Version 3.3.4 or later by following the
    installation instructions in the STAF documentation.
<p>Verify that the CLASSPATH environment variable contains the
JSTAF.jar file (e.g. C:\STAF\bin\JSTAF.jar or /usr/local/staf/lib/JSTAF.jar).
JSTAF.jar contains the STAF Java APIs to communicate with STAF from
Java programs and is required to register STAF services written in Java.
</li>
<p>
<li>
Install the STAX service:</li>
<p>
<ol type="a">
<li>
Download the STAXV350Beta1.zip/tar file from
<a href="http://staf.sourceforge.net/getstax.php">Download STAX Service</a>
and extract the STAX tar/zip file into a local directory.
  <UL>
  <LI>On Windows, unzip the STAXV350Beta1.zip file into a local directory (e.g. C:\STAF\services).</li>
  <LI>On Unix, untar the STAXV350Beta1.tar file into a local directory (e.g. /usr/local/staf/services).</li>
  </UL>
  <p>
  Note that extracting the STAXV350Beta1.zip/tar file will create a stax
  sub-directory (if one does not already exist).  If you already have STAX installed
  at this location, you may want to backup the existing STAX installing by renaming
  the stax subdirectory (e.g. if STAX V3.4.4 is currently installed, you could rename
  it to stax344).  However, if you currently have the STAX and/or Event services
  configured in the STAF configuration file, before you rename the directory containing
  the STAX.jar and STAFEvent.jar files, you'll need to first shutdown STAF in order to
  rename the directory.</LI>
<P>
<li>Verify that the stax subdirectory in the local directory where you extracted the STAX zip/tar file now includes the
following files:
  <UL>
    <LI>STAX_NoJython.jar</LI>
    <LI>STAXMon.jar</LI>
    <li>STAFEvent.jar file.</li>
    <li>STAXJarUpdateForJython252.class</li>
  </UL>
  <p>
  The purpose of STAX V3.5.0 Beta 1 is to provide support for Jython 2.5.2
  (instead of Jython 2.1 which is what is supported by previous STAX versions).
  However, because the final Jython 2.5.2 version has not yet been released and
  because we don't have approval to distribute the final Jython 2.5.2 version
  yet, the STAX service jar file provided, STAX_NoJython.jar, does not contain
  Jython 2.5.2.  So, as talked about in the following steps, you need to
  download the latest version of Jython 2.5.2 available via the Jython website
  and install it and then run the provided <b>STAXJarUpdateForJython252</b>
  Java application to create a STAX.jar file to use for registering the STAX
  service that embeds Jython 2.5.2.
<p>
<li>Download the latest version of Jython 2.5.2 available via 
    <a href="http://www.jython.org">The Jython Project</a> and install it in a
    location of your choice.  You must use Jython 2.5.2 - Release Candidate 2 or later.
    Once you've downloaded the Java installer, e.g. jython_installer-2.5.2rc2.jar,
    to start the installation process, make sure that you're using Java 1.5
    or later and either double-click on the JAR file or run the following command:
    <pre>java -jar jython_installer-2.5.2rc2.jar</pre>
    You may also want to read the
    <a href="http://wiki.python.org/jython/InstallationInstructions">Jython Installation
    Instructions</a> or the <a href="http://www.jython.org/latest.html">Jython 2.5.2
    Release Notes</a>.
    <p>
    When prompted:
    <p>
    <ul>
      <li>Choose the "Standard" Installation Type for Jython.
      <p>
      <li>For the target directory, use the default (e.g. C:\jython2.5.2rc2),
          or input a directory name of your choice.  Note the target directory
          you specified because you'll need it later when running Java application
          <b>STAXJarUpdateForJython252</b> so it can embed Jython 2.5.2 into a
          STAX.jar file.
    </ul>
<p>
<li>Create a new STAX.jar file from the STAX_NoJython.jar file that
    contains Jython 2.5.2 embedded within it by running Java application
    <b>STAXJarUpdateForJython252</b>.  The STAX.jar it creates will be
    used to register the STAX V3.5.0 Beta 1 service.
    To run this Java application, you need to have a Java 1.5 or later
    SDK (not just the JRE) installed and in the PATH so that you have access
    to the <b>jar</b> tool to use to create a new STAX.jar file and STAFProc
    needs to be running.
    <p>
    <ul>
    <li>From a command prompt, type <b>jar</b> and verify that it outputs usage
        information which indicates that this executable is accessible via the PATH.
        If this executable is not recognized as an external command, then verify
        that a Java 1.5 or later SDK is installed and add the Java bin directory
        that contains the jar executable to the PATH and retry.
    <p>
    <li>Verify that STAFProc is running (because the <b>STAXJarUpdateForJython252</b>
        Java application will need to be able to submit local STAF service requests) 
        by running the following command:
        <pre>STAF local PING PING</pre>
        <p>Note:  If you renamed the stax directory earlier, in order to be able
        to start STAFProc, you will need to temporarily comment out the line that
        registers the STAX service in the STAF configuration file if it now refers
        to a STAX.jar file that doesn't exist yet.
    <p>
    <li>Change to the directory where you extracted the STAXV350Beta1.zip/tar
        file, (e.g. C:\STAF\services if on Windows or /usr/local/staf/services
        if on Unix) and then change to the stax directory (which contains files
        STAXJarUpdateForJython252.class and STAX_NoJython.jar.</li>
    <p>
    <li>Run the <b>STAXJarUpdateForJython252</b> Java application specifying a
        CLASSPATH that contains the current directory as well as the JSTAF.jar
        file, which is should already be in your CLASSPATH.  Also, pass the
        fully-qualified path of the directory where you installed Jython 2.5.2
        as an argument to this Java application.  For example:
        <p>
        <ul>
        <li>On Windows:
        <pre>java -cp .;%CLASSPATH% STAXJarUpdateForJython252 C:\jython2.5.2rc2</pre>
        <li>On Unix:
        <pre>java -cp .:$CLASSPATH STAXJarUpdateForJython252 /tmp/jython2.5.2rc2</pre>
        </ul>
        The output from running this Java application should look similar to:
<pre>
C:\STAF\services\stax>java -cp .;%CLASSPATH% STAXJarUpdateForJython252 C:\jython2.5.2rc2

Registering with STAF...

Extracting the C:\STAF\services\stax\STAX_NoJython.jar file...
STAF local PROCESS START SHELL COMMAND :46:jar xf C:\STAF\services\stax\STAX_NoJython.jar WORKDIR :30:C:\STAF\services\stax RETURNSTDOUT STDERRTOSTDOUT WAIT

Copying the jython.jar file...
STAF local FS COPY FILE :28:C:\jython2.5.2rc2\jython.jar TOFILE :46:C:\STAF\services\stax\STAF-INF\jars\jython.jar

Copying the Jython Lib directory...
STAF local FS COPY DIRECTORY :21:C:\jython2.5.2rc2\Lib TODIRECTORY :36:C:\STAF\services\stax\JYTHON-INF\Lib RECURSE

Creating STAX.jar which includes Jython 2.5.2...
STAF local PROCESS START SHELL COMMAND :57:jar cfm STAX.jar META-INF/MANIFEST.MF STAF-INF JYTHON-INF WORKDIR :21:C:\STAF\services\stax RETURNSTDOUT STDERRTOSTDOUT WAIT

Use jar file C:\STAF\services\stax\STAX.jar to register the STAX V3.5.0 Beta 1 service.

Performing clean-up...

Completed successfully
</pre>
    <li>If you temporarily commented out the line that registers the STAX service
        in the STAF configuration file, un-comment the line so that it registers
        STAX using the new STAX.jar file you just created for STAX V3.5.0 Beta 1.
    </ul>
</ol>
<p>

<p>
<li>
Update the STAF configuration file as follows:
<p>
<ul type="a">
<li>Register the STAX service.
<li>Register the Event service if the Event Service is also installed on the STAX Service system
and you plan to use the STAX Monitor.
<li>Register the Log service if you want STAX log files to be created by the STAX service.  Note
that the default STAF configuration file includes a SERVICELOADER configuration line for STAF's
default service loader which can dynamically load the Log Service.
</ul>
<p>
Following is the syntax for the lines which should be present in the STAF configuration file:
<pre>
SERVICELOADER LIBRARY STAFDSLS

SERVICE &lt;Name> LIBRARY JSTAF EXECUTE &lt;STAX Jar File Name>
               [OPTION &lt;Name[=Value]>]...
               [PARMS &lt;"> [EVENTSERVICEMACHINE &lt;EventMachine>]
                          [EVENTSERVICENAME &lt;EventName>]
                          [NUMTHREADS &lt;NumThreads>]
                          [PROCESSTIMEOUT &lt;ProcessTimeout>]
                          [FILECACHING &lt;Enabled | Disabled>]
                          [MAXFILECACHESIZE &lt;Max Files>]
                          [FILECACHEALGORITHM &lt;LRU | LFU>
                           [MAXFILECACHEAGE &lt;Number>[s|m|h|d|w]]]
                          [MAXMACHINECACHESIZE &lt;Max Machines>]
                          [MAXRETURNFILESIZE &lt;Number>[k|m]]
                          [MAXGETQUEUEMESSAGES &lt;Number>]
                          [MAXSTAXTHREADS &lt;Number>]
                          [CLEARLOGS &lt;Enabled | Disabled>]
                          [LOGTCELAPSEDTIME &lt;Enabled | Disabled>]
                          [LOGTCNUMSTARTS &lt;Enabled | Disabled>]
                          [LOGTCSTARTSTOP &lt;Enabled | Disabled>]
                          [PYTHONOUTPUT &lt;PythonOutput>]
                          [PYTHONLOGLEVEL &lt;Log Level>]
                          [EXTENSIONXMLFILE &lt;Extension XML File> |
                           EXTENSIONFILE &lt;Extension Text File>]
                          [EXTENSION &lt;Extension Jar File>...
                      &lt;">]

SERVICE &lt;Name> LIBRARY JSTAF EXECUTE &lt;Event Jar File Name>
               [OPTION &lt;Name[=Value]>]...
</pre>

where:
<ul>
<li><tt>&lt;Name></tt> is the name by which the
service will be known on this machine.  The name of the STAX Service should generally be STAX and
the name of the Event Service should generally be Event.</li>
<p>
<li><tt>&lt;STAX Jar File Name></tt> is the
fully qualified name of the STAX.jar file.  On Windows systems, this might be
C:\STAF\services\STAX.jar.  On Unix systems, this might be /usr/local/staf/services/STAX.jar.</li>
<p>
<li><tt>&lt;Event Jar File Name></tt> is the
fully qualified name of the STAFEvent.jar file.  On Windows systems, this might be
C:\STAF\services\STAFEvent.jar.  On Unix systems, this might be
/usr/local/staf/services/STAFEvent.jar</li>
<p>
<li><tt>OPTION</tt> specifes a
configuration option that will be passed on to the JSTAF Java service proxy library.
This is typically used by service proxy libraries to further control the interface
to the actual service implementation. You may specify
multiple <tt>OPTIONs</tt> for a
given service.  See the STAF User's Guide for more information on options for the JSTAF Java
service proxy library.
<p>
Note that if you run long, resource-intensive STAX jobs, you may need to increase the
minimum and maximum JVM heap sizes for the STAX Service to the maximum that the system can support
based on its physical memory and the memory usage required by other applications running on the
system.  Also, you can override the version of Java that you want the STAX service
to use when registering the STAX service via the OPTION JVM=&lt;Java Path> option
if you're creating a new JVM (e.g. OPTION JVM=C:\j2sdk1.5.0\bin\java).
<p>
<li>
<tt>EVENTSERVICEMACHINE</tt> specifies the name of the
Event service machine.  It defaults to "local".  This option will resolve STAF variables.
<br><b>Note:</b> We recommend not to specify the <tt>EVENTSERVICEMACHINE</tt> parameter if
the Event service is running in the same STAF instance as the STAX service for performance
reasons.
</li>
<p>
<li>
<tt>EVENTSERVICENAME</tt> specifies the name by which the
Event service will be known to the STAX service.  It defaults to "Event" (not case-sensitive) if not
specified.  This option will resolve STAF variables.</li>
<p>
<li>
<tt>NUMTHREADS</tt> specifies the number of
physical threads that the STAX Service will use.  It must be an integer value of 2 or greater.
It defaults to 5 if not specified.  This option will resolve STAF variables.</li>
<p>
<li>
<tt>PROCESSTIMEOUT</tt>
specifies the number of milliseconds that the STAX service will wait for processes to
start.  It must be an integer value of 1000 (1 second) or greater.  It's value
should be at least the value of the CONNECTTIMEOUT operational parameter set
for STAF on the STAX service machine.
The default is 60000 milliseconds (1 minute).  If a process does not start
within the timeout value, a STAXProcessStartTimeout signal will be raised and
the job will continue.
<p>
<li>
<tt>FILECACHING</tt> specifies whether file caching will be performed.
STAX file caching can improve performance when a STAX XML file is executed or imported
more than once.  Valid values are "Enabled" and "Disabled", not case-sensitive.
If you specify "Enabled", file caching will be performed.
If you specify "Disabled", file caching will not be performed.
The default is "Enabled".
This option will resolve STAF variables.
For more information on how file caching works, refer to the
<a href="#Header_StaxFileCache">"STAX File and Machine Caching"</a> section.
The maximum number of entries in the file cache can be changed using the
MAXFILECACHESIZE parameter described below.
<p>
<li>
<tt>MAXFILECACHESIZE</tt> specifies the maximum number of files that can be cached
before files are removed.  It must be an integer value >= -1.
A value of 0 is equivalent to disabling file caching.  A value of -1 means
the cache size is unlimited.  The default is 20.  This option only has an
effect if file caching is enabled.  This option will resolve STAF variables.
<p>
<li>
<tt>FILECACHEALGORITHM</tt> specifies the cache algorithm (aka replacement
    algorithm) for the file cache.  When the cache is full (or when the size
    of the cache is changed to a smaller value), this algorithm chooses which
    files to discard to make room for the new files.  Valid values are LRU or LFU.
    <p>
    <ol>
    <li>LRU specifies the "Least Recently Used" cache algorithm which removes
        the least recently used file first (e.g. the file with the oldest
        "Last Hit Date-Time").  This is the default.
    <p>
    <li>LFU specifies the "Least Frequently Used" cache algorithm which removes
        the file that is used least often (e.g. the file with the least number
        of "Hits").  If cached files have the same number of hits, the file
        with the oldest "Last Hit Date-Time" will be removed.
        <p>
        In addition, you can set a maximum age for a file in the file cache
        by specifying the <tt>MAXFILECACHEAGE</tt> parameter so that this
        algorithm will also take into account if a file hasn't been used
        for the specified maximum age which means it is considered to be stale.
        The maximum age is 0 by default, which means that there is no maximum age.
        If you set the maximum age to a non-zero value, this indicates that
        a file in the cache will be considered to be "stale" if it hasn't
        been used (last hit) for this maximum age.  Stale files with the oldest
        "Last Hit Date-Time" will be removed before any non-stale files.
</ol>
<p>
<li>
<tt>MAXFILECACHEAGE</tt> specifies the maximum age for a file in the cache
    and is only used if the <tt>FILECACHEALGORITHM</tt> is set to LFU.
    The maximum age may be expressed in seconds, minutes, hours, days, or weeks.
    Its format is &lt;Number>[s|m|h|d|w] where &lt;Number> must be an integer
    from 0 to 2147483647 and indicates seconds unless one of the following
    case-insensitive suffixes is specified: s (for seconds), m (for minutes),
    h (for hours), d (for days), or w (for weeks).  If &lt;Number> is 0,
    this means that there is no maximum age.  Examples:
    <ul compact>
    <li>0 (no maximum age)
    <li>30 (30 seconds)
    <li>30s (30 seconds)
    <li>5m (5 minutes)
    <li>2h (2 hours)
    <li>1d (1 day)
    <li>1w (1 week)
    </ul>
<p>
<li>
<tt>MAXMACHINECACHESIZE</tt> specifies the maximum number of machines that can
be cached before machines are removed using a least recently used algorithm.
It must be an integer value >= -1.
A value of 0 means that machine caching is disabled.  A value of -1 means
the cache size is unlimited.  The default is 20.
This option will resolve STAF variables.
STAX machine caching can improve performance when a STAX XML file being executed
or imported resides on the same machine as another file that has already been
executed or imported since information about that machine will be cached.
For more information on how machine caching works, refer to the
<a href="#Header_StaxFileCache">"STAX File and Machine Caching"</a> section.
<p>
<li>
<tt>MAXRETURNFILESIZE</tt> specifies the maximum size of a file that
can be returned by either:
<p>
<ul>
<li>A process element that uses the returnstdout, returnstderr, and/or
    returnfile sub-element
<li>A stafcmd element that submits a GET FILE request to the FS service
</ul>
<p>The default is 0 which indicates not to limit the maximum size of
returned files.  Limiting the maximum returned file size can help
prevent out of memory issues as these requests put the entire returned file
contents in a result string which can consume a lot of memory for large files.
This value may be expressed in bytes, kilobytes, or megabytes.
Its format is <tt>&lt;Number>[k|m]</tt> where <tt>&lt;Number></tt> is an integer
>= 0 and indicates bytes unless one of the following case-insensitive suffixes
is specified:  <tt>k</tt> (for kilobytes) or <tt>m</tt> (for megabytes).
The calculated value cannot exceed <tt>4294967294</tt> bytes.
Examples of valid values include <tt>100000</tt>, <tt>500k</tt>, or <tt>5m</tt>.
<p>
Note that the machine where the process or stafcmd is run must have
STAF V3.3.4 or later installed for it to recognize the maximum return
file size option.
<p>
<li>
<tt>MAXGETQUEUEMESSAGES</tt> specifies the maximum number of messages
that a STAX job's STAFQueueMonitor thread will get from the STAX job
handle's queue at a time (via a local
:xph.QUEUE GET WAIT FIRST <MaxGetQueueMessages>:exph. request).
It must be an integer > 0 and < 101.  The default is 25.
This parameter was added in STAX V3.4.1.
<p>
<li>
<tt>MAXSTAXTHREADS</tt> is the maximum number of STAX Threads that can be
running simultaneously in a job.  This maximum cannot be exceeded when
&lt;paralleliterate> and &lt;parallel> elements start new STAX Threads.
It must be an integer from 0 to 2147483647.
The default is 0 which means there is no maximum.
Its purpose is to help prevent "runaway" STAX jobs that use paralleliterate
and/or parallel elements to run too many threads in parallel which can cause
the STAX service to run out of memory and crash.  If it is set to a non-zero
number and this number is exceeded by a STAX job, the STAX service will
raise a STAXMaxThreadsExceeded signal whose default action is to log a
message and terminate the job.
<p>
<li>
<tt>CLEARLOGS</tt> specifies
whether the STAX Job and Job User logs should be deleted before a job is executed.
Since STAX job numbers are reused, a specific job log may contain the results for
more than one job.  Valid values are "Enabled" and "Disabled", not case-sensitive.
If you specify "Enabled", the log files will be deleted before a job is executed,
in order to ensure that only one job's contents are in the logs.  If you specify
"Disabled", the job logs will not be deleted.  The default is "Disabled".
This option will resolve STAF variables.
<p>
<li>
<tt>LOGTCELAPSEDTIME</tt> specifies
whether to log the elapsed time in the summary "Status" record for each testcase
written at the end of the STAX Job log and when you list testcases.
Valid values are "Enabled" and "Disabled", not case-sensitive.
If you specify "Enabled", the elapsed time will be logged.  If you specify
"Disabled", the elapsed time will not be logged.  The default is "Enabled".
This option will resolve STAF variables.
<p>
<li>
<tt>LOGTCNUMSTARTS</tt> specifies
whether to log the number of starts in the summary "Status" record for each testcase
written at the end of the STAX Job log and when you list testcases.
Valid values are "Enabled" and "Disabled", not case-sensitive.
If you specify "Enabled", the number of starts will be logged.  If you specify
"Disabled", the number of starts will not be logged.  The default is "Enabled".
This option will resolve STAF variables.
<p>
<li>
<tt>LOGTCSTARTSTOP</tt> specifies
whether to log a "Start" record each time a testcase begins and to log a "Stop"
record each time a testcase ends in the STAX Job log.
Valid values are "Enabled" and "Disabled", not case-sensitive.
If you specify "Enabled", the start/stop testcase records will be logged.  If you specify
"Disabled", the start/stop testcase records will not be logged.  The default is "Disabled".
This option will resolve STAF variables.
<p>
<li>
<tt>PYTHONOUTPUT</tt> specifies
where Python stdout/stderr should be redirected (e.g. if you use the print
statement in a &lt;script> element in a STAX job).
Valid values are the following (not case-sensitive):
<ul compact>
  <li>"JobUserLog" indicates to log the Python output in the STAX Job User log.
      This is the default.
  <li>"Message" indicates to send the Python output to the STAX Monitor and
      display it in the Messages panel.
  <li>"JobUserLogAndMsg" indicates to log the Python output in the STAX Job
      User log and to send it to the STAX Monitor and display it in the
      Messages panel.
  <li>"JVMLog" indicates to write the Python output in the JVM Log for the STAX
      service using the following format so that you will know which STAX job
      originated the output and at what time:  
      <tt>&lt;Timestamp> [JobID: &lt;JobID>] &lt;Python Output></tt>
</ul>
<p>
This option will resolve STAF variables.
<p>
<li>
<tt>PYTHONLOGLEVEL</tt> specifies
the STAF logging level to use when Python stdout is redirected to the STAX
Job User Log, which means this option only has an effect if <tt>PYTHONOUTPUT</tt>
is set to "JobUserLog" or "JobUserLogAndMsg".
It must be one of the STAF logging levels (not case-sensitive): 
Fatal, Error, Warning, Info, Trace, Trace2, Trace3, Debug, Debug2, Debug3,
Start, Stop, Pass, Fail, Status, User1, User2, User3, User4, User5, User6,
User7, or User8.  The default is "Info".
This option will resolve STAF variables.
<p>
<b>Note:</b>  This log level is only used for Python stdout output, not for
Python stderr output, as all Python stderr output uses log level "Error" if
<tt>PYTHONOUTPUT</tt> is redirected to the STAX Job User log.
<p>
<li>
<tt>EXTENSIONXMLFILE</tt> specifies
the fully-qualified name of an XML file that contains the names
of the extension jar files to be registered.
Refer to the <a href="#Header_Extensions">"STAX Extensions"</a> section
for more information.
<p>
<li>
<tt>EXTENSION</tt> specifies
the fully-qualified name of an extension jar file.
Refer to the <a href="#Header_Extensions">"STAX Extensions"</a> section
for more information.
<p>
<li>
<tt>EXTENSIONFILE</tt> specifies
the fully-qualified name of a text file that contains the names of the
extension jar files to be registered.
Refer to the <a href="#Header_Extensions">"STAX Extensions"</a> section
for more information.
</ul>

<p><b>Notes:</b>
<p>
<ol>
<li>
Each <tt>SERVICE</tt>
configuration statement must be entered as one continuous line (or you can use a backslash (\) to
specify line continuation.</li>
<p>
<li>If the Event Service machine is the same as the STAX service machine and "Event" is the name used when registering the
Event Service, then you don't have to specify the <tt>EVENTSERVICEMACHINE</tt> or
the <tt>EVENTSERVICENAME</tt> parameters.
The &lt;EventName> defaults to "Event" if it is not specified and the &lt;EventMachine> defaults to "local"
if it is not specified. 
</li>
<p>
<li>The STAX Service requires version 3.1.2 or later of the Event service.</li>
<p>
<li>The <tt>CLEARSLOGS</tt>,
<tt>LOGTCELAPSEDTIME</tt>,
<tt>LOGTCNUMSTARTS</tt>, and
<tt>LOGTCSTARTSTOP</tt>
parameters may be changed using the SET command.
Refer to the <a href="#Header_Set">"SET"</a> section for more information.</li>
</ol>
</ol>
<p>
<h4>Examples of Service Configuration Lines for the STAX Service System:</h4>
<p>
<ul>
<li>If the STAX and Event services are installed on the same system,
the <tt>SERVICE</tt>
configuration lines in the STAF configuration file might look like the following:</li>
<p>
<b>Windows</b> (assuming the STAX.jar and STAFEvent.jar files are in C:\STAF\services):
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAX.jar
SERVICE EVENT LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAFEvent.jar
</pre>
<p>
<b>Unix</b> (assuming the STAX.jar and STAFEvent.jar files are in /usr/local/staf/services):
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE /usr/local/staf/services/stax/STAX.jar
SERVICE EVENT LIBRARY JSTAF EXECUTE /usr/local/staf/services/stax/STAFEvent.jar
</pre>
<p>
<li>If the Event service is installed on a different system (e.g. machA.austin.ibm.com) and is
named "Event", the <tt>SERVICE</tt>
configuration lines in the STAF configuration file might look like the following:</li>
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAX.jar \
             PARMS "EVENTSERVICEMACHINE machA.austin.ibm.com"
</pre>
<p>
Note that since each <tt>SERVICE</tt>
configuration statement must be entered as one continuous line, a backslash (\) can be used at
the end of the prior line to indicate you're continuing on the next line.
<p>
<li>If you want the STAX service to use 8 physical threads and you want to enable
start/stop testcase logging and the STAX and Event services are
installed on the same system, the <tt>SERVICE</tt>
configuration lines in the STAF configuration file might look like the following:</li>
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAX.jar \
        PARMS "NUMTHREADS 8 LOGTCSTARTSTOP Enabled"
SERVICE EVENT LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAFEvent.jar
</pre>
<p>
<li>If you want the STAX service to run in a separate JVM named STAX and you want to
increase the JVM's maximum heap size to 512M, and the STAX and Event services are installed
on the same system, the <tt>SERVICE</tt>
configuration lines in the STAF configuration file might look like the following:</li>
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAX.jar \
             OPTION JVMName=STAX OPTION J2=-Xmx512m
SERVICE EVENT LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAFEvent.jar
</pre>
<p>
Note that the -X Java options are non-standard and can vary by Java version.  Use the "java -X"
command to display the non-standard options available for the Java you are using.
<p>
<li>If you want the STAX service to run in a separate JVM named STAX, and you want
to increase the JVM's maximum heap size to 1024M and increase the JVM's maximum
permanent generation space to 256M, and the STAX and Event services are installed
on the same system, the <tt>SERVICE</tt>
configuration lines in the STAF configuration file might look like the following:</li>
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAX.jar \
             OPTION JVMName=STAX \
             OPTION "J2=-Xmx1024m -XX:MaxPermSize=256m -XX:PermSize=256m"
SERVICE EVENT LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAFEvent.jar
</pre>
<p>
<li>If you want the STAX service to do file caching with a maximum file cache
size of 40 and to use the Least Frequently Used (LFU) caching algorithm with
a maximum age of 12h for cached files, and a maximum return file size of 25M,
and the STAX and Event services are installed on the same machine, the
<tt>SERVICE</tt> configuration lines in the STAF configuration file might
look like the following:</li>
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAX.jar \
             PARMS "MAXFILECACHESIZE 40 FILECACHEALGORITHM LFU \
                    MAXFILECACHEAGE 12h MAXRETURNFILESIZE 25m"
SERVICE EVENT LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAFEvent.jar
</pre>
<p>
<li>If you want the STAX and Event services to run in a separate JVM named STAX using
the Java executable located in C:\j2sdk1.5.0\bin and you want the JVM to use
512M as the maximum memory allocation size, and the STAX and Event services are installed
on the same system, the <tt>SERVICE</tt>
configuration lines in the STAF configuration file might look like the following:</li>
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAX.jar \
             OPTION JVMName=STAX OPTION JVM=C:\j2sdk1.5.0\bin\java \
             OPTION J2=-Xmx512m
SERVICE EVENT LIBRARY JSTAF EXECUTE C:\STAF\services\stax\STAFEvent.jar \
              OPTION JVMName=STAX
</pre>
</ul>

<h2><a name="Header_RequestingMach" href="#ToC_RequestingMach">Requesting Machine</a></h2>

Requesting machines are the ones that submit requests (e.g. EXECUTE, QUERY)
to the STAX Service. Refer to the <a href="#Header_RequestSyntax">"Request
Syntax"</a> section for request details.
<ol>
<li>
Install STAF by following the installation instructions in the STAF documentation.</li>

<br>&nbsp;
<li>A requesting machine must give a trust level of at least 4 to the STAX Service machine.
The syntax for the <tt>TRUST LEVEL</tt> line that
must be in the STAF configuration file on each requesting machine is:</li>
<br>&nbsp;
<ul><tt>TRUST LEVEL 4 MACHINE &lt;STAX Service machine></tt></ul>
</ol>

<h2><a name="Header_ExecutionMach" href="#ToC_ExecutionMach">Execution Machine</a></h2>

Process execution machines have STAF processes and commands executed on
them as defined by the STAX XML file.
<ol>
<li>
Install STAF by following the installation instructions in the STAF documentation.</li>

<br>&nbsp;
<li>A process execution machine must give a trust level of 5 to the STAX Service machine.
The syntax for the <tt>TRUST LEVEL</tt> line that
must be in the STAF configuration file on each execution machine is:</li>
<br>&nbsp;
<ul><tt>TRUST LEVEL 5 MACHINE &lt;STAX Service machine></tt></ul>
</ol>

<h2><a name="Header_MonitoringMach" href="#ToC_MonitoringMach">Monitoring Machine</a></h2>

STAX Monitoring machines can monitor the STAX jobs in progress.
<ol>
<li>
Install Java 1.5 or later.
<p>
The STAX Monitor is a Java application, so you need to install a JVM
(e.g. Sun or IBM) on the STAX Monitoring machine(s).
IBM employees must download the Sun or IBM JVM from the internal JIM site.
Non-IBM users can download from http://java.sun.com.  We recommend that
you install the most recent fixpack for the JVM you want to use, so that
you will have all of the latest fixes.
<p>Verify that the PATH environment variable contains the Java bin directory
(e.g. C:\j2sdk1.5.0\bin).  You can type "java -version" to check the
version of Java that's in the PATH.
</li>
<p>
<li>
Install STAF 3.3.3 or later by following the installation instructions
in the STAF documentation.
<p>
Verify that the CLASSPATH environment variable contains the
JSTAF.jar file (e.g. C:\STAF\bin\JSTAF.jar or /usr/local/staf/lib/JSTAF.jar).
JSTAF.jar contains the STAF Java APIs to communicate with STAF from
Java programs and is required to register STAF services written in Java.
</li>
<p>
<li>
Install the STAX Monitor by copying the STAXMon.jar file onto the system.  Note that
the STAXMon.jar file is obtained by extracting the STAX zip/tar file as was already done
on the STAX Service machine.  We highly recommend copying it into a first or second level directory,
such as services or services/stax, off of your STAF root directory (e.g. C:\STAF\services or
C:\STAF\services\stax on Windows, /usr/local/staf/services or /usr/local/staf/services/stax
on Unix) or to make starting the STAX Monitor easier.</li>
<p>
<li>The STAX Monitor must be configured to use a STAX service machine
that is running STAX V3.5.0 Beta 1 or later.
<p>
<li>A STAX Monitoring machine must give a trust level of at least 3 to
the STAX Service machine.  The syntax for the line that must be in the STAF
configuration file on each STAX Monitoring machine is:</li>
<p>
<ul><tt>TRUST LEVEL 3 MACHINE &lt;STAX Service machine></tt></ul>
</ol>

<hr>

<h1><a name="Header_RequestSyntax" href="#ToC_RequestSyntax">Request Syntax</a></h1>

The STAX service provides the following requests:
<ul>
<li>
EXECUTE - Starts a job running based on a XML document which defines the
workflow for a job.</li>

<li>
GET RESULT - Gets the results for a STAX job that has completed executing.</li>

<li>
GET DTD - Gets the STAX DTD (Document Type Definition).</li>

<li>
HELP - Displays a list of requests for the STAX service and how to use
them.</li>

<li>
HOLD - Holds a job or a block in a job that is currently running.</li>

<li>
LIST - Lists all currently running jobs or specific information about a single
job, or the settings for the STAX service, or the file cache.</li>

<li>
LOG - Logs a message to the STAX Job User Log for a job that is currently
running and, optionally, sends the message to the STAX Monitor.</li>

<li>
QUERY - Queries information about a job that is currently running.</li>

<li>
RELEASE - Releases a job or a block in a job that is in the hold state.</li>

<li>
SEND - Sends a message to the STAX Monitor for a job that is currently
running.</li>

<li>
ADD - Adds a breakpoint for a job that is currently running.</li>

<li>
REMOVE - Removes a breakpoint for a job that is currently running.</li>

<li>
RESUME - Resumes a thread that is at a breakpoint</li>

<li>
STEP - Steps a thread that is at a breakpoint</li>

<li>
PYEXEC - Executes Python code in the specified thread</li>

<li>
SET - Sets STAX service options.</li>

<li>
START - Starts a new testcase in a job that is currently running.</li>

<li>
STOP - Stops a testcase or thread in a job that is currently running.</li>

<li>
TERMINATE - Terminates a job or a block in a job.</li>

<li>
UPDATE - Updates the status of a testcase in a job that is currently running.</li>

<li>
NOTIFY REGISTER/UNREGISTER - Registers or unregisters to receive a notification when a STAX job ends.</li>

<li>
NOTIFY LIST - Displays the job end notification list for a given
job or all jobs.</li>

<li>
PURGE &lt;FILECACHE | MACHINECACHE> - Clears the contents of the file cache or the machine cache.</li> 

<li>
VERSION - Displays the version of the STAX service or the version of Jython packaged with the STAX service.</li>
</ul>

<p>
Here's the complete help syntax for the STAX service, with no STAX
extensions registered.  Note that STAX extensions can add additional
options to the LIST and QUERY requests.
<pre>
# STAF local STAX HELP
Response
--------
STAX Service Help:

EXECUTE   &lt; &lt;FILE &lt;XML File Name> [MACHINE &lt;Machine Name>]> | DATA &lt;XML Data> >
          [JOBNAME &lt;Job Name>] [FUNCTION &lt;Function Name>] [ARGS &lt;Arguments>]
          [SCRIPTFILE &lt;File Name>... [SCRIPTFILEMACHINE &lt;Machine Name>]]
          [SCRIPT &lt;Python Code>]... [CLEARLOGS [&lt;Enabled | Disabled>]]
          [ HOLD | TEST [RETURNDETAILS] |
            WAIT [&lt;Number>[s|m|h|d|w]] [RETURNRESULT [DETAILS]] ]
          [ NOTIFY ONEND [BYNAME] [PRIORITY &lt;Priority>] [KEY &lt;Key>] ]
          [LOGTCELAPSEDTIME &lt;Enabled | Disabled>]
          [LOGTCNUMSTARTS &lt;Enabled | Disabled>]
          [LOGTCSTARTSTOP &lt;Enabled | Disabled>]
          [PYTHONOUTPUT &lt;Python Output>] [PYTHONLOGLEVEL &lt;Log Level>]
          [ BREAKPOINT &lt;Function name> | &lt;Line>[@@&lt;File>[@@&lt;Machine>]] ]...
          [BREAKPOINTFIRSTFUNCTION] [BREAKPOINTSUBJOBFIRSTFUNCTION]

GET       DTD
GET       RESULT JOB &lt;Job ID> [DETAILS]

LIST      JOBS | SETTINGS | MACHINECACHE |
          FILECACHE [SORTBYLRU | SORTBYLFU | SUMMARY] |
          EXTENSIONS | EXTENSIONJARFILES |
          JOB &lt;Job ID> &lt;THREADS [LONG] | &lt; THREAD &lt;Thread ID> VARS [SHORT] > |
                        PROCESSES | STAFCMDS | SUBJOBS | BLOCKS | TESTCASES |
                        BREAKPOINTS | FUNCTIONS [| &lt;List Type>]...>

QUERY     EXTENSIONJARFILE &lt;Jar File Name> | EXTENSIONJARFILES |
          JOB &lt;Job ID> [THREAD &lt;Thread ID> [ VAR &lt;VarName> [SHORT] ] |
                        PROCESS &lt;Location:Handle> | STAFCMD &lt;Request#> |
                        BLOCK &lt;Block Name> | TESTCASE &lt;Test Name> |
                        FUNCTION &lt;Function Name>
                        [| &lt;Query Type> &lt;Type Value>]...]

HOLD      JOB &lt;Job ID> [BLOCK &lt;Block Name>]

RELEASE   JOB &lt;Job ID> [BLOCK &lt;Block Name>]

TERMINATE JOB &lt;Job ID> [BLOCK &lt;Block Name>]

START     JOB &lt;Job ID> TESTCASE &lt;Testcase name> [KEY &lt;Key>]
          [PARENT &lt;Testcase name>]

STOP      JOB &lt;Job ID> TESTCASE &lt;Testcase name> [KEY &lt;Key>]

UPDATE    JOB &lt;Job ID> TESTCASE &lt;Testcase name> STATUS &lt;Status>
          [MESSAGE &lt;Message text>] [FORCE [PARENT &lt;Testcase name>]]

LOG       JOB &lt;Job ID> MESSAGE &lt;Message> [LEVEL &lt;Level>] [SEND]

SEND      JOB &lt;Job ID> MESSAGE &lt;Message>

ADD       JOB &lt;Job ID> BREAKPOINT
           &lt; FUNCTION &lt;Function Name> |
             LINE &lt;Line Number> [FILE &lt;XML File>] [MACHINE &lt;Machine Name>] >

REMOVE    JOB &lt;Job ID> BREAKPOINT &lt;Breakpoint ID>

RESUME    JOB &lt;Job ID> THREAD &lt;Thread ID>

STEP      JOB &lt;Job ID> THREAD &lt;Thread ID> [INTO | OVER]

STOP      JOB &lt;Job ID> THREAD &lt;Thread ID>

PYEXEC    JOB &lt;Job ID> THREAD &lt;Thread ID> CODE &lt;Python Code>

SET       [CLEARLOGS &lt;Enabled | Disabled>]
          [LOGTCELAPSEDTIME &lt;Enabled | Disabled>]
          [LOGTCNUMSTARTS &lt;Enabled | Disabled>]
          [LOGTCSTARTSTOP &lt;Enabled | Disabled>]
          [PYTHONOUTPUT &lt;Python Output>]
          [PYTHONLOGLEVEL &lt;Log Level>]
          [FILECACHING &lt;Enabled | Disabled>]
          [MAXFILECACHESIZE &lt;Max Files>]
          [FILECACHEALGORITHM &lt;LRU | LFU>]
          [MAXFILECACHEAGE &lt;Number>[s|m|h|d|w]]
          [MAXMACHINECACHESIZE &lt;Max Machines>]
          [MAXRETURNFILESIZE &lt;Number>[k|m]]
          [MAXGETQUEUEMESSAGES &lt;Number>]
          [MAXSTAXTHREADS &lt;Number>]

NOTIFY    REGISTER   ONENDOFJOB &lt;Job ID> [BYNAME] [PRIORITY &lt;Priority>]
NOTIFY    UNREGISTER ONENDOFJOB &lt;Job ID>
NOTIFY    LIST       [JOB &lt;Job ID>]

PURGE     &lt;FILECACHE | MACHINECACHE> CONFIRM

VERSION   [JYTHON]

HELP
</pre>

<h2>
<b><a name="Header_Execute" href="#ToC_Execute">EXECUTE</a></b></h2>

EXECUTE starts the execution of a job based on an input XML document which
defines the workflow for a job.
<h4>
Syntax</h4>
<pre>
EXECUTE   &lt; &lt;FILE &lt;XML File Name> [MACHINE &lt;Machine Name>]> | DATA &lt;XML Data> >
          [JOBNAME &lt;Job Name>] [FUNCTION &lt;Function Name>] [ARGS &lt;Arguments>]
          [SCRIPTFILE &lt;File Name>... [SCRIPTFILEMACHINE &lt;Machine Name>]]
          [SCRIPT &lt;Python Code>]... [CLEARLOGS [&lt;Enabled | Disabled>]]
          [ HOLD | TEST [RETURNDETAILS] |
            WAIT [&lt;Number>[s|m|h|d|w]] [RETURNRESULT [DETAILS]] ]
          [ NOTIFY ONEND [BYNAME] [PRIORITY &lt;Priority>] [KEY &lt;Key>] ]
          [LOGTCELAPSEDTIME &lt;Enabled | Disabled>]
          [LOGTCNUMSTARTS &lt;Enabled | Disabled>]
          [LOGTCSTARTSTOP &lt;Enabled | Disabled>]
          [PYTHONOUTPUT &lt;Python Output>] [PYTHONLOGLEVEL &lt;Log Level>]
          [ BREAKPOINT &lt;Function name> | &lt;Line>[@@&lt;File>[@@&lt;Machine>]] ]...
          [BREAKPOINTFIRSTFUNCTION] [BREAKPOINTSUBJOBFIRSTFUNCTION]
</pre>
<p><tt>FILE</tt> specifies
the fully qualified name of a file containing the XML document for the
job to be executed.  This option will resolve STAF variables. If file caching
is enabled, the file cache will be checked for an up-to-date copy of the file
before loading it from the target machine. For a cache hit to occur, the <b>MACHINE</b>
and <b>FILE</b> options must match those of a file cache entry. If the file is retrieved 
from cache, there is an increase in performance for the EXECUTE operation.
For more information on how file caching works, refer to the
<a href="#Header_StaxFileCache">"STAX File and Machine Caching"</a> section.
<p><tt>MACHINE</tt>
specifies the endpoint for the machine where the <tt>FILE</tt>
is located. If not specified, it assumes the file is on the machine submitting
the STAX EXECUTE request.  This option will resolve STAF variables.
If machine caching is enabled and the machine where the file resides is
not the STAX service machine, the machine cache will be checked to see if
information about this machine has been stored.  If the machine already
exists in the cache, then no additional information about the machine is required
which can improve performance for the EXECUTE operation.
For more information on how machine caching works, refer to the
<a href="#Header_StaxFileCache">"STAX File and Machine Caching"</a> section.
<p><tt>DATA</tt> specifies
a string containing the XML document for the job to be executed.
<p><tt>JOBNAME</tt>
specifies the name of the job. This can aid in the identification of a
specific job.  The job name defaults to the value of the function name called to
start the job.  This option will resolve STAF variables.
<p><tt>FUNCTION</tt>
specifies the name of the function element to call to start the job, overriding
the defaultcall element, if any, specified in the XML document. The
&lt;function name> must be an name of a function element specified in the XML
document.  This option will resolve STAF variables.
<p><tt>ARGS</tt>
specifies arguments to pass to the function element called to start the job, overriding
the arguments, if any, specified for the defaultcall element in the XML document.
This option will not resolve STAF variables.
This option will handle private data.
<p><tt>SCRIPTFILE</tt> specifies
the fully qualified name of a file containing Python code to be executed.
This is like a &lt;script> element in root &lt;stax> element in the XML document,
but defined when submitting an execute request, rather than within the XML document.
Note that a SCRIPTFILE parameter specified in an execute request will be executed by the
STAX service after any "global" &lt;script> elements (that is, those contained directly
within the root &lt;stax> element), but before any SCRIPT parameters are executed.
Thus, you can override the value of a variable specified in a
global &lt;script> element by using a SCRIPTFILE parameter in the execute request.
You may specify as many SCRIPTFILE parameters as needed.  This option will resolve STAF variables.
<p><tt>SCRIPTFILEMACHINE</tt> specifies the endpoint for the machine where the <tt>SCRIPTFILE(s)</tt>
are located. If not specified, it defaults to the value specified for MACHINE.  If a MACHINE
option was not specified, it assumes the script file(s) are on the machine submitting
the STAX EXECUTE request.  This option will resolve STAF variables.
<p><tt>SCRIPT</tt> defines
Python code to be executed.  This is like a &lt;script>
element in root &lt;stax> element in the XML document, but defined when submitting
an execute request, rather than within the XML document.
Note that a script parameter specified in an execute request will be executed by the
STAX service after any "global" &lt;script> elements (that is, those contained directly
within the root &lt;stax> element) and after any SCRIPTFILE parameters are executes,
but before the starting function is called.  Thus, you can override the value of a variable
specified in a global &lt;script> element or in a SCRIPTFILE by using a script parameter
in the execute request.  You may specify as many SCRIPT parameters as needed.
This option will handle private data.
<p><tt>CLEARLOGS</tt> is used to indicate that
the STAX Job and Job User logs should be deleted before the job is executed.
Since STAX job numbers are reused, a specific job log may contain the results of more than one job.
Valid values are "Enabled" and "Disabled", not case-sensitive.  If you specify "Enabled"
or no value, the log files will be deleted for the job that is about to execute,
in order to ensure that only one job's contents are in the log.  If you specify "Disabled",
the job logs will not be deleted.  This overrides the service setting for "Clear Logs".
This option will resolve STAF variables.
<p><tt>HOLD</tt> is
used to hold the job after its been successfully parsed and the job id
has been returned. This allows you to start the STAX Monitor application
and then release the job so that you can monitor the job from its beginning
if desired.
<p><tt>TEST</tt> is
used to test whether the execution options specified are valid, if an XML document
is well-formed and valid, and if the Python code specified in the XML document
compiles successfully.  When this option is specified, execution of the job is not started.
<p><tt>RETURNDETAILS</tt> is used to specify that you want details about the functions
defined for the specified XML document returned.  This option is only valid if
the <tt>TEST</tt> option is specified.
You probably would not use this option unless you were writing your own application
to submit a STAX job for execution.  For example, the STAX Monitor application's
Job Wizard submits a STAX EXECUTE request using this option to populate it's screens
that allow you to select a function and enter argument values. 
<p><tt>WAIT</tt> is used to specify that the STAX EXECUTE request should not
return until the STAX job has completed.  You may specify an optional time duration,
after which the request should timeout and return.  If no time duration is specified,
the request will wait indefinitely until the job has finished executing.
This option will resolve STAF variables.
The time duration may be expressed in milliseconds, seconds, minutes,
hours, days, weeks, or years.  Its format is <tt>&lt;Number>[s|m|h|d|w]</tt>,
where <tt>&lt;Number></tt> is an integer >= 0 and indicates milliseconds unless
one of the following case-insensitive suffixes is specified:
<ul compact>
<li>s (for seconds)</li>
<li>m (for minutes)</li>
<li>h (for hours)</li>
<li>d (for days)</li>
<li>w (for weeks).</li>
</ul>
Note that the calculated timeout cannot exceed 4294967294 milliseconds.
So, the maximum values in each time category that can be specified are:
<ul compact>
<li>4294967294 (4294967294 milliseconds)</li>
<li>4294967s (4294967 seconds)</li>
<li>71582m (71582 minutes)</li>
<li>1193h (1193 hours)</li>
<li>49d (49 days)</li>
<li>7w (7 weeks)</li>
</ul>
<p><tt>RETURNRESULT</tt> is used to specify that you want completion
results for the job returned.  This includes information like the
job status, result, errors logged in the job log, testcase totals, etc.
This option is only valid if the <tt>WAIT</tt>
option is specified.
<p><tt>DETAILS</tt> is used to specify that you want detailed completion
results for the job returned, including a list of the individual testcase
results.  This option is only valid if the <tt>WAIT</tt> and <tt>RETURNRESULT</tt>
options are specified.
<p><tt>NOTIFY ONEND</tt> specifies that you wish to have a notification sent
when this job ends. See <a href="#Header_NotifyRegister">"NOTIFY REGISTER/UNREGISTER"</a>
for the content of the notification message. 
The notification message will be sent to the machine that submitted the
<tt>EXECUTE</tt> request.
<p><tt>BYNAME</tt> specifies that you wish to have the notification
message sent when the job ends to the process(es) with the same machine and
handle name of the process submitting the <tt>EXECUTE</tt> request.
The default is to send the job end notification message to the queue of the
machine/handle that submitted the <tt>EXECUTE</tt> request.
<p><tt>PRIORITY</tt> specifies the priority of the notification message.
The default is 5. This option will resolve variables. 
<p><tt>KEY</tt> specifies a key that will be included in the STAX Job End
notification message.  
This option will resolve variables.
<p><tt>LOGTCELAPSEDTIME</tt> is used to
specify whether to log the elapsed time in the summary "Status" record for each testcase
written at the end of the STAX Job log and when you list testcases.
Valid values are "Enabled" and "Disabled", not case-sensitive.  This option overrides
the service setting for "Log TC Elapsed Time".  This option will resolve STAF variables.
<p><tt>LOGNUMSTARTS</tt> is used to
specify whether to log the number of starts in the summary "Status" record for each testcase
written at the end of the STAX Job log and when you list testcases.
Valid values are "Enabled" and "Disabled", not case-sensitive.  This option overrides
the service setting for "Log TC Num Starts".  This option will resolve STAF variables.
<p><tt>LOGTCSTARTSTOP</tt> is used to
specify whether to log a "Start" record each time a testcase begins and to log a
"Stop" record each time a testcase ends in the STAX Job log.
Valid values are "Enabled" and "Disabled", not case-sensitive.  This option overrides
the service setting for "Log TC Start/Stop".  This option will resolve STAF variables.
<p><tt>PYTHONOUTPUT</tt> specifies where Python stdout/stderr should be redirected
(e.g. if you use the print statement in a &lt;script> element in a STAX job).
This option overrides the service setting for "Python Output".
This option will resolve STAF variables.
Valid values are the following (not case-sensitive):
<ul compact>
  <li>"JobUserLog" indicates to log the Python output in the STAX Job User log.
  <li>"Message" indicates to send the Python output to the STAX Monitor and
      display it in the Messages panel.
  <li>"JobUserLogAndMsg" indicates to log the Python output in the STAX Job
      User log and to send it to the STAX Monitor and display it in the
      Messages panel.
  <li>"JVMLog" indicates to write the Python output in the JVM Log for the STAX
      service using the following format so that you will know which STAX job
      originated the output and at what time:  
      <tt>&lt;Timestamp> [JobID: &lt;JobID>] &lt;Python Output></tt>
</ul>
<p><tt>PYTHONLOGLEVEL</tt> specifies the STAF logging level to use when Python
stdout is redirected to the STAX Job User Log, which means this option only has
an effect if <tt>PYTHONOUTPUT</tt> is set to "JobUserLog" or "JobUserLogAndMsg".
It must be one of the STAF logging levels (not case-sensitive): 
Fatal, Error, Warning, Info, Trace, Trace2, Trace3, Debug, Debug2, Debug3,
Start, Stop, Pass, Fail, Status, User1, User2, User3, User4, User5, User6,
User7, or User8.
This option overrides the service setting for "Python Log Level".
This option will resolve STAF variables.
<p><tt>BREAKPOINT</tt> specifies a function or line breakpoint to set for the
job in the format <tt>&lt;Function name> | &lt;Line>[@@&lt;File>[@@&lt;Machine>]]</tt>.
This option will resolve STAF variables.  You can specify multiple
<tt>BREAKPOINT</tt> options.  For the <tt>BREAKPOINT</tt> value, you can specify a
function name (case-sensitive), or a line number with an optional
(fully-qualified path) XML file and an optional XML file machine.
<ul>
<li>
If a function name is specified, the STAX job will break whenever the function
with that name is called (regardless of the XML file where the function is
located).  If you dynamically set a function name breakpoint, the STAX job
will break the next time the function is called.  Note that the function name
is case-senstive.
<li>
If a line number is specified, and the XML file is not specified, the
STAXJobXmlFile will be used.  If the XML file machine is not specified,
the STAX job will break immediately prior to executing the STAX task whose
line number and XML file match (regardless of the task's XML file machine).
The line number must be the line number of the beginning task element
(i.e. to break on a &lt;stafcmd>, the line number must be the line number for
the &lt;stafcmd>, not the &lt;location>, &lt;service>, &lt;request>, or &lt;/stafcmd>).
</ul>
<p><tt>BREAKPOINTFIRSTFUNCTION</tt> indicates to break at the first function
that is called in the STAX job.
<p><tt>BREAKPOINTSUBJOBFIRSTFUNCTION</tt> indicates to break at the first
function that is called in any subjobs started by the STAX job.  This option
propagates to any subjobs that the subjob starts.

<p>
For more information on using breakpoints, see 
<a href="#Header_UsingBreakpoints"><b>Using Breakpoints to Debug STAX Jobs</b></a>.

<h4>Security</h4>

This request requires at least trust level 4.

<h4>Results</h4>

<ul>
<li>If an error occurs, the RC will be non-zero.
    Errors can result from invalid execution options, XML parsing errors,
    Python compile errors, etc.  The result buffer will contain either:
    <p>
    <ul>
    <li>a string containing an error message (if the error occurred before a Job ID was assigned), or
    <p>
    <li>a marshalled <tt>&lt;Map:STAF/Service/STAX/ExecuteErrorResult></tt> containing
        the Job ID in addition to an error message (if the error occurred after a Job ID was assigned).
        The map is defined as follows:
        <p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ExecuteErrorResult</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents the result when
    an error occurs submitting a job for execution if an error occurred after
    a Job ID was assigned.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>jobID
<td>Job ID
<td><tt>&lt;String></tt>
</tr>
<tr>
<td>errorMsg
<td>Error Message
<td><tt>&lt;String></tt>
<td>
</tr>
</tbody>
</table>
    </ul>
<p>
<li>Upon successful return, the RC will zero.  The result buffer will contain the
    following based on if the <tt>TEST [RETURNDETAILS]</tt> or
    <tt>WAIT [&lt;Number>[s|m|h|d|w]] [RETURNRESULT [DETAILS]]</tt> option is
    specified on the <tt>EXECUTE</tt> request:
<p>
<ul>
<li>If neither the <tt>TEST</tt> nor <tt>WAIT</tt> option is specified,
    the result buffer will contain the Job ID.
    Note that when the <tt>WAIT</tt> option is not specified, the <tt>EXECUTE</tt> request
    returns as soon as it starts the STAX job and does not wait to return until the STAX
    job has completed.
<p>
<li>If the <tt>WAIT</tt> option is specified:
<p>
<ul>
<li>If a timeout value is specified for the <tt>WAIT</tt> option and the request times out before
the Job has completed, a RC 37 (Timeout) is returned and the result buffer will contain
the Job ID.</li>
<p>
<li>If the <tt>RETURNRESULT</tt> option is not specified and the request does not timeout before
the Job has completed, the result buffer will contain the Job ID.</li>
<p>
<li>If the <tt>RETURNRESULT</tt> option is specified and the <tt>DETAILS</tt> option
is not specified and the request does not timeout before
the Job has completed, the result will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/JobResult></tt> representing the job result.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/JobResult</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents the result from a STAX job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>jobID
<td>Job ID
<td><tt>&lt;String></tt>
</tr>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tr>
<tr>
<td>endTimestamp
<td>End Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tr>
<tr>
<td>status
<td>Status
<td><tt>&lt;String></tt>
<td><tt>'Normal' | 'Terminated' | 'Abnormal' | 'Unknown'</tt>
</tr>
<tr>
<td>result
<td>Result
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tr>
<tr>
<td>jobLogErrors
<td>Job Log Errors
<td><tt>&lt;List> of &lt;<a href="#STAXJobLogErrors">Map:STAF/Service/Log/LogRecord></a></tt>
<td>
</tr>
<tr>
<td>testcaseTotals
<td>Testcase Totals
<td><tt><a href="#STAXTestcaseTotals">&lt;Map:STAF/Service/STAX/TestcaseTotals></a></tt>
<td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Status" value is the job completion status and it is set to one of the following:
    <ul compact>
    <li><tt>'Normal'</tt> if the job ended normally
    <li><tt>'Terminated'</tt> if the job was terminated (this means if the 'main'
    block was terminated)
    <li><tt>'Abnormal'</tt> if the job ended abnormally.  This can happen when
    at least one unhandled inherited condition remains on the condition stack
    when the job completes.  For example, this can occur when a break or continue
    condition remains on the condition stack because there was no outer loop or
    iterate element, or when an exception is thrown but there's no catch element for it.
    This state takes precedence if the job is also terminated.
    <li><tt>'Unknown'</tt> if the job has an unknown status.  This should not occur.
    </ul>
</li>
<p>
<li>The "Result" value is set to a "string" version of whatever the job
specified to return, or &lt;None> if the job did not specify anything
to return.
<p>
The job may not return anything if a &lt;return> element is not executed in the starting
function.  This could be due to many reasons, such as an error occurring, the job being
terminated, or if the starting function doesn't contain a &lt;return> element.</li>
<p>
<li>The "Job Log Errors" value is a list of any errors logged in the STAX Job Log.
If the DEFAULTMAXQUERYRECORDS setting for the LOG service on the STAX service machine is
set to a non-zero number (the default is 100), then the maximum number of errors
logged will be limited to this number (e.g. equivalent to specifying LAST &lt;Number>
on the LOG QUERY request).</li>
</ol>
</tr>
</tfoot>
</table>
</li>
<p>
<li>If the <tt>RETURNRESULT DETAILS</tt> options are specified and the request
does not timeout before the Job has completed, the result will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/JobDetailedResult></tt> representing the job result,
including a list of the individual testcase results.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/JobDetailedResult</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents the detailed result
from a STAX job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>jobID
<td>Job ID
<td><tt>&lt;String></tt>
</tr>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tr>
<tr>
<td>endTimestamp
<td>End Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tr>
<tr>
<td>status
<td>Status
<td><tt>&lt;String></tt>
<td><tt>'Normal' | 'Terminated' | 'Abnormal' | 'Unknown'</tt>
</tr>
<tr>
<td>result
<td>Result
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tr>
<tr>
<td>jobLogErrors
<td>Job Log Errors
<td><tt>&lt;List> of &lt;<a href="#STAXJobLogErrors">Map:STAF/Service/Log/LogRecord></a></tt>
<td>
</tr>
<tr>
<td>testcaseTotals
<td>Testcase Totals
<td><tt><a href="#STAXTestcaseTotals">&lt;Map:STAF/Service/STAX/TestcaseTotals></a></tt>
<td>
</tr>
<tr>
<td>testcaseList
<td>Testcases
<td><tt>&lt;List> of
&lt;<a href="#STAXQueryTestcase">Map:STAF/Service/STAX/QueryTestcase></a></tt>
<td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Status" value is the job completion status and it is set to one of the following:
    <ul compact>
    <li><tt>'Normal'</tt> if the job ended normally
    <li><tt>'Terminated'</tt> if the job was terminated (this means if the 'main'
    block was terminated or if an error occurred before the 'main' block was started)
    <li><tt>'Abnormal'</tt> if the job ended abnormally.  This can happen when
    at least one unhandled inherited condition remains on the condition stack
    when the job completes.  For example, this can occur when a break or continue
    condition remains on the condition stack because there was no outer loop or
    iterate element, or when an exception is thrown but there's no catch element for it.
    This state takes precedence if the job is also terminated.
    <li><tt>'Unknown'</tt> if the job has an unknown status.  This should not occur.
    </ul>
</li>
<p>
<li>The "Result" value is set to a "string" version of whatever the job
specified to return, or &lt;None> if the job did not specify anything
to return.
<p>
The job may not return anything if a &lt;return> element is not executed in the starting
function.  This could be due to many reasons, such as an error occurring, the job being
terminated, or if the starting function doesn't contain a &lt;return> element.</li>
<p>
<li>The "Job Log Errors" value is a list of any errors logged in the STAX Job Log.
If the DEFAULTMAXQUERYRECORDS setting for the LOG service on the STAX service machine is
set to a non-zero number (the default is 100), then the maximum number of errors
logged will be limited to this number (e.g. equivalent to specifying LAST &lt;Number>
on the LOG QUERY request).</li>
</ol>
</tr>
</tfoot>
</table>
</li>
</ul>
<p>
<li>If the <tt>TEST</tt> option is specified:
 <p>
 <ul>
 <li>If the <tt>RETURNDETAILS</tt> option was not specified, the result buffer
     will contain the job ID.  This indicates that no errors were found in
     the XML document.</li>
 <p>
 <li>If the <tt>RETURNDETAILS</tt> option is specified, the result buffer
     will contain a marshalled <tt>&lt;Map:STAF/Service/STAX/JobDetails</tt>
     representing details about the functions defined in the XML document.
     The maps used to define the result are defined as follows:
 <p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/JobDetails</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents details about the
functions defined in the STAX XML document.  This information is obtained by
checking for &lt;defaultcall> and &lt;function> elements in the STAX XML document.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>jobID
<td>Job ID
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>defaultCall
<td>Default Call
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>functionList
<td>Functions
<td><tt>&lt;List> of &lt;Map:STAF/Service/STAX/FunctionInfo></tt>
<td>
</tr>
</tbody>
</table>
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/FunctionInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a function
defined in the STAX XML document.
This information is from each &lt;function> element (and it's sub-elements)
defined in the STAX XML document.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>functionName
<td>Function Name
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>prolog
<td>Prolog
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>epilog
<td>Epilog
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>argDefinition
<td>Argument Definition
<td><tt>&lt;String></tt>
<td><tt>'FUNCTION_DEFINES_NO_ARGS'  | 'FUNCTION_ALLOWS_NO_ARGS' |
        'FUNCTION_DEFINES_ONE_ARG'  | 'FUNCTION_DEFINES_LIST_ARGS' |
        'FUNCTION_DEFINES_MAP_ARGS' | 'FUNCTION_DEFINES_UNKNOWN_ARGS'</tt>
</tr>
<tr>
<td>argList
<td>Arguments
<td><tt>&lt;List> of &lt;Map:STAF/Service/STAX/ArgInfo></tt>
<td>
</tr>
</tbody>
</table>
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ArgInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a function
argument.  This information is obtained from each &lt;function-required-arg>,
&lt;function-optional-arg> or &lt;function-arg-def> element (and it's
sub-elements) defined for a function in the STAX XML document.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>argName
<td>Argument Name
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>description
<td>Description
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>type
<td>Type
<td><tt>&lt;String></tt>
<td><tt>'ARG_REQUIRED'  | 'ARG_OPTIONAL' | 'ARG_OTHER'</tt>
</tr>
<tr>
<td>defaultValue
<td>Default Value
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tr>
<tr>
<td>private
<td>Private
<td><tt>&lt;String></tt>
<td><tt>'Yes' | 'No'</tt>
</tr>
<tr>
<td>properties
<td>Properties
<td><tt>&lt;List> of &lt;Map:STAF/Service/STAX/ArgPropertyInfo></tt>
<td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Default Value" is <tt>&lt;None></tt> if the argument type
is <tt>'ARG_REQUIRED'</tt> or <tt>'ARG_OTHER'</tt>.
</ol>
</tr>
</tfoot>
</table>
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ArgPropertyInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a property for
a function argument.  This information is obtained from each &lt;function-arg-property>
element defined for a function argument in the STAX XML document.</td>
</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>propertyName
<td>Name
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>propertyDescription
<td>Description
<td><tt>&lt;String> or &lt;None></tt>
<td>
</tr>
<tr>
<td>propertyValue
<td>Value
<td><tt>&lt;String> or &lt;None></tt>
<td>
</tr>
<tr>
<td>propertyData
<td>Data
<td><tt>&lt;List> of &lt;Map:STAF/Service/STAX/ArgPropertyDataInfo></tt>
<td>
</tr>
</tbody>
</table>
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ArgPropertyDataInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents data for a property
of a function argument.
This information is obtained from each &lt;function-arg-property-data> element defined
for a property of a function argument in the STAX XML document.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>dataType
<td>Type
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>dataValue
<td>Value
<td><tt>&lt;String> or &lt;None></tt>
<td>
</tr>
<tr>
<td>dataData
<td>Data
<td><tt>&lt;List> of &lt;Map:STAF/Service/STAX/ArgPropertyDataInfo></tt>
<td>
</tr>
</tbody>
</table>
</ul>
</li>
</ul>
</ul>

<h4>
Examples</h4>

<ul>
<li>
<b>Goal:</b> Test if a XML job file named d:\stax\xml\JobA.xml is valid without actually starting
the execution of the job.
<p><tt>EXECUTE FILE D:\stax\xml\JobA.xml TEST</tt>
<p><b>Output:</b>
<p>The job ID is returned if there are no errors (e.g. no XML parsing or Python compile errors in
the XML document).
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named d:\stax\xml\JobA.xml and
give it a job name of JobA.
<p><tt>EXECUTE FILE D:\stax\xml\JobA.xml JOBNAME JobA</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 1, the result, in default format, could look like: 
<pre>
1
</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named C:\stax\xml\JobA.xml and
have a notification sent when this job ends to the queue of the machine/handle that
submitted the <tt>EXECUTE</tt> request.
<p><tt>EXECUTE FILE C:\stax\xml\JobA.xml JOBNAME JobA NOTIFY ONEND</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 2, the result, in default format, could look like: 
<pre>
2
</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named d:\stax\xml\Ogre.xml
which is located on machine client1.austin.ibm.com and assign a literal string 'OgreSrv1' to
a Python variable named S1.
<p><tt>EXECUTE FILE C:\stax\Ogre.xml
MACHINE client1.austin.ibm.com SCRIPT "S1 = 'OgreSrv1'"</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 3, the result, in default format, could look like: 
<pre>3</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named /tests/test1.xml
which is located on machine client1 and execute Python code contained in file
/tests/init1.py located on machine client2.
<p><tt>EXECUTE FILE /tests/test1.xml
MACHINE client1 SCRIPTFILE /tests/init1.py SCRIPTFILEMACHINE client2</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 4, the result, in default format, could look like: 
<pre>4</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named d:\stax\xml\ProcessXYZ.xml,
starting at ProcessY, and hold the job so that it can be monitored from the beginning.
<p><tt>EXECUTE FILE D:\stax\xml\ProcessXYZ.xml
JOBNAME JobXYZ FUNCTION ProcessY HOLD</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 5, the result, in default format, could look like: 
<pre>5</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named /test/staxtest.xml
located on the local machine, starting at function Main, and pass a
list of tests as the arguments to the function.
<p><tt>EXECUTE FILE /test/staxtest.xml
FUNCTION Main ARGS "['test1', 'test2', 'test3']"</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 6, the result, in default format, could look like: 
<pre>6</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named /test/sample.xml
located on the local machine, starting at function InitJob, and pass a
map that contains a list of machines and a duration as the arguments to the function.
<p><tt>EXECUTE FILE /test/sample.xml
FUNCTION InitJob ARGS "{ 'MachList': ['machA', 'machB'], 'duration': '5m' }"</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 7, the result, in default format, could look like: 
<pre>7</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named /test/serverTest.xml
located on the local machine, starting at function Main, and pass a
map that contains the name of a server and a password as the 
arguments to the function.  Use privacy delimiters to protect the password.
<p><tt>EXECUTE FILE /test/serverTest.xml
FUNCTION Main ARGS "{ 'server': 'server1', 'password': '!!@secret@!!' }"</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 8, the result, in default format, could look like: 
<pre>8</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named d:\stax\xml\JobA.xml
and wait indefinitely for the job to complete before returning the
completion results for the job in the result buffer.
<p><tt>EXECUTE FILE D:\stax\xml\JobA.xml WAIT RETURNRESULT</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 1 and the job completes normally,
returning 0, and runs 1 testcase with a total of 1 pass and 0 fails,
then the result, in default format, could look like: 
<pre>
{
  Job ID         : 1
  Start Date-Time: 20101008-14:30:27
  Stop Date-Time : 20101008-14:32:29
  Status         : Normal
  Result         : 0
  Job Log Errors : []
  Testcase Totals: {
    Tests : 1
    Passes: 1
    Fails : 0
  }
}
</pre>
<p>
Or, if the job was terminated due to a STAXPythonEvaluationError
signal being raised because an undefined Python variable (e.g. myVar)
was referenced, the result, in default format, could look like:
<pre>
{
  Job ID         : 1
  Start Date-Time: 20101008-14:30:27
  Stop Date-Time : 20101008-14:30:29
  Status         : Terminated
  Result         : None
  Job Log Errors : [
    {
      Date-Time: 20101008-14:30:28
      Level    : Error
      Message  : STAXPythonEvaluationError signal raised. Terminating job.

===== XML Information =====

File: D:\stax\xml\JobA.xml, Machine: local://local
Line 32: Error in element type "script".

===== Python Error Information =====

com.ibm.staf.service.stax.STAXPythonEvaluationException:
Traceback (innermost last):
  File "<pyExec string>", line 1, in ?
NameError: myVar

===== Call Stack for STAX Thread 1 =====

[
  function: main (Line: 8, File: D:\stax\xml\JobA.xml, Machine: local://local)
  sequence: 2/2 (Line: 13, File: D:\stax\xml\JobA.xml, Machine: local://local)
]
    }
  ]
  Testcase Totals: {
    Tests : 1
    Passes: 1
    Fails : 0
  }
}
</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named /tests/myJob.xml
and wait indefinitely for the job to complete before returning the detailed
completion results for the job in the result buffer.
<p><tt>EXECUTE FILE /tests/myJob.xml WAIT RETURNRESULT DETAILS</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 2 and the job completes normally,
returning 'Success!', and runs 2 testcases with a total of 20 passes and 0 fails,
then the result, in default format, could look like: 
<pre>
{
  Job ID         : 2
  Start Date-Time: 20101028-14:39:49
  Stop Date-Time : 20101028-14:40:09
  Status         : Normal
  Result         : Success!
  Job Log Errors : []
  Testcase Totals: {
    Tests : 2
    Passes: 20
    Fails : 0
  }
  Testcases      : [
    {
      Testcase Name   : client1.Test1
      Passes          : 15
      Fails           : 0
      Start Date-Time : 20101028-14:39:49
      Elapsed Time    : 00:00:19
      Starts          : 1
      Status Date-Time: 20101028-14:40:08
      Last Status     : pass
      Information     :
      Testcase Stack  : [
        client1
        Test1
      ]
    }
    {
      Testcase Name   : client1.Test2
      Passes          : 5
      Fails           : 0
      Start Date-Time : 20101028-14:39:50
      Elapsed Time    : 00:00:17
      Starts          : 1
      Status Date-Time: 20101028-14:40:07
      Last Status     : pass
      Information     :
      Testcase Stack  : [
        client1
        Test2
      ]
    }
  ]
}
</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named /tests/webTest.xml and wait indefinitely for
the job to complete before returning and return the job result in addition to the job ID in the
result buffer.
<p><tt>EXECUTE FILE /tests/webTest.xml WAIT RETURNRESULT</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 3 and the job completes normally, returning
nothing, then the result, in default format, could look like:
<pre>
{
  Job ID         : 3
  Start Date-Time: 20101028-14:35:01
  Stop Date-Time : 20101028-14:39:19
  Status         : Normal
  Job Log Errors : []
  Result         : None
  Testcase Totals: {
    Tests : 1
    Passes: 1
    Fails : 0
  }
}
</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named d:\stax\xml\JobA.xml and wait for up to
1 hour for the job to complete before returning.
<p><tt>EXECUTE FILE D:\stax\xml\JobA.xml WAIT 1h</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 5, the result, in default format, could look like: 
<pre>5</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named /tests/Scenario1.xml
and to clear its job logs before execution and to enable "Log TC Elapsed Time", "Log TC Num Starts", and
"Log TC Start/Stops".
<p><tt>EXECUTE FILE /tests/Scenario1.xml
CLEARLOGS Enabled LOGTCELAPSEDTIME Enabled LOGTCNUMSTARTS Enabled LOGTCSTARTSTOP Enabled</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 6, the result, in default format, could look like: 
<pre>6</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named C:\stax\xml\JobA.xml and
have a notification message with priority 3 and containing key "65:client1" sent when
this job ends to the queue of the machine/handle name that submitted the <tt>EXECUTE</tt> request.
<p><tt>EXECUTE FILE C:\stax\xml\JobA.xml JOBNAME JobA NOTIFY ONEND BYNAME PRIORITY 3 KEY "65:client1"</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 7, the result, in default format, could look like: 
<pre>
7
</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named c:/automation/runall.xml and
have the STAX job reach a breakpoint every time the function named BeginRegressionTests
is called
<p><tt>EXECUTE FILE c:/automation/runall.xml BREAKPOINT BeginRegressionTests</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 8, the result, in default format, could look like: 
<pre>
8
</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named c:/automation/runall.xml and
have the STAX job reach a breakpoint every time the STAX task at line 124 (in
XML file c:/automation/runall.xml, since the file was not specified) executes,
and every time the STAX task at line 38 in XML file c:/util/TestUtilityFunctions.xml
executes (regardless of the machine where c:/util/TestUtilityFunctions.xml is
located).
<p><tt>EXECUTE FILE c:/automation/runall.xml BREAKPOINT 124 BREAKPOINT 38@@c:/util/TestUtilityFunctions.xml</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 9, the result, in default format, could look like: 
<pre>
9
</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named c:/automation/runall.xml and
have the STAX job reach a breakpoint on the first function called.
<p><tt>EXECUTE FILE c:/automation/runall.xml BREAKPOINTFIRSTFUNCTION</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 10, the result, in default format, could look like: 
<pre>
10
</pre>
<p>
<li>
<b>Goal:</b> Execute a job defined by an XML file named c:/automation/runall.xml and
have the STAX job break at the first function that is called in any subjobs
started by the STAX job
<p><tt>EXECUTE FILE c:/automation/runall.xml BREAKPOINTSUBJOBFIRSTFUNCTION</tt>
<p><b>Output:</b>  If the request is submitted from the command line and the
job is started successfully with job ID 11, the result, in default format, could look like: 
<pre>
11
</pre>
<p>
<li>
<b>Goal:</b> Test if a XML job file named d:\stax\xml\JobA.xml is valid without actually starting
the execution of the job and return information about the functions defined in this XML job file.
<p><tt>EXECUTE FILE D:\stax\xml\JobA.xml TEST RETURNDETAILS</tt>
<p><b>Output:</b>
<pre>
{
  Job ID      : 1
  Default Call: RunCommand
  Functions   : [
    {
      Function Name      : RunCommand
      Prolog             :
      Epilog             :
      Argument Definition: FUNCTION_DEFINES_MAP_ARGS
      Arguments          : [
        {
          Argument Name: command
          Description  : A command to execute
          Type         : ARG_REQUIRED
          Default Value: &lt;None>
          Private      : No
          Properties   : []
        }
        {
          Argument Name: user
          Description  : The user id to run the command under
          Type         : ARG_OPTIONAL
          Default Value: 'anonymous'
          Private      : No
          Properties   : []
        }
        {
          Argument Name: password
          Description  : The password for the user id
          Type         : ARG_OPTIONAL
          Default Value: None
          Private      : Yes
          Properties   : []
        }
        {
          Argument Name: numTimes
          Description  : The number of times to run the command
          Type         : ARG_OPTIONAL
          Default Value: 1
          Private      : No
          Properties   : [
            {
              Name       : type
              Description: &lt;None>
              Value      : int
              Data       : []
            }
          ]
        }
        {
          Argument Name: color
          Description  : This is the color of the entity
          Type         : ARG_REQUIRED
          Default Value: &lt;None>
          Private      : No
          Properties   : [
            {
              Name       : type
              Description: This defines this argument as an enumeration
              Value      : enum
              Data       : [
                {
                  Type : choice
                  Value: 'red'
                  Data : [
                    {
                      Type : default
                      Value: &lt;None>
                      Data : []
                    }
                  ]
                }
                {
                  Type : choice
                  Value: 'blue'
                  Data : []
                }
                {
                  Type : choice
                  Value: 'green'
                  Data : []
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
</pre>
</ul>

<h2>
<b><a name="Header_GetResult" href="#ToC_GetResult">GET RESULT</a></b></h2>
GET RESULT gets the results for a completed STAX job.
<p>
You can only get the results for a STAX job that has completed, not for a
STAX job that is currently running.
<p>
The STAX job results are also provided in the STAX Job Log which can be
accessed using the STAF LOG service to query the log, but you have to
parse the messages in the log to get individual data such as the total
number of testcase passes and fails, etc.  The <tt>GET RESULT</tt> request
provides the testcase results as structured data in a marshalled string
so you can use the STAF unmarshall API to get the result data without any
parsing. 
<p>  
Note that the marshalled job results are stored in a file that exists until
the STAX job ID is reused.  Each time the STAX service is started, it resets
to using job ID 1 for the first job executed.  So the results for a job are
available while the STAX service is running and after the STAX service has
been unregistered and re-registered until the STAX job ID is reused.
<p>
<h4>Syntax</h4>
<p>
<tt>GET RESULT JOB &lt;Job ID> [DETAILS]</tt>
<p><tt>RESULT</tt> specifies that you want results for the completed STAX
job returned.  This includes information like the job status, result,
errors logged in the job log, testcase totals, etc.
<p><tt>JOB</tt> specifies the ID of a job that has completed and whose
completion results you want returned.
<p><tt>DETAILS</tt> is used to specify that you want detailed results for
the completed STAX job returned, including a list of the individual testcase
results.
<p>
<h4>Security</h4>
<p>
This request requires at least trust level 2.
<p>
<h4>Results</h4>
<p>
Upon successful return, the result buffer will contain the completion
results for the specified job ID.  If the <tt>DETAILS</tt> option is not
specified, you'll get the job results, including testcase totals, but
not a detailed list of the individual testcase results.
If the <tt>DETAILS</tt> option is specified, you'll also get the detailed
list of the individual testcase results.
<p>
<ul>
<li>The result buffer for a <tt>GET RESULT JOB &lt;Job ID></tt>
request (without the <tt>DETAILS</tt> option will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/GetResult></tt> which represents completion
results for the specified STAX job.  The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/GetResult</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents results for
    a completed STAX job.</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>jobName
<td>Job Name
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tr>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tr>
<tr>
<td>endTimestamp
<td>End Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tr>
<tr>
<td>status
<td>Status
<td><tt>&lt;String></tt>
<td><tt>'Normal' | 'Terminated' | 'Abnormal' | 'Unknown'</tt>
</tr>
<tr>
<td>result
<td>Result
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tr>
<tr>
<td>jobLogErrors
<td>Job Log Errors
<td><tt>&lt;List> of &lt;<a href="#STAXJobLogErrors">Map:STAF/Service/Log/LogRecord></a></tt>
<td>
</tr>
<tr>
<td>testcaseTotals
<td>Testcase Totals
<td><tt><a href="#STAXTestcaseTotals">&lt;Map:STAF/Service/STAX/TestcaseTotals></a></tt>
<td>
</tr>
<tr>
<td>xmlFileName
<td>XML File Name
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>fileMachine
<td>File Machine
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>function
<td>Function
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>arguments
<td>Arguments
<td><tt>&lt;String> | &lt;None></tt>
<td>Private data will be masked.
</tr>
<tr>
<td>scriptList
<td>Scripts
<td><tt>&lt;List> of &lt;String></tt>
<td>Private data will be masked.
</tr>
<tr>
<td>scriptFileList
<td>Script Files
<td><tt>&lt;List> of &lt;String></tt>
<td>
</tr>
<tr>
<td>scriptMachine
<td>Script Machine
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Job Log Errors" value is a list of any errors logged in the STAX Job Log.
If the DEFAULTMAXQUERYRECORDS setting for the LOG service on the STAX service machine is
set to a non-zero number (the default is 100), then the maximum number of errors
logged will be limited to this number (e.g. equivalent to specifying LAST &lt;Number>
on the LOG QUERY request).</li>
</li>
</ol>
</tfoot>
</table>
<p>
The STAF/Service/Log/LogRecord map class is defined as follows:
<p>
<a name="STAXJobLogErrors" href="#STAXJobLogErrors"></a>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/Log/LogRecord</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents information
about a record logged in the STAX Job Log.</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>timestamp
<td>Date-Time
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<td>
</tr>
<tr>
<td>level
<td>Level
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>message
<td>Message
<td><tt>&lt;String></tt>
<td>
</tr>
</tbody>
</table>
<p>
The STAF/Service/STAX/TestcaseTotals map class is defined as follows:
<p>
<a name="STAXTestcaseTotals" href="#STAXTestcaseTotals"></a>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/TestcaseTotals</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents testcase totals
    for a completed STAX job.</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>numTests
<td>Tests
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>numPasses
<td>Passes
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>numFails
<td>Fails
<td><tt>&lt;String></tt>
<td>
</tr>
</tbody>
</table>
<p>
<li>The result buffer for a <tt>GET RESULT JOB &lt;Job ID> DETAILS</tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/GetDetailedResult></tt> which represents
detailed completion results the specified STAX job, including a list
of the individual testcase results.  The map class is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/GetDetailedResult</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents detailed
    results for a completed STAX job.</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>jobName
<td>Job Name
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tr>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tr>
<tr>
<td>endTimestamp
<td>End Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tr>
<tr>
<td>status
<td>Status
<td><tt>&lt;String></tt>
<td><tt>'Normal' | 'Terminated' | 'Abnormal' | 'Unknown'</tt>
</tr>
<tr>
<td>result
<td>Result
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tr>
<tr>
<td>jobLogErrors
<td>Job Log Errors
<td><tt>&lt;List> of &lt;<a href="#STAXJobLogErrors">Map:STAF/Service/Log/LogRecord></a></tt>
<td>
</tr>
<tr>
<td>testcaseTotals
<td>Testcase Totals
<td><tt><a href="#STAXTestcaseTotals">&lt;Map:STAF/Service/STAX/TestcaseTotals></a></tt>
<td>
</tr>
<tr>
<td>testcaseList
<td>Testcases
<td><tt>&lt;List> of
&lt;<a href="#STAXQueryTestcase">Map:STAF/Service/STAX/QueryTestcase></a></tt>
<td>
</tr>
<tr>
<td>xmlFileName
<td>XML File Name
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>fileMachine
<td>File Machine
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>function
<td>Function
<td><tt>&lt;String></tt>
<td>
</tr>
<tr>
<td>arguments
<td>Arguments
<td><tt>&lt;String> | &lt;None></tt>
<td>Private data will be masked.
</tr>
<tr>
<td>scriptList
<td>Scripts
<td><tt>&lt;List> of &lt;String></tt>
<td>Private data will be masked.
</tr>
<tr>
<td>scriptFileList
<td>Script Files
<td><tt>&lt;List> of &lt;String></tt>
<td>
</tr>
<tr>
<td>scriptMachine
<td>Script Machine
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Job Log Errors" value is a list of any errors logged in the STAX Job Log.
If the DEFAULTMAXQUERYRECORDS setting for the LOG service on the STAX service machine is
set to a non-zero number (the default is 100), then the maximum number of errors
logged will be limited to this number (e.g. equivalent to specifying LAST &lt;Number>
on the LOG QUERY request).</li>
</li>
</ol>
</tfoot>
</table>
</ul>

<h4>
Examples</h4>
<ul>
<li><b>Goal:</b> Get the results for completed STAX Job 1.
<p><tt>&nbsp; GET RESULT JOB 1</tt>
<p><b>Output:</b> If the request is submitted from the command line,
the result, in verbose format, could look like:
<pre>
{
  Job Name       : Test My Application
  Start Date-Time: 20101027-18:44:28
  End Date-Time  : 20101027-18:44:52
  Status         : Normal
  Result         : None
  Job Log Errors : []
  Testcase Totals: {
    Tests : 1
    Passes: 18
    Fails : 2
  }
  XML File Name  : c:\stax\myApp\testMyApp.xml
  File Machine   : local://local
  Function       : Main
  Arguments      : 'client1'
  Scripts        : []
  Script Files   : []
  Script Machine : &lt;None>
}
</pre>
Or, if the job had been terminated due to a STAXPythonEvaluationError
signal being raised because the job referenced an undefined Python
variable (e.g. myVar), the result, in verbose format, could look like:
<pre>
{
  Job Name       : Test My Application
  Start Date-Time: 20101027-18:44:28
  End Date-Time  : 20101027-18:44:52
  Status         : Normal
  Result         : None
  Job Log Errors : [
    {
      Date-Time: 20101008-18:44:51
      Level    : Error
      Message  : STAXPythonEvaluationError signal raised. Terminating job.

===== XML Information =====

File: c:\stax\myApp\testMyApp.xml, Machine: local://local
Line 32: Error in element type "script".

===== Python Error Information =====

com.ibm.staf.service.stax.STAXPythonEvaluationException:
Traceback (innermost last):
  File "<pyExec string>", line 1, in ?
NameError: myVar

===== Call Stack for STAX Thread 1 =====

[
  function: main (Line: 8, File: c:\stax\myApp\testMyApp.xml, Machine: local://local)
  sequence: 2/2 (Line: 13, File: c:\stax\myApp\testMyApp.xml, Machine: local://local)
]
    }
  ]
  Testcase Totals: {
    Tests : 1
    Passes: 0
    Fails : 0
  }
  XML File Name  : c:\stax\myApp\testMyApp.xml
  File Machine   : local://local
  Function       : Main
  Arguments      : 'client1'
  Scripts        : []
  Script Files   : []
  Script Machine : &lt;None>
}
</pre>
<p>
<li><b>Goal:</b> Get the detailed results, including a testcase list,
    for completed STAX Job 1.
<p><tt>&nbsp; GET RESULT JOB 1 DETAILS</tt>
<p><b>Output:</b> If the request is submitted from the command line,
the result, in verbose format, could look like:
<pre>
{
  Job Name       : Test My Application
  Start Date-Time: 20101027-18:44:28
  End Date-Time  : 20101027-18:44:52
  Status         : Normal
  Result         : None
  Job Log Errors : []
  Testcase Totals: {
    Tests : 1
    Passes: 18
    Fails : 2
  }
  Testcases      : [
    {
      Testcase Name   : Test1.client1
      Passes          : 18
      Fails           : 2
      Start Date-Time : 20101027-18:44:29
      Elapsed Time    : 00:00:23
      Starts          : 1
      Status Date-Time: 20101027-18:44:52
      Last Status     : pass
      Information     :
      Testcase Stack  : [
        Test1
        Test1.client1
      ]
    }
  ]
  XML File Name  : c:\stax\myApp\testMyApp.xml
  File Machine   : local://local
  Function       : Main
  Arguments      : 'client1'
  Scripts        : []
  Script Files   : []
  Script Machine : &lt;None>
}
</pre>
</ul>

<h2>
<b><a name="Header_GetDTD" href="#ToC_GetDTD">GET DTD</a></b></h2>
GET DTD displays the DTD (Document Type Definition) for the STAX Service.
An XML document executed by the STAX Service is considered valid if the document complies with this DTD.
Note that DTDs are all about specifying the structure and syntax of XML documents (not their content).
<p>
If you use an XML editor to create and edit STAX XML documents, you'll probably want
to create a stax.dtd file and reference this file in your DOCTYPE statement's SYSTEM value
so that the XML editor can use it to validate the XML syntax.
The stax.dtd file is not provided with the STAX service because its contents
can vary because you can extend it by registering STAX service extensions.

<h4>
Syntax</h4>
<tt>GET DTD</tt>
<h4>
Security</h4>
This request requires at least trust level 2.
<h4>
Results</h4>
The result buffer contains the DTD for the STAX service.
<h4>
Examples</h4>
<ul>
<li><b>Goal:</b> Get the STAX DTD.
<p><tt>&nbsp; GET DTD</tt>
<p>
<li><b>Goal:</b> From a command prompt on Windows, get the STAX DTD
and redirect it to a file.
<pre>
  set STAF_QUIET_MODE=1
  STAF local STAX GET DTD > stax.dtd
  set STAF_QUIET_MODE=
</pre>
This creates a stax.dtd file in the current directory.
<p>
<li><b>Goal:</b> From a command prompt on Unix, get the STAX DTD
and redirect it to a file.
<pre>
  export STAF_QUIET_MODE=1
  STAF local STAX GET DTD > stax.dtd
  unset STAF_QUIET_MODE
</pre>
This creates a stax.dtd file in the current directory.
</ul>

<h2>
<b><a name="Header_Help" href="#ToC_Help">HELP</a></b></h2>

Help displays the request options and how to use them.
<h4>
Syntax</h4>
<tt>HELP</tt>
<h4>
Results</h4>
The result buffer contains the Help messages for the request options for
the STAX service.

<h2>
<b><a name="Header_Hold" href="#ToC_Hold">HOLD</a></b></h2>

HOLD allows you to hold a job or a currently running block in a job.
<h4>
Syntax</h4>
<tt>HOLD JOB &lt;JobID> [BLOCK
&lt;Block Name>]</tt>
<p><tt>JOB</tt> specifies
the ID of the job to hold. If no block is specified, then the "main" block
in the job (which, by default, encompasses the entire job) is held which
means that no additional elements (e.g. processes and STAF commands) in
the job will be run until the job is released (e.g. by using a
STAX RELEASE JOB &lt;JobID> request).
<p><tt>BLOCK</tt> specifies
a particular block in the job to hold. The block name must correspond to
a block element name specified in the XML document. If a block in a job
is held, no additional elements (e.g. processes and STAF commands) in
that block will be run until that block is released (e.g. by using a
STAX RELEASE JOB &lt;JobID> BLOCK &lt;Block Name> request).
<p>A child block cannot be held if it is being held by a parent block.
<h4>
Security</h4>
This request requires at least trust level 4.
<h4>
Results</h4>
Upon successful return, the result buffer does not contain anything.
<h4>
Examples</h4>

<ul>
<li><b>Goal:</b> Hold all of job 5.
<p><tt>&nbsp; HOLD JOB 5</tt>
<p>
<li><b>Goal:</b> Hold block MachineB in job 31.
<p><tt>&nbsp; HOLD JOB 31 BLOCK
MachineB</tt>
</ul>

<h2>
<b><a name="Header_List" href="#ToC_List">LIST</a></b></h2>

LIST allows you to list all of the jobs currently running or to list information
about a specified job's threads, blocks, testcases, processes, STAF commands,
breakpoints, or functions.  LIST also allows you to list the current operational
settings for the service or to list extensions registered for the service, by element
name or by extension jar file name.  LIST also lets you list the contents of the
machine cache or the file cache, or to get summary information about the file cache
such as the hit ratio.
<h4>
Syntax</h4>
<pre>
LIST JOBS | SETTINGS | MACHINECACHE |
     FILECACHE [SORTBYLRU | SORTBYLFU | SUMMARY] |
     EXTENSIONS | EXTENSIONJARFILES |
     JOB &lt;Job ID> &lt;THREADS [LONG] | &lt; THREAD &lt;Thread ID> VARS [SHORT] > |
                   PROCESSES | STAFCMDS | SUBJOBS | BLOCKS | TESTCASES |
                   BREAKPOINTS | FUNCTIONS [| &lt;List Type>]...>
</pre>
<p><tt>JOBS</tt> lists
the jobs that are currently running.
<p><tt>SETTINGS</tt> lists
the current operational settings for the service.
<p><tt>MACHINECACHE</tt> lists
the current contents of the machine cache.
<p><tt>FILECACHE</tt> lists
the current contents of the file cache.
<p><tt>SORTBYLRU</tt> specifies to list the current contents of the file cache
in the order determined by the LRU (Least Recently Used) algorithm.  This means
the files will be listed in descending order by last hit date.
<p><tt>SORTBYLFU</tt> specifies to list the current contents of the file cache
in the order determined by the LFU (Least Frequently Used) algorithm.  All
non-stale files will be listed before any stale files.  The non-stale files
will be sorted by hit count in descending order, and then by last hit date in
descending order (for those files with the same hit count).
The stale files will be sorted by last hit date in descending order.
<p><tt>SUMMARY</tt> specifies to show summary information about the file cache,
including its hit ratio.
<p><tt>EXTENSIONS</tt> lists
the extension elements registered for the service in alphbetical order.
<p><tt>EXTENSIONJARFILES</tt> lists
the names of the extension jar files registered for the service.
<p><tt>JOB</tt> specifies
the Job ID for a currently running job.
<p><tt>THREADS [LONG]</tt>
lists the threads that are currently running for the specified job;
specifying the <tt>LONG</tt> option shows more detailed information about
the threads.  Note:  The <tt>LONG</tt> option was added in STAX V3.4.3.
<p><tt>THREAD VARS [SHORT]</tt>
lists the thread variables that are defined in the specified thread for the
specified job.  The default format expands all of the variables (recursively);
specifying the <tt>SHORT</tt> option shows the variables in the original Python format.
<p><tt>BLOCKS</tt>
lists the blocks that are currently running for the specified job.
<p><tt>TESTCASES</tt>
lists the testcases that have had test status (number of passes and fails)
recorded for the specified job.
<p><tt>PROCESSES</tt>
lists the processes that are currently running for the specified job.
<p><tt>STAFCMDS</tt>
lists the STAF commands that are currently running for the specified job.
<p><tt>SUBJOBS</tt>
lists the sub-jobs that are currently running for the specified job
(initiated via the &lt;job> element).
<p><tt>BREAKPOINTS</tt>
lists the breakpoints that are currently set for the specified job.
<p><tt>FUNCTIONS</tt>
lists the functions that are currently available to be called for the specified job.
<p><tt>&lt;List Type></tt>
lists the extensions of the specified type that are currently running for
the specified job.
<h4>
Security</h4>
This request requires at least trust level 2.
<h4>
Results</h4>
Upon successful return, the result buffer will contain information about
the request based on the options specified:

<ul>
<li><tt><b>LIST JOBS</b></tt>
<p>
The result buffer for a <tt>LIST JOBS</tt> request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/JobInfo></tt> representing the jobs
that are currently running.  The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/JobInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a STAX job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>jobID
<td>Job ID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>jobName
<td>Job Name
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>function
<td>Function
<td><tt>&lt;String></tt>
<td>
<tr>
<td>state
<td>State
<td><tt>&lt;String></tt>
<td><tt>'Pending' | 'Running'</tt>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Job Name" value is set to <tt>&lt;None></tt> if a job name
was not specified for the job.
<li>The "Function" value is set to the value of the function parameter specified on
the EXECUTE request, or if one wasn't specified, it is set to the defaultcall
element's function value.
<li>The "State" value will be 'Pending' if the STAX EXECUTE request is in the
    process of submitting the job, or 'Running' if the job was submitted
    successfully and is running.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><tt><b>LIST SETTINGS</b></tt>
<p>
The result buffer for a <tt>LIST SETTINGS</tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/Settings></tt>
representing the settings for the STAX service.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/Settings</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents the settings for the STAX service.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>eventMachine
<td>Event Machine
<td><tt>&lt;String></tt>
<td>
<tr>
<td>eventService
<td>Event Service Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>numThreads
<td>Number of Threads
<td><tt>&lt;String></tt>
<td>
<tr>
<td>processTimeout
<td>Process Timeout
<td><tt>&lt;String></font>
<td>
<tr>
<td>fileCaching
<td>File Caching
<td><tt>&lt;String></tt>
<td><tt>'Enabled' | 'Disabled'</tt>
<tr>
<td>maxFileCacheSize
<td>Max File Cache Size
<td><tt>&lt;String></tt>
<td>
<tr>
<td>fileCacheAlgorithm
<td>File Cache Algorithm
<td><tt>&lt;String></tt>
<td><tt>'LRU' | 'LFU'</tt>
<tr>
<td>maxFileCacheAge
<td>Max File Cache Age
<td><tt>&lt;String></tt>
<td><tt>&lt;Number>[s|m|h|d|w]</tt>
<tr>
<td>maxMachineCacheSize
<td>Max Machine Cache Size
<td><tt>&lt;String></tt>
<td>
<tr>
<td>maxReturnFileSize
<td>Max Return File Size
<td><tt>&lt;String></tt>
<td>
<tr>
<td>maxGetQueueMessages
<td>Max Get Queue Messages
<td><tt>&lt;String></tt>
<td>
<tr>
<td>maxSTAXThreads
<td>Max STAX-Threads
<td><tt>&lt;String></tt>
<td>
<tr>
<td>clearLogs
<td>Clear Logs
<td><tt>&lt;String></tt>
<td><tt>'Enabled' | 'Disabled'</tt>
<tr>
<td>logTCElapsedTime
<td>Log TC Elapsed Time
<td><tt>&lt;String></tt>
<td><tt>'Enabled' | 'Disabled'</tt>
<tr>
<td>logTCNumStarts
<td>Log TC Num Starts
<td><tt>&lt;String></font>
<td><tt>'Enabled' | 'Disabled'</tt>
<tr>
<td>logTCStartStop
<td>Log TC Start/Stop
<td><tt>&lt;String></font>
<td><tt>'Enabled' | 'Disabled'</tt>
<tr>
<td>pythonOutput
<td>Python Output
<td><tt>&lt;String></font>
<td><tt>'JobUserLog' | 'Message' | 'JobUserLogAndMsg' | 'JVMLog'</tt>
<tr>
<td>pythonLogLevel
<td>Python Log Level
<td><tt>&lt;String></font>
<td>
<tr>
<td>extensions
<td>Extensions
<td><tt>&lt;List> of &lt;String></tt>
<td>
<tr>
<td>extensionFile
<td>Extension File
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Event Machine" value is the name of the Event service machine used by the STAX service.
<li>The "Event Service Name" value is the name by which the Event service is known to the STAX
service.
<li>The "Number of Threads" value is the number of physical threads used by the STAX service.
<li>The "Process Timeout" value is the number of milliseconds that the STAX service waits for
a process to start.
<li>The "Max Return File Size" value is the maximum number of bytes that can
be returned in a file by a process element and by a stafcmd element that
submits a GET FILE request to the FS service.  See the description of the
<tt>MAXRETURNFILESIZE</tt> parameter in the <a href="#Header_StaxServiceMach">
"STAX Service Machine Installation and Configuration"</a> section for more
information.
<li>The "Max Get Queue Messages" value is the maximum number of messages
that a STAX job's STAFQueueMonitor thread will get from the STAX job
handle's queue at a time.  See the description of the <tt>MAXGETQUEUEMESSAGES</tt>
parameter in the <a href="#Header_StaxServiceMach">"STAX Service Machine
Installation and Configuration"</a> section for more information.
<li>The "Max STAX-Threads" value is the maximum number of STAX Threads
that can be running simultaneously in a job that paralleliterate and
parallel elements cannot exceed when starting new STAX-Threads in parallel.
See the description of the <tt>MAXSTAXTHREADS</tt> parameter in the
<a href="#Header_StaxServiceMach">"STAX Service Machine Installation and
Configuration"</a> section for more information.
<li>The "Extensions" value is a list of the extension jar files specified
by the <tt>EXTENSION</tt> parameter when registering the STAX service.
<li>The "Extension File" value is the value of the <tt>EXTENSIONXMLFILE</tt>
or the <tt>EXTENSIONFILE</tt> parameter when registering the STAX service
(or &lt;None> if these parameters were not specified).
</ol>
</tr>
</tfoot>
</table>
<p>
<li><tt><b>LIST FILECACHE [SORTBYLRU | SORTBYLFU]</b></tt>
<p>
The result buffer for a <tt>LIST FILECACHE</tt> request (without the
<tt>SUMMARY</tt> option specified) will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/FileCache></tt>
representing the file cache for the STAX service. The results will be sorted
in the order determined by the cache algorithm by default.  Or, if the
<tt>SORTBYLRU</tt> option is specified, the results will be listed in descending
order by last hit date.  Or, if the <tt>SORTBYLFU</tt> option is specified,
all non-stale files will be listed before any stale files and the non-stale
files will be sorted by hit count in descending order, and then by last hit
date in descending order (for those files with the same hit count).
The stale files will be sorted by last hit date in descending order.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/FileCache</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents contents of the file cache.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>machine
<td>Machine
<td><tt>&lt;String></tt>
<td>
<tr>
<td>file
<td>File
<td><tt>&lt;String></tt>
<td>
<tr>
<td>hits
<td>Hits
<td><tt>&lt;String></tt>
<td>
<tr>
<td>lastHit
<td>Last Hit Date-Time<br>(Last Hit)
<td><tt>&lt;String></font>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>addDate
<td>Added Date-Time<br>(Added)
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Machine" value is the name of the machine from where the STAX file was loaded.
<li>The "File" value is the path to the file on the machine.
<li>The "Hits" value is the number of cache hits for the entry.
<li>The "Last Hit Date-Time" value is the date of the last cache hit.
<li>The "Added Date-Time" value is the date the file was added to the cache.
</ol>
</tr>
</tfoot>
</table>

<p>
<li><tt><b>LIST FILECACHE SUMMARY</b></tt>
<p>
The result buffer for a <tt>LIST FILECACHE SUMMARY</tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/FileCacheSummary></tt>
representing summary information about the file cache for the STAX service.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/FileCacheSummary</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents summary information
    about the file cache.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>hitRatio
<td>Hit Ratio
<td><tt>&lt;String></tt>
<td><tt>&lt;Number>%</tt>
<tr>
<td>hitCount
<td>Hit Count
<td><tt>&lt;String></tt>
<td>
<tr>
<td>missCount
<td>Miss Count
<td><tt>&lt;String></tt>
<td>
<tr>
<td>requestCount
<td>Request Count
<td><tt>&lt;String></tt>
<td>
<tr>
<td>lastPurgeDate
<td>Last Purge Date-Time
<td><tt>&lt;String></font>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Hit Ratio" value shows how often a searched for file is actually found
    in the cache.
<li>The "Hit Count" value is the total number of times that a file with the
    same Last Modification Date was found in the cache.
<li>The "Miss Count" value is the total number of times that a file with the
    same Last Modification Date was not found in the cache.
<li>The "Request Count" value is the total number of times that a file was
    searched for in the cache.
<li>The "Last Purge Date-Time" value is the date that the cache was last purged
    (or the date the file cache was created if the cache has never been purged).
</ol>
</tr>
</tfoot>
</table>
<p>
<li><tt><b>LIST MACHINECACHE</b></tt>
<p>
The result buffer for a <tt>LIST MACHINECACHE</tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/MachineCache></tt>
representing the machine cache for the STAX service. The results will be sorted
by the last hit date.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/MachineCache</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents contents of the machine cache.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>machine
<td>Machine
<td><tt>&lt;String></tt>
<td>
<tr>
<td>fileSep
<td>File Separator<br>(File Sep)
<td><tt>&lt;String></tt>
<td>
<tr>
<td>hits
<td>Hits
<td><tt>&lt;String></tt>
<td>
<tr>
<td>lastHit
<td>Last Hit Date-Time<br>(Last Hit)
<td><tt>&lt;String></font>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>addDate
<td>Added Date-Time<br>(Added)
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Machine" value is the name of the machine from where the STAX file was loaded.
<li>The "File Separator" value is the file separator for the machine.
<li>The "Hits" value is the number of cache hits for the entry.
<li>The "Last Hit Date-Time" value is the date of the last cache hit.
<li>The "Added Date-Time" value is the date the file was added to the cache.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><tt><b>LIST EXTENSIONS</b></tt>
<p>
The result buffer for a <tt>LIST EXTENSIONS</tt>
request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/ExtensionElement></tt>
where each entry in the list represents an extension element registered for the STAX service.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ExtensionElement</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a STAX extension element.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>extensionElement
<td>Extension Element
<td><tt>&lt;String></tt>
<td>
<tr>
<td>extensionJarFile
<td>Extension Jar File
<td><tt>&lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Extension Element" value is the name of each extension element registered
for the STAX service, enclosed in &lt; and >.
<li>The "Extension Jar File" value is the name of the extension jar file which
contains the extension.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><tt><b>LIST EXTENSIONJARFILES</b></tt>
<p>
The result buffer for a <tt>LIST EXTENSIONJARFILES</tt>
request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/ExtensionJarFile></tt>
which represents the extension jar files registered for the STAX service.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ExtensionJarFile</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a STAX extension jar file.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>extensionJarFile
<td>Extension Jar File
<td><tt>&lt;String></tt>
<td>
<tr>
<td>version
<td>Version
<td><tt>&lt;String></tt>
<td>
<tr>
<td>description
<td>Description
<td><tt>&lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Extension Jar File" value is the name of the extension jar file which
contains the extension(s).
<li>The "Version" value is the version of the extension(s) provided in the
extension jar file.
It is obtained from extension jar file's manifest via the "Extension-Version"
attribute.  If the version is not provided in the manifest, it is set to
<tt>'&lt;Not Provided>'</tt>.
<li>The "Description" value is the description of the extension(s) provided
in the extension jar file.
It is obtained from the extension jar file's manifest via the
"Extension-Description" attribute.  If the description is not provided in the
manifest, it is set to
<tt>'&lt;Not Provided>'</tt>.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><a name="ListThreads"><tt><b>LIST JOB &lt;Job ID> THREADS [LONG]</b></tt></a>
<p>
If the <tt>LONG</tt> option is not specified, the result buffer for a
<tt>LIST JOB &lt;Job ID> THREADS</tt> request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/ThreadInfo></tt>
which represents a thread currently running in the specified STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ThreadInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a thread currently running in the
specified job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>threadID
<td>Thread ID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>parentTID
<td>Parent TID
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>state
<td>State
<td><tt>&lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The main thread (the one with "Thread ID" set to '1') will have it's "Parent TID" value set
to <tt>&lt;None></tt>.
</ol>
</tr>
</tfoot>
</table>
<p>
If the <tt>LONG</tt> option is specified, the result buffer for a
<tt>LIST JOB &lt;Job ID> THREADS LONG</tt> request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/ThreadLongInfo></tt>
which represents detailed information about a thread currently running
in the specified STAX job.  The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ThreadLongInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents detailed
    information about a thread currently running in the specified job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>threadID
<td>Thread ID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>parentTID
<td>Parent TID
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>parentHierarchy
<td>Parent Hierarchy
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>state
<td>State
<td><tt>&lt;String></tt>
<td>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>callStack
<td>Call Stack
<td><tt>&lt;List> of &lt;String></tt>
<td>
<tr>
<td>conditionStack
<td>Condition Stack
<td><tt>&lt;List> of &lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The main thread (the one with "Thread ID" set to '1') will have it's "Parent TID"
and "Parent Hierarchy" values set to <tt>&lt;None></tt>.
<p>
<li>"Parent Hierarchy" is the parent thread hierarchy in a parent.child format.
<p>
<li>The "Call Stack" can be useful for tracing the progress of a job and for debugging.
The format for each string in the call stack is:
<tt>&lt;Element Name>: &lt;Action Info> (Line: &lt;Line#>, Machine: &lt;Machine>, File: &lt;File>) </tt>.
The content of the action information provided for each element is as follows:
<pre>
  block: &lt;Block Name>
  break:
  breakpoint:
  call: &lt;Function Name>
  catch: &lt;Exception Type>
  continue:
  script: &lt;Value>
  finally:
  function: &lt;Function Name>
  hold:
  if: &lt;If Expression>
  iterate: &lt;Current Iteration Index>/&lt;List Size> [&lt;Var Value>] &lt;List (Not evaluated)>
  log: &lt;Message Value>
  loop: #&lt;Current Index> from &lt;Value> to &lt;Value> [by &lt;Value>] [while &lt;Value>] [until &lt;Value>]
  message: &lt;Message Value>
  nop:
  process: &lt;Process Name>
  parallel: &lt;Number of Tasks>
  parallelIterate: &lt;Number Threads Submitted>/&lt;List Size> &lt;State> &lt;List (Not evaluated)>
  raise: &lt;Signal Name>
  release:
  sequence: &lt;Index of Current Task>/&lt;Number of Tasks>
  signalhandler: &lt;Signal Name>
  stafcmd: &lt;STAF Command Name>
  terminate:
  testcase: &lt;Testcase Name>
  testcaseStatus: &lt;Status Result>
  try:
</pre>
<p>
If the action information provided for an If, Iterate, Log, Loop, Message, ParallelIterate,
Process, Script, or STAFCommand element has a length greater than 40 characters,
only the first 40 characters are provided and "..." is appended to
the action information.
<p>
Note that if a finally element is specified within a try element, the Finally
appears before the Try and Catch (if any) in the call stack (even though the
finally task will actually be executed after the Try and Catch).
Also, note that the finally element is run in a separate thread using the
same Python Interpreter so that it's using the same Python variables.
<p>
<li>The "Condition Stack" can also be useful for debugging a STAX job.
The format for each string in the call stack is:
<tt>&lt;Condition Name>: &lt;Condition Info></tt>.
The content of the condition information provided for each condition is as follows:
<pre>
  &lt;Condition Name>: Source=&lt;Source>, Priority=&lt;Priority>
</pre>
</ol>
</tr>
</tfoot>
</table>
<p>
<li><a name="ListThreads"><tt><b>LIST JOB &lt;Job ID> THREAD &lt;Thread ID> VARS</b></tt></a>
<p>
The result buffer for a
<tt>LIST JOB &lt;Job ID> THREAD &lt;Thread ID> VARS</tt>
 request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/ThreadVariable></tt>
which represents a variable defined in the specified thread
running in the specified STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ThreadVariable</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class rrepresents a variable defined
in the specified thread running in the specified STAX job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>name
<td>Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>value
<td>Value
<td><tt>&lt;String> | &lt;List> of &lt;Map:STAF/Service/STAX/ThreadVariable></tt>
<td>
<tr>
<td>type
<td>Type
<td><tt>&lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The variable type is the Python variable type (i.e. org.python.core.PyList,
org.python.core.PyDictionary, org.python.core.PyTuple, org.python.core.PyString,
org.python.core.PyInteger, org.python.core.PyLong, etc.).
<li>If the <tt>SHORT</tt> option is not specified, and the <tt>Value</tt> is
a PyList, PyTuple, or PyDictionary, then the Value will be a List of
map class STAF/Service/STAX/ThreadVariable representing the items in the List,
Tuple, or Dictionary.  This will occur recursively for each value in the output.
</ol>
</tr>
</tfoot>
</table>

<p>
<li><tt><b>LIST JOB &lt;Job ID> BLOCKS</b></tt>
<p>
The result buffer for a
<tt>LIST JOB &lt;Job ID> BLOCKS</tt>
request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/BlockInfo></tt>
which represents a block currently running in the specified STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/BlockInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a block currently running in the
specified job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>blockName
<td>Block Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>state
<td>State
<td><tt>&lt;String></tt>
<td><tt>'Running' | 'Held' | 'Unknown'</tt>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>Each "Block Name" value is displayed in a ParentBlock.ChildBlock
format.
<li>Every job contains a default "main" block which includes the entire job.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><tt><b>LIST JOB &lt;Job ID> TESTCASES</b></tt>
<p>
The result buffer for a
<tt>LIST JOB &lt;Job ID> TESTCASES</tt>
request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/TestcaseInfo></tt>
which represents a testcase that has had a testcase status recorded for the
specified job.

The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/TestcaseInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a testcase in a STAX job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>testcaseName
<td>Testcase Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>numPasses
<td>Passes
<td><tt>&lt;String></tt>
<td>
<tr>
<td>numFails
<td>Fails
<td><tt>&lt;String></tt>
<td>
<tr>
<td>elapsedTime
<td>Elapsed Time
<td><tt>&lt;String></tt>
<td><tt>
'&lt;Pending>' | &lt;HH[H]:MM:SS></tt>
<tr>
<td>numStarts
<td>Starts
<td><tt>&lt;String></tt>
<td>
<tr>
<td>information
<td>Information<br>(Info)
<td><tt>&lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The value for "Testcase Name" is the testcase name in a
ParentTestcase.ChildTestcase format.
<li>The value for "Passes" is the total number of passes for a testcase
<li>The value for "Fails" is the total number of fails for a testcase
<li>The format for "Elapsed Time" is
<tt>HH:MM:SS</tt> if the
elapsed time is under 100 hours or
<tt>HHH:MM:SS</tt> if
100 hours or more.
Or, if the testcase has not yet been stopped in the job via
a &lt;/testcase> or STOP request, so that there is no elapsed time, it's value is
<tt>'&lt;Pending>'</tt>.
<li>The value for "Starts" is the number of times the testcase has been started
in the job via a &lt;testcase> element and/or a START request.
<li>The value for "Information" is the last status information (aka message)
recorded for the testcase, or blank if no status information has been
provided.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><tt><b>LIST JOB &lt;Job ID> PROCESSES</b></tt>
<p>
The result buffer for a
<tt>LIST JOB &lt;Job ID> PROCESSES</tt>
request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/ProcessInfo></tt>
which represents a process currently running in the specified STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ProcessInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a process currently running in the
specified job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>processName
<td>Process Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>location
<td>Location
<td><tt>&lt;String></tt>
<td>
<tr>
<td>handle
<td>Handle
<td><tt>&lt;String></tt>
<td>
<tr>
<td>command
<td>Command
<td><tt>&lt;String></tt>
<td>Private data will be masked.
<tr>
<td>parms
<td>Parms
<td><tt>&lt;String> | &lt;None></tt>
<td>Private data will be masked.
</tbody>
</table>
<p>
<li><tt><b>LIST JOB &lt;Job ID> STAFCMDS</b></tt>
<p>
The result buffer for a
<tt>LIST JOB &lt;Job ID> STAFCMDS</tt>
request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/StafcmdInfo></tt>
which represents a STAF command currently running in the specified STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/StafcmdInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a STAF command
currently running in the specified job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>stafcmdName
<td>Stafcmd Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>location
<td>Location
<td><tt>&lt;String></tt>
<td>
<tr>
<td>requestNum
<td>Request#
<td><tt>&lt;String></tt>
<td>
<tr>
<td>service
<td>Service
<td><tt>&lt;String></tt>
<td>
<tr>
<td>request
<td>Request
<td><tt>&lt;String></tt>
<td>Private data will be masked.
</tbody>
</table>
<p>
<li><tt><b>LIST JOB &lt;Job ID> SUBJOBS</b></tt>
<p>
The result buffer for a <tt>LIST JOBS</tt>
request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/SubjobInfo></tt>
representing the sub-jobs that are currently running in the specified job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/SubjobInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a STAX subjob.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>jobID
<td>Job ID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>jobName
<td>Job Name
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>function
<td>Function
<td><tt>&lt;String></tt>
<tr>
<td>blockName
<td>Block Name
<td><tt>&lt;String></tt>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Job Name" value is set to <tt>&lt;None></tt> if a job name
was not specified for the job.
<li>The "Function" value is set to the value of the function parameter specified on
the EXECUTE request, or if one wasn't specified, it is set to the defaultcall
element's function value.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><tt><b>LIST JOB &lt;Job ID> BREAKPOINTS</b></tt>
<p>
The result buffer for a <tt>LIST BREAKPOINTS</tt>
request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/BreakpointInfo></tt>
representing the breakpoints that are currently set in the specified job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/BreakpointInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a breakpoint.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>ID
<td>Breakpoint ID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>function
<td>Function Name
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>line
<td>Line #
<td><tt>&lt;String> | &lt;None></tt>
<tr>
<td>file
<td>XML File
<td><tt>&lt;String> | &lt;None></tt>
<tr>
<td>machine
<td>Machine
<td><tt>&lt;String> | &lt;None></tt>
</tbody>
</table>
<p>
<li><tt><b>LIST JOB &lt;Job ID> FUNCTIONS</b></tt>
<p>
The result buffer for a <tt>LIST JOB &lt;Job ID> FUNCTIONS</tt>
request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/FunctionListInfo></tt>
which represents a function currently available to be called in
the specified STAX job.  The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/FunctionListInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a function in the
specified job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>function
<td>Function
<td><tt>&lt;String></tt>
<td>
<tr>
<td>file
<td>File
<td><tt>&lt;String></tt>
<td>
<tr>
<td>machine
<td>Machine
<td><tt>&lt;String></tt>
<td>
</tbody>
</table>

</ul>

<h4>
Examples</h4>
<ul>
<li>
<b>Goal:</b> List all of the jobs.
<p><tt>&nbsp; LIST JOBS</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format, could look like: 
<pre>
Job ID Job Name   Start Date-Time   Function    State
------ ---------- ----------------- ----------- -------
4      Sample Job 20101119-20:40:16 MonitorTest Running
5      TestA      20101119-20:52:31 main        Running
7      WebTest    20101119-21:15:23 InitJob     Pending
</pre>
<p>
<li>
<b>Goal:</b> List the STAX service operational settings.
<p><tt>&nbsp; LIST SETTINGS</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result could look like: 
<pre>
{
  Event Machine         : local
  Event Service Name    : Event
  Number of Threads     : 5
  Process Timeout       : 60000
  File Caching          : Enabled
  Max File Cache Size   : 20
  File Cache Algorithm  : LRU
  Max File Cache Age    : 0
  Max Machine Cache Size: 20
  Max Return File Size  : 0
  Max Get Queue Messages: 25
  Max STAX-Threads      : 0
  Clear Logs            : Disabled
  Log TC Elapsed Time   : Enabled
  Log TC Num Starts     : Enabled
  Log TC Start/Stop     : Disabled
  Python Output         : JobUserLog
  Python Log Level      : Info
  Extensions            : []
  Extension File        : C:/STAF/services/stax/extensions.xml
}
</pre>
<p>
<li>
<b>Goal:</b> List the contents of the file cache in the order
   determined by the cache algorithm.  Let's assume the cache
   algorithm is LRU (Least Recently Used),
<p><tt>&nbsp; LIST FILECACHE</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result could look like: 
<pre>
Machine File                 Hits Last Hit Date-Time Added Date-Time
------- -------------------- ---- ------------------ --------------------
client1 /stax/myfile.xml     6    20100603-14:15:34  20100603-14:01:21
client1 /stax/STAFTest.xml   3    20100603-14:15:33  20100603-13:49:27
client1 /stax/STAXUtil.xml   2    20100603-14:15:00  20100603-14:12:21
server1 /tmp/MainJob.xml     0    20100603-14:15:00  20100603-14:15:00
local   c:\stax\STAXUtil.xml 4    20100603-14:14:55  20100603-13:51:50
local   c:\stax\myJob.xml    3    20100603-14:14:52  20100603-13:51:42
</pre>
<p>
<li>
<b>Goal:</b> List the contents of the file cache in the order
   determined by the LFU (Least Frequently Used).
<p><tt>&nbsp; LIST FILECACHE SORTBYLFU</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result could look like: 
<pre>
Machine File                 Hits Last Hit Date-Time Added Date-Time
------- -------------------- ---- ------------------ --------------------
client1 /stax/myfile.xml     6    20100603-14:15:34  20100603-14:01:21
local   c:\stax\STAXUtil.xml 4    20100603-14:14:55  20100603-13:51:50
local   c:\stax\myJob.xml    3    20100603-14:14:52  20100603-13:51:42
client1 /stax/STAFTest.xml   3    20100603-14:15:33  20100603-13:49:27
client1 /stax/STAXUtil.xml   2    20100603-14:15:00  20100603-14:12:21
server1 /tmp/MainJob.xml     0    20100603-14:15:00  20100603-14:15:00
</pre>
<p>
<li>
<b>Goal:</b> List summary information for the file cache.
<p><tt>&nbsp; LIST FILECACHE SUMMARY</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result could look like: 
<pre>
Hit Ratio      : 75%
Hit Count      : 18
Miss Count     : 6
Request Count  : 24
Last Purge Date: 20100603-16:53:21
</pre>
<p>
<li>
<b>Goal:</b> List the contents of the machine cache.
<p><tt>&nbsp; LIST MACHINECACHE</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result could look like: 
<pre>
Machine File Separator Hits Last Hit Date-Time Added Date-Time
------- -------------- ---- ------------------ --------------------
client1 /              6    20070922-14:15:34  20090322-14:14:47
server1 /              1    20070922-14:15:00  20090322-14:15:00
win1    \              2    20070922-14:14:55  20090322-14:14:55
</pre>
<p>
<li>
<b>Goal:</b> List the STAX service extension elements:
<p><tt>&nbsp; LIST EXTENSIONS</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format, could look like: 
<pre>
Extension Element Extension Jar File
----------------- --------------------------
&lt;email>           C:\STAXExt\EmailExt.jar
&lt;ext-delay>       C:\STAXExt\ExtDelay.jar
&lt;ext-sleep>       C:\STAXExt\ExtDelay.jar
&lt;ext-wait>        C:\STAXExt\ExtDelay.jar
</pre>
<p>
<li>
<b>Goal:</b> List the extension jar files registered for the STAX version:
<p><tt>&nbsp; LIST EXTENSIONJARFILES</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format, could look like:
<pre>
Extension Jar File            Version Description
----------------------------- ------- -----------------------------------
C:\STAXExt\ExtMessageText.jar 3.0.0   Message Text STAX Monitor Extension
C:\STAXExt\ExtDelay.jar       3.0.0   Delay STAX Extensions
C:\STAXExt\EmailExt.jar       1.0.0   eMail STAX Service Extension
</pre>
<p>
<li>
<b>Goal:</b> List all of the threads running for a job with Job ID 12.
<p><tt>&nbsp; LIST JOB 12 THREADS</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format, could look like:
<pre>
Thread ID Parent TID State
--------- ---------- -------
1         &lt;None>     Blocked
2         1          Blocked
3         1          Blocked
4         2          Running
5         2          Blocked
</pre>
<p>
<li>
<b>Goal:</b> List detail information on all threads running for a job with Job ID 12.
<p><tt>&nbsp; LIST JOB 12 THREADS LONG</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result co uld look like:
<pre>
[
  {
    Thread ID       : 1
    Parent TID      : &lt;None>
    Parent Hierarchy: &lt;None>
    State           : Blocked
    Start Date-Time : 20100615-14:10:07
    Call Stack      : [
      function: test (Line: 13, File: C:\stax\test1.xml, Machine: local://local)
      sequence: 1/2 (Line: 14, File: C:\stax\test1.xml, Machine: local://local)
      parallel: 2  (Line: 16, File: C:\stax\test1.xml, Machine: local://local)
    ]
    Condition Stack : [
      HoldThread: Source=Parallel, Priority=1000
    ]
  }
  {
    Thread ID       : 2
    Parent TID      : 1
    Parent Hierarchy: 1
    State           : Blocked
    Start Date-Time : 20100615-14:10:08
    Call Stack      : [
      sequence: 1/1 (Line: 17, File: C:\stax\test1.xml, Machine: local://local)
      function: RunProcess (Line: 36, File: C:\stax\test1.xml, Machine: local://local)
      sequence: 1/1 (Line: 41, File: C:\stax\threadsList.xml, Machine: local://local)
      paralleliterate: 2/2 WAIT_THREADS range(1,maxRange) (Line: 42, File: C:\stax\test1.xml, Machine: local://local)
    ]
    Condition Stack : [
      HoldThread: Source=ParallelIterate, Priority=1000
    ]
  }
  {
    Thread ID       : 3
    Parent TID      : 1
    Parent Hierarchy: 1
    State           : Blocked
    Start Date-Time : 20100615-14:10:08
    Call Stack      : [
      sequence: 1/1 (Line: 21, File: C:\stax\test1.xml, Machine: local://local)
      stafcmd: STAFCommand1 (Line: 22, File: C:\stax\test1.xml, Machine: local://local)
    ]
    Condition Stack : [
      HoldThread: Source=STAFCommand, Priority=1000
    ]
  }
  {
    Thread ID       : 4
    Parent TID      : 2
    Parent Hierarchy: 1.2
    State           : Running
    Start Date-Time : 20100615-14:10:08
    Call Stack      : [
      sequence: 1/1 (Line: 43, File: C:\stax\test1.xml, Machine: local://local)
      if: counter == 1 (Line: 44, File: C:\stax\test1.xml, Machine: local://local)
      script: time.sleep(30) (Line: 45, File: C:\stax\test1.xml, Machine: local://local)
    ]
    Condition Stack : []
  }
  {
    Thread ID       : 5
    Parent TID      : 2
    Parent Hierarchy: 1.2
    State           : Blocked
    Start Date-Time : 20100615-14:10:09
    Call Stack      : [
      sequence: 1/1 (Line: 43, File: C:\stax\test1.xml, Machine: local://local)
      if: counter == 1 (Line: 44, File: C:\stax\test1.xml, Machine: local://local)
      sequence: 2/2 (Line: 47, File: C:\stax\test1.xml, Machine: local://local)
      process: Run process (Line: 49, File: C:\stax\test1.xml, Machine: local://local)
    ]
    Condition Stack : [
      HoldThread: Source=Process, Priority=1000
    ]
  }
]
</pre>
<p>
<li>
<b>Goal:</b> List all of the variables in thread 8 for Job ID 15 in SHORT format.
<p><tt>&nbsp; LIST JOB 15 THREAD 8 VARS SHORT</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format,
could look like:
<pre>
Name               Value                               Type
------------------ ----------------------------------- ------------------------
STAFMapClassDefini &lt;class STAFMarshalling.STAFMapClass org.python.core.PyClass
tion               Definition at 1194318286>
STAFMarshalling    &lt;module STAFMarshalling at 10690462 org.python.core.PyModule
                   22>
STAFMarshallingCon &lt;class STAFMarshalling.STAFMarshall org.python.core.PyClass
text               ingContext at 1199397326>
STAFRC             &lt;jclass com.ibm.staf.STAFResult at  org.python.core.PyJavaCl
                   229579212>                          ass
STAXArg            None                                org.python.core.PyNone
STAXBlockStack     ['main']                            org.python.core.PyList
STAXBuiltinFunctio &lt;java function type at 2011716034>  org.python.core.PyReflec
n_type                                                 tedFunction
STAXCurrentBlock   'main'                              org.python.core.PyString
STAXCurrentFunctio 'test'                              org.python.core.PyString
n
STAXCurrentTestcas None                                org.python.core.PyNone
e
STAXCurrentXMLFile 'c:\staxtest\debug.xml'             org.python.core.PyString
STAXCurrentXMLMach 'local://local'                     org.python.core.PyString
ine
STAXEventServiceMa 'local'                             org.python.core.PyString
chine
STAXEventServiceNa 'Event'                             org.python.core.PyString
me
STAXExceptionSourc &lt;class main.STAXExceptionSource at  org.python.core.PyClass
e                  1407064526>
STAXFileCopyError  org.python.core.PyInstance@1be059c1 org.python.core.PyInstan
                                                       ce
STAXFunctionError  org.python.core.PyInstance@67a299c2 org.python.core.PyInstan
                                                       ce
STAXGlobal         &lt;class main.STAXGlobal at 149398164 org.python.core.PyClass
                   6>
STAXImportModeErro org.python.core.PyInstance@347699c1 org.python.core.PyInstan
r                                                      ce
STAXIterateList    [0, 1, 2, 3]                        org.python.core.PyList
STAXJob            org.python.core.PyJavaInstance@1a85 org.python.core.PyJavaIn
                   99cd                                stance
STAXJobHandle      org.python.core.PyJavaInstance@56b9 org.python.core.PyJavaIn
                   59ce                                stance
STAXJobID          15                                  org.python.core.PyIntege
                                                       r
STAXJobLogName     'STAX_Job_15'                       org.python.core.PyString
STAXJobName        ''                                  org.python.core.PyString
STAXJobScriptFileM 'local://local'                     org.python.core.PyString
achine
STAXJobScriptFiles org.python.core.PyArray@5d19d9ce    org.python.core.PyArray
STAXJobSourceHandl 117                                 org.python.core.PyIntege
e                                                      r
STAXJobSourceHandl 'STAX/JobMonitor/Execute'           org.python.core.PyString
eName
STAXJobSourceMachi 'local://local'                     org.python.core.PyString
ne
STAXJobStartDate   '20091217'                          org.python.core.PyString
STAXJobStartFuncti None                                org.python.core.PyNone
onArgs
STAXJobStartFuncti 'test'                              org.python.core.PyString
onName
STAXJobStartTime   '15:20:06'                          org.python.core.PyString
STAXJobUserLog     org.python.core.PyJavaInstance@5d12 org.python.core.PyJavaIn
                   d9ce                                stance
STAXJobUserLogName 'STAX_Job_15_User'                  org.python.core.PyString
STAXJobWriteLocati 'c:\build\rel\win32\staf\retail\dat org.python.core.PyString
on                 a\STAF\service\stax\job\Job15'
STAXJobXMLFile     'c:\staxtest\debug.xml'             org.python.core.PyString
STAXJobXMLMachine  'local://local'                     org.python.core.PyString
STAXLogMessage     0                                   org.python.core.PyIntege
                                                       r
STAXLogTCElapsedTi 1                                   org.python.core.PyIntege
me                                                     r
STAXLogTCNumStarts 1                                   org.python.core.PyIntege
                                                       r
STAXLogTCStartStop 0                                   org.python.core.PyIntege
                                                       r
STAXMessageLog     0                                   org.python.core.PyIntege
                                                       r
STAXNoResponseFrom org.python.core.PyInstance@255799c1 org.python.core.PyInstan
Machine                                                ce
STAXPyEvalResult   'main'                              org.python.core.PyString
STAXPythonFunction &lt;function STAXPythonFunction_CloneG org.python.core.PyFuncti
_CloneGlobals      lobals at 1733990850>               on
STAXPythonFunction &lt;function STAXPythonFunction_Functi org.python.core.PyFuncti
_FunctionExists    onExists at 1741248962>             on
STAXPythonLogLevel 'Info'                              org.python.core.PyString
STAXPythonOutput   'JobUserLog'                        org.python.core.PyString
STAXResult         [None, ['STAXUtilExportSTAFVars', ' org.python.core.PyList
                   STAXUtilQueryTest', 'STAFProcessUsi
                   ng', 'STAXUtilQueryAllTests', 'STAF
                   ', 'STAXUtilListDirectory', 'STAXUt
                   ilCheckSuccess', 'STAFProcess', 'ST
                   AXUtilLogAndMsg', 'STAXUtilCopyFile
                   s', 'STAXUtilWaitForSTAF', 'STAXUti
                   lImportSTAFVars', 'STAXUtilImportST
                   AFConfigVars'], [], [], ['STAF', 'S
                   TAXUtilListDirectory', 'STAXUtilImp
                   ortSTAFVars'], [], []]
STAXServiceMachine 'davidbender.austin.ibm.com'        org.python.core.PyString
STAXServiceMachine 'testmachine1'                      org.python.core.PyString
Nickname
STAXServiceName    'stax'                              org.python.core.PyString
STAXTestcaseStack  []                                  org.python.core.PyList
STAXThreadID       8                                   org.python.core.PyIntege
                                                       r
STAXUnique         &lt;class main.STAXUnique at 140447585 org.python.core.PyClass
                   4>
STAXXMLParseError  org.python.core.PyInstance@6ac119c2 org.python.core.PyInstan
                                                       ce
__doc__            None                                org.python.core.PyNone
__name__           'main'                              org.python.core.PyString
copy               &lt;module copy at 1256790478>         org.python.core.PyModule
index              2                                   org.python.core.PyIntege
                                                       r
org                &lt;java package org at 1418549698>    org.python.core.PyJavaPa
                                                       ckage
re                 &lt;module re at 1416862157>           org.python.core.PyModule
serverList         ['myServer.austin.ibm.com', 'C:/ins org.python.core.PyList
                   tall', 'serverA.portland.ibm.com',
                   'D:/install', 'linuxServer.austin.i
                   bm.com', '/usr/local/install']
testInfo           {'platform': 'win32', 'osarch': 'am org.python.core.PyDictio
                   d64', 'parms': {'ZIP': '78703', 'st nary
                   ate': 'TX', 'purchases': {'items':
                   ['printerABC', 'routerXYZ', 'usbMNO
                   '], 'tax': 4.2, 'total': 63.43, 'pr
                   ice': 59.23}, 'city': 'austin'}, 'l
                   anguage': ['english', 'french']}
types              &lt;jclass org.python.modules.types at org.python.core.PyJavaCl
                    424630732>                         ass
</pre>
<li>
<b>Goal:</b> List all of the variables in thread 8 for Job ID 15 in the
default format.
<p><tt>&nbsp; LIST JOB 15 THREAD 8 VARS</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format,
could look like (note that normally you would see a longer list of variables, the
example here is only a subset):
<pre>
[
  {
    Name : STAXJobID
    Value: 15
    Type : org.python.core.PyInteger
  }
  {
    Name : STAXServiceMachineNickname
    Value: 'testmachine1'
    Type : org.python.core.PyString
  }
  {
    Name : STAXServiceName
    Value: 'stax'
    Type : org.python.core.PyString
  }
  {
    Name : serverList
    Value: [
      {
        Name :  
        Value: 'myServer.austin.ibm.com'
        Type : org.python.core.PyString
      }
      {
        Name :  
        Value: 'C:/install'
        Type : org.python.core.PyString
      }
      {
        Name :  
        Value: 'serverA.portland.ibm.com'
        Type : org.python.core.PyString
      }
      {
        Name :  
        Value: 'D:/install'
        Type : org.python.core.PyString
      }
      {
        Name :  
        Value: 'linuxServer.austin.ibm.com'
        Type : org.python.core.PyString
      }
      {
        Name :  
        Value: '/usr/local/install'
        Type : org.python.core.PyString
      }
    ]
    Type : org.python.core.PyList
  }
  {
    Name : testInfo
    Value: [
      {
        Name : platform
        Value: 'win32'
        Type : org.python.core.PyString
      }
      {
        Name : osarch
        Value: 'amd64'
        Type : org.python.core.PyString
      }
      {
        Name : parms
        Value: [
          {
            Name : ZIP
            Value: '78703'
            Type : org.python.core.PyString
          }
          {
            Name : state
            Value: 'TX'
            Type : org.python.core.PyString
          }
          {
            Name : purchases
            Value: [
              {
                Name : items
                Value: [
                  {
                    Name :  
                    Value: 'printerABC'
                    Type : org.python.core.PyString
                  }
                  {
                    Name :  
                    Value: 'routerXYZ'
                    Type : org.python.core.PyString
                  }
                  {
                    Name :  
                    Value: 'usbMNO'
                    Type : org.python.core.PyString
                  }
                ]
                Type : org.python.core.PyList
              }
              {
                Name : tax
                Value: 4.2
                Type : org.python.core.PyFloat
              }
              {
                Name : total
                Value: 63.43
                Type : org.python.core.PyFloat
              }
              {
                Name : price
                Value: 59.23
                Type : org.python.core.PyFloat
              }
            ]
            Type : org.python.core.PyDictionary
          }
          {
            Name : city
            Value: 'austin'
            Type : org.python.core.PyString
          }
        ]
        Type : org.python.core.PyDictionary
      }
      {
        Name : language
        Value: [
          {
            Name :  
            Value: 'english'
            Type : org.python.core.PyString
          }
          {
            Name :  
            Value: 'french'
            Type : org.python.core.PyString
          }
        ]
        Type : org.python.core.PyList
      }
    ]
    Type : org.python.core.PyDictionary
  }
]
</pre>
<p>
<li>
<b>Goal:</b> List all of the blocks running for a job with Job ID 35.
<p><tt>&nbsp; LIST JOB 35 BLOCKS</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format, could look like:
<pre>
Block Name          State
---------------     -------
main                Running
main.machineA       Running
main.machineA.Test3 Held
main.machineB       Running
</pre>
<p>
<li>
<b>Goal:</b> List all of the testcases that have recorded testcase status for
a job with Job ID 7.
<p><tt>&nbsp; LIST JOB 7 TESTCASES</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format, could look like:
<pre>
Testcase Name      Passes Fails Elapsed Time Starts Information
------------------ ------ ----- ------------ ------ ---------------------
client2.TestB.init 5      1     01:32:05     3      Error in Step 39
server1.TestA      1      0     00:20:13     1      100% complete
TestC              0      1     &lt;Pending>    1
</pre>
<p>
<li>
<b>Goal:</b> List all of the processes running for a job with Job ID 41.
<p><tt>&nbsp; LIST JOB 41 PROCESSES</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format, could look like:
<pre>
Process Name Location Handle Command Parms
------------ -------- ------ ------- -------------------------------------------
Process0     machineB 196    java    com.ibm.staf.service.stax.TestProcess 5 6 0
Process2     machineB 213    java    ICC_ProfileRGB
Process3     machineB 216    sol
Process4     machineC 223    notepad
</pre>
<p>
<li>
<b>Goal:</b> List all of the STAF commands running for a job with Job ID 37.
<p><tt>&nbsp; LIST JOB 37 STAFCMDS</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format, could look like:
<pre>
Stafcmd Name  Location Request# Service Request
------------- -------- -------- ------- ----------------------------------------------------
STAFCommand21 server1  343      DELAY   DELAY 30000
STAFCommand23 server2  349      SERVICE LIST SERVICES
STAFCommand24 machineC 351      DELAY   DELAY 60000
STAFCommand25 machineB 355      FS      COPY FILE /tests/TestA.out TOFILE /results/TestA.out 
</pre>
<p>
<li>
<b>Goal:</b> List all sub-jobs for a job with Job ID 3.
<p><tt>&nbsp; LIST JOB 3 SUBJOBS</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format, could look like: 
<pre>
Job ID Job Name   Start Date-Time   Function    Block Name
------ ---------- ----------------- ----------- --------------------
4      Sample Job 20040919-20:40:16 MonitorTest main
5      Web Test   20040919-20:52:31 main        main.server1.WebTest
7      &lt;None>     20040919-21:15:23 InitJob     main.WinNT_Block
</pre>
<p>
<li>
<b>Goal:</b> List all breapoints for a job with Job ID 5.
<p><tt>&nbsp; LIST JOB 5 BREAKPOINTS</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format, could look like: 
<pre>
ID Function Name Line # XML File                    Machine
-- ------------- ------ --------------------------- -------
1  FunctionB     &lt;None> &lt;None>                      &lt;None>
2  &lt;None>        32     c:\staxtest\breakpoint4.xml &lt;None>
3  FunctionF     &lt;None> &lt;None>                      &lt;None>
</pre>

<b>Goal:</b> List all of the functions for a job with Job ID 1.
<p><tt>&nbsp; LIST JOB 1 FUNCTIONS</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in table format,
could look like:
<pre>
Function        File                                       Machine
--------------- ------------------------------------------ -------------
App1_Init       C:\stax\jobs\TestApp1.xml                  local://local
Base_CopyFile   C:\stax\libraries\baseFunctions.xml        local://local
Base_CreateDir  C:\stax\libraries\baseFunctions.xml        local://local
Base_DeleteDir  C:\stax\libraries\baseFunctions1.xml       local://local
Base_RenameFile C:\stax\libraries\baseFunctions.xml        local://local
Main            C:\stax\jobs\TestApp.xml                   local://local
Unix_ChangePerm C:\stax\libraries\unix\commonFunctions.xml local://local
Unix_DoIt       C:\stax\libraries\unix\commonFunctions.xml local://local
Win_DoIt        C:\stax\libraries\win\commonFunctions.xml  local://local
</pre>
</ul>

<h2>
<b><a name="Header_Log" href="#ToC_Log">LOG</a></b></h2>

LOG allows you to log a message in the STAX Job User Log for a job that is
currently running.  It also allows you to optionally send a message to the
STAX Monitor.  It performs basically the same action as a &lt;log> element
(or &lt;log message="1"> element) contained in a job's XML file.
<p>
This request is useful if you want a process defined by a &lt;process>
element in a job to log one or more messages in the STAX Job User Log
and, optionally, to send the message(s) to the STAX Monitor to be displayed
in the "Message" panel when monitoring the job.
This can be done by passing the value of the STAXJobID Python variable to the
process (e.g. via the &lt;parms> element or &lt;env> element) so it can be
used for the value of the JOB option and then submitting a LOG request from
within the process.
<p>
Note that this request was added in STAX V3.1.4.

<h4>Syntax</h4>

<tt>LOG JOB &lt;Job ID> MESSAGE &lt;Message> [LEVEL &lt;Level>] [SEND]</tt>
<p>JOB specifies the ID of the job.
<p>MESSAGE specifies the message text to be logged in the STAX Job User Log
and, optionally, sent to the STAX Monitor.
<p>LEVEL specifies the  is the logging level of the message to be logged.
It must be one of the STAF logging levels (e.g. Fatal, Error, Warning,
Info, Trace, Trace2, Trace3, Debug, Debug2, Debug3, Start, Stop, Pass, Fail,
Status, User1, User2, User3, User4, User5, User6, User7, or User8).
It is not case-sensitive.  It is optional and defaults to Info.
<p>SEND specifies to also send the message to the STAX Monitor.
It is optional.
<p>
Note that a message logged in the STAX Job User Log is persistent,
unlike a message sent to the STAX Monitor which is only displayed if the
job is currently being monitored by the STAX Monitor running on any machine(s).

<h4>Security</h4>

This request requires at least trust level 3.

<h4>Results</h4>

Upon successful return, the result buffer does not contain anything.

<h4>Examples</h4>

<ul>
<li><b>Goal:</b> Log informational message "Running TestA on
machine client1.company.com" for job 1 in the job's user log.
<p><tt>&nbsp; LOG JOB 1 MESSAGE "Running TestA on machine client1.company.com"</tt>
<p>
<li><b>Goal:</b> Log error message "Error in Step 3 of TestA running on machine server2"
for job 5 in the job's user log and send the message to the STAX Monitor.
<p><tt>&nbsp; LOG SEND JOB 3 LEVEL Error MESSAGE "Error in Step 5 of TestA
running on machine server2"</tt>
<p>
<li><b>Goal:</b> Log start message "Begin TestB on machine client1" for job 12
in the job's user log.
<p><tt>&nbsp; LOG JOB 12 LEVEL Start MESSAGE "Begin TestB on machine client1"</tt>
</ul>

<h2>
<b><a name="Header_Query" href="#ToC_Query">QUERY</a></b></h2>

QUERY allows you to query a job, an extension jar file, or all extension jar files.
as well as a thread, a thread's Pyton variable, a process, a STAF command, a block,
a testcase, or a function in a job.

<h4>
Syntax</h4>
<pre>
QUERY     EXTENSIONJARFILE &lt;Jar File Name> | EXTENSIONJARFILES |
          JOB &lt;Job ID> [THREAD &lt;Thread ID> [ VAR &lt;VarName> [SHORT] ] |
                        PROCESS &lt;Location:Handle> | STAFCMD &lt;Request#> |
                        BLOCK &lt;Block Name> | TESTCASE &lt;Test Name>
                        FUNCTION &lt;Function Name>
                        [| &lt;Query Type> &lt;Type Value>] 
</pre>
<p><tt>JOB</tt> specifies
the ID of a job to query that is currently running. Basic information about
the job is returned if <tt>BLOCK,
THREAD, TESTCASE, PROCESS, STAFCMD, or FUNCTION</tt> are not specified.
<p><tt>BLOCK</tt> specifies
the name of a currently running block in the job to query. The request
returns more detailed information about the specified block.
<p><tt>THREAD</tt>
specifies a currently running Thread ID in the job to query. The request
returns more detailed information about the specified thread.
<p><tt>VAR</tt>
specifies a Python variable in the specified thread for the specified job to query.
The request returns information (value and type) about the specified variable.
The default format expands the variable value (recursively); specifying the
<tt>SHORT</tt> option shows the variable value in the original Python format.
<p><tt>TESTCASE</tt>
specifies a testcase name in the job to query. The request returns more
detailed information about the specified testcase.
<p><tt>PROCESS</tt>
specifies a location and handle number (separated by a colon) that uniquely identifies a currently
running process in the job to query. The request returns more detailed
information about the specified process.
<p><tt>STAFCMD</tt>
specifies a request number that uniquely identifies a currently running
STAF command in the job to query. The request returns more detailed information
about the specified STAF command.
<p><tt>FUNCTION</tt>
specifies a function name in the job to query.  The request returns more
dedtailed information about the specified function.
<p><tt>&lt;Query Type></tt>
specifies a value for the extension type that uniquely identifies a currently
running extension of the specified type in the job to query.
<p><tt>EXTENSIONJARFILE</tt> specifies
the name of an extension jar file to query.  The request returns more detailed
information about the specified extension jar file, such as what elements
it provides and what version of the STAX service is required.
Note that the name of the extension jar file is case sensitive and must be specified
exactly as it appears in the output from LIST EXTENSIONS or LIST EXTENSIONJARFILES.
<p><tt>EXTENSIONJARFILES</tt> specifies
to query all of the extension jar files registered for the STAX service.
The request returns more detailed information about all of the extension jar files,
such as what elements each provides and what version of the STAX service is required.

<h4>
Security</h4>
This request requires at least trust level 2.
<h4>
Results</h4>

Upon successful return, the result buffer will contain information about the
request based on the options specified: 
<ul>
<li><b><tt>QUERY JOB &lt;Job ID></tt></b>
<p>
The result buffer for a
<tt>QUERY JOB &lt;Job ID></tt> request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/QueryJob></tt>
which represents information about the specified STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/QueryJob</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a STAX job that is currently running.</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>jobID
<td>job ID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>jobName
<td>Job Name
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>xmlFileName
<td>XML File Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>fileMachine
<td>File Machine
<td><tt>&lt;String></tt>
<td>
<tr>
<td>function
<td>Function
<td><tt>&lt;String></tt>
<td>
<tr>
<td>arguments
<td>Arguments
<td><tt>&lt;String> | &lt;None></tt>
<td>Private data will be masked.
<tr>
<td>scriptList
<td>Scripts
<td><tt>&lt;List> of &lt;String></tt>
<td>Private data will be masked.
<tr>
<td>scriptFileList
<td>Script Files
<td><tt>&lt;List> of &lt;String></tt>
<td>
<tr>
<td>scriptMachine
<td>Script Machine
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>sourceMachine
<td>Source Machine
<td><tt>&lt;String></tt>
<td>
<tr>
<td>notifyOnEnd
<td>Notify OnEnd
<td><tt>&lt;String></tt>
<td><tt>'No' | 'By Handle' | 'By Name'</tt>
<tr>
<td>clearLogs
<td>Clear Logs
<td><tt>&lt;String></tt>
<td><tt>'Enabled' | 'Disabled'</tt>
<tr>
<td>logTCElapsedTime
<td>Log TC Elapsed Time
<td><tt>&lt;String></tt>
<td><tt>'Enabled' | 'Disabled'</tt>
<tr>
<td>logTCNumStarts
<td>Log TC Num Starts
<td><tt>&lt;String></tt>
<td><tt>'Enabled' | 'Disabled'</tt>
<tr>
<td>logTCStartStop
<td>Log TC Start/Stop
<td><tt>&lt;String></tt>
<td><tt>'Enabled' | 'Disabled'</tt>
<tr>
<td>pythonOutput
<td>Python Output
<td><tt>&lt;String></font>
<td><tt>'JobUserLog' | 'Message' | 'JobUserLogAndMsg' | 'JVMLog'</tt>
<tr>
<td>pythonLogLevel
<td>Python Log Level
<td><tt>&lt;String></font>
<td>
<tr>
<td>numThreadsRunning
<td>Threads Running
<td><tt>&lt;String></tt>
<td>
<tr>
<td>numBlocksRunning
<td>Blocks Running
<td><tt>&lt;String></tt>
<td>
<tr>
<td>numBlocksHeld
<td>Blocks Held
<td><tt>&lt;String></tt>
<td>
<tr>
<td>numBlocksUnknown
<td>Blocks Unknown
<td><tt>&lt;String></tt>
<td>
<tr>
<td>state
<td>State
<td><tt>&lt;String></tt>
<td><tt>'Running' | 'Pending'</tt>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Source Machine" value will be set to the endpoint of the machine
that submitted the EXECUTE request 
<li>The "Blocks Running" value will be set to the number of blocks that are 
currently in a 'Running' state in the job.
<li>The "Blocks Held" value will be set to the number of blocks that are 
currently in a 'Held' state in the job.
<li>The "Blocks Unknown" value will be set to the number of blocks that are 
currently in an 'Unknown' state in the job.
<li>The "State" value will be 'Pending' if the STAX EXECUTE request is in the
    process of submitting the job, or 'Running' if the job was submitted
    successfully and is running.
</ol>
</tr>
</tfoot>
</table>

</table>
<p>
<li><b><tt>QUERY JOB &lt;Job ID> BLOCK &lt;Block Name></tt></b>
<p>
The result buffer for a
<tt>QUERY JOB &lt;Job ID> BLOCK &lt;Block Name></tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/QueryBlock></tt>
which represents a block currently running or held in the specified STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/QueryBlock</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a block currently running or held
in the specified job.</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>blockName
<td>Block Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>state
<td>State
<td><tt>&lt;String></tt>
<td><tt>'Running' | 'Held' | 'Unknown'</tt>
<tr>
<td>threadID
<td>Thread ID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
</tbody>
</table>
<p>
<li><a name="QueryThread"><b><tt>QUERY JOB &lt;Job ID> THREAD &lt;Thread ID></tt></b></a>
<p>
The result buffer for a
<tt>QUERY JOB &lt;Job ID> THREAD &lt;Thread ID></tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/QueryThread></tt>
which represents a thread currently running in the specified STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/QueryThread</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a thread currently running in the
specified job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>threadID
<td>Thread ID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>parentTID
<td>Parent TID
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>parentHierarchy
<td>Parent Hierarchy
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>callStack
<td>Call Stack
<td><tt>&lt;List> of &lt;String></tt>
<td>
<tr>
<td>conditionStack
<td>Condition Stack
<td><tt>&lt;List> of &lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol>
<li>The main thread (the one with "Thread ID" set to '1') will have it's "Parent TID"
and "Parent Hierarchy" values set to <tt>&lt;None></tt>.
<p>
<li>"Parent Hierarchy" is the parent thread hierarchy in a parent.child format.
<p>
<li>The "Call Stack" can be useful for tracing the progress of a job and for debugging.
The format for each string in the call stack is:
<tt>&lt;Element Name>: &lt;Action Info> (Line: &lt;Line#>, Machine: &lt;Machine>, File: &lt;File>) </tt>.
The content of the action information provided for each element is as follows:
<pre>
  block: &lt;Block Name>
  break:
  breakpoint:
  call: &lt;Function Name>
  catch: &lt;Exception Type>
  continue:
  script: &lt;Value>
  finally:
  function: &lt;Function Name>
  hold:
  if: &lt;If Expression>
  iterate: &lt;Current Iteration Index>/&lt;List Size> [&lt;Var Value>] &lt;List (Not evaluated)>
  log: &lt;Message Value>
  loop: #&lt;Current Index> from &lt;Value> to &lt;Value> [by &lt;Value>] [while &lt;Value>] [until &lt;Value>]
  message: &lt;Message Value>
  nop:
  process: &lt;Process Name>
  parallel: &lt;Number of Tasks>
  parallelIterate: &lt;Number Threads Submitted>/&lt;List Size> &lt;State> &lt;List (Not evaluated)>
  raise: &lt;Signal Name>
  release:
  sequence: &lt;Index of Current Task>/&lt;Number of Tasks>
  signalhandler: &lt;Signal Name>
  stafcmd: &lt;STAF Command Name>
  terminate:
  testcase: &lt;Testcase Name>
  testcaseStatus: &lt;Status Result>
  try:
</pre>
<p>
If the action information provided for an If, Iterate, Log, Loop, Message, ParallelIterate,
Process, Script, or STAFCommand element has a length greater than 40 characters,
only the first 40 characters are provided and "..." is appended to
the action information.
<p>
Note that if a finally element is specified within a try element, the Finally
appears before the Try and Catch (if any) in the call stack (even though the
finally task will actually be executed after the Try and Catch).
Also, note that the finally element is run in a separate thread using the
same Python Interpreter so that it's using the same Python variables.
<p>
<li>The "Condition Stack" can also be useful for debugging a STAX job.
The format for each string in the call stack is:
<tt>&lt;Condition Name>: &lt;Condition Info></tt>.
The content of the condition information provided for each condition is as follows:
<pre>
  &lt;Condition Name>: Source=&lt;Source>, Priority=&lt;Priority>
</pre>
</ol>
</tr>
</tfoot>
</table>
<p>
<li><a name="QueryThread"><b><tt>QUERY JOB &lt;Job ID> THREAD &lt;Thread ID> VAR &lt;VarName></tt></b></a>
<p>
The result buffer for a
<tt>QUERY JOB &lt;Job ID> THREAD &lt;Thread ID> VAR &lt;VarName></tt>
 request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/ThreadVariable></tt>
which represents a variable defined in the specified thread
running in the specified STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ThreadVariable</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class rrepresents a variable defined
in the specified thread running in the specified STAX job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>name
<td>Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>value
<td>Value
<td><tt>&lt;String> | &lt;List> of &lt;Map:STAF/Service/STAX/ThreadVariable></tt>
<td>
<tr>
<td>type
<td>Type
<td><tt>&lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The variable type is the Python variable type (i.e. org.python.core.PyList,
org.python.core.PyDictionary, org.python.core.PyTuple, org.python.core.PyString,
org.python.core.PyInteger, org.python.core.PyLong, etc.).
<li>If the <tt>SHORT</tt> option is not specified, and the <tt>Value</tt> is
a PyList, PyTuple, or PyDictionary, then the Value will be a List of
map class STAF/Service/STAX/ThreadVariable representing the items in the List,
Tuple, or Dictionary.  This will occur recursively for each value in the output.
</ol>
</tr>
</tfoot>
</table>

<p>
<p>
<li><b><tt>QUERY JOB &lt;Job ID> TESTCASE &lt;Test Name></tt></b>
<p>
The result buffer for a
<tt>QUERY JOB &lt;Job ID> TESTCASE &lt;Test Name></tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/QueryTestcase></tt>
which represents a testcase in a STAX job.
The map is defined as follows:
<p>
<a name="STAXQueryTestcase" href="#STAXQueryTestcase"></a>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/QueryTestcase</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a testcase in a STAX job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>testcaseName
<td>Testcase Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>numPasses
<td>Passes
<td><tt>&lt;String></tt>
<td>
<tr>
<td>numFails
<td>Fails
<td><tt>&lt;String></tt>
<td>
<tr>
<td>startedTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>elapsedTime
<td>Elapsed Time
<td><tt>&lt;String></tt>
<td><tt>
'&lt;Pending>' | &lt;HH[H]:MM:SS></tt>
<tr>
<td>numStarts
<td>Starts
<td><tt>&lt;String></tt>
<td>
<tr>
<td>lastStatusTimestamp
<td>Status Date-Time
<td><tt>&lt;String> | &lt;None></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>lastStatus
<td>Last Status
<td><tt>&lt;String> | &lt;None></tt>
<td><tt>'pass' | 'fail' | 'info'</tt>
<tr>
<td>information
<td>Information
<td><tt>&lt;String></tt>
<td>
<tr>
<td>testcaseStack
<td>Testcase Stack
<td><tt>&lt;List> of &lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The value for "Testcase Name" is the testcase name in a
ParentTestcase.ChildTestcase format.
<li>The value for "Passes" is the total number of passes for a testcase
<li>The value for "Fails" is the total number of fails for a testcase
<li>The value for "Start Date-Time" is the timestamp when the testcase started
<li>The format for "Elapsed Time" is
<tt>HH:MM:SS</tt> if the
elapsed time is under 100 hours or
<tt>HHH:MM:SS</tt> if
100 hours or more.
Or, if the testcase has not yet been stopped in the job via
a &lt;/testcase> or STOP request, so that there is no elapsed time, it's value is
<tt>'&lt;Pending>'</tt>.
<li>The value for "Starts" is the number of times the testcase has been started
in the job via a &lt;testcase> element and/or a START request.
<li>The value for "Status Date-Time" is the timestamp when the last status
was recorded.
<li>The value for "Information" is the last status information (aka message)
recorded for the testcase, or blank if no status information has been
provided.
<li>The value for "Testcase Stack" is an ordered list containing
the testcase hierarchy for the testcase.  There will be 1 or more entries in the
"Testcase Stack" list, depending on the number of testcases in the hierarchy.
So, if a STAX job contained:
<pre>
  &lt;testcase name="'Scenario1'" mode="'strict'">
    &lt;testcase name="'client.company.com'" mode="'strict'">
      &lt;testcase name="'TestA'" mode="'strict'">
         ...
      &lt;/testcase>
    &lt;/testcase>
  &lt;/testcase>
</pre>
The "Testcase Stack" for testcase "Scenario1" would be a list containing "Scenario1".
The "Testcase Stack" for testcase "Scenario1.client.company.com" would be a list
containing "Scenario1" and "Scenario1.client.company.com", in that order.
The "Testcase Stack" for testcase "Scenario1.client.company.com.TestA"
would be a list containing "Scenario1", "Scenario1.client.company.com", and
"Scenario1.client.company.com.TestA", in that order.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><b><tt>QUERY JOB &lt;Job ID> PROCESS &lt;Location:Handle></tt></b>
<p>
The result buffer for a
<tt>QUERY JOB &lt;Job ID> PROCESS &lt;Location:Handle></tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/QueryProcess></tt>
which represents a process that is currently running in a STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/QueryProcess</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a process that is currently
running in a STAX job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>processName
<td>Process Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>location
<td>Location
<td><tt>&lt;String></tt>
<td>
<tr>
<td>handle
<td>Handle
<td><tt>&lt;String></tt>
<td>
<tr>
<td>blockName
<td>Block Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>threadID
<td>Thread ID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></font>
<tr>
<td>command
<td>Command
<td><tt>&lt;String></tt>
<td>Private data will be masked.
<tr>
<td>commandMode
<td>Command Mode
<td><tt>&lt;String></tt>
<td><tt>'default' | 'shell'</tt>
<tr>
<td>commandShell
<td>Command Shell
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>parms
<td>Parms
<td><tt>&lt;String></tt>
<td>Private data will be masked.
<tr>
<td>title
<td>Title
<td><tt>&lt;String></tt>
<td>
<tr>
<td>workdir
<td>Workdir
<td><tt>&lt;String></tt>
<td>
<tr>
<td>workload
<td>Workload
<td><tt>&lt;String></tt>
<td>
<tr>
<td>varList
<td>Vars
<td><tt>&lt;List> of &lt;String></tt>
<td>
<tr>
<td>envList
<td>Envs
<td><tt>&lt;List> of &lt;String></tt>
<td>
<tr>
<td>useProcessVars
<td>Use Process Vars
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>userName
<td>User Name
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>password
<td>Password
<td><tt>&lt;String> | &lt;None></tt>
<td>This field will be masked.
<tr>
<td>disabledAuth
<td>Disabled Auth
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>stdin
<td>Stdin
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>stoutMode
<td>Stdout Mode
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>stdoutFile
<td>Stdout File
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>stderrMode
<td>Stderr Mode
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>stderrFile
<td>Stderr File
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>returnStdout
<td>Return Stdout
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>returnStderr
<td>Return Stderr
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>returnFileList
<td>Returned Files
<td><tt>&lt;List> of &lt;String></tt>
<td>
<tr>
<td>stopUsing
<td>Stop Using
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>console
<td>Console
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>focus
<td>Focus
<td><tt>&lt;String> | &lt;None></tt>
<td><tt>'Background' | 'Foreground' | 'Minimized' | &lt;None></tt>
<tr>
<td>staticHandleName
<td>Static Handle Name
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>other
<td>Other
<td><tt>&lt;String> | &lt;None></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Use Process Vars", "Return Stdout", and "Return Stderr" values will be set to
<tt>'true'</tt> if specified.
<li>The "Vars" value will be set to a list of Name=Value strings, or an empty list if
no &lt;var> or &lt;vars> elements are specified.
<li>The "Envs" value will be set to a list of Name=Value strings, or an empty list if
no &lt;env> or &lt;envs> elements are specified.
<li>The "Password" value will be set to <tt>&lt;None></tt> if no password is
specified or <tt>*******</tt> if a password is specified.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><b><tt>QUERY JOB &lt;Job ID> STAFCMD &lt;Request#></tt></b>
<p>
The result buffer for a
<tt>QUERY JOB &lt;Job ID> STAFCMD &lt;Request#></tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/QueryStafcmd></tt>
which represents a STAF command that is currently running in a STAX job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/QueryStafcmd</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a STAF command
currently running in the specified job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>stafcmdName
<td>Stafcmd Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>location
<td>Location
<td><tt>&lt;String></tt>
<td>
<tr>
<td>requestNum
<td>Request#
<td><tt>&lt;String></tt>
<td>
<tr>
<td>service
<td>Service
<td><tt>&lt;String></tt>
<td>
<tr>
<td>request
<td>Request
<td><tt>&lt;String></tt>
<td>Private data will be masked.
<tr>
<td>blockName
<td>Block Name
<td><tt>&lt;String></tt>
<td>
<tr>
<td>threadID
<td>Thread ID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>startTimestamp
<td>Start Date-Time
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></font>
</tbody>
</table>
<p>
<li><b><tt>QUERY JOB &lt;Job ID> FUNCTION &lt;Function Name></tt></b>
<p>
The result buffer for a
<tt>QUERY JOB &lt;Job ID> FUNCTION &lt;Function Name></tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/QueryFunction></tt>
which represents a function that is currently available to be called
in a STAX job.  The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/QueryFunction</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a function
in the specified job.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=40%>Type
<th width=20%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>function
<td>Function
<td><tt>&lt;String></tt>
<td>
<tr>
<td>file
<td>File
<td><tt>&lt;String></tt>
<td>
<tr>
<td>machine
<td>Machine
<td><tt>&lt;String></tt>
<td>
<tr>
<td>scope
<td>Scope
<td><tt>&lt;String></tt>
<td><tt>'local' | 'global'</tt>
<tr>
<td>requires
<td>Requires
<td><tt>&lt;List> of &lt;String></tt>
<td>
<tr>
<td>imports
<td>Imports
<td><tt>&lt;List> of &lt;Map:STAF/Service/STAX/QueryFunctionImport></tt>
<td>
</tbody>
</table>
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/QueryFunctionImport</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a function-import
element specified for a function.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>file
<td>File
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>directory
<td>Directory
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>machine
<td>Machine
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>functions
<td>Functions
<td><tt>List of &lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>If the <b>file</b> attribute was specified in the <b>function-import</b> element,
    the "File" value will contain the un-resolved, un-normalized file name specified and
    the "Directory" value will be &lt;None>.
<li>If the <b>directory</b> attribute was specified in the <b>function-import</b> element,
    the "Directory" value will contain the un-resolved, un-normalixed file name specified and
    the "File" value will be &lt;None>.
<li>If the <b>machine</b> attribute was not specified in the <b>function-import</b> element,
    the "Machine" value will be &lt;None>
</ol>
</tr>
</tfoot>
</table>

<p>
<li><b><a name="Query_ExtJarFile"><tt>QUERY EXTENSIONJARFILE &lt;Jar File Name></tt></a></b>
<p>
The result buffer for a
<tt>QUERY EXTENSIONJARFILE &lt;Jar File Name></tt>
request will contain a marshalled
<tt>&lt;Map:STAF/Service/STAX/ExtensionInfo></tt>
which represents information about STAX service and/or monitor extensions provided in
an extension jar file.
The maps are defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ExtensionInfo</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents information about STAX service
and/or monitor extensions provided in an extension jar file.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>extensionJarFile
<td>Extension Jar File
<td><tt>&lt;String></tt>
<td>
<tr>
<td>version
<td>Version
<td><tt>&lt;String></tt>
<td>
<tr>
<td>description
<td>Description
<td><tt>&lt;String></tt>
<td>
<tr>
<td>parameterList
<td>Parameters
<td><tt>&lt;List> of &lt;String></tt>
<td>
<tr>
<td>serviceExtensions
<td>Service Extensions
<td><tt>
&lt;List> of &lt;Map:STAF/Service/STAX/ServiceExtension></tt>
<td>
<tr>
<td>monitorExtensions
<td>Monitor Extensions
<td><tt>
&lt;List> of &lt;Map:STAF/Service/STAX/MonitorExtension></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Version" value is set to the version specified for the extension jar file
in its manifext via the "Extension-Version" attribute.  If not provided it is set
to <tt>&lt;Not Provided></tt>.
for the STAX service, enclosed in &lt; and >.
<li> The "Description" value is set to the description specified for the
extension jar file in its manifest via the "Extension-Description" attribute.
If not provided, it is set to
<tt>&lt;Not Provided></tt>.
<li>Each parameter in the "Parameters" list is set to a Name=Value pair 
for each &lt;parameter> element specified for this extension via an
extension xml file.
<li>If this extension jar file does not contain any service extensions, the
"Service Extensions" value will be an empty list.
<li>If this extension jar file does not contain any monitor extensions, the
"Monitor Extensiosns" value will be an empty list.
</ol>
</tr>
</tfoot>
</table>
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/ServiceExtension</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents information a STAX
service extension.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>requiredServiceVersion
<td>Service Version Prereq
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>includedElementList
<td>Included Elements
<td><tt>&lt;List> of &lt;String></tt>
<td>
<tr>
<td>excludedElementList
<td>Excluded Elements
<td><tt>&lt;List> of &lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Service Version Prereq" value is set to the minimum version of the
STAX service required for this extension.
It is obtained from the "Required-Service-Version" attribute in the manifest of
the extension jar file.  It not provided, it is set to &lt;None>.
<li>The "Included Elements" value is set to a list of the elements provided
for this extension that are supported.
<li>The "Excluded Elements" value is set to a list of elements in this
extension jar file that were specified to be excluded.
</ol>
</tr>
</tfoot>
</table>
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/MonitorExtension</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents information a STAX
monitor extension.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>requiredMonitorVersion
<td>Monitor Version Prereq
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>extensionNameList
<td>Extension Names
<td><tt>&lt;List> of &lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "Monitor Version Prereq" value is set to the minimum version of the
STAX Monitor required for this extension.
It is obtained from the "Required-Monitor-Version" attribute in the manifest of
the extension jar file.  It not provided, it is set to &lt;None>.
<li>The "Extension Names" value is set to a list of the names of the monitor
extensions provided in this extension jar file.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><b><tt>QUERY EXTENSIONJARFILES</tt></b>
<p>
The result buffer for a
<tt>QUERY EXTENSIONJARFILES</tt>
request will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/ExtensionInfo></tt>
which represents all the STAX service and/or monitor extensions provided in the extension jar files.
See section <a href="#Query_ExtJarFile">"QUERY EXTENSIONJARFILE &lt;Jar File Name>"</a>
for a description of this map.
</ul>

<h4>
Examples</h4>
<ul>
<li>
<b>Goal:</b> Query a job with ID 5.
<p><tt>&nbsp; QUERY JOB 5</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in verbose format, could look like
<pre>
{
  Job ID             : 5
  Job Name           : Sample Job
  Start Date-Time    : 20101120-14:41:40
  XML File Name      : C:/stax/xml/sample1.xml
  File Machine       : machineA.austin.ibm.com
  Function           : MonitorTest
  Arguments          : { 'TestList': ['Test1', 'Test2'] }
  Scripts            : [
    server1 = 'db2Server.austin.ibm.com'
    server2 = 'webServer.austin.ibm.com'
  ]
  Script Files       : [
    'c:/stax/python/init.py'
  ]
  Script Machine     : machineA.austin.ibm.com
  Source Machine     : ssl://machineA.austin.ibm.com@6550
  Notify OnEnd       : No
  Source Machine     : machineB.austin.ibm.com
  Clear Logs         : Disabled
  Log TC Elapsed Time: Enabled
  Log TC Num Starts  : Enabled
  Log TC Start/Stop  : Disabled
  Python Output      : JobUserLog
  Python Log Level   : Info
  Threads Running    : 11
  Blocks Running     : 3
  Blocks Held        : 0
  Blocks Unknown     : 0
  State              : Running
}
</pre>
<li>
<b>Goal:</b> Query a job with ID 5 displaying more detailed information about
a block named main.Ogre.OgreA.
<p><tt>&nbsp; QUERY JOB 5 BLOCK
main.machineA.Test1</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in verbose format, could look like
<pre>
Block Name     : main.machineA.Test1
State          : Running
Thread ID      : 2
Start Date-Time: 20101120-14:41:48    
</pre>
<li>
<b>Goal:</b> Query a job with ID 8 displaying more detailed information about
a thread whose thread id is 7.
<p><tt>&nbsp; QUERY JOB 8 THREAD 7</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in verbose format, could look like
<pre>
{
  Thread ID       : 7
  Parent TID      : 4
  Parent Hierarchy: 1.4
  Start Date-Time : 20101002-14:07:57
  Call Stack      : [
    function: DoAll (Line: 12557, File: c:\tests\Test1.xml, Machine: client1)
    testcase: TestSTAF (Line: 12558, File: c:\test\Test1.xml, Machine: client1)
    sequence: 3/3 (Line: 12559, File: c:\tests\Test1.xml, Machine: client1)
    finally:  (Line: 12580, File: c:\tests\Test1.xml, Machine:client1)
    try:  (Line: 12568, File: c:\tests\Test1.xml, Machine: client1)
    paralleliterate: 1/1 WAIT_THREADS TestMachines (Line: 12569, File: c:\tests\Test
1.xml, Machine: client1)
  ]
  Condition Stack : [
    HoldThread: Source=ParallelIterate, Priority=1000
  ]
}
</pre>
<li>
<b>Goal:</b> Query a job with ID 16 displaying information (in SHORT format)
about the variable named testInfo for a thread whose thread id is 2.
<p><tt>&nbsp; QUERY JOB 16 THREAD 2 VAR testInfo SHORT</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in verbose format,
could look like
<pre>
Name     Value                                     Type
-------- ----------------------------------------- ----------------------------
testInfo {'platform': 'win32', 'osarch': 'amd64',  org.python.core.PyDictionary
         'parms': {'ZIP': '78703', 'state': 'TX',
         'city': 'austin', 'purchases': {'items':
         ['printerABC', 'routerXYZ', 'usbMNO'], 't
         ax': 4.2, 'price': 59.23, 'total': 63.43}
         }, 'language': ['english', 'french']}
</pre>
<li>
<b>Goal:</b> Query a job with ID 16 displaying information (in the default format)
about the variable named testInfo for a thread whose thread id is 2.
<p><tt>&nbsp; QUERY JOB 16 THREAD 2 VAR testInfo</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in verbose format,
could look like
<pre>
[
  {
    Name : testInfo
    Value: [
      {
        Name : platform
        Value: 'win32'
        Type : org.python.core.PyString
      }
      {
        Name : osarch
        Value: 'amd64'
        Type : org.python.core.PyString
      }
      {
        Name : parms
        Value: [
          {
            Name : ZIP
            Value: '78703'
            Type : org.python.core.PyString
          }
          {
            Name : state
            Value: 'TX'
            Type : org.python.core.PyString
          }
          {
            Name : city
            Value: 'austin'
            Type : org.python.core.PyString
          }
          {
            Name : purchases
            Value: [
              {
                Name : items
                Value: [
                  {
                    Name :
                    Value: 'printerABC'
                    Type : org.python.core.PyString
                  }
                  {
                    Name :
                    Value: 'routerXYZ'
                    Type : org.python.core.PyString
                  }
                  {
                    Name :
                    Value: 'usbMNO'
                    Type : org.python.core.PyString
                  }
                ]
                Type : org.python.core.PyList
              }
              {
                Name : tax
                Value: 4.2
                Type : org.python.core.PyFloat
              }
              {
                Name : price
                Value: 59.23
                Type : org.python.core.PyFloat
              }
              {
                Name : total
                Value: 63.43
                Type : org.python.core.PyFloat
              }
            ]
            Type : org.python.core.PyDictionary
          }
        ]
        Type : org.python.core.PyDictionary
      }
      {
        Name : language
        Value: [
          {
            Name :
            Value: 'english'
            Type : org.python.core.PyString
          }
          {
            Name :
            Value: 'french'
            Type : org.python.core.PyString
          }
        ]
        Type : org.python.core.PyList
      }
    ]
    Type : org.python.core.PyDictionary
  }
]
</pre>
<li>
<b>Goal:</b> Query a job with ID 5 displaying more detailed information about
a testcase named machineA.Test1.
<p><tt>&nbsp; QUERY JOB 5 TESTCASE machineA.Test1</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in verbose format, could look like:
<pre>
{
  Testcase Name   : machineA.Test1
  Passes          : 4
  Fails           : 1
  Start Date-Time : 20080827-18:25:51
  Elapsed Time    : 00:15:20
  Starts          : 1
  Status Date-Time: 20080827-18:49:54
  Last Status     : fail
  Information     :
  Testcase Stack  : [
    machineA
    machineA.Test1
  ]
}
</pre>
<li>
<b>Goal:</b> Query a job with ID 4 displaying more detailed information about
a process running at location machine1 with handle 91.
<p><tt>&nbsp; QUERY JOB 4 PROCESS
machine1.austin.ibm.com:91</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in verbose format, could look like:
<pre>
{
  Process Name      : TestProcess
  Location          : machine1.austin.ibm.com
  Handle            : 91
  Block Name        : main.machine1
  Thread ID         : 2
  Start Date-Time   : 20040919-21:32:57
  Command'          : java
  Command Mode      : default
  Command Shell     : &lt;None>
  Parms             : com.ibm.staf.service.stax.TestProcess 5 6 0
  Title             : Test Process Title
  Workdir           : &lt;None>
  Workload          : &lt;None>
  Vars              : [
    STAFDemo/ResourcePoolMachine=machineA
    STAF/Service/Log/Mask=Error
  ]
  Envs              : [
    CLASSPATH=C:\STAF\services\stax\STAXMon.jar;{STAF/Env/ClassPath}
  ]
  Use Process Vars  : &lt;None>
  User Name         : &lt;None>
  Password          : &lt;None>
  Disabled Auth     : &lt;None>
  Stdin             : &lt;None>
  Stdout Mode       : replace
  Stdout File       : C:\temp\aProcess.out
  Stderr Mode       : append
  Stderr File       : C:\temp\aProcess.err
  Return Stdout     : true
  Return Stderr     : true
  Returned Files    : [],
  Stop Using        : &lt;None
  Console           : same
  Static Handle Name: &lt;None>
  Other             : &lt;None>
}
</pre>
<li>
<b>Goal:</b> Query a job with ID 8 displaying more detailed information about
a STAF command with request number 2019.
<p>
<tt>&nbsp; QUERY JOB 8 STAFCMD 2019</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in the default format, could look like:
<pre>
Stafcmd Name   : STAFCommand123
Location       : local
Request#       : 2019
Service        : delay
Request        : delay 30000
Block Name     : main.Block A
Thread ID      : 3
Start Date-Time: 20040922-11:29:56
</pre>
<li>
<b>Goal:</b> Query a job with ID 1 displaying more detailed information about
a function named B3.
<p>
<tt>&nbsp; QUERY JOB 1 FUNCTION Main</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in the default format,
could look like:
<pre>
{
  Function: Main
  File    : C:\stax\jobs\TestApp.xml
  Machine : local://local
  Scope   : global
  Requires: [
    TestApp_Init
    TestApp_Cleanup
  ]
  Imports : [
    {
      File     : ../commonfunctions/baseFunctions.xml
      Directory: &lt;None>
      Machine  : local://local
      Functions: [
        Base_CopyFile
        Base_CreateDirectory
        Base_DeleteEntry
      ]
    }
    {
      File     : &lt;None>
      Directory: ../libraries
      Machine  : local://local
      Functions: []
    }
  ]
}
</pre>
<li>
<b>Goal:</b> Query an extension jar file with name C:\STAF\services\stax\ExtDelay.jar displaying
more detailed information about the Delay extension.
<p><tt>&nbsp; QUERY EXTENSIONJARFILE C:/STAF/services/stax/ExtDelay.jar</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in verbose format, could look like:
<pre>
{
  Extension Jar File: C:\STAF\services\stax\ExtDelay.jar
  Version           : 1.0.0
  Description       : Delay STAX Extensions
  Parameters        : [
    delay=5
  ]
  Service Extensions: {
    Service Version Prereq: 1.5.0
    Included Elements     : [
      ext-delay
      ext-sleep
      ext-wait
    ]
    Excluded Elements     : []
  }
  Monitor Extensions: {
    Monitor Version Prereq: 1.5.0
    Extension Names       : [
      ext-delay
    ]
  }
}
</pre>
<li>
<b>Goal:</b> Query all extension jar files displaying more detailed information about the
STAX extensions.
<p>
<tt>&nbsp; QUERY EXTENSIONJARFILES</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result, in verbose format, could look like:
<pre>
[
  {
    Extension Jar File: C:\STAF\services\stax\ExtMessageText.jar
    Version           : 3.0.0
    Description       : Message Text STAX Monitor Extension
    Parameters        : []
    Service Extensions: &lt;None>
    Monitor Extensions: {
      Monitor Version Prereq: 3.0.0
      Extension Names       : [
        ext-message
      ]
    }
  }
  {
    Extension Jar File: C:\STAF\services\stax\ExtDelay.jar
    Version           : 3.0.0
    Description       : Delay STAX Extensions
    Parameters        : [
      delay=5
    ]
    Service Extensions: {
      Service Version Prereq: 3.0.0
      Included Elements     : [
        ext-delay
        ext-sleep
        ext-wait
      ]
      Excluded Elements     : []
    }
    Monitor Extensions: {
      Monitor Version Prereq: 3.0.0
      Extension Names       : [
        ext-delay
      ]
    }
  }
]
</pre>
</ul>

<h2><a name="Header_Release" href="#ToC_Release">RELEASE</a></h2>

RELEASE allows you to release a job or a block in a job. The job or job
block to be released has to be in HELD state.
<h4>
Syntax</h4>
<tt>RELEASE JOB &lt;JobID> [BLOCK
&lt;Block Name>]</tt>
<p>JOB specifies the ID of the job.
<p>BLOCK specifies a particular block in the job to release. The block
name must correspond to a block element name in the XML document.
<p>If a BLOCK is not specified, then the "main" block in the job (which,
by default, encompasses the entire job) is released.
<p>A block will not resume execution until all holds affecting it have
been released.
<h4>
Security</h4>
This request requires at least trust level 4.
<h4>
Results</h4>
Upon successful return, the result buffer does not contain anything.
<h4>
Examples</h4>

<ul>
<li><b>Goal:</b> Release all of job 5.
<p><tt>&nbsp; RELEASE JOB 5</tt>
<p>
<li><b>Goal:</b> Release job 23 in block MachineB.
<p><tt>&nbsp; RELEASE JOB 23
BLOCK MachineB</tt>
</ul>

<h2>
<b><a name="Header_Send" href="#ToC_Send">SEND</a></b></h2>

SEND allows you to send a message to the STAX Monitor for a job that is currently running.
It performs basically the same action as a &lt;message> element contained in a job's XML file.
<p>
This request is useful if you want a process defined by a &lt;process>
element in a job to send one or more messages to the STAX Monitor (to be displayed
in the "Messages" panel when monitoring the job).
This can be done by passing the value of the STAXJobID Python variable to the
process (e.g. via the &lt;parms> element or &lt;env> element) so it can be
used for the value of the JOB option and then submitting a SEND request
from within the process.
<p>
Note that this request was added in STAX V3.1.4.

<h4>Syntax</h4>

<tt>SEND JOB &lt;Job ID> MESSAGE &lt;Message></tt>
<p>JOB specifies the ID of the job.
<p>MESSAGE specifies the message text to be sent to the STAX Monitor.
<p>
An event will be generated that sends a message to the STAX Job Monitor.
The message is displayed in the "Messages" panel of the STAX Monitor GUI for
the job.
<p>
Note that a message sent to the STAX Monitor is not persistent, as the message
is only displayed if the job is currently being monitored by the STAX Monitor
running on any machine(s).

<h4>Security</h4>
This request requires at least trust level 3.

<h4>Results</h4>

Upon successful return, the result buffer does not contain anything.

<h4>Examples</h4>

<ul>
<li><b>Goal:</b> Send message "TestA completed Step 1 on machine client1.company.com"
for job 1 (to be displayed in the STAX Job Monitor).
<p><tt>&nbsp; SEND JOB 1 MESSAGE "TestA completed Step 1 on machine client1.company.com"</tt>
<p>
<li><b>Goal:</b> Send message "Error in Step 5 of TestA running on machine server2"
for job 12 (to be displayed in the STAX Job Monitor).
<p><tt>&nbsp; SEND JOB 12 MESSAGE "Error in Step 5 of TestA running on machine server2"</tt>
</ul>

<h2>
<b><a name="Header_Add" href="#ToC_Add">ADD</a></b></h2>

ADD allows you to add a breakpiont dynamically after the job has started.
<p>
Note that this request was added in STAX V3.4.0.

<h4>Syntax</h4>

<tt>
ADD       JOB &lt;Job ID> BREAKPOINT
            &lt; FUNCTION &lt;Function ID> |
              LINE &lt;Line Number> [FILE &lt;XML File>] [MACHINE &lt;Machine Name>] >
</tt>
<p>JOB specifies the ID of the job.
<p>FUNCTION specifies the case-sensitive name of the function for the breakpoint.
After submitting the ADD BREAKPOINT request, the STAX job will break the next time the
function is called.
<p>LINE specifies the line number for the breakpoint.  After submitting the
ADD BREAKPOINT request, the STAX job will break the next time the STAX task
on the line number specified is executed.  The line number must be the line number of the
beginning task element (i.e. to break on a &lt;stafcmd>, the line number must be
the line number for the &lt;stafcmd>, not the &lt;location>, &lt;service>,
&lt;request>, or &lt;/stafcmd>).
<p>FILE specifies the optional (fully-qualified path) XML file for LINE option.
If the XML file is not specified, the STAXJobXmlFile will be used.
<p>MACHINE specifies the optional XML file machine for the FILE option.
If the XML file machine is not specified, the STAX job will break immediately
prior to executing the STAX task whose line number and XML file match (regardless
of the task's XML file machine).

<p>
For more information on using breakpoints, see 
<a href="#Header_UsingBreakpoints"><b>Using Breakpoints to Debug STAX Jobs</b></a>.

<h4>Security</h4>
This request requires at least trust level 4.

<h4>Results</h4>

Upon successful return, the result buffer will contain the breakpoint ID for
the breakpoint just added.

<h4>Examples</h4>

<ul>
<li><b>Goal:</b> Add a breakpoint for job 5 at function updateDatabase.
<p><tt>&nbsp; ADD JOB 5 BREAKPOINT FUNCTION updateDatabase</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result could look like:
<pre>
1
</pre>
<p>
<li><b>Goal:</b> Add a breakpoint for job 5 at line 890 (in the STAXJobXmlFile
file).
<p><tt>&nbsp; ADD JOB 5 BREAKPOINT LINE 890</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result could look like:
<pre>
2
</pre>
<p>
<li><b>Goal:</b> Add a breakpoint for job 5 at line 2091 in file
C:/tests/stax/beginInstallation.xml.
<p><tt>&nbsp; ADD JOB 5 BREAKPOINT LINE 2091 FILE C:/tests/stax/beginInstallation.xml</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result could look like:
<pre>
2
</pre>
</ul>

<h2>
<b><a name="Header_Remove" href="#ToC_Remove">REMOVE</a></b></h2>

REMOVE allows you to remove a breakpiont after the job has started.
<p>
Note that this request was added in STAX V3.4.0.

<h4>Syntax</h4>

<tt>
REMOVE    JOB &lt;Job ID> BREAKPOINT &lt;Breakpoint ID>
</tt>
<p>JOB specifies the ID of the job.
<p>BREAKPOINT specifies the breakpoint ID to remove.

<p>
For more information on using breakpoints, see 
<a href="#Header_UsingBreakpoints"><b>Using Breakpoints to Debug STAX Jobs</b></a>.

<h4>Security</h4>
This request requires at least trust level 4.

<h4>Results</h4>

Upon successful return, the result buffer does not contain anything.

<h4>Examples</h4>

<ul>
<li><b>Goal:</b> Remove a breakpoint 2 for job 5.
<p><tt>&nbsp; REMOVE JOB 5 BREAKPOINT 2</tt>
</ul>

<h2>
<b><a name="Header_Resume" href="#ToC_Resume">RESUME</a></b></h2>

RESUME allows you to resume a thread that is currently at a breakpoint.
<p>
Note that this request was added in STAX V3.4.0.

<h4>Syntax</h4>

<tt>
RESUME    JOB &lt;Job ID> THREAD &lt;Thread ID>
</tt>
<p>JOB specifies the ID of the job.
<p>THREAD specifies the thread ID to resume.

<p>
For more information on using breakpoints, see 
<a href="#Header_UsingBreakpoints"><b>Using Breakpoints to Debug STAX Jobs</b></a>.

<h4>Security</h4>
This request requires at least trust level 4.

<h4>Results</h4>

Upon successful return, the result buffer does not contain anything.

<h4>Examples</h4>

<ul>
<li><b>Goal:</b> Resume thread 7 in job 18.
<p><tt>&nbsp; RESUME JOB 18 THREAD 7</tt>
</ul>

<h2>
<b><a name="Header_Step" href="#ToC_Step">STEP</a></b></h2>

STEP allows you to step execution of a thread that is currently at a breakpoint.
<p>
Note that this request was added in STAX V3.4.0.

<h4>Syntax</h4>

<tt>
STEP      JOB &lt;Job ID> THREAD &lt;Thread ID> [INTO | OVER]
</tt>
<p>JOB specifies the ID of the job.
<p>THREAD specifies the thread ID to step.
<p>INTO indicates to execute the next task in the STAX job, after which another
breakpoint will be reached.  This is the default.
<p>OVER indicates to execute the next task in the STAX job, including any
sub-tasks, after which another breakpoint will be reached.
<p><p>
As an example of the differences between STEP INTO and STEP OVER, if you
had the following STAX job:
<pre>
&lt;sequence>

  &lt;script>server1 = "machine1.test.austin.ibm.com"&lt;/script>

  &lt;stafcmd>
    ...
  &lt;/stafcmd>

  &lt;process> 
    ...  
  &lt;/process>

  &lt;call function="'VerifyRC'"/>
  
  &lt;message>
    ...
  &lt;/message>

&lt;/sequence>

&lt;testcase name="'test1'">/
    ...
&lt;/testcase>
</pre>
<p>
If the thread was at a breakpoint on the <tt>sequence</tt> line, and you
submitted a STEP INTO request, the <tt>sequence</tt> task would start, and
the thread would be at a breakpoint on the <tt>script</tt> line.
<p>
If the thread was at a breakpoint on the <tt>sequence</tt> line, and you
submitted a STEP OVER request, the <tt>sequence</tt> task would execute,
including all tasks that it contains.  So the thread would execute the
<tt>script</tt>, <tt>stafcmd</tt>, <tt>process</tt>, <tt>call</tt>, and
<tt>message</tt> tasks.  The thread will then reach a breakpoint on the
<tt>testcase</tt> line.
<p>
If the thread was at a breakpoint on the <tt>call</tt> line, and you
submitted a STEP INTO request, the <tt>call</tt> task would start, and
the thread would be at a breakpoint on the <tt>function</tt> element (for
function <tt>VerifyRC</tt>).
<p>
If the thread was at a breakpoint on the <tt>call</tt> line, and you
submitted a STEP OVER request, the <tt>call</tt> task would start, and
entire function will execute.  When the function completes, the thread would
be at a breakpoint on the <tt>message</tt> line.

<p>
For more information on using breakpoints, see 
<a href="#Header_UsingBreakpoints"><b>Using Breakpoints to Debug STAX Jobs</b></a>.

<h4>Security</h4>
This request requires at least trust level 4.

<h4>Results</h4>

Upon successful return, the result buffer does not contain anything.

<h4>Examples</h4>

<ul>
<li><b>Goal:</b> Step into the breakpoint at thread 7 in job 18.
<p><tt>&nbsp; STEP INTO JOB 18 THREAD 7
</tt>
<li><b>Goal:</b> Step over the breakpoint at thread 1 in job 24.
<p><tt>&nbsp; STEP JOB 24 THREAD 1 OVER
</tt>
<li><b>Goal:</b> Step into the breakpoint at thread 6 in job 5.
<p><tt>&nbsp; STEP JOB 5 THREAD 6
</tt>
</ul>

<h2>
<b><a name="Header_StopThread" href="#ToC_StopThread">STOP THREAD</a></b></h2>

STOP THREAD allows you to stop a running thread.  After the task currently
being executed in the thread completes, the thread will reach a breakpoint.
<p>
Note that this request was added in STAX V3.4.0.

<h4>Syntax</h4>

<tt>
STOP      JOB &lt;Job ID> THREAD &lt;Thread ID>
</tt>
<p>JOB specifies the ID of the job.
<p>THREAD specifies the thread ID to stop.

<p>
For more information on using breakpoints, see 
<a href="#Header_UsingBreakpoints"><b>Using Breakpoints to Debug STAX Jobs</b></a>.

<h4>Security</h4>
This request requires at least trust level 4.

<h4>Results</h4>

Upon successful return, the result buffer does not contain anything.

<h4>Examples</h4>

<ul>
<li><b>Goal:</b> Stop thread 3 in job 1.
<p><tt>&nbsp; STOP JOB 1 THREAD 3</tt>
</ul>

<h2>
<b><a name="Header_PyExec" href="#ToC_PyExec">PYEXEC</a></b></h2>

PYEXEC will execute Python code in the specified thread's python interpreter.
<p>
Note that this request was added in STAX V3.4.0.

<h4>Syntax</h4>

<tt>
PYEXEC    JOB &lt;Job ID> THREAD &lt;Thread ID> CODE &lt;Python Code>
</tt>
<p>JOB specifies the ID of the job.
<p>THREAD specifies the thread ID..
<p>CODE specifies the Python code to execute

<p>
For more information on using breakpoints, see 
<a href="#Header_UsingBreakpoints"><b>Using Breakpoints to Debug STAX Jobs</b></a>.

<h4>Security</h4>
This request requires at least trust level 4.

<h4>Results</h4>

Upon successful return, the result buffer does not contain anything.

<h4>Examples</h4>

<ul>
<li><b>Goal:</b> Execute Python code in thread 3 in job 1 to set a variable
called <tt>server</tt> to the string <tt>'systemABC.company.com'</tt>.
<p><tt>&nbsp; PYEXEC JOB 1 THREAD 3 CODE "server='systemABC.company.com'"</tt>
<li><b>Goal:</b> Execute Python code in thread 12 in job 9 to update fields
in an existing Python variable</tt>.
<p><tt>&nbsp; PYEXEC JOB 9 THREAD 12 CODE "testInfo['language'].append('spanish'); testInfo['parms']['purchases']['tax'] = 8.25"</tt>
</ul>

<h2>
<b><a name="Header_Set" href="#ToC_Set">SET</a></b></h2>
SET allows you to change the operational parameters of the STAX service.
The same parameters for the SET request can be specified when registering
the STAX service.  Note that a setting change only effects any new
STAX jobs, not STAX jobs that are already running.
<h4>
Syntax</h4>

<tt>
SET [CLEARLOGS &lt;Enabled | Disabled>]
<br>&nbsp;&nbsp;&nbsp; [LOGTCELAPSEDTIME &lt;Enabled | Disabled>]
<br>&nbsp;&nbsp;&nbsp; [LOGTCNUMSTARTS &lt;Enabled | Disabled>]
<br>&nbsp;&nbsp;&nbsp; [LOGTCSTARTSTOP &lt;Enabled | Disabled>]
<br>&nbsp;&nbsp;&nbsp; [PYTHONOUTPUT &lt;Python Output>]
<br>&nbsp;&nbsp;&nbsp; [PYTHONLOGLEVEL &lt;Log Level>]
<br>&nbsp;&nbsp;&nbsp; [FILECACHING &lt;Enabled | Disabled>]
<br>&nbsp;&nbsp;&nbsp; [MAXFILECACHESIZE &lt;MaxFiles>]
<br>&nbsp;&nbsp;&nbsp; [FILECACHEALGORITHM &lt;LRU | LFU>]
<br>&nbsp;&nbsp;&nbsp; [MAXFILECACHEAGE &lt;Number>[s|m|h|d|w]]
<br>&nbsp;&nbsp;&nbsp; [MAXMACHINECACHESIZE &lt;MaxMachines>]
<br>&nbsp;&nbsp;&nbsp; [MAXRETURNFILESIZE &lt;Number>[k|m]]
<br>&nbsp;&nbsp;&nbsp; [MAXGETQUEUEMESSAGES &lt;Number>]
<br>&nbsp;&nbsp;&nbsp; [MAXSTAXTHREADS &lt;Number>]
</tt>
<p>
See section <a href="#Header_StaxServiceMach">"Installation and Configuration,
STAX Service Machine"</a> for a description of these options.

<h4>
Security</h4>
This request requires at least trust level 5.
<h4>
Results</h4>
Upon successful completion, the result buffer does not contain anything.
<h4>
Examples</h4>
<ul>
<li><b>Goal:</b> Enable clear logs.
<p><tt>
&nbsp;  SET CLEARLOGS Enabled
</tt>
<p>
<li><b>Goal:</b> Enable all additional testcase logging.
<p><tt>&nbsp;  SET LOGTCELAPSEDTIME Enabled LOGTCNUMSTARTS Enabled LOGTCSTARTSTOP Enabled</tt>
<p>
<li><b>Goal:</b> Disable logging "Start" and "Stop records each time a testcase begins and ends.
<p><tt>
&nbsp;  SET LOGTCSTARTSTOP Disabled</tt>
<p></p>
<li><b>Goal:</b> Set the maximum number of files to cache to 40 and set
    the caching algorithm to "Least Frequently Used", and set the maximum
    age for cached documents to 12 hours.
<p><tt>&nbsp;  SET MAXFILECACHESIZE 40 FILECACHEALGORITHM LFU MAXFILECACHEAGE 12h</tt>
<p>
<li><b>Goal:</b> Set the maximum size for files returned by a process element
    or by a stafcmd element that submits a FS GET FILE request to 30M.
<p><tt>&nbsp;  SET MAXRETURNFILESIZE 30m</tt>
<p>
<li><b>Goal:</b> Set the maximum number of STAX Threads that can be running
simultaneously in a job to help prevent "runaway" STAX jobs that use
paralleliterate and/or parallel elements to run too many threads in parallel
which can cause the STAX service to run out of memory and crash.
<p><tt>&nbsp;  SET MAXSTAXTHREADS 2000</tt>
<p>
<li><b>Goal:</b> Set Python output to be redirected to the STAX Job User Log
and to the STAX Monitor via the "Messages" tab and set the logging level for
Python stdout to "User1". 
<p><tt>&nbsp;  SET PYTHONOUTPUT JobUserLogAndMsg PYTHONLOGLEVEL User1</tt>
</ul>

<h2>
<b><a name="Header_Start" href="#ToC_Start">START</a></b></h2>

START allows you to start a new testcase in a STAX job that is currently running.
It performs basically the same action as a &lt;testcase> element with the 'strict' mode,
including logging a "Start" level message in the STAX Job log if "Log TC Start/Stop"
is enabled for the job.  A START request sets the start time for the testcase
from which its elapsed time will be calculated.

For example, a START request can be submitted from a shell script or Java program, etc.
that is run via a &lt;process> element to start a testcase.

<h4>
Syntax</h4>

<tt>
START JOB &lt;JobID> TESTCASE &lt;Testcase Name> [KEY &lt;Key>]
      [PARENT &lt;Testcase Name>]
</tt>

<p>JOB specifies the ID of the job.
<p>TESTCASE specifies the fully qualified name of the testcase to be started.
If a testcase with the same name is currently active, you must specify a key
to uniquely identify the active testcase.  You may want to prefix the
name of the testcase with the value provided in the STAXCurrentTestcase
Python variable to maintain the testcase hierarchy.
<p>KEY specifies a unique identifier for this testcase when combined with
the Testcase name.  A key must be specified if a testcase with the same
name is already currently active (started and not yet stopped).
<p>For example, if your STAX job contains a &lt;paralleliterate> element
that iterates over a list of machines and this element contains a
&lt;process> element and the process submits a START request for a testcase,
a key must be specified in the START request to uniquely identify the
testcase.  For example, you may want to specify the machine name where
the process is running and the process handle for the key, e.g. KEY machineA:48.
<p>
We strongly recommend that you always specify a KEY so that the testcase
can be run in parallel.
<p>PARENT specifies the fully qualified name of the parent testcase.
This option is used only if the testcase name you specified for
the TESTCASE option does not exist.  The parent testcase name must be
the name of a testcase that already exists and must be a valid parent
testcase name.  Specifying the PARENT option indicates that the
testcase hierarchy will be generated using information about the testcase
stack provided by its parent testcase.
Note that the only reason you would use the PARENT option 
is if you use periods within a testcase name to mean something other than
distinguishing the testcase hierarchy and if you want the "Testcase Stack"
field (returned by a <tt>STAX QUERY JOB &lt;Job ID> TESTCASE &lt;Testcase Name></tt> request
to reflect the proper testcase hierarchy.
For example, if the testcase name you want to start is
<tt>Scenario1.Test2.machine1.company.com</tt> and this testcase doesn't exist
and you want its testcase hierarchy to be:
<pre>
  Scenario1
    Test2
      machine1.company.com
</pre>
then you would need to specify Scenario1.Test2 for the PARENT option.
If you do not specify the PARENT option for this testcase, then the 
testcase hierarchy will be determined by the periods in the testcase name.
For example:
<pre>
  Scenario1
    Test2
      machine1
        company
          com
</pre>

<h4>
Security</h4>
This request requires at least trust level 3.
<h4>
Results</h4>
Upon successful return, the result buffer does not contain anything.
<h4>
Examples</h4>

<ul>
<li><b>Goal:</b> Start a testcase named "Scenario01.Test2.MachineA" in job 3.
<p><tt>&nbsp;  START JOB 3 TESTCASE "Scenario01.Test2.MachineA"</tt>
<p>
<li><b>Goal:</b> Start a testcase named "Scenario01.Test3" in job 12 in parallel on machine
clientA (process handle 48) and on machine clientB (process handle 86).
<p><tt>
&nbsp;  START JOB 12 TESTCASE Scenario01.Test3 KEY clientA:48
<br>&nbsp;  START JOB 12 TESTCASE Scenario01.Test3 KEY clientB:86
</tt>
<p>
<li><b>Goal:</b> Start a new testcase named "Scenario01.Test1.machine1.company.com" in job 4
and specify parent "Scenario01.Test1" to indicate that the testcase stack for this
testcase should be ["Scenario01", "Scenario01.Test1", "Scenario01.Test1.machine1.company.com"].
<p><tt>&nbsp; START JOB 4 TESTCASE "Scenario01.Test1.machine1.company.com" PARENT "Scenario01.Test1"</tt>
</ul>

<h2>
<b><a name="Header_Stop" href="#ToC_Stop">STOP</a></b></h2>

STOP allows you to stop an active testcase (which was started via a START request)
in a STAX job that is currently running.  It performs basically the same action
as a &lt;/testcase> element, including logging a "Stop" level message in
the STAX Job log if "Log TC Start/Stop" is enabled.  A STOP request sets
the stop time for the testcase from which its elapsed time will be
calculated.
<p>
For example, a STOP request can be submitted from a shell script or Java program, etc.
that is run via a &lt;process> element to stop a testcase.
<h4>
Syntax</h4>

<tt>
STOP JOB &lt;JobID> TESTCASE &lt;Testcase Name> [KEY &lt;Key>]
</tt>
<p>JOB specifies the ID of the job.
<p>TESTCASE specifies the fully qualified name of the active testcase to be stopped.
The testcase name specified must already exist and must have been started via a
START request.
<p>
KEY specifies a unique identifier for the testcase when combined with the
Testcase name.  If the testcase was started with a key specified, the same
key must be specified in the testcase's corresponding STOP request.

<h4>
Security</h4>
This request requires at least trust level 3.

<h4>
Results</h4>
Upon successful return, the result buffer does not contain anything.

<h4>
Examples</h4>

<ul>
<li><b>Goal:</b> Stop a testcase named "Scenario01.Test2.MachineA" in job 3.
<p><tt>
&nbsp;  STOP JOB 3 TESTCASE "Scenario01.Test2.MachineA"
</tt>
<p>
<li><b>Goal:</b> Stop a testcase named "Scenario01.Test3" in job 12 that is running in parallel
on machines clientA (process handle 48) and clientB (process handle 86).
<p><tt>
&nbsp;  STOP JOB 12 TESTCASE Scenario01.Test3 KEY clientA:48
<br>&nbsp;  STOP JOB 12 TESTCASE Scenario01.Test3 KEY clientB:86
</tt>
</ul>

<h2>
<b><a name="Header_Terminate" href="#ToC_Terminate">TERMINATE</a></b></h2>

TERMINATE allows you to terminate a job or a block in a job.
<h4>
Syntax</h4>
<tt>TERMINATE JOB &lt;JobID>
[BLOCK &lt;Block Name>]</tt>
<p>JOB specifies the ID of the job to terminate. If a BLOCK is not specified,
then the "main" block in the job (which, by default, encompasses the entire
job) is terminated which means all processes and STAF commands currently
running are terminated.
<p>BLOCK specifies a particular block in the job to terminate. The block
name must correspond to a block element name in the XML document. If a
block in a job is terminated, the processes and STAF commands that are
currently running in the block are terminated.
<h4>
Security</h4>
This request requires at least trust level 4.
<h4>
Results</h4>
Upon successful return, the result buffer does not contain anything.
<h4>
Examples</h4>

<ul>
<li><b>Goal:</b> Terminate all of job 5.
<p><tt>&nbsp; TERMINATE JOB
5</tt>
<p>
<li><b>Goal:</b> Terminate job 23 in block MachineB.
<p><tt>&nbsp; TERMINATE JOB
23 BLOCK MachineB</tt>
</ul>

<h2>
<b><a name="Header_Update" href="#ToC_Update">UPDATE</a></b></h2>

UPDATE allows you to update the status of a testcase in a job that is currently running.
It performs basically the same action as a &lt;tcstatus> element contained in a job's XML file.
For example, an update request can be performed within a process running in a job to update the
status for a testcase.
<h4>
Syntax</h4>
<tt>UPDATE JOB &lt;JobID> TESTCASE &lt;Testcase name> STATUS &lt;Status>
[MESSAGE &lt;Message text>] [FORCE [PARENT &lt;Testcase name>]]</tt>
<p>
JOB specifies the ID of the job.
<p>
TESTCASE specifies the fully qualified name of the testcase whose status is to be updated.
The testcase specified must already exist, unless FORCE is also specified.
If you wanted a process defined by a &lt;process> element in a job to update the status of
the current testcase, the value of the STAXCurrentTestcase Python variable could be passed to
the process via the &lt;parms> element or &lt;env> element and an UPDATE request could be submitted
from within the process, specifying the current testcase value passed in for the TESTCASE option.
<p>
STATUS specifies the status for the testcase.  It is required and it's value must be
one of the following values (not case-sensitive):
<ul compact>
<li><tt>Pass</tt> - This increments the number of passes for the testcase.</li>
<li><tt>Fail</tt> - This increments the number of fails for the testcase.</li>
<li><tt>Info</tt> - This is used to update the last status information
for the testcase, so you should also use the MESSAGE option to specify
additional information about the testcase status.</li>
</ul>
<p>MESSAGE specifies additional information about the status for a testcase.  It is optional.
<p>FORCE specifies that if the testcase does not already exist, it should be
added to the testcase map.
Note that without a FORCE option, you cannot update the status of a testcase
without the testcase already existing.
<p>PARENT specifies the fully qualified name of the parent testcase.
This option is used only if the testcase name you specified for
the TESTCASE option does not exist and you specified the FORCE option.
The parent testcase name must be the name of a testcase that already exists
and must be a valid parent testcase name.  Specifying the PARENT option
indicates that the testcase hierarchy will be generated using information
about the testcase stack provided by its parent testcase.
Note that the only reason you would use the PARENT option 
is if you use periods within a testcase name to mean something other than
distinguishing the testcase hierarchy and if you want the "Testcase Stack"
field (returned by a <tt>STAX QUERY JOB &lt;Job ID> TESTCASE &lt;Testcase Name></tt> request
to reflect the proper testcase hierarchy.
For example, if the testcase name you want to start and update is
<tt>Scenario1.Test2.machine1.company.com</tt> and this testcase doesn't exist
and you want its testcase hierarchy to be:
<pre>
  Scenario1
    Test2
      machine1.company.com
</pre>
then you would need to specify Scenario1.Test2 for the PARENT option.
If you do not specify the PARENT option for this testcase, then the 
testcase hierarchy will be determined by the periods in the testcase name.
For example:
<pre>
  Scenario1
    Test2
      machine1
        company
          com
</pre>
<p>
An event will be generated that sends a message to the STAX Job Monitor with the testcase status
information.
<p>
Testcase status information is displayed in the "Testcase Information" section of the STAX Monitor
GUI. A summary of the number of passes and fails for each testcase is logged in the STAX Job log.
Also, unless the testcase status is Info, if additional information was specified about the
status of a testcase, it is also logged in the STAX Job Log.
<h4>
Security</h4>
This request requires at least trust level 3.
<h4>
Results</h4>
Upon successful return, the result buffer does not contain anything.
<h4>
Examples</h4>

<ul>
<li><b>Goal:</b> Increment the pass status for existing testcase "Scenario01.Test2.MachineA" in job 3.
<p><tt>&nbsp; UPDATE JOB 3 TESTCASE "Scenario01.Test2.MachineA" STATUS pass</tt>
<p>
<li><b>Goal:</b> Increment the fail status for testcase "Memory Test" in job 21 and record a message about
the cause of the failure. If the testcase does not exist, create it.
<p><tt>&nbsp; UPDATE JOB 21 TESTCASE "Memory Test" STATUS Fail MESSAGE "RC=1. Open a defect" FORCE</tt>
<p>
<li><b>Goal:</b> Increment the pass status for testcase "Scenario01.Test1.machine1.company.com
in job 4.  If the testcase does not exist, first create it and generate its testcase stack using information
about the testcase stack provided by its parent testcase "Scenario01.Test1" such that its testcase
stack will be ["Scenario01", "Scenario01.Test1", "Scenario01.Test1.machine1.company.com"].
<p><tt>&nbsp; UPDATE JOB 4 TESTCASE "Scenario01.Test1.machine1.company.com STATUS Pass FORCE 
PARENT "Scenario01.Test1"</tt>
</ul>

<h2>
<b><a name="Header_NotifyRegister" href="#ToC_NotifyRegister">NOTIFY REGISTER/UNREGISTER</a></b></h2>

NOTIFY REGISTER/UNREGISTER allow you to either register or unregister to
receive a notification when a given STAX job ends.

<h4>Syntax</h4>

<tt>
NOTIFY REGISTER&nbsp;&nbsp; ONENDOFJOB &lt;Job ID> [BYNAME] [PRIORITY &lt;Priority>]<br>
NOTIFY UNREGISTER ONENDOFJOB &lt;Job ID><br>
</tt>
<p>
<tt>REGISTER</tt> indicates you want to register for a notification
when a STAX job ends.  The queued message will have type
"STAF/Service/STAX/Job/End" and its message will contain a marshalled
<tt>&lt;Map></tt> which represents the completion information for
the STAX job.  See table <a href="#STAXJobEndMessage">Definition of map for
"STAF/Service/STAX/Job/End" type message</a> for the map definition of a
job completion message.
<p>
<tt>UNREGISTER</tt> indicates you want to unregister a STAX job
end notification.
<p>
<tt>ONENDOFJOB</tt> specifies the job ID of the job for which you wish
to register or unregister for a job end notification.
This option will resolve variables.
<p>
<p><tt>BYNAME</tt> indicates that you wish to have the notification
message sent when the job ends to the process(es) with the same machine and
handle name of the process that submitted the <tt>NOTIFY REGISTER</tt> request.
The default is to send the job end notification message to the queue of the
machine/handle that submitted the <tt>NOTIFY REGISTER</tt> request.
<p>
<tt>PRIORITY</tt> specifies the priority of the job end notification
message.  The default is 5.  This option will resolve variables.
<p>
<table id="STAXJobEndMessage" border>
<thead>
<tr>
<th COLSPAN="4">Definition of map for "STAF/Service/STAX/Job/End" type message</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map represents STAX job completion information.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>endTimestamp
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>jobID
<td><tt>&lt;String></tt>
<td>
<tr>
<td>key
<td><tt>&lt;String> | &lt;None></tt>
<td>
<tr>
<td>result
<td><tt>&lt;String> | 'None'</tt>
<td>
<tr>
<td>status
<td><tt>&lt;String></tt>
<td><tt>'Normal' | 'Terminated' | 'Abnormal' | 'Unknown'</tt>
<tr>
<td>staxServiceName
<td><tt>&lt;String></tt>
<td>
<tr>
<td>startTimestamp
<td><tt>&lt;String></tt>
<td><tt>&lt;YYYYMMDD-HH:MM:SS></tt>
<tr>
<td>testcaseTotals
<td><tt><a href="#STAXTestcaseTotals">&lt;Map:STAF/Service/STAX/TestcaseTotals></a></tt>
<td>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "result" value is set to a "string" version of whatever the job
specified to return, or <tt>'None'</tt> if the job did not specify anything
to return.
<p>
The job may not return anything if a &lt;return> element is not executed in the starting
function.  This could be due to many reasons, such as an error occurring, the job being
terminated, or if the starting function doesn't contain a &lt;return> element.</li>
<p>
<li>The "status" value is the job completion status and it is set to one of the following:
    <ul compact>
    <li><tt>'Normal'</tt> if the job ended normally
    <li><tt>'Terminated'</tt> if the job was terminated (this means if the 'main'
    block was terminated or if an error occurred before the 'main' block was started)
    <li><tt>'Abnormal'</tt> if the job ended abnormally.  This can happen when
    at least one unhandled inherited condition remains on the condition stack
    when the job completes.  For example, this can occur when a break or continue
    condition remains on the condition stack because there was no outer loop or
    iterate element, or when an exception is thrown but there's no catch element for it.
    This state takes precedence if the job is also terminated.
    <li><tt>'Unknown'</tt> if the job has an unknown status.  This should not occur.
    </ul>
</ol>
</tr>
</tfoot>
</table>
<p>
For example, suppose a <tt>STAX EXECUTE</tt> request was submitted
which started job ID 1, completed normally, returned a job result of "0",
and ran 1 testcase which had 18 passes and 2 fails.
The queued message with type STAF/Service/STAX/Job/End message could
look like the following: 
<pre>
{
  handle             : 24
  handleName         : STAX/Job/1
  machine            : local://local
  message            : {
    endTimestamp   : 20090328-13:57:22
    jobID          : 1
    key            : &lt;None>
    result         : 0
    startTimestamp : 20090328-13:56:57
    status         : Normal
    staxServiceName: STAX
    testcaseTotals : {
      numFails : 2
      numPasses: 18
      numTests : 1
    }
  }
  priority           : 5
  staf-map-class-name: STAF/Service/Queue/Entry
  timestamp          : 20090328-13:57:22
  type               : STAF/Service/STAX/Job/End
  user               : none://anonymous
}
</pre>
<p>
As another example, suppose a <tt>STAX EXECUTE</tt> request was submitted
with options <tt>NOTIFY ONEND KEY "65:client1"</tt>
which started job ID 2, completed normally and returned a job result of
"Success", and ran 5 testcases which had a total of 28 passes and 2 fails.
The queued message with type STAF/Service/STAX/Job/End could look like the
following: 
<pre>
{
  handle             : 28
  handleName         : STAX/Job/2
  machine            : local://local
  message            : {
    endTimestamp   : 20090328-14:02:22
    jobID          : 2
    key            : &lt;None>
    result         : Success
    startTimestamp : 20090328-13:57:09
    status         : Normal
    staxServiceName: STAX
    testcaseTotals : {
      numFails : 2
      numPasses: 28
      numTests : 5
    }
  }
  priority           : 5
  staf-map-class-name: STAF/Service/Queue/Entry
  timestamp          : 20090328-14:02:22
  type               : STAF/Service/STAX/Job/End
  user               : none://anonymous
}
</pre>
<p>
As yet another example, suppose a <tt>STAX EXECUTE</tt> request was
submitted which started job ID 3, and assume that the job was
terminated.  The queued message with type STAF/Service/STAX/Job/End
could look like the following:
<pre>
{
  handle             : 32
  handleName         : STAX/Job/3
  machine            : local://local
  message            : {
    endTimestamp   : 20090328-14:06:15
    jobID          : 3
    key            : &lt;None>
    result         : None
    startTimestamp : 20090328-14:05:59
    status         : Terminated
    staxServiceName: STAX
    testcaseTotals : {
      numFails : 0
      numPasses: 0
      numTests : 1
    }
  }
  priority           : 5
  staf-map-class-name: STAF/Service/Queue/Entry
  timestamp          : 20090328-14:02:22
  type               : STAF/Service/STAX/Job/End
  user               : none://anonymous
}
</pre>

<h4>Security</h4>

These requests require at least trust level 3.

<h4>Results</h4>

Upon successful return, the result buffer will contain no data.

<h4>
Examples</h4>
<ul>
<li>
<b>Goal:</b> Register the current process to have a job end notification
sent to it's handle number when job 5 ends.
<p><tt>&nbsp; NOTIFY REGISTER ONENDOFJOB 5</tt>
<p>
<li>
<b>Goal:</b> Register the current process to have a priority 3 job end
notification sent to it's handle number when job 5 ends.
<p><tt>&nbsp; NOTIFY REGISTER ONENDOFJOB 5 PRIORITY 3</tt>
<p>
<li>
<b>Goal:</b> Register to have a job end notification sent to all processes
with the registered handle name of the current process on the submitter's
machine when job 6 ends.
<p><tt>&nbsp; NOTIFY REGISTER ONENDOFJOB 6 BYNAME</tt>
<p>
<li>
<b>Goal:</b> Unregister the current process to be notified when job 6 ends.
<p><tt>&nbsp; NOTIFY UNREGISTER ONENDOFJOB 6</tt>
</ul>

<h2>
<b><a name="Header_NotifyList" href="#ToC_NotifyList">NOTIFY LIST</a></b></h2>

NOTIFY LIST allows you to display the job end notification list for a given job or all jobs.

<h4>Syntax</h4>

<tt>NOTIFY LIST       [JOB &lt;Job ID>]</tt>
<p>
<tt>LIST</tt> lists the notifiees to be notified when one or more STAX jobs ends.
<p>
<tt>JOB</tt> specifies the job ID of the STAX job for which you wish to list notifiees.
This option will resolve variables.

<h4>Security</h4>

This request requires at least trust level 2.

<h4>Results</h4>

Upon successful return, the result buffer will contain information about
the request based on the options specified:
<p>
<ul>
<li><tt><b>NOTIFY LIST</b></tt>
<p>
The result buffer for a <tt>NOTIFY LIST</tt> request
(without specifying the <tt>JOB</tt> option) will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/Notifiee></tt>
representing the registered notifiees for all STAX jobs.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/Notifiee</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a notifiee
for STAX job completion.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td><tt>jobID</tt>
<td><tt>Job ID<br>(ID)</tt>
<td><tt>&lt;String></tt>
<td>
<tr>
<td><tt>machine</tt>
<td><tt>Machine</tt>
<td><tt>&lt;String></tt>
<td>
<tr>
<td><tt>handle</tt>
<td><tt>Handle<br>(H)</tt>
<td><tt>&lt;String></tt>
<td>
<tr>
<td><tt>handleName</tt>
<td><tt>Handle Name</tt>
<td><tt>&lt;String></tt>
<td>
<tr>
<td><tt>notifyBy</tt>
<td><tt>Notify By<br>(Notify)</tt>
<td><tt>&lt;String></tt>
<td><tt>'Handle' | 'Name'</tt>
<tr>
<td><tt>priority</tt>
<td><tt>Priority<br>(P)</tt>
<td><tt>&lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "<tt>Notify By</tt>" value is set to <tt>'Handle'</tt> if the notifiee
registered to be notified by handle number (the default).  Or, if the
notifiee registered to be notified by handle name, the "<tt>Notify By</tt>"
value is set to <tt>'Name'</tt>.
</ol>
</tr>
</tfoot>
</table>
<p>
<li><tt><b>NOTIFY LIST JOB &lt;Job ID></b></tt>
<p>
The result buffer for a <tt>NOTIFY LIST JOB &lt;Job ID></tt> request
will contain a marshalled
<tt>&lt;List> of &lt;Map:STAF/Service/STAX/JobNotifiee></tt>
representing the registered notifiees for the specified job.
The map is defined as follows:
<p>
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/JobNotifiee</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents a notifiee
for STAX job completion.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td><tt>machine</tt>
<td><tt>Machine</tt>
<td><tt>&lt;String></tt>
<td>
<tr>
<td><tt>handle</tt>
<td><tt>Handle<br>(H)</tt>
<td><tt>&lt;String></tt>
<td>
<tr>
<td><tt>handleName</tt>
<td><tt>Handle Name</tt>
<td><tt>&lt;String></tt>
<td>
<tr>
<td><tt>notifyBy</tt>
<td><tt>Notify By<br>(Notify)</tt>
<td><tt>&lt;String></tt>
<td><tt>'Handle' | 'Name'</tt>
<tr>
<td><tt>priority</tt>
<td><tt>Priority<br>(P)</tt>
<td><tt>&lt;String></tt>
<td>
</tbody>
<tfoot>
<tr>
<td colspan="4">
<b>Notes:</b>
<ol compact>
<li>The "<tt>Notify By</tt>" value is set to <tt>'Handle'</tt> if the notifiee
registered to be notified by handle number (the default).  Or, if the
notifiee registered to be notified by handle name, the "<tt>Notify By"</tt>
value is set to <tt>'Name'</tt>.
</ol>
</tr>
</tfoot>
</table>
</ul>

<h4>
Examples</h4>
<ul>
<li>
<b>Goal:</b> List all the job end notifiees for job 5.
Assume there are three registered notifiees for job 5:  two registered
by handle and one registered by name.
<p><tt>&nbsp; NOTIFY LIST JOB 5</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result,
in table format, could look like: 
<pre>
Machine                        Handle Handle Name    Notify By Priority
------------------------------ ------ -------------- --------- --------
tcp://client1.company.com@6500 54     TestA/MyHandle Handle    5
tcp://client3.company.com@6500 31     TestC/MyHandle Name      1
tcp://client5.company.com@6500 96     TestD/MyHandle Handle    5
</pre>
<p>
<li>
<b>Goal:</b> List the job end notification list for all jobs.
Assume three of the currently running jobs have one or more notifiees.
<p><tt>&nbsp; NOTIFY LIST</tt>
<p><b>Output:</b>
If the request is submitted from the command line, the result,
in table format, could look like: 
<pre>
Job ID Machine                        Handle Handle Name    Notify By Priority
------ ------------------------------ ------ -------------- --------- --------
3      tcp://client5.company.com@6500 96     TestD/MyHandle Handle    5
5      tcp://client1.company.com@6500 54     TestA/MyHandle Handle    5
5      tcp://client3.company.com@6500 31     TestC/MyHandle Name      1
5      tcp://client5.company.com@6500 96     TestD/MyHandle Handle    5
6      tcp://client3.company.com@6500 31     TestC/MyHandle Name      1
</pre>
</ul>

<h2>
<b><a name="Header_Purge" href="#ToC_Purge">PURGE &lt;FILECACHE | MACHINECACHE></a></b></h2>

PURGE is used to clear the contents of the file cache or the machine cache.
<h4>
Syntax</h4>
<tt>PURGE &lt;FILECACHE | MACHINECACHE> CONFIRM</tt>
<p><tt>FILECACHE</tt> specifies that the file cache is to be cleared.
This also clears the overall cache statistics provided via a <tt>LIST
FILECACHE SUMMARY</tt> request like Hit Count, Miss Count, Total Requests, and
the Hit Ratio.
<p><tt>MACHINECACHE</tt> specifies that the machine cache is to be cleared.
<p><tt>CONFIRM</tt> confirms the purge.
<h4>
Security</h4>
This request requires at least trust level 5.
<h4>
Results</h4>
If successful, the result buffer will contain a marshalled
&lt;Map:STAF/Service/STAX/PurgeStats>, representing the number of entries that
were purged from the cache and the number of entries remaining in the cache.
The map is defined as follows:
  
<table border>
<thead>
<tr>
<th COLSPAN="4">Definition of map class STAF/Service/STAX/PurgeStats</th>
</tr>
<tr>
<td colspan="4"><b>Description: </b>This map class represents the results of
  a cache purge.</td>
</tr>
<tr>
<th width=20%>Key Name
<th width=20%>Display Name
<th width=30%>Type
<th width=30%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>numPurged
<td>Number Purged
<td><tt>&lt;String></tt>
<td>
<tr>
<td>numRemaining
<td>Number Remaining
<td><tt>&lt;String></tt>
<td>
</tbody>
</table>
  
<p>
<h4>Examples</h4>
<p>
<ul>
<li><b>Goal:</b> Purge all entries in the file cache and clear the overall
    cache statistics.
 <p><tt>PURGE FILECACHE CONFIRM</tt>
 <p><b>Result:</b><br/><tt>Number Purged: 10<br/>Number Remaining: 0</tt>
</ul>
<p>
<ul>
<li><b>Goal:</b> Purge all entries in the machine cache.
 <p><tt>PURGE MACHINECACHE CONFIRM</tt>
 <p><b>Result:</b><br/><tt>Number Purged: 10<br/>Number Remaining: 0</tt>
</ul>
   
<h2>
<b><a name="Header_Version" href="#ToC_Version">VERSION</a></b></h2>

VERSION displays the version level of the STAX service or the version level of Jython packaged with
the STAX service.
<h4>
Syntax</h4>
<tt>VERSION [JYTHON]</tt>
<p><tt>VERSION</tt> specifies to display the version level of the STAX service or the
version level of Jython packaged with the STAX service.
<p><tt>JYTHON</tt> specifies to display the version level of Jython packaged with the STAX service.
<h4>
Security</h4>
This request requires at least trust level 1.
<h4>
Results</h4>
The result buffer contains the version level of the STAX service if option JYTHON is not specified.
If option JYTHON is specified, the result buffer contains the version level of Jython
packaged with the STAX service.
<p>
<h4>Examples</h4>
<p>
<ul>
<li><b>Goal:</b> Display the version level of the STAX service.
 <p><tt>VERSION</tt>
 <p><b>Result:</b>&nbsp; <tt>3.5.0 Beta 1</tt>
<p>
<li><b>Goal:</b> Display the version level of Jython packaged with the STAX service.
 <p><tt>VERSION JYTHON</tt>
 <p><b>Result:</b>&nbsp; <tt>2.5.2rc2-staf-v1</tt>
</ul>
<p>
<hr>

<h1><a name="Header_StaxMonitoring" href="#ToC_StaxMonitoring">STAX Monitoring</a></h1>

A Monitor application is available for the STAX Service.&nbsp; This application
displays a real-time graphical representation of the currently running
elements of a given STAX job.
<p>The STAX Monitor application displays a list of all active jobs and an indication of which jobs
are currently being monitored.  The STAX Monitor application also provides a graphical user
interface for the EXECUTE request which allows you to submit new jobs for execution and monitor
the job from its beginning, if desired.
<p>For each job that is monitored, the STAX Monitor application displays all currently
executing &lt;process>, &lt;stafcmd>, &lt;block>, and &lt;job> elements for a STAX job.&nbsp; The
graphical representation is a tree format, in order to show the hierarchy
of the currently executing elements.
The STAX Monitor application allows you to control the execution of the
job by selecting a &lt;block> element to hold, release, or terminate.
<p>The STAX Monitor application also displays any testcases that have been executed and their status as well as
any messages that have been sent via &lt;message> elements or from the STAX service
itself.
<p>The STAX Monitor also displays all of the threads that are currently running
in a STAX job, and allows you to interact with any breakpoints that are set for
the STAX jobl
<p>
Multiple jobs can be monitored at the same time.
<p>

<h2><a name="Header_StartMonitor" href="#ToC_StartMonitor">Starting the STAX Monitor</a></h2>

<p>
You can start the STAX Monitor using the -jar option, without adding the STAXMon.jar file
to your CLASSPATH environment variable, if your STAXMon.jar file is in a first or second level
directory off your STAF root directory (such as C:\STAF\services or C:\STAF\services\stax on Windows
or /usr/local/staf/services or /usr/local/staf/services/stax on Unix systems).
Note that when using the -jar option, Java does not use the CLASSPATH
environment variable or the -cp option.
<p>
If your current directory contains STAXMon.jar, then to start the STAX Monitor, type:
<p>
<tt>&nbsp;&nbsp; java -jar STAXMon.jar</tt>
<p>
Or, if you are in another directory, fully qualify the STAXMon.jar file.  So, if the STAXMon.jar
file is in C:\STAF\services\stax, type:
<p>
<tt>&nbsp;&nbsp; java -jar C:\STAF\services\stax\STAXMon.jar</tt>
<p>
Or, you can start the STAX Monitor by specifying the main Java class name (which is case sensitive).
When using this method, you must make sure that the STAXMon.jar and JSTAF.jar files are in
your classpath and then type:
<p>
<tt>&nbsp;&nbsp; java com.ibm.staf.service.stax.STAXMonitor</tt>
<p>
<p>The STAX Monitor accepts the following command line parameters:
<tt>
<br>
<br>&nbsp;&nbsp; -job &lt;jobNumber> [-closeonend]
<br>&nbsp;&nbsp; -jobparms &lt;jobParmsFile> [-closeonend]
<br>&nbsp;&nbsp; -extensions
<br>&nbsp;&nbsp; -properties [-staxMachine &lt;machineName>] [-staxServiceName &lt;serviceName>]
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [-eventMachine &lt;machineName>] [-eventServiceName &lt;serviceName>]
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [-noStart]
<br>&nbsp;&nbsp; -version
<br>&nbsp;&nbsp; -help
</tt>

<p><tt>-job</tt> specifies an existing job ID
to monitor.  This option will resolve variables.
<P><tt>-closeonend</tt> specifies that the STAX
Monitor GUI should be closed when the monitored job ends.  By default, the STAX Monitor GUI remains
open when the monitored job ends.
<p><tt>-jobparms</tt> specifies a Job Parameters
File for which a new STAX job should be submitted (and monitored, if specified in the Job Parameters
File).  A Job Parameters File can be created by using the File Save or File Save As option on the
STAX Monitor's "Start Job Parameters" window.  This option will resolve variables.
<p><tt>-extensions</tt> displays the monitor
extensions that are registered with the STAX Monitor.
<p><tt>-properties</tt> specifies to update
one or more properties for the STAX Monitor.
<p><tt>-staxMachine</tt> specifies the name of 
the machine where the STAX service is running.  This option will resolve variables.
<p><tt>-staxServiceName</tt> specifies the name
used to register the STAX service.  This option will resolve variables.
<p><tt>-noStart</tt> specifies to not start
the STAX Monitor after updating its properties.
<p><tt>-version</tt> displays the version of the
STAX Monitor.
<p><tt>-help</tt> displays help information for
the STAX Monitor.

<h3>Examples Starting the STAX Monitor Using Parameters</a></h3>
<p>
Start the STAX Monitor specifying to monitor a current running STAX job with job ID 2:
<p><tt>
java -jar STAXMon.jar -job 2
</tt>
<p>
Start the STAX Monitor specifying to submit a new STAX job defined by Job Parameters File 
"C:\Documents and Settings\Administrator\Test6":
<p><tt>
java -jar STAXMon.jar -jobParms "C:\Documents and Settings\Administrator\Test6"
</tt>
<p>
Update properties for the STAX Monitor, such as setting the STAX service machine
to server1.ibm.com and start the STAX Monitor:
<p><tt>
java -jar STAXMon.jar -properties -staxMachine server1.ibm.com
</tt>
<p>
Update properties for the STAX Monitor, such as setting the name of the STAX
service to STAX2, but don't start the STAX Monitor:
<p><tt>
java -jar STAXMon.jar -properties -staxServiceName STAX2 -noStart
</tt>

<h2><a name="Header_MonProperties" href="#ToC_MonProperties">Setting STAX Monitor Properties</a></h2>

<p>
The first time you start the STAX Monitor, the "STAX Monitor Properties" window will be displayed
(unless you specify the -properties option when starting the STAX Monitor).
<p>
The "STAX Monitor Properties" window contains five main tabs to allow
properties for the STAX Monitor to be specified.
<p>
<ol>
<li><b>"Machine Info" tab:</b>
  <p>
  This tab allows you to specify the machine and service name of the STAX Service
  to which the STAX Monitor will be communicating.
  <p>
  <ul>
  <li>Specify the machine and service name of the STAX Service machine:
  <p>
  <ol type="a">
  <li><b>STAX Machine</b> - Specify the name of the machine where the
  STAX service is running.  It defaults to the local machine (the
  machine where you're running the STAX Monitor).
  <p>
  <li><b>STAX Service Name</b> - Specify the name used to register the
  STAX service.  It defaults to STAX. Typically, this value does not
  need to be changed.
  </ol>
  <p>
  <li>Displays the machine name and service name of the Event Service used by the
  STAX Service:
  <p>
  <ol type="a">
  <li><b>Event Machine</b> - Displays the name of the Event Service machine used
  by the STAX service.  It defaults to the specified STAX Machine if it cannot
  be obtained by submitting a "LIST SETTINGS" request to the specified STAX machine
  and STAX service.  This field cannot be edited.
  <p>
  <li><b>Event Service Name</b> - Displays the name of the Event Service used by
  the STAX service.  It defaults to Event if it cannot be obtained by submitting a
  "LIST SETTINGS" request to the specified STAX machine and STAX service.
  This field cannot be edited.
  </ol>
  </ul>
  <p>
  Following is an example of the "Machine Info" tab:
  <p>
  <img src="staxmon2.gif" alt="STAX Monitor Properties window - Machine Info">
  <p>
<li><b>"Options" tab:</b>
  <p>
  This tab allows you to specify options for the STAX Monitor:
  <p>
  <ol type="a">
  <li><b>Update Process Monitor information every x seconds</b> -
  Specify how frequently to refresh the Monitor information for processes.
  The default is 60 (every minute).  The valid values are 0 or greater (0
  indicates that the process monitor information should never be displayed).
  Saved updates to the seconds value will apply to all new STAX Monitor
  windows.
  <p>
  <li><b>Update Elapsed Time every x seconds</b> -
  Specify how frequently to refresh the elapsed times with the STAX Monitor.
  The default is 1 (every second).  The valid values are 0 or greater (0
  indicates that the elapsed times should never be displayed).
  Saved updates to the seconds value will apply to all new STAX Monitor
  windows.
  <p>
  <li><b>Show Process &lt;No STAX Monitor Information> message</b> -
  Specify whether to show the "&lt;No STAX Monitor Information>" message for
  processes that have no Monitor Information available.
  The default is to not display this message.
  <p>
  <li><b>Limit number of Messages displayed to</b> -
  Specify the limit of the number of messages that can be displayed in the
  Messages table.  The default is to limit the number of messages to 200
  (only the most recent 200 messages will be displayed in the Messages table).
  <p>
  <li><b>Messages Font Name</b> -
  Select the font name to use when displaying the Messages table.
  The default is the "Dialog" font name.
  <p>
  <li><b>Log Viewer Save As Directory</b> -
  Enter or browse to select the default directory to use when when displaying
  STAX log file and selecting the "File->Save As Text..." or "File->Save As Html..."
  menu item.  If not specified, it will use the user's default directory which
  is typically the "My Documents" folder on Windows or the user's home
  directory on Unix.
  </ol>
  <p>
  Following is an example of the "Options" tab with its default values:
  <p>
  <img src="staxmon2a.gif" alt="STAX Monitor Properties window - Options">
  <p>
<li><b>"Testcases" tab:</b>
  <p>
  This tab allows you to specify testcase options for the STAX Monitor:
  <p>
  <ol type="a">
  <li><b>Select the columns that will appear in the "Testcase Info" panel</b> -
  Specify which columns are displayed in the "Testcase Info" table.  The
  possible columns are: "Name", "PASS", "FAIL", "Start Date-Time",
  "Status Date-Time", "Duration", "Starts", and "Information".
  <p>
  <li><b>Default Sort Column</b> -
  Specify the column by which the "Testcase Info" table will be sorted.
  <p>
  <li><b>Sort Order</b> -
  Specify whether to sort the "Testcase Info" table in ascending or
  descending order.
  <p>
  <li><b>Automatically resize table columns</b> -
  Specify whether to automatically resize the table columns in the
  "Testcase Info" table.  If this option is selected, the column will
  automatically resize to show the complete text for that column.  If the
  option is not selected, the column will not automatically resize to show
  the complete text for that column; this setting is useful if you want to
  resize any of the columns are retain the updated sizings when the
  table is updated.
  <p>
  <li><b>Restore Default Settings</b> -
  Click this button to restore the default settings for the Testcase options.
  <p>
  </ol>
  <p>
  Following is an example of the "Testcases" tab with its default values:
  <p>
  <img src="staxmon2e.gif" alt="STAX Monitor Properties window - Testcases">
  <p>
<li><b>"Sub-jobs" tab:</b>
  <p>
  This tab allows you to specify whether to automatically monitor sub-jobs.
  Choose one of the following options:
  <p>
  <ol type="a">
  <li><b>Automatically monitor sub-jobs</b> - A new STAX Monitor window will be opened
  for every sub-job that is started by the current job.
  <p>
  <li><b>Automatically monitor recommended sub-jobs</b> - A new STAX Monitor window
  will be opened only for sub-jobs whose &lt;job> element attribute "monitor" is set
  to a true value.  This is the default.
  <p>
  <li><b>Never automatically monitor sub-jobs</b> - Sub-jobs will never be automatically
  monitored.
  </ol>
  <p>
  Following is an example of the "Sub-jobs" tab:
  <p>
  <img src="staxmon2b.gif" alt="STAX Monitor Properties window - Sub-jobs">
  <p>
<li><a name="MonExtensionsTab"><b>"Extensions" tab:</b></a>
  <p>
  This tab allows you to display the monitor extensions that are registered with the STAX
  Monitor.
  <p>
  <ul>
  <li><b>Name</b> - The name of the extension specified in the extension jar file's
      manifest.
  <li><b>Version</b> - The version of the extension, if provided in the extension
      jar file's manifest, or <N/A> if not provided.
  <li><b>Source</b> - The source machine where the extension jar file containing
  this monitor extension resides.  It will either be the name of the STAX service
  machine or local if the extension was specified via the "Extension Jars" tab.
  <li><b>Jar File Name</b> - The name of the extension jar file that contains this
  monitor extension.
  <li><b>Overrides</b> - If not blank, the name of the extension jar file that
  contains an overridden monitor extension.
  <li><b>Prereq</b> - The minimum required version of the STAX Monitor that this
      extension requires, if provided in the extension jar file's manifest, or
      <N/A> if not provided.
  <li><b>Description</b> - A description of the extension jar file, if provided
      in the extension jar file's manifest, or <N/A> if not provided
  </ul>
  <p>
  Following is an example of the "Extensions" tab with some monitor extensions
  registered:
  <p>
  <img src="staxmon2d.gif" alt="STAX Monitor Properties window - Extensions">
  <p>
<li><a name="MonExtensionJarsTab"><b>"Extension Jars" tab:</b></a>
  <p>
  This tab allows you to specify any local extension jar files containing STAX Monitor
  extensions that you want to register.  Note that as of STAX V1.5.0, any STAX
  monitor extensions that are registered with the STAX service will be automatically
  made available to the STAX Monitor.  You should only specify local extension jar files
  that are not already registered with the STAX service or that contain monitor
  extensions that you want to override (e.g. with a later version of the extension).
  <p>
  <ul>
  <li><b>Local Extension Jar Files</b> - Specify the fully-qualified names of jar files
  on the local system that contain monitor extensions to be registered.
  You may specify as many extension jar files as needed.  This is an optional field.
  <ul>
  <li>Click on the "Add" button to add a new extension jar file.
  <li>To delete an Extension Jar File that you already added, select it from the list and
  click on the "Delete" button.
  <li>Click on the "Delete All" button to delete all extension jar files in the list.
  </ul>
  </ul>
  <p>
  Following is an example of the "Extension Jars" tab with some extension jar files added:
  <p>
  <img src="staxmon2c.gif" alt="STAX Monitor Properties window - Extension Jars">
  <p>
</ol>
<p>
Click on the "Save" button to save any changes (or the "Cancel" button to end without
saving changes).  The next window that will be displayed is the "STAX Job Monitor" window
which contains a list of active jobs.
<p>
When you close and restart the STAX Monitor, the "STAX Properties" panel options last
entered are restored.
<p>
Note that if this is is not the first time the STAX Monitor has been started,
the "STAX Job Monitor" window is displayed first instead of the "STAX Monitor Properties" window.
To update the properties from the "STAX Job Monitor" window, select "File" from the menu bar
and then select "Properties..." in order to display the "STAX Monitor Properties" window.
You must stop and restart the STAX Monitor before the properties update will take place.
<p>

<h2><a name="Header_MonJobList" href="#ToC_MonJobList">Displaying a List of Active Jobs</a></h2>

<p>
Following is an example of the "STAX Job Monitor" window with no jobs currently running or monitored:
<p>
<img src="staxmon1.gif" alt="STAX Active Jobs window with no jobs">
<p>
The "STAX Job Monitor" displays STAX jobs that are currently running on the specified STAX machine
(as well as completed jobs which are currently being monitored) in the "Active Jobs" table.
Sub-jobs will appear as separate jobs and are also displayed in the "STAX Job Monitor" window.
<p>
The <b>File</b> menu bar contains the following menu items:
  <ul>
  <li><b>Properties...</b> - This option displays the STAX Job Monitor Properties dialog.
  <li><b>Submit New Job...</b> - This option displays the Start New Job dialog.
  <li><b>Resubmit Previous Job</b> - This option resubmits that last job that was submitted.
  <li><b>Exit</b> - Selecting this option closes the STAX Job Monitor window.
  </ul>
<p>
The <b>Display</b> menu bar contains the following menu items:
  <ul>
  <li><b>Display STAX Service Log</b> - Selecting this option causes the STAX Service Log to be displayed.
  <li><b>Display Selected Job's Log</b> - Selecting this option causes the Job Log for the currently selected Job to be displayed.
  <li><b>Display Selected Job's User Log</b> - Selecting this option causes the Job User Log for the currently selected Job to be displayed.  If there are no entries in the Job User Log, then an informational message will be displayed to indicate that there are no entries in the log.
  <li><b>Display Recent Logs</b> - Moving the cursor over this option will
  display a sub-menu containing the last 20 STAX Job/User logs that have been
  displayed since the STAX Monitor was started.  Selecting a STAX Job/User log
  from the sub-menu will result in the log being displayed again (with the
  current content of the log).  If you move the cursor over an item in the
  sub-menu, the "Start" record from the job log will be displayed as a
  tool tip.
  <li><b>Display Job Log...</b> - Selecting this option allows you to display the Job Log for any Job ID.
  <li><b>Display Job User Log...</b> - Selecting this option allows you to display the Job User Log for any Job ID.  If there are no entries in the Job User Log, then an informational message will be displayed to indicate that there are no entries in the log.
  <li><b>Display STAX JVM Log</b> - Selecting this option causes the JVM Log
  for the STAX service to be displayed.  Only the entries in the current JVM Log from the last time
  the JVM was created are shown (though you can later use the "View->Show All" option to
  change it to display all entries in the JVM Log).
  This option is only enabled if STAF V3.2.1 or later is running on the STAX Monitor machine.
  Refer to the <a href="#Header_DisplayJVMLog">"Displaying a JVM Log"</a> section
  for more information on this option.
  <li><b>Display Other JVM Log...</b> - Selecting this option allows you to display a JVM Log for
  any service currently registered on any machine.
  This option is only enabled if STAF V3.2.1 or later is running on the STAX Monitor machine.
  Refer to the <a href="#Header_DisplayJVMLog">"Displaying a JVM Log"</a> section
  for more information on this option.
  </ul>
<p>
The "Active Jobs" table shows the following information for each active job:
<ul>
<li><b>Job ID</b> - Job number for an active job.
<li><b>Job Name</b> - Name specified for the job, or &lt;N/A> if no job name was specified when
submitting the job for execution.
<li><b>Monitored</b> - A green ball indicates that the job is currently being monitored.  No green
ball indicates that the job is currently running but is not being monitored.
<li><b>Function</b> - Name of the function that was called to start the job.
<li><b>Status</b> - "Pending" if the job is in the process of being submitted for execution,
"Running" if the job is currently running, or "Complete" if the job has completed but is still
being monitored.
<li><b>Started</b> - Date and time that the job was started.  The format is YYYYMMDD-HH:MM:SS.
<li><b>Elapsed Time</b> - The elapsed time that the job has been running (or if the status is
complete, the elapsed time that the job ran).  The format is HH:MM:SS.  If the elapsed time exceeds
99 hours, the format is HHH:MM:SS.  Note that if you are monitoring a remote
STAX service machine, then in order for the elapsed times to be accurate,
the STAX service machine must be running STAF version 3.4.2 or later.
<li><b>Result</b> - A "string" version of the Job Result.  Private data will be masked.
</ul>
<P>
Following is the "STAX Job Monitor" window which shows four active jobs:
<p>
<img src="staxmon5.gif" alt="STAX Active Jobs window with 4 jobs running">
<p>
If you right-mouse-click on a job in the "Active Jobs" table,
a popup menu is displayed with the following options:
  <ul>
  <li><b>Show Monitor window</b> - This option is only enabled if you are
  currently monitoring the selected job.  Selecting this option
  causes the "Job Monitor" window for this job to be brought to the foreground.
  <li><b>Start Monitoring</b> - This option is only enabled if you are
  not currently monitoring the selected job and the selected job has a "Running"
  status.  Selecting this option causes a Job Monitor window to be created for this job.
  <li><b>Display STAX Service Log</b> - This option allows you to view the STAX
  Service Log.
  <li><b>Display Job Log</b> - This option is always enabled.  Selecting this
  option causes the Job Log to be displayed.
  <li><b>Display Job User Log</b> - This option is always enabled.  Selecting
  this option causes the Job User Log to be displayed.  If there are no entries
  in the Job User Log, then an informational message will be displayed to
  indicate that there are no entries in the log.
  <li><b>Terminate Job</b> - This option is enabled for all jobs with a "Running" status.
  Selecting this option causes the job to be terminated.  Terminating a parent
  job will terminate any sub-jobs as well.
  </ul>
<p>

<h2><a name="Header_MonSubmitJob" href="#ToC_MonSubmitJob">Submitting a New Job for Execution</a></h2>

<p>The STAX Monitor provides a graphical user interface for submitting an EXECUTE request
(as an alternative to issuing an EXECUTE request via the command line).
To submit a new job for execution from the "STAX Job Monitor" window,
click on the "Submit New Job..." button or select "File" from the menu bar
and then select "Submit New Job...".  A "Start Job Parameters"
window will be displayed.
<p>
Note that when you close and restart the STAX Monitor, the options on the
"Start Job Parameters" panel last entered are restored.
<p>
The "STAX Job Parameters" window contains five main tabs to allow job
execution parameters to be specified.
<p>
<ol>
<li><b>"Job Info" tab:</b>
  <p>
  This tab allows you to specify the following job execution parameters:
  <ul>
  <p>
  <li><b>XML Job File</b> - Specify the fully-qualified name of the XML file to
  be executed.
  You may select "local machine" and enter the local file name, or select
  "other machine" and specify the machine and file names.
  For XML files on local machines, a "Browse..." button is provided which
  displays a "Select an XML Job Definition File" panel to allow you to select the
  file.
  <p>
  <li><b>Job Name</b> - Specify a name which identifies the job.  This field is optional.
  <p>
  <li><b>Monitor</b> - Select "Yes" or "No" to indicate whether you want to monitor
       the job you are submitting.
  </ul>

  <p>
  Following is an example of the "Start Job Parameters" panel with the "Job Info" tab
  selected and with some fields filled in:
  <p>
  <img src="staxmon3.gif" alt="Start Job Parameters - Job Info tab">
  <p>
<li><b>"Function" tab:</b>
  <p>
  This tab allows you to specify the start function parameter for the job:
  <p>
  <ul>
  <li><b>Start Function</b> - Select "default" to start executing the job at its
  default start function.  Select "other" to specify the name of the function
  to be called to begin the job.  If you select "default" and the XML document does
  not contain a &lt;defaultcall> element, you will get a STAXInvalidStartFunctionException
  if you try to execute the job.  You can pass parameters to the Start Function
  by specifying the parameters in the Arguments field.
  </ul>
  <p>
  Following is an example of the "Start Job Parameters" panel with the "Function" tab
  selected and with function arguments specified:
  <p>
  <img src="staxmon3a.gif" alt="Start Job Parameters - Function tab">
  <p>
  <p>
<li><b>"Scripts" tab:</b>
  <p>
  This tab allows you to specify Script parameters:
  <p>
  <ul>
  <li><b>Scripts</b> - Specify any Python code to be executed.
  You may specify as many Script parameters as needed.  This is an optional field.
  See the <a href="#Header_Execute">"EXECUTE"</a> section for more information
  on a SCRIPT parameter.
  <p>
  Click on the "Add" button to add a new Script parameter.  To edit a script already in the
  list, double click on the script.
  To delete a Script parameter that you already added, select it from the list and
  click on the "Delete" button.
  Click on the "Delete All" button to delete all Scripts in the list.
  </ul>
  <p>
  Following is an example of the "Start Job Parameters" panel with the "Scripts" tab
  selected and with some fields filled in:
  <p>
  <img src="staxmon3b.gif" alt="Start Job Parameters - Scripts tab">
  <p>
<li><b>"Script Files" tab:</b>
  <p>
  This tab allows you to specify Script File parameters:
  <p>
  <ul>
  <li><b>Script File Machine</b> - Specify the machine where the script files are located.
  You may select one of the following:
    <ul>
    <li><b>Local machine</b> - to indicate the script files are located on
    the local STAX Monitor machine.
    <li><b>XML Job File machine</b> - to indicate the script files are located 
    on the same machine specified for the XML Job File.  This is the default.
    <li><b>Other machine</b> - to specify the name of the machine where the
    script files are located
    </ul>
  <p>
  <li><b>Script Files</b> - Specify the fully-qualified names of script files
  that contain Python code to be executed.
  You may specify as many script files as needed.  This is an optional field.
  See the <a href="#Header_Execute">"EXECUTE"</a> section for more information
  on a SCRIPTFILE parameter.
    <ul>
    <li>Click on the "Add" button to add a new script file.
    <li>To edit the name of a script file already in the list, double click on the script file name.
    <li>To delete a script file that you already added, select it from the list and
    click on the "Delete" button.
    <li>Click on the "Delete All" button to delete all script files in the list.
    </ul>
  </ul>
  <p>
  Following is an example of the "Start Job Parameters" panel with the "Script Files" tab
  selected and with some fields filled in:
  <p>
  <img src="staxmon3c.gif" alt="Start Job Parameters - Script Files tab">
  <p>
<li><b>"Log Options" tab:</b>
  <p>
  This tab allows you to specify the log parameters:
  <p>
  <ul>
  <li><b>Clear Logs</b> - Select "Enabled", "Disabled", or "Default" to indicate whether
  the STAX Job and Job User logs should be deleted before the job is executed.
  Selecting "Enabled" specifies to delete the logs.  Selecting "Disabled" specifies
  not to delete the logs.  Selecting "Default" specifies to use the STAX service
  setting for "Clear Logs".
  <p>
  <li><b>Log TC Elapsed Time</b> - Select "Enabled", "Disabled", or "Default" to
  indicate whether to log the elapsed time in the testcase summary records at the
  end of the STAX Job log and in a LIST TESTCASES request.  Selecting "Enabled"
  specifies to log the elapsed time for testcases.  Selecting "Disabled"
  specifies not to log the elapsed time for testcases.  Selecting "Default"
  specifies to use the STAX service setting for "Log TC Elapsed Time".
  <p>
  <li><b>Log TC Num Starts</b> - Select "Enabled", "Disabled", or "Default" to
  indicate whether to log the number of times a testcase is started in the
  testcase summary records at the end of the STAX Job log and in a LIST TESTCASES
  request.  Selecting "Enabled" specifies to log the number of testcase starts.
  Selecting "Disabled" specifies not to log the number of testcase starst.
  Selecting "Default" specifies to use the STAX service setting for "Log TC Num Starts".
  <p>
  <li><b>Log TC Start/Stop</b> - Select "Enabled", "Disabled", or "Default" to
  indicate whether to log "Start" and "Stop" level records each time a testcase
  begins or ends in the STAX Job log.  Selecting "Enabled" specifies to log the
  testcase "Start" and "Stop" records.  Selecting "Disabled" specifies not to
  log the testcase "Start" and "Stop" records.  Selecting "Default" specifies to
  use the STAX service setting for "Log TC Start/Stop".
  <p>
  <li><b>Python Output</b> - Select a value to indicate where Python output for
  the STAX job should be redirected.
  Selecting "Default" specifies to use the STAX service setting for "Python Output".
  Selecting "JobUserLog" indicates to log the Python output in the STAX Job User log.
  Selecting "Message" indicates to send the Python output to the STAX Monitor and
  display it in the Messages panel.
  Selecting "JobUserLogAndMsg" indicates to log the Python output in the STAX Job
  User log and to send it to the STAX Monitor and display it in the Messages panel.
  Selecting "JVMLog" indicates to write the Python output in the JVM Log for the STAX
  service using the following format so that you will know which STAX job originated
  the output and at what time:  <tt>&lt;Timestamp> [JobID: &lt;JobID>] &lt;Python Output></tt>
  <p>
  <li><b>Python Log Level</b> - Select a value to indicate the STAF logging level
  to use for Python stdout if Python output is redirected to the STAX Job User log.
  Selecting "Default" specifies to use the STAX service setting for "Python Log Level".
  </ul>
  <p>
  Following is an example of the "Start Job Parameters" panel with the "Log Options" tab
  selected:
  <p>
  <img src="staxmon3d.gif" alt="Start Job Parameters - Log Options tab">

<li><b>"Breakpoints" tab:</b>
  <p>
  This tab allows you to specify breakpoints for the STAX job:
  <p>
  <ul>
  <li>The table shows all line/function breakpoints that will be specified via the
  BREAKPOINT option when the job is submitted.
  <p>
  <li>If the <b>Set breakpoint on first function</b> checkbox is selected, the
 BREAKPOINTFIRSTFUNCTION option will be specified when the job is submitted.
  <p>
 <li>If the <b>Set breakpoint on subjob first function</b> checkbox is selected, the
 BREAKPOINTSUBJOBFIRSTFUNCTION option will be specified when the job is submitted.
  <p>
  <li><b>Add Breakpoint Line...</b> allows you to add a line breakpoint.  Clicking
  the button will display a panel where you can specify the line number (required),
  XML file (optional), and Machine (optional).
  <p>
  <li><b>Add Breakpoint Function...</b> allows you to add a function breakpoint.  Clicking
  the button will display a panel where you can specify the case-sensitive function
  name (required).
  <p>
  <li><b>Delete</b> allows you to delete the currently selected breakpoint.
  <p>
  <li><b>Delete All</b> allows you to delete all of the breakpoints.
  <p>
  <li>Double-clicking on a row in the table allows you to edit the selected
  breakpoint.
  </ul>
  <p>
  Following is an example of the "Start Job Parameters" panel with the "Breakpoints" tab
  selected:
  <p>
  <img src="staxmon3e.gif" alt="Start Job Parameters - Breakpoints tab">

</ol>

<h3>Saving Execute Information in a Job Parameters File</h3>

You may save the information you specify to start a new job in a Job Parameters File. This
is particularly useful when you plan on submitting the job with the parameters specified (or
similar parameters) multiple times.
To save the job parameters in a file, select "File" from the menu bar on the "Start Job
Parameters" panel, and then select "Save As...".  A "Save Current Job Parameters as" panel
will be displayed which lets you specify the name and directory of the Job Parameters File to create.
<p>
Later, to display the "Start Job Parameters" panel with the information you previously stored in
a Job Parameters File, select "File" from the menu bar on the "Start Job Parameters" panel, and
then select "Open".  An "Open Job Parameters File" window will be displayed which lets you specify
or browse for the Job Parameters File you wish to use.  Or, if the Job Parameters File you
wish to use is one of the last ten Job Parameters Files specified, it can be selected directly when
you select "File" from the menu bar on the "Start Job Parameters" panel.
<p>
If you want to save any changed information for an existing Job Parameters File that you have
opened, select "File" from the menu bar on the "Start Job Parameters" panel, and then select "Save".

<h3>Buttons on the "Start Job Parameters" Panel</h3>

The following buttons are available at the bottom of the "Start Job Parameters" panel:
<p>
<ul>
<li><b>Submit New Job</b> - click on this button to submit the job for execution.
If the execution request is valid, the new job will appear in the "Active Jobs" table on
the "STAX Job Monitor" window.
<p>
If you selected "Yes" for the Monitor option, a "STAX Job Monitor" window for the job
is then displayed.
<p>
<li><b>Test</b> - click on this button to test whether the XML document is well-formed
and valid and that the specified execution options are valid.  The job will not be submitted for execution.
<p>
<li><b>Job Wizard</b> - click on this button to use the Job Wizard to help you select
the starting function and to specify function arguments for it.
See the <a href="#Header_JobWizard">"Using the Job Wizard"</a> section for more
information on how to use the Job Wizard.
<p>
<li><b>Close</b> - click on this button if you want to close the "STAX Job Parameters"
window without submitting the job.
<p>
<li><b>Clear all Parameters</b> - click on this button to clear all of the job
execution parameters.
</ul>
<p>

<h2><a name="Header_JobWizard" href="#ToC_JobWizard">Using the Job Wizard</a></h2>

<p>
The STAX Monitor provides a Job Wizard to help you select the
starting function for a job you want to execute and to help you
specify function arguments for it, if needed.
The Job Wizard lists all of the available
functions in a given STAX XML file, as well as the arguments that can be
specified for each function.
<p>
To use the Job Wizard, specify the fully-qualified name of the
XML file to be executed in the "XML Job File" section of the
"STAX Job Parameters" dialog (and the machine where it resides if
not on the local machine), and then click on the "Job Wizard..." button.
<p>
Here is an example of the "STAX Job Wizard" dialog that will be displayed
(when specifying C:\STAF\services\stax\libraries\STAXUtil.xml as the XML filename).
<p>
<img src="wizard1.gif" alt="STAX Job Wizard">
<p>
In the "Functions" list you will see an alphabetical list of all the functions
that are available within the specified XML file.  If the XML file designates
a default starting function via the &lt;defaultcall> element, then the default
function will be shown as "functionname (default)" in the list.
<p>
The function that is selected by default in the "Functions" list when
the "STAX Job Wizard" dialog is first displayed is determined as follows:
<ul>
<li>If "default" was selected for the "Start Function" on the "Function" tab
    of the "STAX Job Parameters" dialog:
   <ul>
   <li>If the XML file designates a default starting function via the
       &lt;defaultcall> element, the default function is selected.
   <li>Otherwise, if the XML file does not contain a &lt;defaultcall> element,
       the first function in the list is selected.
   </ul>
<li>Otherwise, if "other" is selected for the "Start Function" with a
    valid function name, that function is selected.
</ul>
<p>
Select the function you want to be the starting function for the job.
When you select a function from the list of functions, the
"Description for function &lt;Function Name>" and
"Arguments for function &lt;Function Name>" sections of the
"STAX Job Wizard" dialog will be updated within the description and
arguments for the selected function.
<p>
The "Description for function &lt;Function Name>" section to the right
of the list of functions displays additional information for that
function if a &lt;function-prolog> or &lt;function-description>
element is provided for that function in the specified XML file.
<p>
If you click on the "Details..." button in the "Description for
function &lt;Function Name>" section, a new dialog will be shown which
includes not only the information from the function's
&lt;function-prolog>/&lt;function-description> element, but also the
information from the function's &lt;function-epilog> element,
if provided in the specified XML file.
<p>
<img src="wizard3.gif" alt="STAX Job Wizard">
<p>
The lower part of the Job Wizard dialog shows the arguments that can be
specified for the selected function.
<p>
Arguments for the selected function will be one of the following types (the
type will be highlighted in blue in the Job Wizard):
<ul>
<li>None - No arguments may be specified</li>
<li>Single - A single argument may be specified</li>
<li>List - A list of arguments may be specified</li>
<li>Map - A map of arguments may be specified</li>
<li>Undefined - The function has defined no arguments (but the STAXArg
argument may be specified)
</li>
</ul>
When the "STAF" function is selected (as shown in the previous
"STAX Job Wizard" dialog), it shows that it accepts a "List" of three
required arguments.
<p>
The following "STAX Job Wizard" panel would be shown if you selected the
"STAXUtilCopyFiles" function from the "Functions" list.  It's "Arguments
for function &lt;Function Name>" section shows that it accepts a "Map"
of arguments, both required and optional arguments.
<p>
<img src="wizard2.gif" alt="STAX Job Wizard">
<p>
If the Description for an argument does not fit in the column, it will
end with "..." and the full description can be viewed by clicking the
"More..." button.
<p>
<img src="wizard9.gif" alt="STAX Job Wizard">
<p>
Required arguments will initially have a red background.  After a value
has been specified for the required argument, its background will change to
green.  Optional arguments will have a green background.
<p>
To specify a value for a parameter, you may either click on the Edit... button
for the argument, which will display a multi-line input dialog, or click in
the Value column for the argument and type in the single-line value (note that
you must press Enter to save the changes).
<p>
<img src="wizard6.gif" alt="STAX Job Wizard">
<p>
If the default value for an optional argument has been changed, and you wish
to restore the default value, click on the "Default" button.
<p>
After you have filled in all of the required arguments (and modified the
values of any optional arguments), all the arguments will have a green
background.
<p>
Here's the "STAX Job Wizard" panel with function "STAF" selected after
values have been entered for all of its required arguments:
<p>
<img src="wizard4.gif" alt="STAX Job Wizard">
<p>
To see an example of the XML syntax for calling the selected function,
click on the "Preview XML..." button.
<p>
<img src="wizard5.gif" alt="STAX Job Wizard">
<p>
To save the function and argument values you have specified to the STAX
Job Parameters dialog, click on the "Save" button.  A confirmation dialog
will be displayed.
<p>
<img src="wizard7.gif" alt="STAX Job Wizard">
<p>
The values you specified will be saved in the STAX Job Parameters dialog.
<p>
<img src="wizard8.gif" alt="STAX Job Wizard">
<p>
Note that after you save the arguments in the Job Wizard, you will no longer
be able to directly edit the arguments in the STAX Job Parameters dialog.  If
you re-open the Job Wizard, all the arguments you specified will automatically
be filled in, and you can modify them.  If you wish to update the arguments
in the STAX Job Parameters dialog, you must click on the "Clear" button and
manually specify the arguments.
<p>

<h2><a name="Header_MonitorJob" href="#ToC_MonitorJob">Monitoring a Job</a></h2>

<p>
The following is an example of the "STAX Job Monitor" window for a job:
<p>
<img src="staxmon4.gif" alt="STAX Job Monitor window for a job">
<p>
The <b>File</b> menu bar contains the following menu items:
  <ul>
  <li><b>Exit</b> - This option is always enabled.  Selecting this
  option closes the STAX Job Monitor window.
  </ul>
<p>
The <b>Display</b> menu bar contains the following menu items:
  <ul>
  <li><b>Display Job Log</b> - This option is always enabled.  Selecting this
  option causes the Job Log to be displayed.
  <li><b>Display Job User Log</b> - This option is always enabled.  Selecting
  this option causes the Job User Log to be displayed.  If there are no entries
  in the Job User Log, then an informational message will be displayed to
  indicate that there are no entries in the log.
  </ul>
<p>
The <b>View</b> menu bar contains the following menu items, in three sections, where each
section represents the panel where the item will be displayed.  The first section corresponds
to tabs that will show up in the top-left panel.  The second section corresponds to tabs that
will show up in the top-right panel.  The third section corresponds to tabs that will show up
in the bottom panel.
  <ul>
  <li><b>Active Job Elements</b>
  <li><b>Processes</b>
  <li><b>STAFCmds</b>
  <li><b>Sub-jobs</b>
  <li><b>Debug</b>
  <li><b>TestCase Info</b>
  <li><b>Messages</b>
  <li><b>Current Selection</b>
  </ul>

<p>
The "STAX Job Monitor" window contains seven main tabs:
<p>
  <ol>
  <li><b>Active Job Elements</b>:
  <p>
  <img src="activejob.gif" alt="STAX Monitor Properties window">
  <p>
  This tab displays the currently executing &lt;block>,
  &lt;process>, &lt;stafcmd>, and &lt;job> elements for a job in a tree format, in order
  to show the hierarchy of the currently executing elements.
  <P>
  For each &lt;process>, &lt;stafcmd>, and &lt;job> element represented in the tree, the elapsed
  time that the process, stafcmd, or job element has been running is displayed to the right
  of the process, stafcmd, or job name in parenthesis.  The format for displaying the elapsed
  time is HH:MM:SS.  If the elapsed time exceeds 99 hours, the format is HHH:MM:SS.
  Note that if you are monitoring a remote
  STAX service machine, then in order for the elapsed times to be accurate,
  the STAX service machine must be running STAF version 3.4.2 or later.
  <p>
  For each &lt;process> element represented in the tree, if the process generates
  STAF Monitor Service messages (see section 8.9 of the STAF User's Guide),
  the current monitor message is displayed to the right of the process name and elapsed time.
  The monitor information is periodically refreshed while the process is running.
  If the process has not written any STAF Monitor information,
  the text "No STAF Monitor information available" is displayed.
  <p>
  If you right-mouse-click on a block in the "Active Job Elements" panel,
  a popup menu is displayed with the options "Hold", "Release", and
  "Terminate" which allows you to control the execution of the block.
  Holding/Releasing a block which contains sub-jobs will not hold/release the sub-jobs.
  Terminating a block which contains sub-jobs will terminate the
  sub-jobs.
  <p>
  The color of the block icon for each block indicates the state of the
  block:
  <ul>
  <li>A block that is currently running has a green block icon.
  <li>A block that has been held has a red block icon.
  <li>A block that is held by a parent block has a yellow block icon.
  </ul>
  <p>
  If you right-mouse-click on a Sub-job in the "Active Job Elements" panel,
  a popup menu is displayed with the options "Start Monitoring", "Display Job Log", "Display Job User Log", and "Terminate Job".

  <p>
  <li><b>Processes</b>:
  <p>
  <img src="activeproc.gif" alt="STAX Monitor Properties window">
  <p>
  This tab displays the currently executing &lt;process> elements for a job in a table.
  <P>
  For each &lt;process> the elapsed time (HH:MM:SS) that the process element has been
  running is displayed in the table. The format for displaying the elapsed
  time is HH:MM:SS.  If the elapsed time exceeds 99 hours, the format is HHH:MM:SS.
  Note that if you are monitoring a remote
  STAX service machine, then in order for the elapsed times to be accurate,
  the STAX service machine must be running STAF version 3.4.2 or later.
  <p>
  For each &lt;process> element represented in the table, if the process generates STAF
  Monitor Service messages, the current monitor message is displayed in the "Status" column.
  The monitor information is periodically refreshed while the process is running.
  <p>

  <p>
  <li><b>STAFCmds</b>:
  <p>
  <img src="activecmd.gif" alt="STAX Monitor Properties window">
  <p>
  This tab displays the currently executing  &lt;stafcmd> elements for a job in a table.
  <P>
  For each &lt;stafcmd> the elapsed time (HH:MM:SS) that the stafcmd element has been
  running is displayed in the table. The format for displaying the elapsed
  time is HH:MM:SS.  If the elapsed time exceeds 99 hours, the format is HHH:MM:SS.
  Note that if you are monitoring a remote
  STAX service machine, then in order for the elapsed times to be accurate,
  the STAX service machine must be running STAF version 3.4.2 or later.
  <p>
  Note that this tab is not displayed by default.  To view this tab, select the "View"
  menu bar and then select "Active STAFCmds".
  <p>

  <li><b>Sub-jobs</b>:
  <p>
  <img src="activesub.gif" alt="STAX Monitor Properties window">
  <p>
  This tab displays information about both active and completed sub-jobs.
    <p>
  If you right-mouse-click on a Sub-job in the "Sub-jobs" tab,
  a popup menu is displayed with the options "Start Monitoring", "Display Job Log",
  "Display Job User Log", and "Terminate Job".
  <p>

  <li><b>TestCase Info</b>:
  <p>
  <img src="testcase.gif" alt="STAX Monitor Properties window">
  <p>
  This tab displays the following information for each testcase:
  <p>
  <ul>
  <li>Name of each &lt;testcase> element that has been executed
  <p>
  <li>Cummulative number of its passes from when the job started executing
  <p>
  <li>Cummulative number of its fails from when the job started executing
  <p>
  <li>Timestamp when the testcase started.
  <p>
  <li>Timestamp when the testcase was last updated.  Note that this column
  is not displayed by default.  The column displayed in the "Testcase Info"
  table can be specified in the STAX Monitor Properties "Testcases" tab.
  <p>
  <li>Cummulative duration (e.g. committed elapsed time) for the testcase
      since the beginning of the job.
      The format is HH:MM:SS (or HHH:MM:SS if over 99 hours) or &lt;Pending> if
      the testcase has not yet ended at least once yet via a &lt;/testcase> or
      STOP TESTCASE request.
      <p>
      If a testcase is started more than once via a &lt;testcase> element or a
      START TESTCASE request, the elapsed times for each testcase started
      are accumulated.  So, it is possible that the elapsed time for a testcase
      is more than the elapsed time for a job if the same testcase is run
      in parallel multiple times.
      <p>
      If you start monitoring an existing job and "Log TC Elapsed Time" was
      not enabled for the job, the duration for testcases which have
      already been started appears as ??:??:?? until a status for the
      testcase is recorded (or the testcase ends).
  <p>
  <li>Number of times the testcase has been started since the beginning of
      the job (via a &lt;testcase> element or via a START TESTCASE request
      or via an UPDATE TESTCASE FORCE request)
      <p>
      If you start monitoring an existing job and "Log TC Num Starts" was
      not enabled for the job, the number of starts for testcases which have
      already been started appears as ? until a status for the
      testcase is recorded (or the testcase ends).
  <p>
  <li>Last status message if provided via a &lt;tcstatus> element or via an UPDATE
      TESTCASE request.
  </ul>
  <p>
  Note that at least one testcase status (pass or fail) must be recorded via a &lt;tcstatus>
  element in order for a testcase to appear in the
  "Testcase Information" panel (if the testcase's mode is not set to 'strict').
  <p>Note that the column by which the table is being sorted is indicated in
  the column header with an up-arrow icon (ascending) or a down-arrow icon
  (descending).  You can click on a column header to sort the table by that
  column in ascending order.  To sort the table by a column in descending order,
  press the "Shift" key on the keyboard and click on the column header.  You can
  specify which columns are displayed, as well as the default sort column and
  order, in the STAX Monitor Properties "Testcases" tab.

  <p>
  <li><b>Messages</b>:
  <p>
  <img src="message.gif" alt="Messages Panel">
  <p>
  This tab displays the messages (and their timestamps)
  from each message sent by a &lt;message> element or &lt;log message="1"> element
  in the XML document or via a SEND MESSAGE request or via a LOG SEND MESSAGE request.
  The STAX service can also generate messages via its default signal handlers.
  <p>
  You can select the font name used when displaying the table in the Messages tab panel
  via the "Messages Font Name" on the "Options" tab of the STAX Monitor Properties
  panel.  Here is an example of the dialog that is shown when the Messages tab panel
  is displayed if you selected "Monospaced" for the "Messages Font Name":
  <p>
  <img src="message2.gif" alt="Messages 2 Panel">
  <p>
  <li><b>Current Selection</b>:
  <p>
  <img src="current.gif" alt="Current Selection Panel">
  <p>
  This tab shows more details about an element displayed in the "Active
  Job Elements", "Active Processes", "Active STAFCmds", or "Sub-jobs" panels when you click on that element in
  the panel.
  <p>
  <li><b>Debug</b>:
  <p>
  This tab displays the thread/breakpoint information for the job.
  <p>
  <img src="debug1.gif" alt="Debug tab">
  <p>
  The "Threads" tab shows a tree view of all of the currently running threads.
  <p>
  <img src="debug2.gif" alt="Threads tab">
  <p>There
 will always be a thread 1.  The green icon next to the thread number indicates the
 thread is running; the red icon next to the thread number indicates the thread is
 at a breakpoint.  The text to the right of the thread number is the current action
 on the thread's stack.  The "Threads" tab tree is updated whenever a thread starts
 or stops, a thread reaches a breakpoint or a thread breakpoint is resumed/stepped,
 the user changes the node selection in the tree, or the user clicks on the
 "Refresh Status" button.  Note that all of the nodes in the tree are refreshed
 when any of these occur.  Note that changes to a thread's action stack (i.e. 
 executing eleemnts in a sequence) are not reflected in the "Threads" tab unless the
 user changes the selection or clicks on the "Refresh Status" button.
 <p>
 The "Threads" tab has the following buttons:
 <ul>
 <li><tt>Refresh Status</tt>
    This refreshes the thread tree view.
 <li><tt>Resume</tt> 
    This resumes the currently selected thread.  This button is only enabled if the
    selected thread is at a breakpoint.
 <li><tt>Step Into</tt>
    This steps into the currently selected thread.  This button is only enabled if
    the selected thread is at a breakpoint.
 <li><tt>Step Over</tt>
    This steps over the currently selected thread.  This button is only enabled if
    the selected thread is at a breakpoint.
 <li><tt>Stop</tt>
   This stops the currently selected thread.  This button is disabled if the selected
   thread is at a breakpoint.
 </ul>
 <p>
  The "Breakpoints" tab shows the breakpoints (line and function) that are currently
 set for the STAX job.
  <p>
  <img src="debug3.gif" alt="Breakpoint tab">
  <p>You can remove a specific breakpoint, or remove all
 breakpoints (both present a confirmation dialog).  You can also add a line/function
 breakpoint.
 <p>The tabs in the bottom panel, "Variables", "Thread Information", and "XML File" are
 related to the currently selected thread in the "Threads" tab.  If a thread is not
 selected, then these 3 tabs display nothing.
 <p>If we select thread 1:
  <p>
  <img src="debug4.gif" alt="Thread1 tab">
  <p>
  The "Thread 1 Variables" tab shows all of the Python variables that are defined
 in the thread's Python interpreter
  <p>
  <img src="debug5.gif" alt="Variables tab">
  <p>
  The variables are shown in a tree table format,
 which shows a hierarchical view of any list/dictionary objects.  If the variable
 is a list/tuple/dictionary, you can expand its node to see the items the
 variable contains.  If you right-click in the tree table, a popup-menu
 will be displayed with "Expand All" and "Collapse All" which allow you to
 expand/collapse all of the nodes in the tree table.
 <p>
  In the "Thread Variables" tab, if you expanded the nodes for testInfo,
  it would display as:
  <p>
  <img src="debug8.gif" alt="Variables1 tab">
  <p>
 You can enter any Python code in the "Execute Python Code in Current Thread"
 field.  Clicking on "Execute" will submit a PYEXEC request for the selected thread.
 If the PYEXEC request results in an error, a dialog will be displayed with the
 error deteails.  If the PYEXEC request is successful, a success dialog will be
 displayed and then the table will be refreshed with the current variables defined
 in the thread's Python interpreter
 <p>
 If you wanted to append another item to the "language" list in
 the "testInfo" dictionary, and change the "tax" float value in the "purchases"
 dictionary in the "parms" dictionary, you can add the following in "Execute
 Python Code in Current Thread":
 <p>
  <img src="debug9.gif" alt="Variables2 tab">
  <p>
  When you click on "Execute" you will get a popup indicating the request
 was successful:
 <p>
  <img src="debug10.gif" alt="Variables3 tab">
  <p>
  The "Thread Variables" view will automatically be refreshed.  If you expand the
  variables again, you will see the expected updates for "language" and "tax":
  <p>
  <img src="debug11.gif" alt="Variables4 tab">
  <p>
  The "Thread 1 Information" tab will show the "QUERY THREAD" output in a table
 format.
 <p>
  <img src="debug6.gif" alt="ThreadInfo tab">
  <p>
   The "XML File" tab will diplay the XML file for the action the thread is currently
 executing
 <p>
  <img src="debug7.gif" alt="XMLFile tab">
  <p>
  The tab name will include the XML file path/name and the XML file
 machine.  The tab will show a text panel with the XML file contents, including
 the line numbers (note that the line numbers are displayed in a right-justified
 format, calculated based on the total number of lines in the XML file (i.e. if
 the XML file contained 15345 lines, the first line number would show as "    1").
 The text panel will automatically be scrolled to the line corresponding to the
 action that the thread is currently executing; the line will also be highlighted.
 If you scroll to another location in the XML file, you can right-click in
 the text panel to get a popup menu item "Scroll to current line".  Note that the
 STAX Monitor needs a trust level 4 for the XML file machine so that it can retrieve
 the file; if the STAX Monitor does not have a sufficient trust level, the RC 25
 error will be displayed in the text panel.

  </ol>
<p>
<b>Notes:</b>
<ul>
<li>When you start monitoring a job that is already executing,
the "Active Job Elements", "Processes", "STAFCmds", "Sub-jobs", "Debug", and
"TestCase Info" tabs will show the same information
as if you had been monitoring the job from its beginning.  However,
the "Messages" tab only displays messages that have occurred <b>after</b> you started
monitoring the job.
<p>
<li>All of the tables in the Job Monitor are sortable:
  <ul>
  <li>To sort the table in ascending order by a column, click on the table's column header for that column.
  <li>To sort the table in descending order by a column, hold the Shift key while clicking on the table's
      column header for that column.
  </ul>
</ul>
<p>
<p>

<h2><a name="Header_DisplayJobLog" href="#ToC_DisplayJobLog">Displaying a Job Log</a></h2>

<p>
There are several menu options to display Job Logs.  Here is an example of the dialog that is shown when a Log is displayed.
<p>
<img src="staxmon6.gif" alt="STAX Job Log">
<p>
<p>
The <b>File</b> menu bar contains the following menu items:
  <ul>
  <li><b>Save As Text...</b> - Displays a dialog that allows you to select
    a file name where the formatted output will be saved and formats
    the log as text, where the timestamp, level, and message fields
    for each log record are printed in a single line with the fields
    separated by a space. </li>
  <li><b>Save As Html...</b> - Displays a dialog that allows you to select
    a file name where the formatted output will be saved and formats
    the log as html.  The html document will have a title containing
    the STAF LOG QUERY request that was submitted and will contain a
    table with three columns (timestamp, level, and message) where
    each row contains a log record.  It will use the font specified
    for the Log Viewer.</li>
  <li><b>Exit</b> - This option closes the Job Log.</li>
  </ul>
  <p>
  <b>Note: </b>  If you want to set the directory name that will be
  displayed as the default directory when the "Save As Text..." or
  "Save As Html..." menu item is selected, you need to set the
  "Log Viewer Save As Directory" field via the STAX Monitor Properties
  panel (on the "Options" tab) and save this property change.
<p>
The <b>View</b> menu bar contains the following menu items:
  <ul>
  <li><b>Refresh</b> - This option refreshes the Job Log (the latest log
      information will be queried and the table will be updated).</li>
  <li><b>Change Font...</b> - Displays a dialog that allows you to change the font
      for the log records.  Note that this font change is only while you're
      viewing this log.
      To change the font to be used when displaying any STAX log, you need to
      select the "Log Viewer Font Name" via the STAX Monitor Properties panel
      (on the "Options" tab) and save this property change.</li>
  </ul>
<p>
The <b>Levels</b> menu bar contains the following menu items (note that when any of the level options are changed, the information in the table will be refreshed with the latest information from the Log):
  <ul>
  <li><b>All</b> - Selecting this option controls whether all of the log levels will be displayed in the table.
  <li><b>Fatal</b> - Selecting this option controls whether Fatal log messages will be displayed in the table.
  <li><b>Error</b> - Selecting this option controls whether Error log messages will be displayed in the table.
  <li><b>Warning</b> - Selecting this option controls whether Warning log messages will be diplayed in the table.
  <li><b>Info</b> - Selecting this option controls whether Info log messages will be displayed in the table.
  <li><b>Trace</b> - Selecting this option controls whether Trace log messages will be displayed in the table.
  <li><b>Trace2</b> - Selecting this option controls whether Trace2 log messages will be displayed in the table.
  <li><b>Trace3</b> - Selecting this option controls whether Trace3 log messages will be displayed in the table.
  <li><b>Debug</b> - Selecting this option controls whether Debug log messages will be displayed in the table.
  <li><b>Debug2</b> - Selecting this option controls whether Debug2 log messages will be displayed in the table.
  <li><b>Debug3</b> - Selecting this option controls whether Debug3 log messages will be displayed in the table.
  <li><b>Start</b> - Selecting this option controls whether Start log messages will be displayed in the table.
  <li><b>Stop</b> - Selecting this option controls whether Stop log messages will be displayed in the table.
  <li><b>Pass</b> - Selecting this option controls whether Pass log messages will be displayed in the table.
  <li><b>Fail</b> - Selecting this option controls whether Fail log messages will be diplayed in the table.
  <li><b>Status</b> - Selecting this option controls whether Status log messages will be displayed in the table.
  <li><b>User1</b> - Selecting this option controls whether User1 log messages will be displayed in the table.
  <li><b>User2</b> - Selecting this option controls whether User2 log messages will be displayed in the table.
  <li><b>User3</b> - Selecting this option controls whether User3 log messages will be displayed in the table.
  <li><b>User4</b> - Selecting this option controls whether User4 log messages will be displayed in the table.
  <li><b>User5</b> - Selecting this option controls whether User5 log messages will be displayed in the table.
  <li><b>User6</b> - Selecting this option controls whether User6 log messages will be displayed in the table.
  <li><b>User7</b> - Selecting this option controls whether User7 log messages will be displayed in the table.
  <li><b>User8</b> - Selecting this option controls whether User8 log messages will be displayed in the table.
  </ul>
<p>
You can select the font name used when displaying log information via the
"Log Viewer Font Name" on the "Options" tab of the STAX Monitor Properties
panel.  Here is an example of the dialog that is shown when a Log is displayed
if you selected "Monospaced" for the "Log Viewer Font Name":
<p>
<img src="staxmon7.gif" alt="STAX Job Log">
<p>

<h2><a name="Header_DisplayJVMLog" href="#ToC_DisplayJVMLog">Displaying a JVM Log</a></h2>

Each Java service that is registered with STAF runs in a JVM (Java Virtual Machine).
Each JVM created by STAF has a JVM Log file associated with it.  Note that more
than one Java service may use the same JVM (and thus the same JVM Log file)
depending on the options used when registering the service.
<p>
A JVM Log file contains JVM start information such as the date/time when the JVM
was created, the JVM executable, and the J2 options used to start the JVM.
It also contains any other information logged by the JVM.  This includes any
errors that may have occurred while the JVM was running.
Also, the output from any print statements that you use within a &lt;script> element
in a STAX xml file can be be written to the STAX JVM Log if the "Python Output"
setting for the STAX job is set to "JVMLog".  The default value for "Python Output"
in the STAX Job User Log.
<p>
STAF stores JVM Log files in the {STAF/DataDir}/lang/java/jvm/&lt;JVMName> directory.
STAF retains a configurable number of JVM Logs (5 by default) for each JVM.
The current JVM log file is named JVMLog.1 and older saved JVM log files, if any,
are named JVMLog.2 to JVMLog.&lt;MAXLOGS>.  When a JVM is started, if the size of
the JVMLog.1 file exceeds the maximum configurable size (1M by default), the
JVMLog.1 file is copied to JVMLog.2 and so on for any older JVM Logs, and a new
JVMLog.1 file will be created.
<p>
Following is the STAX Job Monitor window with the <b>Display</b> menu bar selected:
<p>
<img src="displayJVMLog1.gif" alt="Display JVM Log">
<p>
To display the JVM Log for the STAX service or for any Java service
on any machine, from the main STAX Job Monitor window's <b>Display</b> menu bar,
select one of the following menu items:
<ul>
  <li><b>Display STAX JVM Log</b> - Selecting this option causes the current JVM Log
  for the STAX service to be displayed.  Only the entries in the JVM Log from the last time
  the JVM was created are shown (though you can later use the "View->Show All" option to
  change it to display all entries in the JVM Log).
  This option is only enabled if STAF V3.2.1 or later is running on the STAX Monitor machine.
  <li><b>Display Other JVM Log...</b> - Selecting this option allows you to display the
  current JVM Log for any service currently registered on any machine.
  This option is only enabled if STAF V3.2.1 or later is running on the STAX Monitor machine.
</ul>
<p>
Here is an example of the dialog that could be shown when you select the
<b>Display STAX JVM Log</b> menu item:
<p>
<img src="displayJVMLog2.gif" alt="Display STAX JVM Log">
<p>
If you select the <b>Display Other JVM Log...</b> option, the following dialog is
displayed so you can enter the machine endpoint where the STAF Java service
whose JVM Log you want to display is currently registered.
The default machine is the STAX Service machine that the STAX Monitor is
configured to use.
<p>
<img src="displayOtherJVMLog1.gif" alt="Display Other JVM Log 1">
<p>
Once you enter the machine name and select the OK button, the following dialog is
displayed which shows a list of Java services currently registered
on that machine.
<p>
<img src="displayOtherJVMLog2.gif" alt="Display Other JVM Log 2">
<p>
Click on the drop-down list to see all of the Java services registered on
this machine.  Select a Java service, and then select the OK button to display
the JVM Log for this Java service.
<p>
Here is an example of the dialog that is shown when the STAX JVM Log for machine
staf3f is displayed along with the menu items on the <b>View</b> menu bar:
<p>
<img src="displayJVMLog3.gif" alt="Display Other JVM Log 3">
<p>
The <b>File</b> menu bar contains the following menu items:
  <ul>
  <li><b>Exit</b> - This option closes the JVM Log Viewer.
  </ul>
<p>
The <b>View</b> menu bar contains the following menu items:
  <ul>
  <li><b>Refresh</b> - This option refreshes the JVM Log (i.e. the latest JVM
       Log information will be displayed) and scrolls down to the end of
       the JVM Log.
  <li><b>Show Current</b> - This option displays only the entries in the
      JVM Log from the "current" JVM (the JVM that is currently running).
  <li><b>Show All</b> - This option displays all of the entries in the JVM Log
      This includes logs from any previous times the JVM was created,
      instead of just the entries from the current JVM.
  <li><b>Select JVM Log Name...</b> - This option displays a dialog which allows
      you to select a different JVM Log to display if older saved JVM Logs are
      available.
  <li><b>Change Font</b> - This option displays a dialog which allows you to
      change the font used when displaying the JVM Log file.  The default font
      used is the Monospaced font.
      Changing the font also refreshes the JVM Log (i.e. the latest JVM Log
      information will be displayed) and scrolls down to the end of the JVM Log.
  </ul>
<p>

<hr>
<h1><b><a name="Header_StaxLogging" href="#ToC_StaxLogging">STAX Logging</a></b></h1>

<p>
STAX uses the STAF Log Service for logging, so the Log Service must be registered in
order for STAX logs to be created.
<p>
There are three types of STAX logs:
<ul>
<li><b>STAX service log</b> - This log contains messages generated by the STAX Service
for all jobs.  This log contains a start and stop message for each STAX Job.
The job start message includes additional information about the job such as job ID,
XML file name, machine name, starting function, job name, and script parameters, if any.
<p>
<li><b>STAX job logs</b> - There is a STAX job log generated by the STAX Service for
each STAX job ID.  Each log contains messages for the job such as a start and stop
message for the job.  In addition, a message is logged if:
  <p>
  <ul>
  <li>A job is held, released, or terminated.
  <p>
  <li>A signal is raised by the STAX service during job execution and the
default signal handler is invoked.
  <p>
  <li>A &lt;tcstatus> element or UPDATE request for a testcase is successfully
      executed, and a message (additional information about the testcase status)
      was specified with a Pass or Fail status.  This logs a message with level
      "Pass" or "Fail" (based on the testcase status) and the format of the 
      message text is:
      <pre>Testcase: &lt;Testcase Name>, Pass: &lt;NumPasses>, Fail: &lt;NumFails>, Last Status: &lt;Last Status>, Message: &lt;Message></pre>
  <p>
  <li>If "Log TC Start/Stop" is enabled for the job and a &lt;testcase> element is encountered or
      a START request for a testcase is successfully executed.  This logs a message
      with level "Start" and the format of the message text is:
      <pre>Testcase: &lt;Testcase Name></pre>
  <p>
  <li>If "Log TC Start/Stop" is enabled for the job and a &lt;/testcase> element is encountered or
      a STOP request for a testcase is successfully executed.
      This logs a message with level "Stop" and the format of the message text is:
      <pre>Testcase: &lt;Testcase Name>, ElapsedTime: &lt;Elapsed Time>"</pre>
  <p>
  <li>A job terminates, a summary of the number of times each testcase passed or
      failed is logged with level "Status".  If "Log TC Elapsed Time" is enabled
      for the job, the elapsed time for each testcase is also logged.
      If "Log TC Num Starts" is enabled for the job, the number of times each
      testcase was started is also logged.  The format of the message text is:
      <pre>Testcase: &lt;Testcase Name>, Pass: &lt;NumPasses>, Fail: &lt;NumFails>[, ElapsedTime: &lt;ElapsedTime>][, NumStarts: &lt;NumStarts>]</pre>
      <p>
      <b>Notes:</b>
      <p>
      <ol>
      <li>If the default mode is specified for a testcase for which no passes
          or fails were recorded, no summary for that testcase is logged.
      <p>
      <li>If a testcase is started more than once via a &lt;testcase> element or a
          START testcase request, the elapsed times for each testcase started
          are accumulated.  So, it is possible that the elapsed time for a testcase
          is more than the elapsed time for a job if the same testcase is run
          in parallel multiple times.
      <p>
      <li>The format for elapsed time is HH:MM:SS or if the elapsed time exceeds
          99 hours, the format is:  HHH:MM:SS.
      </ol>
  <p>
  <li>A job terminates, a summary of the job's total number of testcases, passes, and fails is logged.
  </ul>
<p>
<li><b>STAX job user logs</b> - If a STAX job uses the &lt;log> element or
the &lt;message log="1"> element, or if a LOG MESSAGE request is submitted
for the job, then a STAX job user log is generated for the job ID.
The message is written to this log.  STAF variables are allowed in the
message.  However, they will only be resolved if one of the STAF Log service
options which specify to resolve variables is set.
</ul>
<p>
<b>Note:</b>  The maximum length of a message logged to all STAF logs, including 
STAX job and job user logs, is controlled by the STAF Log service's MaxRecordSize
setting.  The default MaxRecordSize for the STAF Log service is 100K (100,000
characters).  It is possible that a STAX job may try to log a message that is
longer than 100K, so the STAX service automatically increases the Log service's
MaxRecordSize to 1M (1,048,576 characters) if it is set to a smaller value.
For example, if a STAX job contains a &lt;script> element which consists of more
than 100K of Python code, when a STAXPythonEvaluationError signal is raised, a
message is written to the STAX job log which includes all the Python code
contained in the &lt;script> element where the error occurred, as well as the
line number and a description of the problem.  So, if the MaxRecordSize was not
increased, the message logged would be truncated and important information for
fixing the error could be missing.  If desired, you can increase the maximum log
record size even more.  See the "Log Service" section in the STAF User's Guide for
how to specify a MAXRECORDSIZE parameter when registering the Log service in the
STAF.cfg file or to dynamically change it by submitting a SET MAXRECORDSIZE
request to the Log service.
<p>
<h3><a NAME="Listing/Querying STAX Service Logs">Listing/Querying STAX Service Logs</a></b></h3>
<p>
The STAX logs are machine logs.  The names of the STAX logs begin with the
STAX service name in uppercase (e.g. STAX).  To get a list of all the logs on a STAX service machine named
"stax1.company.com", use the following STAF log list request.
The log files listed whose name begins with STAX are the STAX logs.  For example:
<p>
<tt>STAF stax1.company.com LOG LIST MACHINE {STAF/Config/MachineNickname}</tt>
<p>
An example of output from listing STAX logs is:
<pre>
Log Name         Date-Time         Size
---------------- ----------------- ------
STAX_Service     20070510-11:54:50 558601
STAX_Job_1       20070510-11:52:48 597216
STAX_Job_1_User  20070510-11:52:48 228688
STAX_Job_2       20070510-11:53:26 223540
STAX_Job_3       20070510-11:54:34 198001
STAX_Job_3_User  20070510-11:54:34 56788
STAX_Job_4       20070510-11:54:50 76624
STAX_Job_4_User  20070510-11:54:50 13111
</pre>
To query a STAX service log, use the following STAF log query machine request
(assuming STAX is the registered name for the service):
<p>
<tt>STAF -verbose stax1 LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Service</tt>
<p>
An example of the output from a query of a STAX service log is:
<pre>
Response
--------
[
  {
    Date-Time: 20100510-09:26:14
    Level    : Info
    Message  :
Registered Extensions for STAX Version 3.5.0 Beta 1:

Jar File Name         : C:\STAF\services\ExtDelay.jar
Version               : 1.0.0
Description           : Delay STAX Extensions
Parameter #1          : delay=5
Service Version Prereq: 1.5.0
Element Name #1       : ext-delay
Element Name #2       : ext-sleep
Element Name #3       : ext-wait
Monitor Version Prereq: 1.5.0
Monitor Extension #1  : ext-delay

Jar File Name         : C:\STAF\services\mts\ManualTestExt.jar
Version               : 3.0.0
Description           : Manual Test System (MTS) STAX Extensions
Parameter #1          : servicename=MTS
Parameter #2          : servicemachine=lucas
Service Version Prereq: 3.0.0
Element Name #1       : manual-test
Monitor Version Prereq: 3.0.0
Monitor Extension #1  : manual-test

  }
  {
    Date-Time: 20080919-16:36:51
    Level    : Start
    Message  : JobID: 1, File: c:\dev\src\stax\testSignalCallStack.xml, Machine:
 local://local, Function: Main, Args: null, JobName: Signal Call Stack
  }
  {
    Date-Time: 20080919-16:36:58
    Level    : Stop
    Message  : JobID: 1
  }
  {
    Date-Time: 20080919-16:43:43
    Level    : Start
    Message  : JobID: 2, File: c:\dev\src\stax\STAFTest.xml, Machine: tcp://clie
nt1.austin.ibm.com, Function: DoAll, Args: [1, 2], JobName: STAFTest
  }
  {
    Date-Time: 20080919-16:43:56
    Level    : Stop
    Message  : JobID: 2
  }
]
</pre>
<p>
<h3><a NAME="Querying STAX Job Logs">Querying STAX Job Logs</a></b></h3>
<p>
To query a STAX job log for Job ID 45, use the following STAF log query machine
request (assuming stax1 is the STAX service machine and STAX is the registered
name for the service):
<p>
<tt>STAF stax1 LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Job_45</tt>
<p>
An example of the output from a query of a STAX job log is:
<pre>
Response
--------
Date-Time Level  Message
--------- ------ --------------------------------------------------------------
20041201- Start  JobID: 45, File: c:\dev\src\stax\job1.xml, Machine: stax1.aust
13:43:14         in.ibm.com, Function: Main, Args: null, JobName: Job Test
20041201- Info   Holding block: main
13:43:14
20041201- Info   Received RELEASE BLOCK main request
13:43:15
20041201- Info   Releasing block: main
13:43:15
20041201- Fail   Testcase: Fail Tests, Pass: 0, Fail: 1, Last Status: fail, Mes
13:43:17         sage: Sub-job "Fail Test 1" could not be started.  RC: 4001 ST
                 AFResult: Caught com.ibm.staf.service.stax.STAXXMLParseExcepti
                 on:  Line 7: Element type "unknown" must be declared. STAXResu
                 lt: None STAXSubJobID: 0
20041201- Fail   Testcase: Fail Tests, Pass: 0, Fail: 2, Last Status: fail, Mes
13:43:18         sage: Sub-job "Fail Test 2" could not be started.  RC: 48 STAF
                 Result: C:/dev/src/stax/DoesNotExist.xml STAXResult: None STAX
                 SubJobID: 0
20041201- Fail   Testcase: Fail Tests, Pass: 0, Fail: 3, Last Status: fail, Mes
13:43:18         sage: Sub-job "Fail Test 3" could not be started.  RC: 13 STAF
                 Result: MySubJobFileName STAXResult: None STAXSubJobID: 0
20041201- Fail   Testcase: Fail Tests, Pass: 0, Fail: 4, Last Status: fail, Mes
13:43:20         sage: Sub-job "Fail Test 4" (Job ID 51) failed.  STAXResult: N
                 one
20041201- Fail   Testcase: Test A, Pass: 0, Fail: 1, Last Status: fail, Message
13:43:44         : Sub-job "Test A" (Job ID 46) failed.  STAXResult: None
20041201- Status Testcase: Fail Tests, Pass: 0, Fail: 4, ElapsedTime: 00:00:03,
13:43:45          NumStarts: 1
20041201- Status Testcase: Test A, Pass: 0, Fail: 1, ElapsedTime: 00:00:30, Num
13:43:45         Starts: 1
20041201- Status Testcase: Test B, Pass: 1, Fail: 0, ElapsedTime: 00:00:13, Num
13:43:45         Starts: 1
20041201- Status Testcase: Test C, Pass: 1, Fail: 0, ElapsedTime: 00:00:13, Num
13:43:45         Starts: 1
20041201- Status Testcase: Test D, Pass: 1, Fail: 0, ElapsedTime: 00:00:03, Num
13:43:45         Starts: 1
20041201- Status Testcase: Test E, Pass: 1, Fail: 0, ElapsedTime: 00:00:06, Num
13:43:45         Starts: 1
20041201- Status Testcase Totals: Tests: 6, Pass: 4, Fail: 5
13:43:45
20041201- Stop   JobID: 45
13:43:45
</pre>

To query a STAX job log for Job ID 2, but just its last "Testcase Totals:" entry,
use the following STAF log query machine request (assuming stax1 is the STAX service machine
and STAX is the registered name for the service):
<p>
<tt>STAF stax1 LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Job_2 CONTAINS "Testcase Totals:" LAST 1</tt>
<p>
An example of the output from this query of a STAX job log is:
<pre>
Response
--------
Date-Time         Level  Message
----------------- ------ -------------------------------------------
20041201-13:43:01 Status Testcase Totals: Tests: 3, Pass: 2, Fail: 7
</pre>

Note that if you have not enabled the CLEARLOGS option, logs for from multiple
STAX job runs can be contained in a single logfile, so you may want to use
additional options in your LOG QUERY request to refine the query. For example,
to display only the log information for the last STAX Job in the log, you can
use the FROM <Timestamp> option, specifying the date/time that the last STAX job
began. 
<p>
<tt>STAF stax1 LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Job_2 FROM 200412-1@13:43:14 ALL</tt>
<p>
<h3><a NAME="Querying STAX Job User Logs">Querying STAX Job User Logs</a></b></h3>
<p>
To query a STAX job user log for Job ID 3, use the following STAF log query machine request
(assuming stax1.austin.ibm.com is the STAX service machine and STAX is the registered
name for the service):
<pre>
STAF stax1.austin.ibm.com LOG QUERY MACHINE {STAF/Config/MachineNickname} LOGNAME STAX_Job_3_User
</pre>
An example of the output from a query of a STAX job user log is:
<pre>
Response
--------
Date-Time         Level  Message
----------------- ------ ----------------------------------------------
20041208-11:16:46 Start  Starting the STAXMonitor test on machine machA
20041208-11:16:51 Info   TestProcess on machine machA RC = 0
20041208-11:16:51 Info   Delaying 1453 on machine machA
20041208-11:16:53 Info   Machine machA is running STAF Version 3.0.0
20041208-11:16:57 Info   TestProcess on machine machA RC = 1
20041208-11:17:04 Stop   Finished the STAXMonitor Test on machine machA
</pre>
Note that if you have not enabled the CLEARLOGS option, logs for from multiple STAX
job runs can be contained in a single logfile, so you may want to use additional
options in your LOG QUERY request to refine the query.  For example, to display
only the log information for the last STAX Job in the log, you can use the <tt>FROM &lt;Timestamp></tt>
option, specifying the date/time that the last STAX job began, e.g. <tt>FROM 20041208-11:16:46</tt>.
<p>
<h3><a NAME="Displaying STAX Logs via a GUI">Displaying STAX Logs via a GUI</a></b></h3>
<p>
You can use the STAX Monitor Java application to display STAX logs in a formatted, graphical
representation.  Refer to the <a href="#Header_StaxMonitoring">"STAX Monitoring"</a> section
for more information on how to display a STAX log using the STAX Monitor.
Note that only the log information for the last STAX Job in the log is displayed.
<p>
Or, you can use the STAX Log Viewer Java application,
<tt>com.ibm.staf.service.stax.STAXMonitorLogViewer</tt>, provided in
the STAXMon.jar file.  You can run the STAX Log Viewer Java application
independently from the STAX Monitor. 
When running this Java application, make sure that the STAXMon.jar
and JSTAF.jar files are in your classpath and then type the following
(the class name is case sensitive) to get help for running the STAX Log Viewer:
<p>
<tt>java com.ibm.staf.service.stax.STAXMonitorLogViewer -help</tt>
<p>
Or you can specify the fully-qualified names of the STAXMon.jar and JSTAF.jar files
using the <tt>-cp</tt> (classpath) parameter when running the STAX Log Viewer.
For example:
<p>
<tt>java -cp C:\STAF\services\stax\STAXMon.jar;C:\STAF\lib\JSTAF.jar com.ibm.staf.service.stax.STAXMonitorLogViewer -help</tt>
<p>
<p>The STAX Log Viewer accepts the following command line parameters:
<pre>
  -name &lt;STAX Log Name>
  -machine &lt;STAX Service Machine Name>
  -machineNickname &lt;STAX Service Machine Nickname>
  -fontName &lt;Font Name>
  -help
  -version
</pre>
You must specify either <tt>-name &lt;STAX Log Name></tt> or <tt>-help</tt> or <tt>-version</tt>. 
<p>
<ul>
<tt>-name</tt> specifies the name of an existing STAX Job log to display.
This option will resolve variables.  This parameter is required.
You can specify the name of a STAX Job log (e.g. STAX_Job_1), a STAX Job User
log (e.g. STAX_Job_1_User), or the STAX Service log (e.g. STAX_Service).
<p>
<tt>-machine</tt> specifies the name of the machine where the STAX logs are located.
This option will resolve variables.  This parameter is optional.
The default is <tt>local</tt>.
<p>
<tt>-machineNickname</tt> specifies the machine nickname for the STAX service machine.
This option will resolve variables.  This parameter is optional.
The default is <tt>{STAF/Config/MachineNickname}</tt>.
<p>
<tt>-fontName</tt> specifies the name of the font to use when displaying the STAX log.
This parameter is optional.  The default is <tt>Dialog</tt>.
<p>
<tt>-help</tt> displays help information for the STAX Log Viewer.
This parameter is optional.
<p>
<tt>-version</tt> displays the version of the STAX Log Viewer.
This parameter is optional.
</ul>
Note that only the log information for the last STAX Job in the log is displayed.
<p>
<h4>Examples Starting the STAX Job Viewer</a></h4>
<p>
<ul>
<li>Start the STAX Job Viewer specifying to display the STAX Job log on the local machine
for STAX job 1:
<p>
<tt>java com.ibm.staf.service.stax.STAXMonitorLogViewer -name STAX_Job_1</tt>
<p>
<li>Start the STAX Job Viewer specifying to display the STAX Job User log for STAX job 2 on
STAX service machine server1.company.com:
<p>
<tt>java com.ibm.staf.service.stax.STAXMonitorLogViewer -name STAX_Job_2_User -machine server1.company.com</tt>
<p>
<li>Start the STAX Job Viewer specifying to display the STAX Service log on
STAX service machine server1:
<p>
<tt>java com.ibm.staf.service.stax.STAXMonitorLogViewer -name STAX_Service -machine server1</tt>
<p>
<li>Start the STAX Job Viewer speicfying to display the STAX Job log for STAX job 3
on machine server1 using a Monospaced font:
<p>
<tt>java com.ibm.staf.service.stax.STAXMonitorLogViewer -name STAX_Job_3 -machine server1 -fontName Monospaced</tt>
</ul>
<p>
<h3><a NAME="Enabling/Disabling Testcase Logging">Enabling/Disabling Testcase Logging</a></b></h3>
<p>
Here's an example of the contents of the STAX Job Log for a job run with "Log TC Elapsed Time",
"Log TC Num Starts", and "Log TC Start/Stop" enabled.  Note that "Start" and "Stop" records
are logged each time a testcase begins and ends and the elapsed time and number of starts
for each testcase are provided in the "Status" records written at the end of the job.
This also shows how the log is displayed via the STAX Monitor.

<p>
<img src="testcaseLogging.gif" alt="Testcase Logging via STAX Monitor">
<p>

<hr>

<h1><a name="Header_StaxVariables" href="#ToC_StaxVariables">STAX Variables</a></h1>

The following variables are set in Python during Job Execution by the STAX service and can be
referenced by your job definition.  However, do not change their values.
<p>
<ul>
<li><b>RC</b>
<ul>
<li>Description:  the return code from a &lt;stafcmd>, &lt;process>, &lt;job>,
or &lt;timer> element</li>
<li>Assigned:  each time a &lt;stafcmd>, &lt;process>, &lt;job>, or &lt;timer> element
completes</li>
<li>Type:  numeric.  Note that the actual return code from a &lt;process> element (if an error
    starting the process did not occur) is a PyLong numeric type (e.g 0L, 25L).  In other cases,
    the return code will be a PyInteger type.</li>
</ul>
<p>
<li><b>STAFResult</b>
<ul>
<li>Description:  the result from a &lt;stafcmd>, &lt;process>, or &lt;job> element</li>
<li>Assigned:  each time a &lt;stafcmd>, &lt;process>, or &lt;job> element completes</li>
<li>Type:  string, PyList, or PyDictionary (aka Map)</li>
</ul>
<p>
<li><b>STAFResultContext</b>
<ul>
<li>Description: the marshalling context object for the result from a &lt;stafcmd> element.
    Its string representation is equivalent to the "verbose format" (the hierarchical
    nested format) provided by the STAF executable. 
</li>
<li>Assigned:  each time a &lt;stafcmd> element completes</li>
<li>Type:  org.python.core.PyInstance</li>
</ul>
<p>
<li><b>STAFResultString</b>
<ul>
<li>Description: the result string from a &lt;stafcmd> element.  If the result is marshalled,
    it is the marshalled result string.
</li>
<li>Assigned:  each time a &lt;stafcmd> element completes</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAFRC</b>
<ul>
<li>Description:  the alias for the imported com.ibm.staf.STAFResult Java class.  It
    contains constant definitions for STAF return codes (e.g. STAFRC.Ok, STAFRC.DoesNotExist).
    For more information on the STAFRC alias for the com.ibm.staf.STAFResult Java class,
    see the <a href="#STAFUtil">STAF Java Classes (STAFUtil, STAFRC, STAFVersion, etc)</a>
    section.
    </li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  Java class com.ibm.staf.STAFResult</li>
</ul>
<p>
<li><b>STAXResult</b>
<ul>
<li>Description:  the result from a function &lt;call>, &lt;call-with-list>, &lt;call-with-map>,
&lt;process>, &lt;job>, or &lt;import> element</li>
<li>Assigned:  each time a &lt;call>, &lt;call-with-list>, &lt;call-with-map>, &lt;process>,
&lt;job>, or &lt;import> element completes</li>
<li>Type:  anything (integer, string, variable, list, nothing, etc.)</li>
</ul>
<p>
<li><b>STAXBlockRC</b>
<ul>
<li>Description:  the return code from a &lt;block> element</li>
<li>Assigned:  each time a &lt;block> element completes</li>
<li>Type:  numeric.</li>
</ul>
<p>
<li><b>STAXJobID</b>
<ul>
<li>Description:  the Job ID of the STAX job</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  numeric</li>
</ul>
<p>
<li><b>STAXSubJobID</b>
<ul>
<li>Description:  the Job ID of the STAX sub-job (executed via a &lt;job> element)</li>
<li>Assigned:  each time a &lt;job> element begins</li>
<li>Type:  numeric</li>
</ul>
<p>
<li><b>STAXSubJobStatus</b>
<ul>
<li>Description:  the completion status of the STAX sub-job (executed via a &lt;job>
element)</li>
<li>Assigned:  each time a &lt;job> element completes</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobName</b>
<ul>
<li>Description:  the name of the job specified on the EXECUTE request</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobWriteLocation</b>
<ul>
<li>Description:  the name of a directory on the STAX service machine that the
job can use to store data in</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobXMLFile</b>
<ul>
<li>Description:  the fully qualified name of the file containing the XML document; this is
the value of the FILE parameter, if specified, on the EXECUTE request; otherwise,
if DATA &lt;xml data> was specified on the EXECUTE request instead of FILE, it is set
to "&lt;inline data>"</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobXMLMachine</b>
<ul>
<li>Description:  the machine where the file containing the XML document is located; this is
the value of the MACHINE parameter, if specified, on the EXECUTE request;  if not specified,
then it is the endpoint of the machine submitting the EXECUTE request</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobSourceMachine</b>
<ul>
<li>Description:  the endpoint of the machine submitting the EXECUTE request</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobSourceHandle</b>
<ul>
<li>Description:  the handle of the process submitting the EXECUTE request</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  numeric</li>
</ul>
<p>
<li><b>STAXJobSourceHandleName</b>
<ul>
<li>Description:  the name of the handle of the process submitting the EXECUTE request</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobScriptFileMachine</b>
<ul>
<li>Description:  the endpoint for the machine where the script files
are located.  This is the value of the SCRIPTFILEMACHINE parameter,
if specified, on the EXECUTE request.  If the SCRIPTFILEMACHINE
parameter was not specified on an EXECUTE request, it defaults to the
value specified for the the MACHINE option on the EXECUTE request.
If the MACHINE option was not specified, it assumes the script file(s)
are on the machine submitting the STAX EXECUTE request.</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobScriptFiles</b>
<ul>
<li>Description:  a list of names of script files; this is a list of the values
of the SCRIPTFILE parameter(s), if specified, on the EXECUTE request; if no
SCRIPTFILE parameters are specified, then it is an empty list</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  PyArray</li>
</ul>
<p>
<li><b>STAXJobStartDate</b>
<ul>
<li>Description:  the date the job started in format yyyymmdd</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobStartTime</b>
<ul>
<li>Description:  the time the job started in format hh:mm:ss</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobStartFunctionName</b>
<ul>
<li>Description:  the name of the starting function for the STAX job</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobStartFunctionArgs</b>
<ul>
<li>Description:  the arguments passed to the starting function for the STAX job
(in string format)</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobUserLog</b>
<ul>
<li>Description:  a STAFLog wrapper object for the STAX Job User Log.  You can use
this object to log to the STAX Job User Log from Python code, instead of using
the &lt;log> element, which cannot be included in a &lt;script> element.
For example, within a &lt;script> element, could do the following to log a message
of level "info" in the STAX Job User Log:
  <PRE>
  res = STAXJobUserLog.log('info', 'Here is an informational message')</PRE>
</li>
Note that the log method on this object requires two parameters: the log level
string and the message.  The log method returns a STAFResult object from which you
can reference the return code and the result (e.g. res.rc and res.result).
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  STAFLog wrapper object</li>
</ul>
<p>
<li><b>STAXThreadID</b>
<ul>
<li>Description:  the Thread ID currently running</li>
<li>Assigned:  at the creation of a new Thread.  For example, a new thread is created when a job begins execution,
when each task element contained in a &lt;parallel> element is executed, and when each iteration of the task element
contained in a &lt;paralleliterate> element is executed.</li>
<li>Type:  numeric</li>
</ul>
<p>
<li><b>STAXCurrentFunction</b>
<ul>
<li>Description:  the name of the current STAX function running in a thread</li>
<li>Assigned:  when calling a STAX function (e.g. upon encountering
a &lt;call name="..."> element.</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXCurrentXMLFile</b>
<ul>
<li>Description:  the name of the xml file that contains the STAX function
that's currently running in a thread.  If the current STAX function was not
provided via a file by instead via the DATA option on an EXECUTE request,
it is set to "&lt;inline data>".</li>
<li>Assigned:  at the beginning of the execution of a STAX job and each time a
STAX function is called (e.g. upon encountering a &lt;call name="..."> element.</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXCurrentXMLMachine</b>
<ul>
<li>Description:  the machine where the xml file resides that contains the
STAX function that's currently running in a thread.</li>
<li>Assigned:  at the beginning of the execution of a STAX job and each time a
STAX function is called (e.g. upon encountering a &lt;call name="..."> element.</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXCurrentBlock</b>
<ul>
<li>Description:  the name of the current block running in a thread</li>
<li>Assigned:  when entering a block (e.g. upon encountering
a &lt;block name="..."> element and when entering the default 'main' block).</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXCurrentTestcase</b>
<ul>
<li>Description:  the name of the current testcase running in a thread</li>
<li>Assigned:  when entering a testcase (e.g. upon encountering
a &lt;testcase name="..."> element).  If no testcase is currently running, then
it is assigned None (a special object provided by Python which serves as an empty
placeholder, much like null in Java).</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXProcessHandle</b>
<ul>
<li>Description:  the process handle</li>
<li>Assigned:  when the process has started executing.  Only the &lt;process-action> element
can use this variable to access the handle for its process.</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXServiceName</b>
<ul>
<li>Description:  the registered name of the STAX service executing the job</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXServiceMachine</b>
<ul>
<li>Description:  the machine name (logical machine identifier) of the STAX service machine (the local machine)</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXServiceMachineNickname</b>
<ul>
<li>Description:  the machine nickname of the STAX service machine (the local machine).
    It can be useful when querying STAX job logs, etc.</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXEventServiceName</b>
<ul>
<li>Description:  the registered name of the Event service (to which the
    STAX service submits requests)</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXEventServiceMachine</b>
<ul>
<li>Description:  the machine name of the Event service machine</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobLogName</b>
<ul>
<li>Description:  the name of the STAX job log for the current job (e.g. STAX_Job_1)</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXJobUserLogName</b>
<ul>
<li>Description:  the name of the STAX job user log for the current job (e.g. STAX_Job_1_User)</li>
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>
<p>
<li><b>STAXMessageLog</b>
<ul>
<li>Description:  a flag indicating if the message being logged via a &lt;log> element
    should also be sent to the STAX Monitor's message panel (if the message attribute is
    not specified for a &lt;log> element.
    1 indicates to send the message to the STAX Monitor;
    0 indicates not to send the message to the STAX Monitor.
    Defaults ot 0.
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  numeric (0 or 1)</li>
</ul>
<p>
<li><b>STAXLogMessage</b>
<ul>
<li>Description:  a flag indicating if the message being sent to the STAX Monitor's message
    panel via a &lt;message> element should also be logged to the STAX Job User log
    (if the log attribute is not specified for a &lt;message> element.
    1 indicates to log the message; 0 indicates not to log the messages.
    Defaults ot 0.
<li>Assigned:  at the beginning of the execution of a STAX job</li>
<li>Type:  numeric (0 or 1)</li>
</ul>
<p>
<li><b>STAXLogTCElapsedTime</b>
<ul>
<li>Description:  a flag indicating if "Log TC Elapsed Time" is enabled or disabled for the
    STAX job.  1 means enabled; 0 means disabled.
<li>Assigned:  once at the beginning of the execution of a STAX job</li>
<li>Type:  numeric (0 or 1)</li>
</ul>

<p>
<li><b>STAXLogTCNumStarts</b>
<ul>
<li>Description:  a flag indicating if "Log TC Num Starts" is enabled or disabled for the
    STAX job.  1 means enabled; 0 means disabled.
<li>Assigned:  once at the beginning of the execution of a STAX job</li>
<li>Type:  numeric (0 or 1)</li>
</ul>

<p>
<li><b>STAXLogTCStartStop</b>
<ul>
<li>Description:  a flag indicating if "Log TC Start/Stop" is enabled or disabled for the
    STAX job.  1 means enabled; 0 means disabled.
<li>Assigned:  once at the beginning of the execution of a STAX job</li>
<li>Type:  numeric (0 or 1)</li>
</ul>

<p>
<li><b>STAXPythonOutput</b>
<ul>
<li>Description:  the value specified for "Python Output" for the STAX job.
                  ('e.g. 'JobUserLog', 'Message', 'JobUserLogAndMsg', or 'JVMLog')
<li>Assigned:  once at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>

<p>
<li><b>STAXPythonLogLevel</b>
<ul>
<li>Description:  the value specified for "Python Log Level" for the STAX job.
                  ('e.g. 'Info', 'Error', 'User1', etc.)
<li>Assigned:  once at the beginning of the execution of a STAX job</li>
<li>Type:  string</li>
</ul>

<p>
<li><b>STAXArg</b>
<ul>
<li>Description:  the arguments passed when calling a function that did not define its
    arguments (via &lt;function-list-args>, &lt;function-map-args>, etc.)</li>
<li>Assigned:  each time a &lt;call>, &lt;call-with-list>, &lt;call-with-map> element
    begins if the function being called did not define its arguments</li>
<li>Type:  anything (integer, string, variable, list, nothing, etc.)</li>
</ul>

</ul>

<hr>

<h1><a name="STAXGlobal_Class" href="#ToC_StaxGlobal">STAXGlobal Class</a></h1>

The STAXGlobal class is a Python class which STAX provides as a wrapper to
provide for the creation of truly global variables, even across STAX-Threads
and when used in functions declared with a local scope.
<p>
Whenever a new STAX-Thread is created, existing variables are cloned from the parent
STAX-Thread.  STAX elements that can create STAX-Threads include the
following:
<ul>
  <li>function elements with a local scope
  <li>parallel
  <li>paralleliterate
  <li>process-action
  <li>job-action
</ul>
<p>
To create a global variable that can be accessed across STAX-Threads, create a
variables that is an instance of the STAXGlobal class. 
A STAXGlobal variable allows you to modify it's value if it is passed into a
local-scoped function or if it is shared across multiple threads.
However, <b>creating</b> a STAXGlobal <b>inside</b> a local-scoped function
will not cause it to appear once that function has returned.  Any variable
created within a local-scoped function will disappear when that function ends.
Normally, any updates to variables disappear as well, but STAXGlobals 
allow updates to persist, so long as the STAXGlobal variable was created before
the local-scoped function was called.
<p>
The STAXGlobal class provides the following constructor and methods:
<p>
<ul>
  <li><b>STAXGlobal(</b><i>value = None</i><b>)</b> - Constructs a new
      instance of a STAXGlobal variable.  If no value is specified, it's value
      defaults to None.
  <li><b>set(</b><i>value</i><b>)</b> - Sets a value for the STAXGlobal variable
  <li><b>get()</b> - Returns the value for the STAXGlobal variable
</ul>
<p>
Note that you will generally want to use a list to define a STAXGlobal variable
even if its value is just an integer or a string.  For example, when function
Main (see below) is called, the message it displays is (2, 3, 3, 3), not (3, 3, 3, 3)
as you may have thought would be displayed.
<pre>
  &lt;function name="Main" scope="local">
    &lt;sequence>

      &lt;script>
        ctr  = STAXGlobal(2)     # Be careful if you don't use a list
        gCtr = STAXGlobal([2])   # Instead, use a list to define
        gCtr2 = STAXGlobal(2)    # No list, but set method is used.
        gCtr3 = STAXGlobal(2)    # Be careful if you don't use a list
      &lt;/script>

      &lt;call function="'TestSTAXGlobal'"/>

      &lt;message>ctr, gCtr[0], gCtr2, gCtr3&lt;/message>

    &lt;/sequence>
  &lt;/function>

  &lt;function name="TestSTAXGlobal" scope="local">
    &lt;script>
      ctr = ctr + 1              # Now ctr is bound to an integer
                                 #   object, not a STAXGlobal
      gCtr[0] = gCtr[0] + 1      # Still a STAXGlobal
      gCtr2.set(gCtr2 + 1)       # Still a STAXGlobal
      gCtr2.set(gCtr2.get() + 1) # Still a STAXGlobal
      gCtr3 += 1                 # Still a STAXGlobal
    &lt;/script>
  &lt;/function>
</pre>
<p>
Note that STAXGlobal variables are not atomic across STAX-Threads. That is,
if you created the following STAX variable:
<pre>
  &lt;script>gTestIndex = STAXGlobal([0])&lt;/script>
</pre>
And then in a <b>paralleliterate</b> or in a <b>parallel</b> element you incremented
this variable as follows:
<pre>
  &lt;script>gTestIndex[0] += 1&lt;/script>
</pre>
If two STAX-Threads updated the counter at exactly the same time, you could
end up with the wrong value.
<p>
There are several ways to protect against this:
<p>
<ol>
<li>If you had a STAF job that used paralleliterate element to run tests
    on multiple machines in parallel and you wanted to keep track of the
    total number of tests that ran successfully and the total number of
    tests that failed, you can use a couple of STAXGlobal variables to
    do this.  However, to avoid problems if two STAX-Threads updated a
    STAXGlobal variable at exactly the same time, instead of just having
    one number that each STAX-Thread iteration updates, you could specify
    that the STAXGlobal variable is a list (or map) where each entry in
    the list keeps that keeps track of the number of testcases that ran
    successfully or failed on each machine and then after the
    paralleliterate completed, you could add those entries in the list
    to get the total number of tests that passed and failed on all machines.
    Since no two STAX-Threads are accessing the same entry in the list,
    there isn't a synchronization issue.
    <pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?> 
&lt;!DOCTYPE stax SYSTEM "stax.dtd"> 
 
&lt;stax> 
 
  &lt;defaultcall function="Main"/> 
  
  &lt;script> 
    # Create a testList of lots of tests for demonstration purposes. 
    # You would replace this list with your real tests. 
    numTests = 10 
    testList = []
 
    for i in range(1, numTests + 1): 
      testList.append('Test%s' % (i)) 

    machineList = [ 'machine1', 'machine2', 'machine3' ] 
    numMachines = len(machineList)

    # Create a global variable that can be accessed across STAX 
    # Threads (as paralleliterate elements create a new STAX-thread). 
    # Set it's value to a list, where each entry in the list will
    # contain the number of testcases that passes and failed. 

    gTestsRanList = STAXGlobal( [] )  # Create an empty list

    for i in range(numMachines):
      # Initialize each entry in the list to be a list of 0 passes and 0 fails
      gTestsRanList.append([0, 0])
  &lt;/script>
  
  &lt;function name="Main">

    &lt;function-prolog> 
      This function dispatches tests on machines. It runs a list of tests 
      sequentially on each of the machines in machineList in parallel. 
    &lt;/function-prolog> 

    &lt;sequence>

      &lt;paralleliterate var="machine" in="machineList" indexvar="i"> 
        &lt;iterate var="test" in="testList"> 
          &lt;sequence> 
 
            &lt;call function="'setupAndRunTestCase'"> 
              { 'testcase': test, 'testMachineName': machine }
            &lt;/call>

            &lt;if expr="STAXResult == 'Success'">
              &lt;script>gTestsRanList[i][0] += 1&lt;/script> 
              &lt;else>
                &lt;script>gTestsRanList[i][1] += 1&lt;/script> 
              &lt;/else>
            &lt;/if>

          &lt;/sequence>
        &lt;/iterate>
      &lt;/paralleliterate>

      &lt;script>
        totalPasses = 0
        totalFails = 0

        for i in range(numMachines):
          totalPasses += gTestsRanList[i][0]
          totalFails += gTestsRanList[i][1]
      &lt;/script>

      &lt;log message="1">'Total Passes: %s' % (totalPasses)&lt;/log>
      &lt;log message="1">'Total Fails : %s' % (totalFails)&lt;/log>

    &lt;/sequence>
  &lt;/function>

  &lt;function name="setupAndRunTestCase" scope="local"> 
 
    &lt;function-prolog> 
      For demonstration purposes, this function is simply delaying 
      for a random length of time to simulate running a testcase. 
      Replace this function with one that actually runs a testcase 
      via a process element. 
    &lt;/function-prolog> 
 
    &lt;function-map-args> 
      &lt;function-required-arg name="testcase"/> 
      &lt;function-required-arg name="testMachineName"/> 
    &lt;/function-map-args> 
 
    &lt;testcase name="testcase"> 
      &lt;sequence> 
 
        &lt;log message="1"> 
          'Running %s on machine %s' % (testcase, testMachineName) 
        &lt;/log> 
   
        &lt;script> 
          maxDelay = 10000 # 10 seconds (in microseconds) 
          import random 
          randomDelay = random.choice(range(maxDelay)) 
        &lt;/script> 
 
        &lt;stafcmd name="'%s running on %s' % (testcase, testMachineName)">  
          &lt;location>'local'&lt;/location> 
          &lt;service>'DELAY'&lt;/service> 
          &lt;request>'DELAY %s' % (randomDelay)&lt;/request> 
        &lt;/stafcmd> 
 
        &lt;tcstatus result="'pass'"/> 

        &lt;return>'Success'&lt;/return>
 
      &lt;/sequence> 
    &lt;/testcase> 
  &lt;/function> 

&lt;/stax>
</pre>
<p>
<li>You may want to use the STAF SEM service to create a mutex semaphore
    and use it to synchronize access to a STAXGlobal variable.
    Here's a sample STAX job that dispatches tests on machines, keeping all
    the machines busy, so that in parallel, each machine is running one test,
    until there are no more tests to run.  It uses a STAXGlobal variable
    named gTestIndex to keep track of the index of the test to be run next
    when a machine becomes available.  This STAX job's synchronizes access
    to gTestIndex via it's getNextIndex function.  This function requests a
    STAF mutex semaphore (with a unique name) before incrementing the
    gTestIndex variable and then releases the mutex semaphore. 
<pre> 
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?> 
&lt;!DOCTYPE stax SYSTEM "stax.dtd"> 
 
&lt;stax> 
 
  &lt;defaultcall function="Main"/> 
 
  &lt;script> 
    machineList = [ 'machine1', 'machine2', 'machine3' ] 
 
    # Create a testList of lots of tests for demonstration purposes. 
    # You would replace this list with your real tests. 
    numTests = 50 
    testList = [] 
    for i in range(1, numTests + 1): 
      testList.append('Test%s' % (i)) 
  &lt;/script> 
 
  &lt;function name="Main"> 
 
    &lt;function-prolog> 
      This function dispatches tests on machines. It keeps all the 
      machines in machineList busy, so that in parallel, each machine 
      is running one test at a time from the testList until there are 
      no more tests to run. 
    &lt;/function-prolog> 
 
    &lt;sequence> 
 
      &lt;log message="1"> 
        'Run %s tests on %s machines' % (len(testList), len(machineList)) 
      &lt;/log> 
      &lt;log message="1">'machineList: %s' % (machineList)&lt;/log> 
      &lt;log message="1">'testList: %s' % (testList)&lt;/log> 
 
      &lt;script> 
        # Create a global variable that can be accessed across STAX 
        # Threads (as paralleliterate elements create a new STAX-thread). 
        # Note that you will generally want to use a list to define a 
        # STAXGlobal variable even if its value is just an integer or 
        # string. 
        gTestIndex = STAXGlobal( [0] ) 
      &lt;/script> 
 
      &lt;paralleliterate var="machine" in="machineList"> 
        &lt;sequence>  
 
          &lt;script>numTestsRun = 0&lt;/script> 
 
          &lt;loop> 
            &lt;sequence> 
 
              &lt;call function="'getNextTestIndex'"/> 
              &lt;script>testIndex = STAXResult&lt;/script> 
 
              &lt;if expr="testIndex >= len(testList)"> 
                &lt;break/> 
              &lt;/if> 
 
              &lt;call function="'setupAndRunTestCase'"> 
                { 
                  'testcase': testList[testIndex], 
                  'testMachineName': machine 
                } 
              &lt;/call> 
 
              &lt;script>numTestsRun += 1&lt;/script> 
 
            &lt;/sequence> 
          &lt;/loop> 
 
          &lt;log message="1"> 
            'Ran %s tests on machine %s' % (numTestsRun, machine) 
          &lt;/log> 
 
        &lt;/sequence> 
      &lt;/paralleliterate> 
 
    &lt;/sequence> 
  &lt;/function> 
 
  &lt;function name="getNextIndex" scope="local"> 
 
    &lt;function-prolog> 
      This function returns the index of the next test to be run. 
      It uses the STAF SEM service to create a mutex semaphore to 
      synchronize access to gTestIndex (a STAXGlobal variable). 
    &lt;/function-prolog> 
 
    &lt;sequence> 
 
      &lt;stafcmd> 
        &lt;location>'local'&lt;/location> 
        &lt;service>'SEM'&lt;/service> 
        &lt;request>'REQUEST MUTEX DispatchTest/TestIndexSem TIMEOUT 30000'&lt;/request> 
      &lt;/stafcmd> 
 
      &lt;if expr="RC != 0"> 
        &lt;sequence> 
          &lt;log message="1"> 
            'Request TestIndexSem mutex semaphore failed: RC=%s Result=%s' % \ 
            (RC, STAFResult) 
          &lt;/log> 
          &lt;terminate block="'main'"/> 
        &lt;/sequence> 
      &lt;/if> 
 
      &lt;script> 
        saveTestIndex = gTestIndex[0] 
        gTestIndex[0] += 1 
      &lt;/script> 
 
      &lt;stafcmd> 
        &lt;location>'local'&lt;/location> 
        &lt;service>'SEM'&lt;/service> 
        &lt;request>'RELEASE MUTEX DispatchTest/TestIndexSem'&lt;/request> 
      &lt;/stafcmd> 
 
      &lt;if expr="RC != 0"> 
        &lt;sequence> 
          &lt;log message="1"> 
            'Release TestIndexSem mutex semaphore failed: RC=%s Result=%s' % \ 
            (RC, STAFResult) 
          &lt;/log> 
          &lt;terminate block="'main'"/> 
        &lt;/sequence> 
      &lt;/if> 
 
      &lt;return>saveTestIndex&lt;/return> 
 
    &lt;/sequence> 
  &lt;/function> 
 
  &lt;function name="setupAndRunTestCase" scope="local"> 
 
    &lt;function-prolog> 
      For demonstration purposes, this function is simply delaying 
      for a random length of time to simulate running a testcase. 
      Replace this function with one that actually runs a testcase 
      via a process element. 
    &lt;/function-prolog> 
 
    &lt;function-map-args> 
      &lt;function-required-arg name="testcase"/> 
      &lt;function-required-arg name="testMachineName"/> 
    &lt;/function-map-args> 
 
    &lt;testcase name="testcase"> 
      &lt;sequence> 
 
        &lt;log message="1"> 
          'Running %s on machine %s' % (testcase, testMachineName) 
        &lt;/log> 
   
        &lt;script> 
          maxDelay = 10000 # 10 seconds (in microseconds) 
          import random 
          randomDelay = random.choice(range(maxDelay)) 
        &lt;/script> 
 
        &lt;stafcmd name="'%s running on %s' % (testcase, testMachineName)">  
          &lt;location>'local'&lt;/location> 
          &lt;service>'DELAY'&lt;/service> 
          &lt;request>'DELAY %s' % (randomDelay)&lt;/request> 
        &lt;/stafcmd> 
 
        &lt;tcstatus result="'pass'"/> 
 
      &lt;/sequence> 
    &lt;/testcase> 
  &lt;/function> 
 
&lt;/stax> 
</pre>
</ol>

<hr>

<h1><a name="Header_StaxPythonInterfaces" href="#ToC_StaxPythonInterfaces">
STAX Python Interfaces (STAFMarshalling)</a></h1>

The following Python classes, functions, and variables can be used by a STAX job
when unmarshalling or formatting marshalled data, or to create marshalled data.
These Python interfaces are provided in a Python module named STAFMarshalling.py,
which is imported automatically by the STAX service.
<p>
<b>Note:</b> You cannot import module PySTAF (described in the
<a href="http://staf.sourceforge.net/current/STAFPython.htm">Python User's Guide for STAF</a>
within a STAX job (e.g. within a &lt;script> element) because it uses some C libraries
which cannot be used by Jython (which is what STAX uses to execute code within a
&lt;script> element).  PySTAF should only be imported by Python scripts that are
executed via Python, not Jython.  Instead, you can use the Python classes, functions,
and variables defined in the STAFMarshalling module described in this section, as well
as the STAF Java classes talked about in the <a href="#Header_StafJavaClasses">
STAF Java Classes (STAFUtil, STAFRC, STAFVersion, etc)</a> section and defined in
the <a href="http://staf.sourceforge.net/current/STAFJava.htm">Java User's Guide for STAF</a>
since Jython allows you to import Java classes in addition to Python modules.
<p>
Some useful top-level functions that are not part of a class that are provided
in STAFMarshalling.py (and thus don't require an instance of the
STAFMarshallingContext class to be invoked) include:
<p>
<ul>
<li>Function <tt>isMarshalledData</tt>
  <p>
  <ul>
  <dl>
  <dt><b><tt>isMarshalledData</tt></b>(<i>someData</i>)
  <dd>A function used to test if the keyword argument <i>someData</i>
  is a string-based marshalled representation.
  Returns a true value if it is a marshalled string.
  </dl>
  <font color="darkblue">
  <pre>
&lt;script>
  if STAFMarshalling.isMarshalledData(aString):
      mc = STAFMarshalling.unmarshall(aString)
&lt;/script></pre></font>
  </ul>
<li>Function <tt>marshall</tt>
  <p>
  <ul>
  <dl>
  <dt><b><tt>marshall</tt></b>(<i>object</i><b><font size="+1">[</font></b>, <i>context</i><b><font size="+1">]</font></b>)
  <dd>A function used to create a string-based marshalled representation
  of the object specified by the keyword argument <i>object</i>.
  Returns a marshalled string.
  <p>
  The default for optional keyword argument <i>context</i> is <tt>None</tt>.
  <p>
  Note, normally you would use a <tt>STAFMarshallingContext</tt> object's marshall()
  method instead of this function.
  </dl>
  <font color="darkblue">
  <pre>
&lt;script>
  aString = STAFMarshalling.marshall(myList)
  aString = STAFMarshalling.marshall(myMap, myContext)
&lt;/script></pre></font>
  </ul>
<li>Function <tt>unmarshall</tt>
  <p>
  <ul>
  <dl>
  <dt><b><tt>unmarshall</tt></b>(<i>data</i><b><font size="+1">[</font></b>,
     <i>context</i><b><font size="+1">][</font></b>,
     <i>flags</i><b><font size="+1">]</font></b>)
  <dd>A function used to convert a string-based marshalled representation
  specified by the keyword argument <i>data</i> back into a data structure.
  It returns a marshalling context (from which you can get the data structure
  via the STAFMarshallingContext class getRootObject() function).
  <p>
  The required keyword argument <i>data</i> is a string to be unmarshalled.
  <p>
  The optional keyword argument <i>context</i> specifies the
  <tt>STAFMarshallingContext</tt> object that should be used when
  generating when unmarshalling the string. The default is <tt>None</tt>.
  <p>
  The optional keyword argument <i>flags</i> can be used to control
  how to unmarshall the string.
  When a string is unmarshalled into a data structure, it is possible
  that one of the string objects that is unmarshalled is itself the
  string form of another marshalled data structure.
  The default is <tt>UNMARSHALLING_DEFAULTS</tt> which will recursively
  unmarshall these nested objects.
  Use <tt>IGNORE_INDIRECT_OBJECTS</tt> to disable this additional processing.
  </dl>
  <font color="darkblue">
  <pre>
&lt;script>
  STAFMarshalling.unmarshall(myMarshalledData)
&lt;/script></pre></font>
  </ul>
<li>Function <tt>formatObject</tt>
  <p>
  <ul>
  <dl>
  <dt><b><tt>formatObject</tt></b>(<i>obj</i><b><font size="+1">[</font></b>,
   <i>context</i><font size="+1">]</font><b><font size="+1">[</font></b>),
  <dd>A function used to convert a data structure into a verbose formatted
  hierarchical string that can be used when you want a "pretty print"
  representation of an object.
  <p>
  The required keyword argument <i>obj</i> specifies the object to
  be formatted in a verbose, more readable format.
  <p>
  The optional keyword argument <i>context</i> specifies the
  <tt>STAFMarshallingContext</tt> object that should be used when
  generating the "pretty print" output. The default is <tt>None</tt>.
  </dl>
  <p>
  For example, if you had a Python list of maps and wanted to log a verbose
  formatted string representation of the object, you could do the following: 
  <font color="darkblue"><pre>
&lt;script>
  testList = [{'name': 'TestA', 'exec': '/tests/TestA.sh'}, {'name': 'TestB', 'exec': '/tests/TestB.py'}]
&lt;/script>

&lt;log message="1">STAFMarshalling.formatObject(testList)&lt;/log></pre></font>
  
  This would create a message that looked like:
  <font color="darkblue"><pre>
[
  {
    exec: /tests/TestA.sh
    name: TestA
  }  
  {
    exec: /tests/TestB.py
    name: TestB
  }
]</pre></font>
 
  Or, if you used the &lt;stafcmd> element to submit a STAF request that returns
  marshalled data (e.g. such as a QUERY, LIST, etc. request) and you wanted to log
  a verbose formatted representation for the result, you could use the
  STAFMarshalling.formatObject function and pass it the STAFResult and
  STAFResultContext variables.  For example:
  <font color="darkblue"><pre>
&lt;log message="1">STAFMarshalling.formatObject(STAFResult, STAFResultContext)&lt;/log></pre></font>

  Note that you can simply log the string representation of the STAFResultContext
  variable to get the same result.  For example, to log a verbose formatted
  representation for the following QUERY POOL request submitted to the RESPOOL
  service, you could do the following:
  <font color="darkblue"><pre>
&lt;stafcmd>
  &lt;location>'local'</location>
  &lt;service>'RESPOOL'</service>
  &lt;request>'QUERY POOL Test'</request>
&lt;/stafcmd>

&lt;if expr="RC == 0">
  &lt;log message="1">STAFResultContext&lt;/log>
&lt;/if></pre>

  This could create a message that looked like:
  <font color="darkblue"><pre>
{
  Description     : Test Pool
  Pending Requests: []
  Resources       : [
    {
      Entry: Resource1
      Owner: <None>
    }
  ]
}</pre></font>

  If you compare this with logging the STAFResult variable instead, you can
  see that the verbose formatted representation is more human-readable, but
  more verbose.  For example, if you specified to log STAFResult instead as
  follows:
  <font color="darkblue"><pre>&lt;log message="1">STAFResult&lt;/log></pre></font>
  the following would be the message generated (on a single line):
  <p>
  <font color="darkblue"><tt>{'requestList': [], 'staf-map-class-name': 'STAF/Service/ResPool/PoolInfo', 'description': 'Test Pool', 'resourceList': [{'owner': None, 'staf-map-class-name': 'STAF/Service/ResPool/Resource', 'entry': 'Resource1'}]}</tt></font>
  </ul>
</ul>


<h3>Class STAFMapClassDefinition</h3>

<h4>Definition</h4>

<dl>
<dt>
<b><font size="+1">class</font> <tt>STAFMapClassDefinition</tt></b>(<b><font size="+1">[</font></b><i>name</i><b><font size="+1">]</font></b></font></b>)
<dd>A class which provides the metadata associated with a map class.
In particular, it defines the keys associated with the map class. 
This class is used to create and/or access a STAF map class definition which can
be useful if you want to generate a STAF marshalling context with map classes.
The map class definition is used to reduce the size of a
marshalling map class in comparison to a map containing the same data.
It also contains information about how to display instances of the map class,
such as the order in which to display the keys and the display names to
use for the keys.  You get and set map class definitions using the 
<tt>STAFMarshallingContext</tt> class <tt>setMapClassDefinition</tt> and 
<tt>getMapClassDefinition</tt> functions.
<p>
The optional keyword argument <i>name</i> specifies the name of the STAF
map class definition.  The default is <tt>None</tt>.
</dl>
<p>
<tt>STAFMapClassDefinition</tt> defines the following methods:
<p>
<ul>
<dl>
<dt><b><tt>createInstance</tt></b>()
<dd>Returns a map containing one entry with a key name of <tt>'staf-map-class-name'</tt>
with a value set to the name of the map class definition.
<p>
<dt><b><tt>addKey</tt></b>(<i>keyName</i><b><font size="+1">[</font></b>,
    <i>displayName</i><b><font size="+1">]</font></b></i>)</tt>
<dd>Adds a key to the map class definition.
<p>The required keyword argument <i>keyName</i> specifies the name of a key.
<p>The optional keyword argument <i>displayName</i> specifies a string to
use when displaying the key.  The default is <tt>None</tt> which indicates to
use the actual key name when displaying the key.
<p>
<dt><b><tt>setKeyProperty</tt></b>(<i>keyName</i>, <i>property</i>, <i>value</i>)
<dd>Sets a property such as a short display name ("display-short-name")
for a key in the map class definition.
<p>The required keyword argument <i>keyName</i> specifies the name of
a key for which this property is being set.
<p>The required keyword argument <i>property</i> specifies the name of
the property being set.  The only property name currently recognized isropery name currently recognized is
<tt>'display-short-name'</tt>.
<p>The required keyword argument <i>value</i> specifies the value for
the property being set.
<p>
<dt><b><tt>keys</tt></b>()
<dd>Returns a list of all of the keys.  Each entry in the list is a
map containing a key named <tt>'key'</tt>, and optionally, a key named
<tt>'display-name'</tt>, and optionally, any key property names such as 
<tt>'display-short-name'</tt>.
<p>
<dt><b><tt>name</tt></b>()
<dd>Returns the name for the map class definition.
<p>
<dt><b><tt>getMapClassDefinitionObject</tt></b>()
<dd>Returns the map class definition map which consists of a map containing 
two entries:  <tt>'name'</tt> and <tt>'keys'</tt>.
</dl>
</ul>

<h4>Example</h4>

The following is an example of how to create a map class definition
named 'Test/MyMap' containing four keys, each with a display name,
and one with a short display name.
<ul>
<font color="darkblue">
<pre>
&lt;script>
  myMapClassDef = STAFMapClassDefinition('Test/MyMap')
  myMapClassDef.addKey('name', 'Name')
  myMapClassDef.addKey('exec', 'Executable')
  myMapClassDef.addKey('testType', 'Test Type')
  myMapClassDef.setKeyProperty('testType', 'display-short-name', 'Test')
  myMapClassDef.addKey('outputList', 'Outputs')
&lt;/script>

&lt;log message="1">
  "The keys for map class definition '%s' are:\n%s" % \
  (myMapClassDef.name(), STAFMarshalling.formatObject(myMapClassDef.keys()))
&lt;/log>
</pre>
</font>
</ul>

This example logs the following message:
<ul>
<font color="darkblue">
<pre>
The keys for map class definition 'Test/MyMap' are:
[
  {
    display-name: Name
    key         : name
  }
  {
    display-name: Executable
    key         : exec
  }
  {
    display-name      : Test Type
    key               : testType
    display-short-name: Test
  }
  {
    display-name: Outputs
    key         : outputList
  }
]
</pre>
</font>
</ul>

<h3>Class STAFMarshallingContext</h3>

<h4>Definition</h4>

<dl>
<dt>
<b><font size="+1">class</font> <tt>STAFMarshallingContext</tt></b>(<b><font size="+1">[</font></b><i>obj</i><b><font size="+1">]</font></b>)
<dd>A class is used to create and/or access a STAF marshalling context which
is used by STAF to help in marshalling and unmarshalling data.
A marshalling context is simply a container for map class definitions
and a data structure that uses (or is defined in terms of) them.
<p>
In order to use a map class when marshalling data, you must add the
map class definition to the marshalling context, set the root object
of the marshalling context to the object you want to marshall,
and then marshall the marshalling context itself.
When you unmarshall a data structure, you will always receive a
marshalling context. Any map class definitions referenced by map
classes within the data structure will be present in the marshalling context. 
<p>
The primary use of this class is to represent multi-valued results
that consist of a data structure (e.g. results from a QUERY/LIST
service request, etc.) as a string that can also
be converted back into the data structure.  This string can be
assigned to the string result buffer returned from the service request.
<p>
The optional keyword argument <i>obj</i> specifies the root object to be marshalled.
The default is <tt>None</tt>.
</dl>
<p>
<tt>STAFMarshallingContext</tt> defines the following methods:
<p>
<ul>
<dl>
<dt><b><tt>isMarshalledData</tt></b>(<i>someData</i>)
<dd>Tests if the keyword argument <i>someData</i> is a string-based
marshalled representation.  Returns a true value if is a marshalled string.
<p>
<dt><b><tt>setMapClassDefinition</tt></b>(<i>mapClassDef</i>)
<dd>Called to add a map class definition to the marshalling context's
 mapClassMap.
<p>
<dt><b><tt>getMapClassDefinition</tt></b>(<i>mapClassName</i>)
<dd>Returns the map class definition for the specified map class name
from the mapClassMap.
<p>
<dt><b><tt>hasMapClassDefinition</tt></b>(<i>mapClassName</i>)
<dd>Called to determine whether the marshalling context mapClassMap contains
the specified map class definition.
<p>
<dt><b><tt>getMapClassMap</tt></b>()
<dd>Returns the mapClassMap for the marshalling context.
<p>
<dt><b><tt>mapClassDefinitionIterator</tt></b>()
<dd>Returns a map of the keys in mapClassMap.
<p>
<dt><b><tt>setRootObject</tt></b>(<i>rootObject</i>)
<dd>Sets the root object for the marshalling context.
<p>
<dt><b><tt>getRootObject</tt></b>()
<dd>Returns the root object for the marshalling context.
<p>
<dt><b><tt>getPrimaryObject</tt></b>()
<dd>Returns the primary object for the marshalling context which is
    the marshalling context object itself if the mapClassMap contains
    one or more map class definitions.  Otherwise, it returns the
    root object.
<p>
<dt><b><tt>marshall</tt></b>()
<dd>This is the marshalling function that creates marshalled data for
the marshalling context.
</dl>
</ul>

<h4>Examples</h4>

The following is an example of how to create a marshalling context
containing one map class definition named 'Test/MyMap' and a root object
which is a list of maps defined by the map class definition. 
Then it shows how to marshall and unmarshall the marshalling context.

<ul>
<font color="darkblue">
<pre>
&lt;script>
  # Create a map class definition

  myMapClassDef = STAFMapClassDefinition('Test/MyMap')
  myMapClassDef.addKey('name', 'Name')
  myMapClassDef.addKey('exec', 'Executable')

  testList = [
               {'name': 'TestA', 'exec': '/tests/TestA.py'},
               {'name': 'TestB', 'exec': '/tests/TestB.sh'},
               {'name': 'TestC', 'exec': '/tests/TestC.cmd'}
             ]

  # Create a marshalling context with testList

  mc = STAFMarshallingContext()
  mc.setMapClassDefinition(myMapClassDef)

  myTestList = []

  for test in testList:
      testMap = myMapClassDef.createInstance()
      testMap['name'] = test['name']
      testMap['exec'] = test['exec']
      myTestList.append(testMap)

  mc.setRootObject(myTestList)
&lt;/script>

&lt;log message="1">'Test List:\n%s' % (mc)&lt;/log>

&lt;script>
  # Create a string from the marshalling context
  # This string could be a message that you log or send to a queue, etc.

  stringResult = mc.marshall()

  # Convert the marshalled string representation back into a list

  mc2 = STAFMarshalling.unmarshall(stringResult)
  theTestList = mc2.getRootObject()
&lt;/script>
</pre>
</font>
</ul>

This example logs the following message:
<ul>
<font color="darkblue">
<pre>
Test List:
[
  {
    Name      : TestA
    Executable: /tests/TestA.py
  }
  {
    Name      : TestB
    Executable: /tests/TestB.sh
  }
  {
    Name      : TestC
    Executable: /tests/TestC.cmd
  }
]
</pre>
</font>
</ul>
<p>

<h3>STAFMarshalling Constants</h3>

Constants defined in STAFMarshalling.py include:
<p>
<ul>
<dl>
<dt><b><tt>UNMARSHALLING_DEFAULTS</tt></b>
<dd>Set to 0 to indicate that nested objects should be
recursively unmarshalled.
<p>
<dt><b><tt>IGNORE_INDIRECT_OBJECTS</tt></b>
<dd>Set to <tt>1</tt> to indicate that nested objects should not
be recursively unmarshalled.
<p>
<dt><b><tt>MARSHALLED_DATA_MARKER</tt></b>
<dd>Set to <tt>'@SDT/'</tt>.
<p>
<dt><b><tt>NONE_MARKER</tt></b>
<dd>Set to <tt>'@SDT/$0:0:'</tt>.
<p>
<dt><b><tt>SCALAR_MARKER</tt></b>
<dd>Set to <tt>'@SDT/$'</tt>.
<p>
<dt><b><tt>SCALAR_STRING_MARKER</tt></b>
<dd>Set to <tt>'@SDT/$S'</tt>.
<p>
<dt><b><tt>LIST_MARKER</tt></b>
<dd>Set to <tt>'@SDT/['</tt>.
<p>
<dt><b><tt>MAP_MARKER</tt></b>
<dd>Set to <tt>'@SDT/{'</tt>.
<p>
<dt><b><tt>MC_INSTANCE_MARKER</tt></b>
<dd>Set to <tt>'@SDT/%'</tt>.
<p>
<dt><b><tt>CONTEXT_MARKER</tt></b>
<dd>Set to <tt>'@SDT/*'</tt>.
<p>
<dt><b><tt>NONE_STRING</tt></b>
<dd>Set to <tt>'<None>'</tt>.
<p>
<dt><b><tt>DISPLAY_NAME_KEY</tt></b>
<dd>Set to <tt>'display-name'</tt>.
<p>
<dt><b><tt>MAP_CLASS_MAP_KEY</tt></b>
<dd>Set to <tt>'map-class-map'</tt>.
<p>
<dt><b><tt>MAP_CLASS_NAME_KEY</tt></b>
<dd>Set to <tt>'staf-map-class-name'</tt>.
<p>
<dt><b><tt>ENTRY_SEPARATOR</tt></b>
<dd>Set to <tt>''</tt>.
<p>
<dt><b><tt>INDENT_DELTA</tt></b>
<dd>Set to <tt>2</tt>.
<p>
<dt><b><tt>SPACES</tt></b>
<dd>Set to a string containing 80 spaces.
</dl>
</ul>

<hr>

<h1><a name="Header_StafJavaClasses" href="#ToC_StafJavaClasses">STAF Java Classes (STAFUtil, STAFRC, STAFVersion, etc)</a></h1>

STAX uses Jython to execute Python code within a STAX job, which means that
you can import Java classes, as well as Python modules, in a &lt;script> element.
This means that you can use the STAF Java classes that are provided in the JSTAF.jar
file and that are described in the
<a href="http://staf.sourceforge.net/current/STAFJava.htm">STAF Java User's Guide</a>.
This section shows you how to import these classes and how to use them within a STAX job.
<p>
<h3><a name="STAFUtil">STAF Java Class com.ibm.staf.STAFUtil</a></h3>
<p>
The Java class that is most commonly used in STAX jobs is the
<tt><b>com.ibm.staf.STAFUtil</b></tt> class which provides some general utility APIs
for STAF.  Static methods that are provided by the STAFUtil class include the
<tt><b>wrapData()</b></tt> method which generates a length-delimited version of a
string (the :length: format) and is useful when generating a request string for a
STAF service request in a &lt;stafcmd> element when you have option values that
can contain spaces.  For example, when using the &lt;stafcmd> element to submit a
request to the FS service to copy a file whose name may contain spaces, you can
call the <tt>STAFUtil.wrapData()</tt> method passing it the FILE and TOFILE option
values as follows:
<ul>
<font color="darkblue">
<pre>
&lt;script>
  <b>from com.ibm.staf import STAFUtil</b>
    
  fromMachine = 'client1.company.com'
  fromFile = 'C:\Program Files\MyApp\file1.txt'
  toMachine = 'client2.company.com'
  toFile = 'C:\My Documents\file1.txt'
  request = 'COPY FILE %s TOFILE %s TOMACHINE %s' % \
            (<b>STAFUtil.wrapData(fromFile)</b>, <b>STAFUtil.wrapData(toFile)</b>, toMachine)
&lt;/script>

&lt;stafcmd>
  &lt;location>fromMachine&lt;/location>
  &lt;service>'FS'&lt;/service>
  &lt;request>request&lt;/request>
&lt;/stafcmd>
</pre>
</font>
</ul>
<p>
Note that you must import the <b>com.ibm.staf.STAFUtil</b> class before you can use it.
<p>
Another static method provided by the STAFUtil class is the
<tt><b>addPrivacyDelimiters()</b></tt> method which adds STAF privacy delimiters
to a value that you want to keep private, like a password.  For example, when
using the &lt;process> element, if you needed to provide a password in the
&lt;command> element that you wanted to keep private, you could call the
<b>addPrivacyDelimiters()</b> method to add privacy delimiters around the
password as follows:
<ul>
<font color="darkblue">
<pre>
&lt;script>
  <b>from com.ibm.staf import STAFUtil</b>

  password = 'secret'
&lt;/script>
    
&lt;process>
  &lt;location&lt;/location>
  &lt;command mode="'shell'">
    'C:/tests/admin -password %s' % (<b>STAFUtil.addPrivacyDelimiters(password)</b>)
  &lt;/command>
  &lt;stderr mode="'stdout'"/>
  &lt;returnstdout/>
&lt;/process>
</pre>
</font>
</ul>
<p>
<h3><a name="STAFRC">STAF Java Class com.ibm.staf.STAFResult (Imported as STAFRC)</a></h3>
<p>
Another Java class provided in the JSTAF.jar file is the <b>com.ibm.staf.STAFResult</b>
class.  This class contains the constant definitions for STAF return codes.
This Java class is automatically imported as <b>STAFRC</b> (instead of <b>STAFResult</b>
because STAFResult is the name of a variable set after elements like &lt;stafcmd> are
run), so you should not import this class yourself within a STAX job.
You may want to use the <b>STAFRC</b> constants in your STAX jobs when comparing the RC
(return code) variable set by the &lt;stafcmd> and &lt;process> elements.
For example, if you wanted to check if a particular file exists on a remote machine,
you could use the &lt;stafcmd> element to submit a QUERY ENTRY request to the FS service.
If the file exists, the RC will be set to 0 (Ok).  If the file does not exist, the RC
will be set to 48 (DoesNotExist).  If the remote machine is not running STAFProc,
the RC will be set to 16 (NoPathToMachine).  So, you could use STAFRC constants for
these return codes, such as <b>STAFRC.Ok</b>, <b>STAFRC.DoesNotExist</b>, and
<b>STAFRC.NoPathToMachine</b>, instead of using return codes 0, 48, and 16 to improve
the readability of your code.  For example:
<ul>
<font color="darkblue">
<pre>
&lt;stafcmd>
  &lt;location>machine&lt;/location>
  &lt;service>'FS'&lt;/service>
  &lt;request>'QUERY ENTRY %s' % (STAFUtil.wrapData(fileName))&lt;/request>
&lt;/stafcmd>

&lt;if expr="RC == <b>STAFRC.Ok</b>">
  &lt;log>'File %s exists on machine %s' % (fileName, machine)&lt;/log>
  &lt;elseif expr="RC == <b>STAFRC.DoesNotExist</b>">
    &lt;log>'File %s does not exist on machine %s' % (fileName, machine)&lt;/log>
  &lt;/elseif>
  &lt;elseif expr="RC == <b>STAFRC.NoPathToMachine</b>">
    &lt;log>'Error: Machine %s does not appear to be running STAFProc' % (machine)&lt;/log>
  &lt;/elseif>
  &lt;else>
    &lt;log>
      'Error: STAF %s FS QUERY ENTRY %s failed with RC=%s STAFResult=%s' % \
      (fileName, machine, RC, STAFResult)
    &lt;/log>
  &lt;/else>
&lt;/if>
</pre>
</font>
</ul>
<p>
<h3><a name="STAFVersion">STAF Java Class com.ibm.staf.STAFVersion</a></h3>
<p>
Another Java class provided in the JSTAF.jar file is the
<b>com.ibm.staf.STAFVersion</b> class.  This class, and its <b>compareTo()</b>
method can be used to check if a machine is running at a minimum required
STAF version.  Here's an example of a STAX job that contains a function named
compareStafVersion that compares the STAF version running on a specified machine
with a specified version to verify if the machine is running this required STAF
version or later.  In this STAX job, the main function calls the
compareStafVersion function to check if STAF Version 3.1.0 or later is running
on machine client1.austin.ibm.com.  This STAX job imports not only the
<b>com.ibm.staf.STAFUtil</b> class, but also imports other Java classes such as
<b>java.lang.NumberFormatException</b> and <b>java.lang.Error</b>.
This STAX job also uses the STAFRC alias for the com.ibm.staf.STAFResult class
talked about in the above section.

<ul>
<font color="darkblue">
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">
&lt;stax>
  &lt;defaultcall function="main" />

  &lt;function name="main">
    &lt;sequence>

      &lt;call function="'compareStafVersion'">
        {'requiredVersion': '3.1', 'machine': 'client1.austin.ibm.com'}
      &lt;/call>

      &lt;script> 
        [rc, result] = STAXResult
      &lt;/script>

      &lt;if expr="rc == 0">
        &lt;log message="1">'Valid STAF version: %s' % (result)&lt;/log>
        &lt;else>
          &lt;log message="1">result&lt;/log>
        &lt;/else>
      &lt;/if>

    &lt;/sequence>
  &lt;/function>

  &lt;function name="compareStafVersion">

    &lt;function-prolog>
      &lt;![CDATA[
      This function compares the STAF version of a machine with the specified
      minimum required STAF version.
      ]]>
    &lt;/function-prolog>

    &lt;function-epilog>
      &lt;![CDATA[
      &lt;h4>Returns:&lt;/h4>
      This function returns a list containing the return code (an integer) and
      a string.  The string will either be the version of the specified machine
      if the return code is 0 indicating a success, or if the return code != 0,
      it the string will be an error message.
            
      &lt;h4>Examples:&lt;/h4>
      &lt;pre>
        &lt;call function="'compareStafVersion'">
          {'requiredVersion': '3.3.3', 'machine': 'client1.company.com'}
        &lt;/call>

        &lt;call function="'compareStafVersion'">
          {'requiredVersion': '3.1'}
        &lt;/call>
      &lt;/pre>
      &lt;/ol>
      ]]>
    &lt;/function-epilog>

    &lt;function-map-args>
      &lt;function-required-arg name="requiredVersion">
        This is the minimum required STAF version
      &lt;/function-required-arg>
      &lt;function-optional-arg name="machine" default="'local'">      
        This is the machine's host name or IP address whose STAF version is
        to be compared with the minimum required STAF version
      &lt;/function-optional-arg>
    &lt;/function-map-args>

    &lt;sequence>

      &lt;stafcmd>
        &lt;location>machine&lt;/location>
        &lt;service>'MISC'&lt;/service>
        &lt;request>'VERSION'&lt;/request>
      &lt;/stafcmd>

      &lt;if expr="RC != STAFRC.Ok">
        &lt;sequence>
          &lt;script>
            errMsg = 'STAF %s MISC VERSION failed with RC=%s STAFResult=%s' % \
                     (machine, RC, STAFResult)
          &lt;/script>
          &lt;return>[RC, errMsg]&lt;/return>
        &lt;/sequence>
      &lt;/if>

      &lt;script>
        versionStr = STAFResult

        # Verify that the required STAF version, or later, is running on
        # the specified machine

        rc = 0
        errMsg = versionStr

        <b>from com.ibm.staf import STAFVersion</b>
        from java.lang import NumberFormatException, Error

        try:
             version = <b>STAFVersion(versionStr)</b>
             reqVersion = <b>STAFVersion(requiredVersion)</b>

             if <b>version.compareTo(reqVersion)</b> &lt; 0:
                 # Version is lower than the minimum required version
                 rc = STAFRC.InvalidSTAFVersion
                 errMsg = 'Version is %s.  Version %s or later is required' % \
                          (versionStr, requiredVersion)
        except NumberFormatException, e:
            rc = STAFRC.InvalidValue
            errMsg = 'compareStafVersion:  Invalid STAF required version: ' + \
                     '%s, Exception info: %s' % (requiredVersion, str(e))
        except Error:
            # Class STAFVersion was added in STAF V3.1.0 so need to catch a
            # NoSuchMethod error
            rc = STAFRC.InvalidSTAFVersion
            errMsg = 'compareStafVersion:  Version is %s.  ' % (versionStr) + \
                     'Version %s or later is required.' % (requiredVersion)
      &lt;/script>

      &lt;return>[rc, errMsg]&lt;/return>

    &lt;/sequence>

  &lt;/function>
&lt;/stax>
</pre>
</font>
</ul>
<p>
For more information on the STAF Java classes that are provided in the JSTAF.jar
file, see the <a href="http://staf.sourceforge.net/current/STAFJava.htm">
STAF Java User's Guide</a>.

<hr>

<h1><a name="Header_StaxFileCache" href="#ToC_StaxFileCache"><b>STAX File and Machine Caching</b></a></h1>

STAX file and machine caching can improve performance when you re-run a STAX job
using the same STAX xml file and/or when you import the same STAX xml file that
has already been imported by another job because no re-parsing of the STAX xml
file is required and no additional information about the machine where the STAX
xml file resides is required.
<p>
The file cache stores parsed STAX XML files that have been loaded from
a machine.  When file caching is enabled, the cache will be checked during the 
following operations:
<p>  
<ul>
  <li>When submitting an <tt>EXECUTE</tt> request using the <tt>FILE</tt> option.</li>
  <li>When a function imports file(s) using the <tt>function-import</tt> element.</li>
  <li>When a STAX job file imports a file using the <tt>import</tt> element.</li>
</ul>
<p>
The machine cache stores information (e.g. file separator) about the machines
where the STAX XML files that have been loaded reside if the machine where
the STAX XML file resides is remote (e.g. not the STAX service machine).
The machine cache is checked during the same operations as above if the
STAX XML file resides on a remote machine.
<p>
The file and machine cache stores entries based on the machine name and file path from which the STAX
XML file was loaded. The cache cannot correlate different machine names that actually
refer to the same physical machine (such as IP address vs host name). To maximize the benefits 
of the cache, the machine names supplied to an EXECUTE request and to &lt;function-import> and
&lt;import> elements should be consistent for the same physical machines. The exception is
with the local machine. The following machine names will all be treated as <tt>local</tt>:
<p>
<ul>
  <li>local</li>
  <li>127.0.0.1</li>
  <li>localhost</li>
  <li>The resolved value of STAF variable {STAF/Config/Machine}</li>
  <li>The local ip address</li>
  <li>The local host name (if it can be resolved)</li>
</ul>
<p>
The file and machine cache will strip the interface and port from the machine (endpoint) name. The
following machine names will all be interpreted as <tt>myhost</tt>:
<p>
<ul>
  <li>tcp://myhost</li>
  <li>tcp2://myhost@6501</li>
  <li>myhost@6500</li>
</ul>
<p>
The file cache normalizes file names and treats file names as case-sensitive on
Unix machines and case-insensitive on Windows machines.  But, there are still some
cases where the STAX file cache cannot detect if a file name matches one that is in
the file cache.  For example, if the following Windows file names were specified,
the STAX file cache would not detect a match:
<ul>
  <li>c:\test\myfile.xml</li>
  <li>\test\myfile.xml</li>
</ul>
So, it is best to specify consistent file names in EXECUTE requests and in
&lt;function-import> and &lt;import> elements.

<h3>STAX File Cache Tuning</h3>
<p>
The STAX file cache first attempts to retrieve the modification time of the file from
the target machine.  If the modification time is different than that of the copy in the
cache, the file will be reloaded and the cached copy will be updated.  If the modification
time cannot be retrieved, the cache will be bypassed.
<p>
You can set a maximum number of entries in the file cache.  The default is 20, but you
can change this by specifying the <tt>MAXFILECACHESIZE</tt> parameter when registering
the STAX service, or you can change it dynamically by submitting a <tt>SET MAXFILECACHESIZE</tt>
request to the STAX service.
<p>  
You can set the cache replacement algorithm that you want the file cache to use.
When the cache is full (or when the maximum size of the cache is changed to a smaller
value), this algorithm chooses which files to discard to make room for the new files.
The default is LRU (Least Recently Used), but you can change this by specifying the
<tt>FILECACHEALGORITHM</tt> parameter when registering the STAX service, or you can change
it dynamically by submitting a <tt>SET FILECACHEALGORITHM</tt> request to the STAX service.
STAX file caching supports two cache replacement algorithms:
    <p>
    <ol>
    <li>LRU specifies the "Least Recently Used" cache algorithm which removes
        the least recently used file first (e.g. the file with the oldest
        "Last Hit Date-Time").  This is the default.
    <p>
    <li>LFU specifies the "Least Frequently Used" cache algorithm which removes
        the file that is used least often (e.g. the file with the least number
        of "Hits").  If cached files have the same number of hits, the file
        with the oldest "Last Hit Date-Time" will be removed.
        <p>
        In addition, you can set a maximum age for a file in the file cache
        by specifying the <tt>MAXFILECACHEAGE</tt> so that this
        algorithm will also take into account if a file hasn't been used
        for the specified maximum age which means it is considered to be stale.
        The maximum age is 0 by default, which means that there is no maximum age.
        If you set the maximum age to a non-zero value, this indicates that
        a file in the cache will be considered to be "stale" if it hasn't
        been used (last hit) for this maximum age.  Stale files with the oldest
        "Last Hit Date-Time" will be removed before any non-stale files.
        You can specify the <tt>MAXFILECACHEAGE</tt> parameter when registering
        the STAX service, or you can change it dynamically by submitting a
        <tt>SET FILECACHEALGORITHM</tt> request to the STAX service.
</ol>
<p>
To help you choose which file cache replacement algorithm is best for your STAX service,
you can submit a "LIST FILECACHE" request to the STAX service at any time to see the
contents of the file cache.  In addition, you can submit a "LIST FILECACHE SUMMARY" request
to the STAX service to get a file cache summary information which includes a "Hit Ratio".
In general, the better your hit ratio is, the better your selected file cache algorithm
is performing for you.  Note that you can change your file cache algorithm at any time.
And if using the LFU file cache algorithm, you can tune its performance by changing the
MAXFILECACHEAGE setting if desired.
<p>
You can clear the file cache by submitting a <tt>PURGE FILECACHE</tt> request to the
STAX service.  This also clears the overall cache statistics provided via a "LIST
FILECACHE SUMMARY" request like Hit Count, Miss Count, Total Requests, and the Hit Ratio.

<h3>STAX Machine Cache Tuning</h3>
<p>
You can set a maximum number of entries in the machine cache.  The default is 20, but you
can change this by specifying the <tt>MAXMACHINECACHESIZE</tt> parameter when registering
the STAX service, or you can change it dynamically by submitting a <tt>SET MAXMACHINECACHESIZE</tt>
request to the STAX service.  STAX machine caching uses a least recently used (LRU) algorithm
for clearing the cache when it becomes full.  The items with the oldest "Last Hit Date-Time"
will be removed when the cache extends beyond its bounds, or when the size of the cache is
changed to a smaller value.  You can also clear the machine cache by submitting a
<tt>PURGE MACHINECACHE</tt> request to the STAX service.
<p>

<hr>

<h1><a name="Header_Extensions" href="#ToC_Extensions"><b>STAX Extensions</b></a></h1>

You can add extensions to the STAX service.  For example, you can write a STAX service extension
to define one or more new elements and you can write a STAX monitor extension to define a
new plug-in view that can be displayed via the STAX Monitor.  See the
"STAX Extensions Developer's Guide" for more information on how to write extensions.

<h2><a name="Header_RegServiceExt" href="#ToC_RegServiceExt">Registering STAX Service Extensions</a></h2>

This section discusses how to register STAX service extensions when configuring the STAX service.
STAX service extensions allow you to extend the STAX DTD and define additional
XML elements that can be used in STAX jobs.
<p>
STAX extensions are registered via the PARMS option when configuring the STAX
service (either in the STAF.cfg file or dynamically using a SERVICE ADD request).
Each STAX extension is provided in a jar file.  You can specify the
STAX extension jar files that you want to register using an EXTENSIONXMLFILE
parameter or using EXTENSION parameters (or using an EXTENSIONFILE
parameter, but this parameter has been deprecated).
<p>
<h4>Syntax</h4>
<pre>
SERVICE &lt;Name> LIBRARY JSTAF EXECUTE &lt;STAX Jar File Name>
               [OPTION &lt;Name[=Value]>]...
               [PARMS &lt;"> [EVENTSERVICEMACHINE &lt;EventMachine>]
                          [EVENTSERVICENAME &lt;EventName>]
                          [NUMTHREADS &lt;NumThreads>]
                          [PROCESSTIMEOUT &lt;ProcessTimeout>]
                          [FILECACHING &lt;Enabled | Disabled>]
                          [MAXFILECACHESIZE &lt;Max Files>]
                          [FILECACHEALGORITHM &lt;LRU | LFU>
                           [MAXFILECACHEAGE &lt;Number>[s|m|h|d|w]]]
                          [MAXMACHINECACHESIZE &lt;Max Machines>]
                          [CLEARLOGS &lt;Enabled | Disabled>]
                          [LOGTCELAPSEDTIME &lt;Enabled | Disabled>]
                          [LOGTCNUMSTARTS &lt;Enabled | Disabled>]
                          [LOGTCSTARTSTOP &lt;Enabled | Disabled>]
                          [PYTHONOUTPUT &lt;PythonOutput>]
                          [PYTHONLOGLEVEL &lt;Log Level>]
                          <b>[EXTENSIONXMLFILE &lt;Extension XML File> |
                           EXTENSIONFILE &lt;Extension Text File>]
                          [EXTENSION &lt;Extension Jar File>...</b>
                      &lt;">]
</pre>

<tt>EXTENSIONXMLFILE</tt>
specifies the fully-qualified name of an extension XML file
that defines all of the STAX extensions to be registered in an XML format.
This XML file must conform to the stax-extensions DTD.
Refer to the <a href="#Header_ExtensionXMLFile">"Creating a STAX Extensions XML File"</a>
section for more information on how to create an extension xml file.</li>
We recommend using the EXTENSIONXMLFILE parameter to register STAX extensions
as it provides the ability to specify parameters for extensions (if the extension
supports parameters) and to include or exclude specific elements provided in
the extension jar file.  This option resolves STAF variables.
<p>
<tt>EXTENSION</tt>
specifies the fully-qualified name of an extension jar file that
defines a STAX extension to be registered.  You may specify multiple EXTENSION
parameters.  You may optionally specify to only register some of the elements
provided in the extension jar file by specifying one or more spaces after the
jar file name, a #, one or spaces, and then a space separated list of the
element names that to be registered.  The format is:
<p><tt> &lt;Jar File Name>  [ # elementName1 elementName2 ...]</tt>
<p>If no elements are specified when registering the extension, all of the elements with
staf/stax/extension/&lt;element> entries in the extension jar file's manifest file
will be registered.  This option resolves STAF variables.
<p>
<tt>EXTENSIONFILE</tt>
specifies the fully-qualified name of a text file that contains entries
where each line has the same format as described above for the EXTENSION parameter.
This parameter has been deprecated as of STAX V1.5.0.  Use the EXTENSIONXMLFILE
parameter instead.  This option resolves STAF variables.

<h4>Examples</h4>

<b>Goal:</b>  Configure the STAX service and register all the STAX extensions
specified in an extension xml file named extensions.xml in the services
directory off the STAF root directory.
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE {STAF/Config/STAFRoot}/services/stax/STAX.jar \
        OPTION J2=-Xmx512 \
        <b>PARMS "EXTENSIONXMLFILE {STAF/Config/STAFRoot}/services/stax/extensions.xml"</b>
</pre>

<b>Goal:</b>  Configure the STAX service using the EXTENSION option to specify
extension jar files C:/STAXExt/ExtDelay.jar and C:/STAXExt/MyExt.jar.
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE C:/STAF/services/stax/STAX.jar \
        OPTION J2=-Xm512 \
        <b>PARMS "EXTENSION C:/STAXExt/ExtDelay.jar EXTENSION C:/STAXExt/MyExt.jar"</b>
</pre>

<b>Goal:</b>  Configure the STAX service using the EXTENSION option to specify
extension jar file C:/STAXExt/ExtDelay.jar and to only register the ext-delay
and ext-wait elements).  Note that double quotes are needed around the
value specified for EXTENSION because the value contains spaces.  Note also that
because these double quotes are within the double quotes specified for the PARMS
option, they need to be escaped (using \).
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE {STAF/Config/STAFRoot}/services/stax/STAX.jar \
        <b>PARMS "EXTENSION \"C:/STAXExt/ExtDelay.jar  # ext-delay ext-wait\""</b>
</pre>

<b>Goal:</b>  Configure the STAX service using the EXTENSIONFILE option to specify
the name of a text file, extensions.txt, located in the services/stax directory off
the STAF root directory.  This text file contains the names of extension jar
files to be registered.
<pre>
SERVICE STAX LIBRARY JSTAF EXECUTE {STAF/Config/STAFRoot}/services/stax/STAX.jar \
        <b>PARMS "EXTENSIONFILE {STAF/Config/STAFRoot}/services/stax/extensions.txt"</b>
</pre>

<h2><a name="Header_ExtensionXMLFile" href="#ToC_ExtensionXMLFile">Creating a STAX Extensions XML File</a></h2>

A STAX extensions XML file defines the STAX extensions to be registered
when configuring the STAX service.  This XML file must comply with the
STAX Extensions document type definition (DTD) shown in appendix <a href="#Header_ExtDTD">
"STAX Extensions DTD"</a>.  Note that the stax-extensions DTD is provided
as part of the STAX zip/tar file (called ext/stax-extensions.dtd).
<p>
This section describes how to create a STAX Extensions XML file.
<p>
The first line in a STAX Extensions XML file should start with an XML declaration.
This indicates the document is written in XML and specifies the XML version,
the language encoding for the document, and indicates that the document refers
to an external DTD (standalone="no").
<p>
The second line in a STAX Extensions XML file should be the document type declaration.  This
is used to indicate the DTD used for the document. It defines the name of the root
element (stax-extensions), and the DTD to be used.  STAX checks the syntax of XML
documents using a validating XML parser to verify that the document complies with the DTD.
Note that DTDs are all about specifying the structure and syntax of XML documents (not their content).
<p>
So, the first two lines in a STAX Extensions XML file should look like:
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax-extensions SYSTEM "stax-extensions.dtd">
</pre>

<h3><a name="Header_StaxExt_Root" href="#ToC_StaxExt_Root">stax-extensions</a></h3>

A STAX Extensions XML file must contain a root element which contains all other elements
in the document. The root element of a STAX Extensions XML file is <b>stax-extensions</b>.
<p>
The <b>stax-extensions</b> element consists of one or more <b>extension</b> elements,

<h3><a name="Header_StaxExt_Extension" href="#ToC_StaxExt_Extension">extension</a></h2>

The <b>extension</b> element is used to specify a STAX extension to register.
All <b>extension</b> elements are contained within the root <b>stax-extensions</b>
element.
<p>
The extension element has one attribute:
<ul>
<li>
<b>jarfile</b> - specifies the fully-qualified name of the STAX extension jar
file to be registered.  This attribute is required.
This attribute will resolve STAF variables.
</ul>
<p>
The extension element can optionally contain the following sub-elements:
<p>
<ul>
<li><b>parameter</b> - specifies the name and value for a parameter to this
STAX extension.  Any number of parameter elements may be specified for an
extension.  See the extension provider's documentation for each extension
to see what parameters it supports, if any.
<p>
The parameter element has two attributes:
    <ul>
    <li><b>name</b> - specifies the name of the parameter.  It is required.
    <li><b>value</b> - specifies the value for the parameter.  It is required.
    </ul>
<p>
<li><b>include-element</b> - specifies the name of an element supported
    by the STAX extension jar file to be included.  Any number of
    include-elements may be specified for an extension.  However,
    if an include-element is specified, no exclude-elements can be
    specified.  If one or more include-elements are specified, then
    only those elements named by each include-element are registered.
    Any other elements supported by the STAX extension jar file are
    excluded (not registered).
    <p>
    The include-element has one attribute:
    <ul>
    <li><b>name</b> - specifies the name of the element to include.
        It is required.
    </ul>
<p>
<li><b>exclude-element</b> - specifies the name of an element supported
    by the STAX extension jar file to be excluded (not registered).
    Any number of exclude-elements may be specified for an extension.
    However, if an exclude-element is specified, no include-elements
    can be specified.  If one or more exclude-elements are specified,
    then only those elements supported by the STAX extension jar file
    that are not named by an exclude-element are registered.
    <p>
    The exclude-element has one attribute:
    <ul>
    <li><b>name</b> - specifies the name of the element to exclude.
        It is required.
    </ul>
</ul>
<p>
<b>Note:</b>
<ul>
<li>If no <b>include-element</b> or <b>exclude-element</b> elements
are specified, all of the elements supported by the STAX extension jar
file will be registered.</li>
</ul>

<h4>
Usage:</h4>

The following STAX Extensions XML file defines three STAX extensions.
In this example, all three extension elements are empty elements.
<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax-extensions SYSTEM "stax-extensions.dtd">
&lt;stax-extensions>

  &lt;extension jarfile="C:/STAF/services/stax/ExtDelay.jar"/>

  &lt;extension jarfile="C:/STAF/services/stax/ExtMessageText.jar"/>

  &lt;extension jarfile="C:/STAF/services/stax/EmailExt.jar"/>

&lt;/stax-extensions>
</pre>

The following STAX Extensions XML file defines four STAX extensions.
All three extension files are located in the services/stax directory off
the root of the STAF directory.
<ul>
<li>The first extension jar file, named ExtMessageText.jar,
has no parameters, no include-elements, and no exclude-elements.
<li>The second extension jar file, named ExtDelay.jar,
has one parameter specified named delay and
specifies to include all elements supported by this extension jar file
except for the ext-wait and ext-sleep elements.
<li>The third extension jar file, named EmailExt.jar
specifies to include just one element named email so that any
other elements supported by this extension jar file are excluded
(not registered).
</ul>

<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax-extensions SYSTEM "stax-extensions.dtd">

&lt;stax-extensions>

   &lt;extension jarfile="{STAF/Config/STAFRoot}/services/stax/ExtMessageText.jar"/>

   &lt;extension jarfile="{STAF/Config/STAFRoot}/services/stax/ExtDelay.jar">
     &lt;parameter name="delay" value="5"/>
     &lt;exclude-element name="ext-wait"/>
     &lt;exclude-element name="ext-sleep"/>
   &lt;/extension>

   &lt;extension jarfile="{STAF/Config/STAFRoot}/services/stax/EmailExt.jar">
     &lt;include-element name="email"/>
   &lt;/extension>

&lt;/stax-extensions>
</pre>

<h2><a name="Header_RegMonitorExt" href="#ToC_RegServiceExt">Registering STAX Monitor Extensions</a></h2>

STAX monitor extensions define a new plug-in views that can be displayed via the STAX Monitor.
For example, you may want to register a STAX monitor extension that displays a new
extension element in the "Active Job Elements" panel.  Or you may want to register
a STAX monitor extension that displays a new tab in the "Active Job Elements" or
"Info" panel.
<p>
As of STAX V1.5.0, any STAX monitor extensions that are registered with the STAX
service will be automatically made available to the STAX Monitor.  You should only
specify local extension jar files that are not registered with the STAX service or
that contain monitor extensions that you want to override (e.g. with a later
version of the extension).  See the <a href="#Header_RegServiceExt">"Registering
STAX Service Extensions"</a> section for more information on how to register
STAX extensions with the STAX service.
<p>
To view monitor extensions that are registered with the STAX Monitor, from
the main "STAX Job Monitor" panel, click on the <b>File->Properties->Extensions</b> tab.
See the <a href="#MonExtensionsTab">"Extensions" tab</a> section for more information.
You can also display the monitor extensions that are registered by specifying
the -extensions option when starting the STAX Monitor.
<p>
To view, add, or delete a local extension jar file, from the main "STAX Job Monitor"
panel, click on the <b>File->Properties->Extension Jars</b> tab.
See the <a href="#MonExtensionJarsTab">"Extension Jars" tab</a> section for more
information.
<p>
<b>Note:</b>  The "View" menu for the "STAX Job Monitor" panel does not currently
   support the ability to de-select registered monitor extensions.
</p>

<hr>

<h1><a name="Header_GenerateDoc" href="#ToC_GenerateDoc">Generating STAX Function Documentation</a></h1>

As you grow your library of STAX functions, you will probably find it useful
to document the STAX functions to make it easier to reuse them and share
them with other test groups.
We provide the following tools to generate documentation for your STAX xml files.

<h2><a name="Header_STAXDoc" href="#ToC_STAXDoc">Using STAXDoc</a></h2>
<p>
STAXDoc is a tool used to generate documentation for your STAX xml files.
STAXDoc is provided as a jar file,<tt> STAXDoc.jar, </tt> as part of the STAX service
zip/tar file.
<p>    
STAXDoc is a Java application that parses the documentation elements in a
set of STAX xml files and generates an HTML document describing all of the
functions defined in the STAX xml files.
STAXDoc uses an XSLT stylesheet processor to transform function information
provided in STAX xml files into HTML files which are nicely formatted. 
<p>
You can run STAXDoc on a set of directories that contains STAX xml files.
Each sub-directory is considered a source "package" and can be passed
to the STAXDoc command line.
STAXDoc also allows you to include other information, such as overview comments,
in the HTML file it generates.
<p>
The documentation elements defined for a STAX xml file that STAXDoc parses
include:
<ul>
<li><tt>function-prolog</tt> (or the deprecated <tt>function-description</tt> element)
<li><tt>function-epilog</tt>
<li>Description text for the following function argument elements:
  <ul>
  <li><tt>function-required-arg</tt>
  <li><tt>function-optional-arg</tt>
  <li><tt>function-other-arg</tt>
  <li><tt>function-arg-def</tt>
  </ul>
</ul>
<p>
See the <a href="http://staf.sourceforge.net/current/STAXDoc.htm">STAXDoc User's Guide</a>
for more information on how to use STAXDoc.
<p>
Here's an example of how to use STAXDoc to generate documentation for the
"<tt>samples</tt>" and "<tt>libraries</tt>" directories in<tt> C:\STAF\services\stax</tt>.
<p>
<tt>java -jar STAXDoc.jar -d c:\STAXDoc\samples -sourcepath C:\STAF\services\stax samples libraries</tt>
<p>
Here's a view of the HTML documentation generated by STAXDoc for the overall
documentation obtained by specifying the<tt> index.html </tt> file
in the destination directory:
<p>
<img src="staxdoc.gif" alt="STAXDoc Package Documentation">
<p>
Here's a view of part of the HTML documentation generated by STAXDoc for file<tt> sample1.xml</tt>
obtained by clicking on <font color="blue"><b>sample1.xml</b></font>.  
<p>
Note that a summary of all of the functions defined in the xml file are shown
first, followed by a detailed description of each function.
<p>
<img src="staxdoc2.gif" alt="STAXDoc File Documentation">
<p>
<h2><a name="Header_XSLT" href="#ToC_XSLT">Using StyleSheet FunctionList.xsl</a></h2>
<P>
Instead of using STAXDoc, you can create your own XSL StyleSheet(s) to generate documentation
about your STAX Functions.  We provide a sample XSL Stylesheet, <tt>FunctionList.xsl</tt>.
FunctionList.xsl describes how to transform information provided in
the &lt;function-prolog element (or the deprecated &lt;function-description element),
the &lt;function-epilog> element and the function argument elements into readable documentation.
It can be used in conjunction with an XSLT stylesheet processor, such as Xalan, to
transform function information provided in a STAX XML document to an HTML document.
<P>
Many JREs (V1.3 oand later) provide an XSLT processor that you can use.  Or, you can
use an XSLT processor such as Xalan.  The Xalan-Java XSLT processor is available for download
from <a href="http://xml.apache.org/xalan-j/index.html">http://xml.apache.org/xalan-j/index.html</a>.
Other XSLT processors are also available.
<P>
The <tt>FunctionList.xsl</tt> file can be found in the <tt>samples</tt> directory from the
extracted STAX zip/tar file you downloaded.  You may want to customize this stylesheet
to generate function documentation in the form that best suites your purposes.
<P>
Here is part of the HTML document generated from the <tt>sample1.xml</tt> file provided with STAX.
This HTML documentation was generated using STAXDoc.
Note that we had to comment out the DOCTYPE line in <tt>sample1.xml</tt> to avoid
an error that STAX.DTD is not available (unless you create it using the STAX GET DTD request
and redirect its output to a file).  See section <a href="#Header_Get">GET DTD</a>
for more information on how to create a stax.dtd file.
<p>
<img src="XSLTFunctionDoc.gif" alt="XSLT Function Documentation">
<p>

<hr>

<h1><a name="Header_Debugging" href="#ToC_Debugging">Debugging</a></h1>

If you have a question or are experiencing a problem, first check out the STAF/STAX FAQ at
<a href="http://staf.sourceforge.net/current/STAFFAQ.htm">
http://staf.sourceforge.net/current/STAFFAQ.htm</a> to see if it provides an answer
to your question or problem.
<p>
Note that since STAX is a Java service, errors that occur running the STAX service
may be logged to its JVM log.  If you're experiencing a problem configuring the
STAX service, or an RC 6 submitting a request to the STAX service, or a problem
running a STAX job, such as the job hanging, check its JVM log to see if any
additional information about the problem is logged, such as a Java exception.
The JVM logs are stored in the {STAF/DataDir}/lang/java/jvm/&lt;JVMName> directory on
the system where the STAX service is registered, where &lt;JVMName> is either STAFJVM1 if
you're using the default JVM name or it's the value specified for the JVMName option
when the STAX service was registered.  The current JVM log is named JVMLog.1.
Or, to display the STAX JVM Log via the STAX Monitor, see the
<a href="#Header_DisplayJVMLog">Displaying a JVM Log</a> section.
<p>
If the JVM log contains an OutOfMemory error, any Java services using this JVM will have
to be removed and added (registered) in order to start accepting requests. You may want
to look at increasing the JVM's maximum heap size as the Java service(s) using this JVM
may require more memory than can be allocated and also possibly increasing the JVM's
maximum permanent generation space.
See the answer to question <a href="http://staf.sourceforge.net/current/STAFFAQ.htm#d0e2258">
Why is the STAX JVM crashing with a java.lang.OutOfMemoryError logged in the
STAX JVM log?</a> in the STAF/STAX FAQ for suggestions on how to tune the JVM
to prevent OutOfMemory errors.  Also, note that section
<a href="http://staf.sourceforge.net/current/STAFUG.htm#HDRJVMCFG">4.4.3 JSTAF service
proxy library</a> in the STAF User's Guide contains more information on how to
set JVM options when registering a STAF Java service.
<p>
If the JVM crashed, any Java services using this JVM will have to be removed and
added (registered) in order to start accepting requests.
<p>
If a STAX job appears to be hung or you just want to see what it's currently executing,
submit the <a href="#ListThreads"> <tt> LIST JOB &lt;Job ID> THREADS</tt></a> request
to the STAX service to get a list of the threads currently running in the specified STAX job.
Then, for each thread, submit a <a href="#QueryThread"><tt> QUERY JOB &lt;Job ID> 
THREAD &lt;Thread ID></tt></a> request to the STAX service to get more information on the
curent state of a thread.  Note that querying a thread provides a "Call Stack" and a
"Condition Stack" for the thread which can be useful for debugging a STAX job.
See the <a href="#QueryThread"><tt> QUERY JOB &lt;Job ID> THREAD &lt;Thread ID></tt></a>
section for more information on the "Call Stack" and "Condition Stack".
Note that the "Call Stack" shows you which elements in a STAX job are currently
being executed.
<p>
For example, if debugging job 10 that's currently running, you could submit
the following requests:
<ul>
<font color="darkblue">
<pre>
C:\>STAF local STAX LIST JOB 10 THREADS
Response
--------
Thread ID Parent TID State
--------- ---------- -------
1         &lt;None>     Blocked


C:\>STAF local STAX QUERY JOB 10 THREAD 1
Response
--------
{
  Thread ID      : 1
  Parent TID     : &lt;None>
  Start Date-Time: 20071002-14:17:36
  Call Stack     : [
    function: Main (Line: 11, File: c:\tests\Test1.xml, Machine: client1)
    finally:  (Line: 31, File: c:\tests\Test1.xml, Machine: client1)
    try:  (Line: 13, File: c:\tests\Test1.xml, Machine: client1)
    iterate: 2/2 client1.company.com clientMachines (Line: 15, File: c:\tests\Te
st1.xml, Machine: client1)
    sequence: 2/3 (Line: 16, File: c:\tests\Test1.xml, Machine: client1)
    stafcmd: Delay 5 seconds (Line: 20, File: c:\tests\Test1.xml, Machine: clien
t1)
  ]
  Condition Stack: [
    HoldThread: Source=STAFCommand, Priority=1000
  ]
}
 </pre>
</font>
</ul>
<p>
Note that this is the output when querying the following STAX job when
while it is currently running the &lt;stafcmd> element that delays for 5 seconds.
<ul>
<font color="darkblue">
<pre>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">

&lt;stax>

  &lt;defaultcall function="Main"/>
  
  &lt;script>
    clientMachines = ['client1.company.com', 'client2.company.com']
  &lt;/script>

  &lt;function name="Main">

    &lt;try>
       
      &lt;iterate var="machine" in="clientMachines">
        &lt;sequence>

          &lt;log message="1">'Starting Try Block for machine %s' % (machine)&lt;/log>

          &lt;stafcmd name="'Delay 5 seconds'">
            &lt;location>'local'&lt;/location>
            &lt;service>'DELAY'&lt;/service>
            &lt;request>'DELAY 5000'&lt;/request>
          &lt;/stafcmd>

          &lt;log message="1">'Ending Try Block for machine %s' % (machine)&lt;/log>

        &lt;/sequence>
      &lt;/iterate>

      &lt;finally> 
        &lt;block name="'FinallyBlock'">
          &lt;log message="1">'Starting Finally Block...'&lt;/log>
        &lt;/block>
      &lt;/finally>

    &lt;/try>

  &lt;/function>

&lt;/stax>
</pre>
</font>
</ul>

<p>
Other LIST and QUERY requests for the STAX service can be submitted to get more
information on the processes, staf commands, testcases, and blocks
currently executing, well as functions that are available to be called,
which can also be helpful when debugging a STAX job.
<p>
When debugging a STAX job, you may also find it useful to hold a STAX job and
then query the job.  You can submit a HOLD request to the STAX service via the
command line or via the STAX Monitor.  You can also add the <b>hold</b> element
at various points in your STAX job and then you can query information about the
STAX job.
<p>
When debugging a STAX job, you may find it useful to add <b>log</b> and/or <b>message</b>
elements to your STAX job, or Python print statements in <b>script</b> elements.  Note that
output from a Python print statement will be written to the STAX Job User Log by default,
but this can be changed via the PYTHONOUTPUT setting.
<p>
Also, when debugging a STAX job, check the STAX JVM Log to see if it contains any
error information.  To display the STAX JVM Log via the STAX Monitor, see
the <a href="#Header_DisplayJVMLog">Displaying a JVM Log</a> section.
<p>
<hr>

<h1><a name="Header_UsingBreakpoints" href="#ToC_UsingBreakpoints">Using Breakpoints to Debug STAX Jobs</a></h1>
<p>
When executing a STAX job, you can specify (either when submitting the job
 for execution, or dynamically after the job has started) any number of
 breakpoints for the following:
<ul>
<li>A function name, or
<li>A line number, with an optional (fully-qualified path) XML file and an
     optional XML file machine.
</ul>
<p>
If a function name is specified, the STAX job will break whenever the function
 with that name is called (regardless of the XML file where the function is
 located).  If you dynamically set a function name breakpoint, the STAX job
 will break the next time the function is called.
<p>
If a line number is specified, and the XML file is not specified, the
 STAXJobXmlFile will be used.  If the XML file machine is not specified,
 the STAX job will break immediately prior to executing the STAX task whose
 line number and XML file match (regardless of the task's XML file machine)
<p>
The line number must be the line number of the beginning task element
 (i.e. to break on a &lt;stafcmd>, the line number must be the line number for
 the &lt;stafcmd>, not the &lt;location>, &lt;service>, &lt;request>, or &lt;/stafcmd>).
<p>
 You can also include &lt;breakpoint> elements within your STAX job to denote
 a breakpoint.
<p>
When a breakpoint is reached within the STAX job, the current STAX thread's
 execution will pause, and you will be able to retrieve all of the
 Python variables that are currently set in the thread.  You will also
 be able to execute Python code when a thread is at a breakpoint (to change
 the values of existing variables or define new variables). 
<p>
When a breakpoint is reached, you can resume the breakpoint, or step
 into or over the breakpoint.  Stepping into the breakpoint means that the
 next task in the STAX job will execute, after which another breakpoint will
 be reached.  Stepping over the breakpoint means that the next task, including
 any sub-tasks, in the STAX job will execute, after which another breakpoint
 will be reached.  As an example, if you were at a breakpoint for a &lt;call>
 element, stepping into the breakpoint would mean that the next breakpoint
 will be at the &lt;function> element. Stepping over the breakpoint would mean
 that the entire function would execute, and another breakpoint would be
 reached after the function returns.
<p>
When stepping through elements, if the next task in the STAX job spawns
 multiple STAX threads (i.e. &lt;parallel>, &lt;paralleliterate>), then each of
 the spawned threads will reach a breakpoint.  Note that the parent thread
 will still be in a "step" mode if all of its child threads are "resumed".
<p>
When stepping through elements, if a child STAX thread ends, then the
 parent thread will reach a breakpoint.  
<p>
You can also arbitrarily "stop" a running thread, meaning
 that after the task currently running in the thread completes, the thread will
 reach a breakpoint.  This is similar to using CTRL-C inside GDB to stop a
 thread's execution.
<p>
 When a breakpoint is set for a STAX job (either when the job is submitted,
 or dynamically after the job has started), a unique breakpoint ID (starting
 at ID "1").  This breakpoint ID can be used to remove the breakpoint.
<p>
When a thread reaches a breakpoint, you use the Thread ID to
 access the information about the breakpoint.
<p>
If you are at a breakpoint for a &lt;job> element, and step into the
breakpoint, when the subjob starts, it will be at a breakpoint at
the first &lt;function> (regardless of whether the
BREAKPOINTSUBJOBFIRSTFUNCTION option was specified).
<p>
Breakpoints (lines/functions) do not propagate to subjobs.
<p>
Here are some examples of using line number breakpoints:
<pre>
  21: &lt;sequence>
  22:
  23:   &lt;script>
  24:     from random import random
  25:     r1 = random()*100
  26:     r2 = random()*100
  27:   &lt;/script>
  28:
  29:   &lt;stafcmd>
  30:     &lt;location>'local'&lt;/location>
  31:     &lt;service>'PING'&lt;/service>
  32:     &lt;request>'PING'&lt;/request>
  33:   &lt;/stafcmd>
  34:
  35:   &lt;log if="RC != STAFRC.Ok" level="'warning'">
  36:     'RC=%s on %s' % (RC, machName)
  37:   &lt;/log>
  38:
  39: &lt;/sequence>
</pre>
<p>
To set a breakpoint for the <tt>sequence</tt>, you must specify line number 21.
<p>
To set a breakpoint for the <tt>script</tt>, you must specify line number 23.
<p>
To set a breakpoint for the <tt>stafcmd</tt>, you must specify line number 29.
<p>
To set a breakpoint for the <tt>log</tt>, you must specify line number 35.

<h1><a name="Header_STAXEvents" href="#ToC_STAXEvents">
Events Generated by STAX that Provide Job Status</a></h1>

When the STAX service is executing STAX jobs, it will generate events, via the
Event service, about the elements that are being executed.  These event
notifications are used by the STAX Monitor to display the current execution
status of a STAX job.
<p>
For example, when the STAX service encounters a &lt;message> element in a
STAX job, it will generate an event with TYPE
"&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID>" and SUBTYPE
"Message".  Details about the element will be contained in the event properties.
The STAX Monitor registers to receive a notification about the job's
Messages, and when it receives the notification, it will update the "Messages"
tab with the information received in the event notifcation.
<p>
If you have a need to receive notifications about STAX jobs, you can register
with the Event service to receive the notifications.  The following table shows
the TYPEs and SUBTYPEs for which the STAX service
will generate events:
<p>
<table border width="85%">
<th width=40%>TYPE
<th width=10%>SUBTYPE
<th width=50%>DESCRIPTION
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name></td>
<td>Job</td>
<td>Event generated when any STAX job begins or ends</td>
</tr>
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID></td>
<td>Job</td>
<td>Event generated for the specified Job ID when the job begins or ends</td>
</tr>
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID></td>
<td>Block</td>
<td>Event generated for the specified Job ID when a block begins or ends,
and when it is held, released, or terminated</td>
</tr>
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID></td>
<td>Process</td>
<td>Event generated for the specified Job ID when a process starts or stops</td>
</tr>
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID></td>
<td>STAFCommand</td>
<td>Event generated for the specified Job ID when a STAF command starts or stops</td>
</tr>
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID></td>
<td>Message</td>
<td>Event generated for the specified Job ID when a message is executed</td>
</tr>
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID></td>
<td>Testcase</td>
<td>Event generated for the specified Job ID when a testcase begins or ends</td>
</tr>
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID></td>
<td>TestCaseStatus</td>
<td>Event generated for the specified Job ID when a testcase's pass/fail status is updated</td>
</tr>
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID></td>
<td>subjob</td>
<td>Event generated for the specified Job ID when a subjob starts or stops</td>
</tr>
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID></td>
<td>thread</td>
<td>Event generated for the specified Job ID when a thread starts or stops
</td>
</tr>
<tr>
<td>&lt;STAX service name>/&lt;STAX machine name>/&lt;Job ID></td>
<td>breakpoint</td>
<td>Event generated for the specified Job ID when a breakpoint is added or
removed, a thread reaches a breakpoint, or a thread at a breakpoint is resumed
or stepped.
</td>
</tr>
</table>
<p>
When you receive a queued notification for these events, details about the
event will be contained in the message map for a "STAF/Service/Event" type
queued message, and can be accessed via the "propertyMap" key.  The following
tables describe each property that will be included in the "propertyMap".
<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name> SUBTYPE Job</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>&lt;String></td>
<td>'job'</td>
</tr>
<tr>
<td>block</td>
<td>&lt;String></td>
<td>'main'</td>
</tr>
<tr>
<td>status</td>
<td>&lt;String></td>
<td>'begin' | 'run' | 'end'</td>
</tr>
<tr>
<td>jobID</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>startFunction</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>jobName</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>startTimestamp</td>
<td>&lt;String></td>
<td>&lt;YYYYMMDD-HH:MM:SS></td>
</tr>
<tr>
<td>result</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>jobCompletionStatus</td>
<td>&lt;String></td>
<td>'Normal' | 'Terminated' | 'Abnormal' | 'Unknown'</td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
<li><tt>startFunction</tt> is only present when status='begin' or 'run'
<li><tt>jobName</tt> is only present when status='begin' or 'run'
<li><tt>startTimestamp</tt> is only present when status='begin' or 'run' 
<li><tt>result</tt> is only present when status='end'
<li><tt>jobCompletionStatus</tt> is only present when status='end'
</ol>
</tr>
</tfoot>
</table>

<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name>/&lt;Job ID> SUBTYPE Job</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>&lt;String></td>
<td>'job'</td>
</tr>
<tr>
<td>block</td>
<td>&lt;String></td>
<td>'main'</td>
</tr>
<tr>
<td>status</td>
<td>&lt;String></td>
<td>'begin' | 'run' | 'end'</td>
</tr>
<tr>
<td>jobID</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>startFunction</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>jobName</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>startTimestamp</td>
<td>&lt;String></td>
<td>&lt;YYYYMMDD-HH:MM:SS></td>
</tr>
<tr>
<td>result</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>jobCompletionStatus</td>
<td>&lt;String></td>
<td>'Normal' | 'Terminated' | 'Abnormal' | 'Unknown'</td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
<li><tt>startFunction</tt> is only present when status='begin' or 'run'
<li><tt>jobName</tt> is only present when status='begin' or 'run'
<li><tt>startTimestamp</tt> is only present when status='begin' or 'run' 
<li><tt>result</tt> is only present when status='end'
<li><tt>jobCompletionStatus</tt> is only present when status='end'
</ol>
</tr>
</tfoot>
</table>

<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name>/&lt;Job ID> SUBTYPE Block</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>&lt;String></td>
<td>'block'</td>
</tr>
<tr>
<td>block</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>&lt;String></td>
<td>'begin' | 'end' | 'hold' | 'release' | 'terminate'</td>
</tr>
<tr>
<td>name</td>
<td>&lt;String></td>
<td></td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
</ol>
</tr>
</tfoot>
</table>

<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name>/&lt;Job ID> SUBTYPE Process</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>&lt;String></td>
<td>'process'</td>
</tr>
<tr>
<td>block</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>&lt;String></td>
<td>'start' | 'stop'</td>
</tr>
<tr>
<td>location</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>command</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>handle</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>parms</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>mode</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>workload</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>workdir</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>shell</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>varList</td>
<td>&lt;List> of &lt;String></td>
<td></td>
</tr>
<tr>
<td>envList</td>
<td>&lt;List> of &lt;String></td>
<td></td>
</tr>
<tr>
<td>useprocessvars</td>
<td>&lt;None></td>
<td></td>
</tr>
<tr>
<td>stopusing</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>newconsole</td>
<td>&lt;String</td>
<td></td>
</tr>
<tr>
<td>sameconsole</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>focus</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>username</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>password</td>
<td>&lt;String></td>
<td>'*******'</td>
</tr>
<tr>
<td>disabledauthiserror</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>ignoredisabledauth</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>stdin</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>stdout</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>stdoutappend</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>stderr</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>stderrappend</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>stderrtostdout</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>returnstdout</td>
<td>&lt;None></td>
<td></td>
</tr>
<tr>
<td>returnstderr</td>
<td>&lt;None></td>
<td></td>
</tr>
<tr>
<td>returnfilelist</td>
<td>&lt;List> of &lt;String></td>
<td></td>
</tr>
<tr>
<td>statichandlename</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>other</td>
<td>&lt;String></td>
<td></td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
<li>
The following keys are only present if the corresponding option was
specified:
<br><tt>shell</tt>
<tt>varList</tt>
<tt>envList</tt>
<tt>useprocessvars</tt>
<tt>newconsole</tt>
<tt>sameconsole</tt>
<tt>focus</tt>
<tt>password</tt>
<tt>disabledauthiserror</tt>
<br><tt>ignoredisabledauth</tt>
<tt>stdout</tt>
<tt>stdoutappend</tt>
<tt>stderr</tt>
<tt>stderrappend</tt>
<tt>stderrtostdout</tt>
<tt>returnstdout</tt>
<tt>returnstderr</tt>
</li>
<li>
The following keys are only present when status='start':
<tt>
mode workload title workdir shell varList envList<br>useprocessvars stopusing
newconsole sameconsole focus username password disabledauthiserror<br>
ignoredisabledauth stdin stdout stdoutappend stderr stderrappend stderrtostdout
returnstdout<br>returnstderr returnfilelist statichandlename other
</tt>
</li>
</ol>
</tr>
</tfoot>
</table>

<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name>/&lt;Job ID> SUBTYPE STAFCommand</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>&lt;String></td>
<td>'command'</td>
</tr>
<tr>
<td>block</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>&lt;String></td>
<td>'start' | 'stop'</td>
</tr>
<tr>
<td>location</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>requestNumber</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>service</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>request</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>&lt;String></td>
<td></td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
</ol>
</tr>
</tfoot>
</table>

<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name>/&lt;Job ID> SUBTYPE Message</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>messagetext</td>
<td>&lt;String></td>
<td></td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
</ol>
</tr>
</tfoot>
</table>

<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name>/&lt;Job ID> SUBTYPE Testcase</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>&lt;String></td>
<td>'begin' | 'end'</td>
</tr>
<tr>
<td>status-pass</td>
<td>&lt;String></td>
<td>&lt;number of passes></td>
</tr>
<tr>
<td>status-fail</td>
<td>&lt;String></td>
<td>&lt;number of fails></td>
</tr>
<tr>
<td>startedTimestamp</td>
<td>&lt;String></td>
<td>&lt;start timestamp></td>
</tr>
<tr>
<td>lastStatusTimestamp</td>
<td>&lt;String></td>
<td>&lt;last status timestamp></td>
</tr>
<tr>
<td>laststatus</td>
<td>&lt;String></td>
<td>'pass' | 'fail' | 'info'</td>
</tr>
<tr>
<td>elapsed-time</td>
<td>&lt;String></td>
<td>'&lt;Pending>' | &lt;HH[H]:MM:SS></td>
</tr>
<tr>
<td>num-starts</td>
<td>&lt;String></td>
<td></td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
</ol>
</tr>
</tfoot>
</table>

<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name>/&lt;Job ID> SUBTYPE TestCaseStatus</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>&lt;String></td>
<td>'update'</td>
</tr>
<tr>
<td>status-pass</td>
<td>&lt;String></td>
<td>&lt;number of passes></td>
</tr>
<tr>
<td>status-fail</td>
<td>&lt;String></td>
<td>&lt;number of fails></td>
</tr>
<tr>
<td>startedTimestamp</td>
<td>&lt;String></td>
<td>&lt;start timestamp></td>
</tr>
<tr>
<td>lastStatusTimestamp</td>
<td>&lt;String></td>
<td>&lt;last status timestamp></td>
</tr>
<tr>
<td>laststatus</td>
<td>&lt;String></td>
<td>'pass' | 'fail' | 'info'</td>
</tr>
<tr>
<td>elapsed-time</td>
<td>&lt;String></td>
<td>'&lt;Pending>' | &lt;HH[H]:MM:SS></td>
</tr>
<tr>
<td>num-starts</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>message</td>
<td>&lt;String></td>
<td></td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
</ol>
</tr>
</tfoot>
</table>

<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name>/&lt;Job ID> SUBTYPE subjob</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>&lt;String></td>
<td>'command'</td>
</tr>
<tr>
<td>block</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>&lt;String></td>
<td>'start' | 'stop'</td>
</tr>
<tr>
<td>jobID</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>jobName</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>jobfile</td>
<td>&lt;String> | '&lt;include data>'</td>
<td></td>
</tr>
<tr>
<td>jobfilemachine</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>function</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>functionargs</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>clearlogs</td>
<td>&lt;String></td>
<td>'Enabled' | 'Disabled'</td>
</tr>
<tr>
<td>monitor</td>
<td>&lt;String></td>
<td>'true' | 'false'</td>
</tr>
<tr>
<td>logtcelapsedtime</td>
<td>&lt;String></td>
<td>'Enabled' | 'Disabled'</td>
</tr>
<tr>
<td>logtcnumstarts</td>
<td>&lt;String></td>
<td>'Enabled' | 'Disabled'</td>
</tr>
<tr>
<td>logtcstartstop</td>
<td>&lt;String></td>
<td>'Enabled' | 'Disabled'</td>
</tr>
<tr>
<td>pythonoutput</td>
<td>&lt;String></td>
<td>'JobUserLog' | 'Message' | 'JobUserLogAndMsg' | 'JVMLog'</td>
</tr>
<tr>
<td>pythonloglevel</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>scriptfilesmachine</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>scriptFileList</td>
<td>&lt;List> of &lt;String></td>
<td></td>
</tr>
<tr>
<td>scriptList</td>
<td>&lt;List> of &lt;String></td>
<td></td>
</tr>
<tr>
<td>startdate</td>
<td>&lt;String></td>
<td>&lt;YYYYMMDD></td>
</tr>
<tr>
<td>starttime</td>
<td>&lt;String></td>
<td>&lt;HH:MM:SS></td>
</tr>
<tr>
<td>result</td>
<td>&lt;String></td>
<td></td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
<li>
The following keys are only present when status='start':
<br>
jobName, jobfile, jobfilemachine, function, functionargs, clearlogs, monitor,
logtcelapsedtime, logtcnumstarts, logtcstartstop, pythonoutput, pythonloglevel,
scriptfilesmachine, scriptFileList, scriptList, startdate, starttime
</li>
<li>
The following keys are only present when status='stop':
<br>
result
</li>
</ol>
</tr>
</tfoot>
</table>

<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name>/&lt;Job ID> SUBTYPE thread</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>&lt;String></td>
<td>'thread'</td>
</tr>
<tr>
<td>id</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>&lt;String></td>
<td>'start' | 'stop'</td>
</tr>
<tr>
<td>parent</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>parentHierarchy</td>
<td>&lt;String></td>
<td></td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
<li>
</li>
</ol>
</tr>
</tfoot>
</table>

<br><br>
<table border>
<thead>
<tr>
<th COLSPAN="3">Definition of propertyMap for TYPE &lt;STAX service
name>/&lt;STAX machine name>/&lt;Job ID> SUBTYPE breakpoint</th>
</tr>
<tr>
<th width=35%>Key Name
<th width=30%>Type
<th width=35%>Format / Value
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>&lt;String></td>
<td>'breakpoint'</td>
</tr>
<tr>
<td>id</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>&lt;String></td>
<td>'add' | 'remove' | 'start' | 'stop'</td>
</tr>
<tr>
<td>function</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>line</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>file</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>machine</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>block</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>threadID</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>lineNumber</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>xmlFile</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>xmlMachine</td>
<td>&lt;String></td>
<td></td>
</tr>
<tr>
<td>info</td>
<td>&lt;String></td>
<td></td>
</tr>
</tbody>
<tfoot>
<tr>
<td colspan="3">
<b>Notes:</b>
<ol compact>
<li>
The following keys are only present when status='add':
<br>
function, line, file, machine
</li>
<li>
The following keys are only present when status='start' | 'stop':
<br>
block, lineNumber, xmlFile, xmlMachine
</li>
<li>
The following keys are only present when status='start':
<br>
threadID
</li>
</ol>
</tr>
</tfoot>
</table>


<br><br>
Here is a sample Java program that executes a STAX job and registers to
be notified about the events that the STAX service will generate for the job.
<pre>
import com.ibm.staf.*;
import java.util.Map;

public class STAXExecuteListener extends Thread
{
    STAFHandle handle = null;
    String separator = "\n=======================================" +
                       "========================================\n";

    public static void main(String[] args) throws STAFException
    {
        if (args.length &lt; 3)
        {
            System.out.println();
            System.out.println("Usage: STAXExecuteListener " +
                               "&lt;STAX-service-machine> &lt;STAX-service-name> " +
                               "EXECUTE &lt;execute-request-options>");
            System.out.println();
            System.out.println("Note: The HOLD option will be " +
                               "appended to the STAX EXECUTE REQUEST");
            System.out.println("Note: The EVENT service must be running on the " 
                               + "STAX service machine and be named EVENT");
            System.exit(1);
        }

        String staxServiceMachine = args[0];
        String staxServiceName = args[1];
        String staxExecuteRequest = "";

        for (int i = 2; i &lt; args.length; i++)
        {
            staxExecuteRequest += args[i] + " ";
        }

        staxExecuteRequest = staxExecuteRequest.trim();

        new STAXExecuteListener(staxServiceMachine,
                                staxServiceName,
                                staxExecuteRequest);
    }

    public STAXExecuteListener(String staxServiceMachine,
                                String staxServiceName,
                                String staxExecuteRequest)
    {

        try
        {
            handle = new STAFHandle("STAXExecuteListener");
        }
        catch(STAFException e)
        {
            e.printStackTrace();
            System.exit(1);
        }

        STAFResult result = handle.submit2(staxServiceMachine,
                                           staxServiceName,
                                           staxExecuteRequest + " HOLD");

        if (result.rc != STAFResult.Ok)
        {
            System.out.println(staxServiceName + " EXECUTE rc=" + result.rc +
                               ", result=" + result.result);
            System.exit(result.rc);
        }

        String staxJobID = result.result;

        System.out.println(separator);
        System.out.println("STAX Job ID: " + staxJobID);
        System.out.println(separator);

        String eventType = staxServiceName.toUpperCase() + "/" +
                           staxServiceMachine + "/" +
                           staxJobID;
        String eventSubtypes = " SUBTYPE Job SUBTYPE Block SUBTYPE Process" +
                               " SUBTYPE STAFCommand SUBTYPE Message" +
                               " SUBTYPE Testcase SUBTYPE TestCaseStatus" +
                               " SUBTYPE subjob";

        result = handle.submit2(staxServiceMachine,
                                "EVENT",
                                "REGISTER TYPE " + eventType + eventSubtypes +
                                " BYHANDLE");

        if (result.rc != STAFResult.Ok)
        {
            System.out.println("EVENT REGISTER rc=" + result.rc +
                               ", result=" + result.result);
            System.exit(result.rc);
        }

        try
        {
            Thread.sleep(2000);
        }
        catch(InterruptedException e)
        {
            e.printStackTrace();
        }

        start(); // start thread to listen for queued messages

        result = handle.submit2(staxServiceMachine,
                                staxServiceName,
                                "RELEASE JOB " + staxJobID);

        if (result.rc != STAFResult.Ok)
        {
            System.out.println(staxServiceName + " RELEASE rc=" + result.rc +
                               ", result=" + result.result);
            System.exit(result.rc);
        }
    }

    public void run()
    {
        while (true)
        {
            STAFResult result = handle.submit2("local", "QUEUE", "GET WAIT");

            if (result.rc != STAFResult.Ok)
            {
                System.out.println("QUEUE GET rc=" + result.rc +
                                   ", result=" + result.result);
                System.exit(result.rc);
            }

            STAFMarshallingContext outputContext =
                STAFMarshallingContext.unmarshall(result.result);

            Map queueMap = (Map)outputContext.getRootObject();

            String queueType = (String)queueMap.get("type");

            if (queueType.equalsIgnoreCase("STAF/Service/Event"))
            {
                 Map messageMap = (Map)queueMap.get("message");
                 String type = (String)messageMap.get("type");
                 String subtype = (String)messageMap.get("subtype");

                 System.out.println("TYPE   : " + type);
                 System.out.println("SUBTYPE: " + subtype);
                 System.out.println();

                 Map propertyMap = (Map)messageMap.get("propertyMap");
                 System.out.println(STAFMarshallingContext.formatObject(
                                    propertyMap));

                 System.out.println(separator);

                 // Exit if the job has completed
                 String staxType = (String)(propertyMap.get("type"));

                 if ((staxType != null) && staxType.equals("job"))
                 {
                     String jobStatus = (String)(propertyMap.get("status"));

                     if (jobStatus.equals("end"))
                     {
                         break;
                     }
                 }
            }
        }
    }
}
</pre>
<br><br>
Here are examples of running this sample Java program to submit some of the
sample STAX jobs described in the
<a href="http://staf.sourceforge.net/current/staxgs.pdf">
Getting Started with STAX</a> document:
<br><br><b>CheckSTAFCmdRC.xml example:</b>
<pre>
$ java STAXExecuteListener staf3a.austin.ibm.com STAX EXECUTE FILE C:\STAF\services\stax\CheckSTAFCmdRC.xml

===============================================================================

STAX Job ID: 5

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/5
SUBTYPE: Block

{
  type  : block
  status: release
  name  : main
  block : main
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/5
SUBTYPE: STAFCommand

{
  service      : var
  type         : command
  requestNumber: 1560
  status       : start
  request      : resolve string {STAF/Config/OS/Name}
  location     : local
  name         : STAFCommand1
  block        : main
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/5
SUBTYPE: STAFCommand

{
  service      : var
  type         : command
  requestNumber: 1560
  status       : stop
  request      : resolve string {STAF/Config/OS/Name}
  location     : local
  name         : STAFCommand1
  block        : main
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/5
SUBTYPE: Message

{
  messagetext: 20070926-13:00:38 Great!  STAF/Config/OS/Name = WinXP
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/5
SUBTYPE: Block

{
  type  : block
  status: end
  name  : main
  block : main
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/5
SUBTYPE: Job

{
  type  : job
  result: None
  jobID : 5
  status: end
  block : main
}

===============================================================================
</pre>

<br><b>FunctionParametersLogging.xml example:</b>
<pre>
$ java STAXExecuteListener staf3a.austin.ibm.com STAX EXECUTE FILE C:\STAF\services\stax\FunctionParametersLogging.xml ARGS \"{ 'parms': '20 1 25' }\"

===============================================================================

STAX Job ID: 8

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/8
SUBTYPE: Block

{
  type  : block
  status: release
  name  : main
  block : main
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/8
SUBTYPE: Process

{
  stderrtostdout  :
  handle          : 71
  other           :
  type            : process
  title           :
  mode            : default
  envList         : [
    CLASSPATH={STAF/Config/STAFRoot}/bin/JSTAF.jar;{STAF/Config/STAFRoot}/servic
es/stax/STAXMon.jar
  ]
  stdin           :
  status          : start
  block           : main
  parms           :
  command         : java com.ibm.staf.service.stax.TestProcess 20 1 25
  workdir         :
  statichandlename:
  username        :
  varList         : []
  returnstdout    :
  stopusing       :
  location        : local
  workload        :
  returnFileList  : []
  name            : My Test Process with parms 20 1 25
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/8
SUBTYPE: Process

{
  handle  : 71
  command : java com.ibm.staf.service.stax.TestProcess 20 1 25
  type    : process
  status  : stop
  location: local
  name    : My Test Process with parms 20 1 25
  parms   :
  block   : main
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/8
SUBTYPE: Message

{
  messagetext: 20070926-13:14:44 My Test Process with parms 20 1 25 Error: RC=25
, STAXResult=[[0, '']]
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/8
SUBTYPE: Block

{
  type  : block
  status: end
  name  : main
  block : main
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/8
SUBTYPE: Job

{
  type  : job
  result: 25L
  jobID : 8
  status: end
  block : main
}

===============================================================================
</pre>

<br><b>Block.xml example:</b>
<pre>
$ java STAXExecuteListener staf3a.austin.ibm.com STAX EXECUTE FILE C:\STAF\services\stax\Block.xml

===============================================================================

STAX Job ID: 11

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Block

{
  type  : block
  status: release
  name  : main
  block : main
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Block

{
  type  : block
  status: begin
  name  : main.SVT_Regression
  block : main.SVT_Regression
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Process

{
  stderrtostdout  :
  handle          : 90
  other           :
  type            : process
  title           :
  mode            : default
  envList         : [
    CLASSPATH={STAF/Config/STAFRoot}/bin/JSTAF.jar;{STAF/Config/STAFRoot}/servic
es/stax/STAXMon.jar
  ]
  stdin           :
  status          : start
  block           : main.SVT_Regression
  parms           :
  command         : java com.ibm.staf.service.stax.TestProcess 30 1 0
  workdir         :
  statichandlename:
  username        :
  varList         : []
  returnstdout    :
  stopusing       :
  location        : local
  workload        :
  returnFileList  : []
  name            : My Test Process with parms 30 1 0
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Process

{
  handle  : 90
  command : java com.ibm.staf.service.stax.TestProcess 30 1 0
  type    : process
  status  : stop
  location: local
  name    : My Test Process with parms 30 1 0
  parms   :
  block   : main.SVT_Regression
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Message

{
  messagetext: 20070926-13:29:10 SUCCESS: My Test Process with parms 30 1 0
STAXResult=[[0, '']]
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Process

{
  stderrtostdout  :
  handle          : 92
  other           :
  type            : process
  title           :
  mode            : default
  envList         : [
    CLASSPATH={STAF/Config/STAFRoot}/bin/JSTAF.jar;{STAF/Config/STAFRoot}/servic
es/stax/STAXMon.jar
  ]
  stdin           :
  status          : start
  block           : main.SVT_Regression
  parms           :
  command         : java com.ibm.staf.service.stax.TestProcess 15 2 0
  workdir         :
  statichandlename:
  username        :
  varList         : []
  returnstdout    :
  stopusing       :
  location        : local
  workload        :
  returnFileList  : []
  name            : My Test Process with parms 15 2 0
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Process

{
  handle  : 92
  command : java com.ibm.staf.service.stax.TestProcess 15 2 0
  type    : process
  status  : stop
  location: local
  name    : My Test Process with parms 15 2 0
  parms   :
  block   : main.SVT_Regression
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Message

{
  messagetext: 20070926-13:29:40 SUCCESS: My Test Process with parms 15 2 0
STAXResult=[[0, '']]
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Block

{
  type  : block
  status: end
  name  : main.SVT_Regression
  block : main.SVT_Regression
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Block

{
  type  : block
  status: end
  name  : main
  block : main
}

===============================================================================

TYPE   : STAX/staf3a.austin.ibm.com/11
SUBTYPE: Job

{
  type  : job
  result: None
  jobID : 11
  status: end
  block : main
}

===============================================================================
</pre>

<br><b>Testcase.xml example (updated to only loop 3 times):</b>
<pre>
$ java STAXExecuteListener staf2c.austin.ibm.com STAX EXECUTE FILE C:/STAF/services/stax/Testcase.xml

===============================================================================

STAX Job ID: 17

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Block

{
  type  : block
  status: release
  name  : main
  block : main
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Process

{
  stderrtostdout  :
  handle          : 100
  other           :
  type            : process
  title           :
  mode            : default
  envList         : [
    CLASSPATH={STAF/Config/STAFRoot}/bin/JSTAF.jar;{STAF/Config/STAFRoot}/servic
es/stax/STAXMon.jar
  ]
  stdin           :
  status          : start
  block           : main
  parms           :
  command         : java com.ibm.staf.service.stax.TestProcess 1 1 97
  workdir         :
  statichandlename:
  username        :
  varList         : []
  returnstdout    :
  stopusing       :
  location        : local
  workload        :
  returnFileList  : []
  name            : My Test Process with parms 1 1 97
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Process

{
  handle  : 100
  command : java com.ibm.staf.service.stax.TestProcess 1 1 97
  type    : process
  status  : stop
  location: local
  name    : My Test Process with parms 1 1 97
  parms   :
  block   : main
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Message

{
  messagetext: 20080827-20:18:44 My Test Process with parms 1 1 97 Error: RC=97,
 STAXResult=[[0, '']]
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: TestcaseStatus

{
  elapsed-time       : &lt;Pending>
  num-starts         : 1
  laststatus         : fail
  lastStatusTimestamp: 20080827-20:18:45
  message            :
  startedTimestamp   : 20080827-20:18:42
  status-pass        : 0
  status-fail        : 1
  status             : update
  name               : Test Process
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Testcase

{
  elapsed-time    : 00:00:04
  num-starts      : 1
  laststatus      : fail
  startedTimestamp: 20080827-20:18:42
  status-pass     : 0
  status-fail     : 1
  status          : end
  name            : Test Process
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Process

{
  stderrtostdout  :
  handle          : 101
  other           :
  type            : process
  title           :
  mode            : default
  envList         : [
    CLASSPATH={STAF/Config/STAFRoot}/bin/JSTAF.jar;{STAF/Config/STAFRoot}/servic
es/stax/STAXMon.jar
  ]
  stdin           :
  status          : start
  block           : main
  parms           :
  command         : java com.ibm.staf.service.stax.TestProcess 1 1 78
  workdir         :
  statichandlename:
  username        :
  varList         : []
  returnstdout    :
  stopusing       :
  location        : local
  workload        :
  returnFileList  : []
  name            : My Test Process with parms 1 1 78
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Process

{
  handle  : 101
  command : java com.ibm.staf.service.stax.TestProcess 1 1 78
  type    : process
  status  : stop
  location: local
  name    : My Test Process with parms 1 1 78
  parms   :
  block   : main
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Message

{
  messagetext: 20080827-20:18:50 My Test Process with parms 1 1 78 Error: RC=78,
 STAXResult=[[0, '']]
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: TestcaseStatus

{
  elapsed-time       : 00:00:04
  num-starts         : 2
  laststatus         : fail
  lastStatusTimestamp: 20080827-20:18:51
  message            :
  startedTimestamp   : 20080827-20:18:42
  status-pass        : 0
  status-fail        : 2
  status             : update
  name               : Test Process
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Testcase

{
  elapsed-time    : 00:00:09
  num-starts      : 2
  laststatus      : fail
  startedTimestamp: 20080827-20:18:42
  status-pass     : 0
  status-fail     : 2
  status          : end
  name            : Test Process
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Process

{
  stderrtostdout  :
  handle          : 102
  other           :
  type            : process
  title           :
  mode            : default
  envList         : [
    CLASSPATH={STAF/Config/STAFRoot}/bin/JSTAF.jar;{STAF/Config/STAFRoot}/servic
es/stax/STAXMon.jar
  ]
  stdin           :
  status          : start
  block           : main
  parms           :
  command         : java com.ibm.staf.service.stax.TestProcess 1 1 44
  workdir         :
  statichandlename:
  username        :
  varList         : []
  returnstdout    :
  stopusing       :
  location        : local
  workload        :
  returnFileList  : []
  name            : My Test Process with parms 1 1 44
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Process

{
  handle  : 102
  command : java com.ibm.staf.service.stax.TestProcess 1 1 44
  type    : process
  status  : stop
  location: local
  name    : My Test Process with parms 1 1 44
  parms   :
  block   : main
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Message

{
  messagetext: 20080827-20:18:56 My Test Process with parms 1 1 44 Error: RC=44,
 STAXResult=[[0, '']]
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: TestcaseStatus

{
  elapsed-time       : 00:00:09
  num-starts         : 3
  laststatus         : pass
  lastStatusTimestamp: 20080827-20:18:57
  message            :
  startedTimestamp   : 20080827-20:18:42
  status-pass        : 1
  status-fail        : 2
  status             : update
  name               : Test Process
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Testcase

{
  elapsed-time    : 00:00:14
  num-starts      : 3
  laststatus      : pass
  startedTimestamp: 20080827-20:18:42
  status-pass     : 1
  status-fail     : 2
  status          : end
  name            : Test Process
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Block

{
  type  : block
  status: end
  name  : main
  block : main
}

===============================================================================

TYPE   : STAX/staf2c.austin.ibm.com/17
SUBTYPE: Job

{
  type  : job
  result: None
  jobID : 17
  status: end
  block : main
}

===============================================================================


</pre>

<hr>

<h1><a name="Header_Comments" href="#ToC_Comments">Support Information</a></h1>

If you have a question or are experiencing a problem, first check out the STAF/STAX FAQ at
<a href="http://staf.sourceforge.net/current/STAFFAQ.htm">
http://staf.sourceforge.net/current/STAFFAQ.htm</a> to see if it provides an answer
to your question or problem.
<p>
Please report bugs or request features via the STAF SourceForge website at:
<p>&nbsp;&nbsp; <a href="http://staf.sourceforge.net">http://staf.sourceforge.net</a>
<p>
You may also post questions, problems, comments and suggestions via this website.
<p>

It is our goal to retain backward compatibility in future versions of STAX.
<br>&nbsp;
<p>

<h2><a name="Header_Problems" href="#ToC_Problems">Known Problems</a></h2>

Here are some of the known problems and issues with this version of STAX.
You may view a complete list of bugs and requested features via the STAF SourceForge website at:
<p>&nbsp;&nbsp; <a href="http://staf.sourceforge.net">http://staf.sourceforge.net</a>
<p>
These problems will be resolved in a future version of STAX.
<p>
<ol>
<li>Each time the STAX Service is started, the Job ID is reset to 1.  Thus, STAX log
files can contain information for multiple jobs.  That is, log file STAX_LOG_1 can
contain information for multiple jobs whose Job ID was 1.  If you do not want this
to happen, each time you stop the STAX Service, you can backup the STAX log files (if
desired) and enable "Clear Logs" when registering the STAX service or when
executing a STAX job.
<p>
Note, multiple jobs in the same log are separated by messages with a level
of "start" and "stop" with the message text beginning with "JobID: ".
So, even when multiple jobs appear in the same log file, it
is still possible to determine where one job ends and another one starts.
<p>
<li>More detailed tracing of a job for debugging purposes will be provided in a
future version of STAX.
<p>
<li>More information about how to override and then restore the default signal handlers
will be provided in a future version of STAX.
</ol>
<p>

<h2><a name="Header_History" href="#ToC_History">History of Changes</a></h2>

See the History file provided in the STAX zip/tar file you downloaded for a history of the
changes that have been made to the STAX service.

<p>
<hr>
<h1><a name="Header_StaxXmlExamples" href="#ToC_StaxXmlExamples">Appendix A: STAX XML Document Examples</a></h1>

Some examples of STAX XML documents are provided in the samples and libraries directories as
part of the STAX zip/tar file.  The samples directory contains examples of STAX jobs.  The
libraries directory contain STAX XML documents that contain common functions that you may
want to import and call from STAX XML documents that you write.

<h2><a name="Header_STAXLibraries" href="#ToC_STAXLibraries">STAX Libraries Containing Common Utility Functions</a></h2>

The<tt> libraries </tt>directory provided in the STAX zip/tar file contains the following
xml files that provide some common STAX utility functions:
<p>
<ul> 
<li><tt>STAFUpgradeUtil.xml</tt> - contains a function called UpgradeSTAF that you
can call to upgrade the version of STAF running on a remote machine.
Note that a sample job is also provided,<tt> samples/UpgradeSTAF.xml</tt>, that
imports the<tt> STAFUpgradeUtil.xml </tt>file and uses it's<tt> UpgradeSTAF </tt>function
to upgrade the version of STAF running on one or more remote machines simultaneously.
<p>
<li><tt>STAXUtil.xml</tt> - contains some common STAX utility functions
</ul>
<p>
You may want to import functions from these files (using the &lt;function-import> or
&lt;import> element) so that you can call these functions from STAX XMl documents that
you write.  This allows you to reuse common functions and makes integration of tests written
by different parties easier.  See <a href="http://staf.sourceforge.net/current/STAXLibraries/index.html">
<tt>http://staf.sourceforge.net/current/STAXLibraries/index.html</tt></a> for
STAXDoc documentation on these functions, including a description of the
arguments to pass in, what is returned, and usage examples.
<p>
<b>Note:</b> This HTML file was generated using <a href="#Header_STAXDoc">STAXDoc</a>
which converts information in these library xml files into readable HTML documentation.
<p>
<h3><a name="Header_STAFUpgradeUtil" href="#ToC_STAFUpgradeUtil">STAF Upgrade Functions</a></h2>
<p>
STAX library file <b>STAFUpgradeUtil.xml</b> contains the following functions:
<ul>
  <li><b>UpgradeSTAF</b>
  <p>Upgrades the version of STAF running on a remote target machine.
  The target machine where STAF will be upgraded to a new version must already
  have STAF running.
  <p>
  The minimum version of STAF that must be running on the target machine is:
  <ul>
  <li>3.0.0 if the target machine is a Windows machine
  <li>3.1.3 if the target machine is a Unix machine
  </ul>
  <p>
  You must also have already downloaded the STAF installer files to a single
  directory on a machine so that the <tt>UpgradeSTAF</tt>function can
  copy the appropriate STAF installer file to the remote target machine.
  The target machine(s) must give the STAX machine trust level 5 and must give
  the installer machine trust level 4 or higher.  The installer machine must
  give the STAX machine trust level 4 or higher.
  <p>
  <li>There are other functions in <tt>STAFUpgrade.xml</tt>, but these are
  "helper" functions that are called by the main<tt> UpgradeSTAF </tt>function.
  You must import all of the functions in the <tt>STAFUpgrade.xml</tt> file
  to use the <tt>UpgradeSTAF</tt> function.
</ul>

<h3><a name="Header_STAXUtil" href="#ToC_STAXUtil">STAX Utility Functions</a></h2>
<p>
STAX library file <b>STAXUtil.xml</b> contains the following functions:
<UL>
  <LI><B>STAF</B>
  <P>Submits a request to STAF.  It's a shortcut for the &lt;stafcmd> element.
  <P>
  <LI><B>STAFProcess</B>
  <P>Submits a STAF request to start a process in a separate shell
  (using the default shell command).  It's a shortcut for the &lt;process> element when you
  only need to specify the command to be started in a separate shell.
  <P>
  <LI><B>STAFProcessUsing</B>
  <P>Submits a STAF request to start a process using a map to define values
  for the process element's sub-elements.
  It's a shortcut for the &lt;process> element when additional options
  need to be specified.
  <P>
  <LI><B>STAXUtilLogAndMsg</B>
  <P>Logs a message and sends the message to the STAX Monitor.
  It's a shortcut for specifying the &lt;message> and &lt;log> elements for the same message.
  <P>
  <LI><B>STAXUtilWaitForSTAF</B>
  <P>Waits for STAF to become available (that is, for the STAFProc daemon
  to be running) on one or more machines.  A maximum wait time can be
  specified, overriding the default maximum wait time of 5 minutes.
  If one or more machines are not available, and the maximum wait time
  has not been exceeded, delays 5 seconds and then retries.
  This function can be useful after rebooting one or more systems.
  <P>
  <LI><B>STAXUtilCopyFiles</B>
  <p>Copies files from a directory on a machine to a directory on the same or
  different machine.  You can specify which files to copy from a directory
  using the name pattern, extension pattern, case sensitivity, and/or regular
  expression arguments.
  <p>The regular expression allows you to define complicated pattern matching
  rules to determine which files to copy.
  <p>Note that this function only copies files; no subdirectories will be copied.
  <p>For performance reasons, the files are copied in groups of up to 5
  in parallel.  If the toDirectory does not exist, it will be created.
  If any of the files being copied already exist on the toMachine, they
  will be replaced.
  <P>
  <LI><B>STAXUtilListDirectory</B>
  <p>Lists files in a directory on a machine.  You can specify which files
  to list using the name pattern, extension pattern, case sensitivity,
  and/or regular expression arguments.
  <p>
  The regular expression allows you to define complicated pattern matching
  rules to determine which files to copy.
  <P>
  <LI><B>STAXUtilCheckSuccess</B>
  <p>Checks if a result indicates success or failure.  If the result
  evaluates to a true value:
    <ol>
    <li>If a pass message is provided, it is logged in the STAX User Log
    and, optionally, sent to the STAX Monitor.</li>
    <li>A testcase status of pass is recorded if the recordStatus
    evaluates to a true expression.</li>
    </ol>
  <p>Otherwise, if the result evaluates to a false value:
    <ol>
    <li>If a failure message is provided, it is logged in the STAX User
    Log and, optionally, sent to the STAX Monitor.</li>
    <li>A testcase status of fail is recorded if the recordStatus
    evaluates to a true expression.</li>
    </ol>
  <P>
  <LI><B>STAXUtilImportSTAFVars</B>
  <p>Imports STAF variables on the specified machines, creating STAX
  variables from them.
  <p>If only one machine is specified, for each STAF variable name that is
  specified, a STAX variable with the specified name is created with
  the resolved contents of the STAF variable for the specified machine
  assigned to it.
  <p>If a list of machines is specified, for each STAF variable name that
  is specified, a STAX map is created with the specified name which
  contains an entry for each machine (key) with a value of the resolved
  contents of the STAF variable for that machine assigned.
  <p>
  <li><b>STAXUtilImportSTAFConfigVars</b>
  <p>Imports STAF Configuration variables (such as STAF/Config/OS/Name
  and STAF/Config/Sep/File) on the specified machine, creating a STAX
  variable map containing their values and returning the map.
  <P>
  <LI><B>STAXUtilExportSTAFVars</B>
  <p>Exports STAX variables, creating STAF variables from them on the
  specified machines.
  <p>For each STAX variable name that is specified, a STAF variable with
  the specified name is created for the specified machines.
  <P>
  <LI><B>STAXUtilQueryAllTests</B>
  <P>For each STAX variable name that is specified, a STAF variable with
  the specified name is created for the specified machines.
  Query the results for all testcases in the currently running job,
  accumulating the total number of testcases, passes, and fails
  recorded so far as well as a map of all the testcases and their
  passes, fails, elapsed times, and number of starts.
  <P>
  <LI><B>STAXUtilQueryTest</B>
  <P>Query the results for a single testcase in the currently running job.
</UL>

<h2><a name="Header_Samples" href="#ToC_Samples">Sample STAX Jobs</a></h2>

Here are some of examples of a STAX jobs.
  
<h3><a name="Header_SampleJob1" href="#ToC_SampleJob1">
Sample STAX Job 1 - Basic Example How to Run Processes and STAF Commands</a></h3>

This STAX job executes various STAF commands and processes and sends
messages to the STAX Job Monitor.  The following example is the
sample1.xml file provided in the samples directory as part of the STAX
zip/tar file. 

<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">

&lt;!--
    sample1.xml - Sample of a job definition file for STAX

    Job Description:

    This job executes various STAF commands and processes and
    sends messages to the STAX Job Monitor.
-->

&lt;stax>

  &lt;!--
    Change the values specified for MachList and/or duration
    and/or STAXJarFile as desired by changing the values passed to
    function MonitorTest via the &lt;defaultcall> element in this file
    or override them by specifying the arguments parameter when
    submitting the job for execution.  Examples of values for the
    arguments parameter:
      { 'duration': '10m', 'MachList': ['machA', machB', 'machC'] }
      { 'MachList': ['myMachine'] }
      { 'duration': '1h' }
      { 'STAXJarFile': '/usr/local/staf/services/stax/STAXMon.jar' }
   -->

  &lt;script>
    STAXServicesDir = '{STAF/Config/STAFRoot}{STAF/Config/Sep/File}services{STAF/Config/Sep/File}stax'
    STAXJarFile = '%s{STAF/Config/Sep/File}STAXMon.jar' % STAXServicesDir
  &lt;/script>

  &lt;defaultcall function="MonitorTest">
    { 'MachList': ['local', 'local'], 'duration': '2m', 'STAXJarFile': STAXJarFile }
  &lt;/defaultcall>

  &lt;function name="MonitorTest" scope="local" requires="RunProcesses">

    &lt;function-prolog>
      For each machine specified by the MachList argument, function
      RunProcesses is called and run in parallel.  This is done in a
      continous loop until the time specified by the duration argument
      is reached.
    &lt;/function-prolog>

    &lt;function-map-args>

      &lt;function-optional-arg name="duration" default="'2m'">
        Timer duration to run the test.  e.g. '5m', '1h', '90s', etc.
      &lt;/function-optional-arg>

      &lt;function-optional-arg name="MachList" default="['local', 'local']">
        List of machines where the test will be run
      &lt;/function-optional-arg>

      &lt;function-optional-arg name="STAXJarFile" default="STAFJarFile">
        Fully-qualified name of STAX jar file on each machine where the test will be run
      &lt;/function-optional-arg>

    &lt;/function-map-args>

    &lt;testcase name = "'Timer'">

      &lt;sequence>
        &lt;script>
          import time
          starttime = time.time(); # record starting time
        &lt;/script>

        &lt;message>
          'duration=%s, MachList=%s' % (duration, MachList)
        &lt;/message>

        &lt;!-- Resolve the STAXJarFile which may contain STAF variables -->
        &lt;stafcmd>
          &lt;location>'local'&lt;/location>
          &lt;service>'var'&lt;/service>
          &lt;request>'resolve string %s' % STAXJarFile&lt;/request>
        &lt;/stafcmd>

        &lt;if expr="RC == 0">
          &lt;sequence>
            &lt;script>STAXJarFile = STAFResult&lt;/script>
            &lt;message>'STAXJarFile=%s' % (STAXJarFile)&lt;/message>
          &lt;/sequence>
          &lt;else>
            &lt;sequence>
              &lt;message>
                'Error resolving STAXJarFile: RC=%s, STAFResult=%s, \
                 STAXJarFile=%s' % (RC, STAFResult, STAXJarFile)
              &lt;/message>
              &lt;message>'Terminating job'&lt;/message>
              &lt;terminate block="'main'"/>
            &lt;/sequence>
          &lt;/else>
        &lt;/if>

        &lt;!-- Loop continuously for the specified duration -->
        &lt;timer duration="duration">
          &lt;loop var="loopNum">
            &lt;paralleliterate var="machName" in="MachList" indexvar="i">
              &lt;block name="'%s_%d' % (machName, i)">
                &lt;testcase name="machName">
                  &lt;call-with-map function="'RunProcesses'">
                    &lt;call-map-arg name="'machName'">machName&lt;/call-map-arg>
                    &lt;call-map-arg name="'loopNum'">loopNum&lt;/call-map-arg>
                    &lt;call-map-arg name="'blockNum'">i&lt;/call-map-arg>
                  &lt;/call-with-map>
                &lt;/testcase>
              &lt;/block>
            &lt;/paralleliterate>
          &lt;/loop>
        &lt;/timer>

        &lt;script>
          stoptime = time.time()             # record ending time
          elapsedSecs = stoptime - starttime # difference yields time elapsed in seconds
        &lt;/script>

        &lt;message>'Test complete - ran for %d seconds' % elapsedSecs&lt;/message>

        &lt;if expr="RC == 1">
          &lt;tcstatus result="'pass'">
            'Timer ran for %d seconds' % elapsedSecs
          &lt;/tcstatus>
          &lt;else>
            &lt;tcstatus result="'fail'">
             'Timer only ran for %d seconds. RC=%d' % (elapsedSecs, RC)
            &lt;/tcstatus>
          &lt;/else>
        &lt;/if>

      &lt;/sequence>

    &lt;/testcase>

  &lt;/function>

  &lt;function name="RunProcesses" scope="local"
                                requires="PASS-if-0 RunSTAFCommands">

    &lt;function-prolog>
      This function runs multiple processes.  Each process runs a Java
      program called TestProcess (which is included in the STAXMon.jar file)
      and passes it different parameters which effect how long it runs
      until it completes and whether it is successful or not.
      The parameters for TestProcess are number of loops, seconds to wait
      between loops, and RC to return at the end of the process.
    &lt;/function-prolog>

    &lt;function-map-args>

      &lt;function-required-arg name="machName">
        Location (machine name) to run the process
      &lt;/function-required-arg>

      &lt;function-required-arg name="blockNum">
        Number used in conjunction with the machine name to get a unique
        block name (in case running multiple times on the same machine)
      &lt;/function-required-arg>

      &lt;function-required-arg name="loopNum">
        Current loop number
      &lt;/function-required-arg>

    &lt;/function-map-args>

    &lt;sequence>

      &lt;message>
        'Starting run #%d on %s' % (loopNum, machName)
      &lt;/message>

      &lt;script>
        className = 'com.ibm.staf.service.stax.TestProcess'
      &lt;/script>

      &lt;process name="'TestProcess'">
        &lt;location>machName&lt;/location>
        &lt;command>'java'&lt;/command>
        &lt;parms>'%s 5 6 0' % className&lt;/parms>
        &lt;title>'First title example'&lt;/title>
        &lt;env>'CLASSPATH=%s{STAF/Config/Sep/Path}{STAF/Env/ClassPath}' % STAXJarFile&lt;/env>
        &lt;console use="'same'"/>
      &lt;/process>

      &lt;call function="'PASS-if-0'">RC&lt;/call>

      &lt;message>
        'Process RC=%d on machine %s' % (RC, machName)
      &lt;/message>

      &lt;call function="'RunSTAFCommands'">
        { 'machName': machName, 'blockNum': blockNum }
      &lt;/call>

      &lt;call function="'PASS-if-0'">STAXResult&lt;/call>

      &lt;process name="'TestProcess'">
        &lt;location>machName&lt;/location>
        &lt;command>'java'&lt;/command>
        &lt;parms>'%s 3 4 99' % className&lt;/parms>
        &lt;env>'CLASSPATH=%s{STAF/Config/Sep/Path}{STAF/Env/ClassPath}' % STAXJarFile&lt;/env>
        &lt;console use="'same'"/>
      &lt;/process>

      &lt;call function="'PASS-if-0'">RC&lt;/call>

      &lt;message>
        'Process RC=%d on machine %s' % (RC, machName)
      &lt;/message>

      &lt;process name="'TestProcess'">
        &lt;location>machName&lt;/location>
        &lt;command>'java'&lt;/command>
        &lt;parms>'%s 5 5 100' % className&lt;/parms>
        &lt;title>'Second title example with many Process elements'&lt;/title>
        &lt;workload>'STAX Monitor Workload'&lt;/workload>
        &lt;vars>['firstName=Dave','middleInitial=M.','lastName=Bender']&lt;/vars>
        &lt;vars>['pet=cat','petName=Fluffy']&lt;/vars>
        &lt;env>'CLASSPATH=%s{STAF/Config/Sep/Path}{STAF/Env/ClassPath}' % STAXJarFile&lt;/env>
        &lt;env>'JAVA_APP=javaw.exe'&lt;/env>
        &lt;useprocessvars/>
        &lt;disabledauth action="'ignore'"/>
        &lt;console use="'same'"/>
      &lt;/process>

      &lt;call function="'PASS-if-0'">RC&lt;/call>

      &lt;message>
        'Process RC=%d on machine %s' % (RC, machName)
      &lt;/message>

      &lt;message>
        'Finished run #%d on machine %s' % (loopNum, machName)
      &lt;/message>

    &lt;/sequence>

  &lt;/function>


  &lt;function name="RunSTAFCommands" scope="local">

    &lt;function-prolog>
      This function runs several STAF Commands using following
      STAF services: DELAY, MISC, and SERVICE.
    &lt;/function-prolog>

    &lt;function-map-args>

      &lt;function-required-arg name="machName">
        Location (machine name) to run the process
      &lt;/function-required-arg>

      &lt;function-required-arg name="blockNum">
        Number used in conjunction with the machine name to get a unique
        block name (in case running multiple times on the same machine)
      &lt;/function-required-arg>

    &lt;/function-map-args>

    &lt;block name="'STAFCommandBlock%d' % blockNum">

      &lt;sequence>

        &lt;script>from random import random;r=random();r=r*10000&lt;/script>

        &lt;message>'Delaying %d ms on machine %s' % (r,machName)&lt;/message>

        &lt;stafcmd name="'STAF Command: RANDOM DELAY'">
          &lt;location>machName&lt;/location>
          &lt;service>'delay'&lt;/service>
          &lt;request>'delay %d' % r&lt;/request>
        &lt;/stafcmd>

        &lt;if expr="RC != 0">
          &lt;return>RC&lt;/return>
        &lt;/if>

        &lt;stafcmd name="'STAF Command: MISC VERSION'">
          &lt;location>machName&lt;/location>
          &lt;service>'misc'&lt;/service>
          &lt;request>'version'&lt;/request>
        &lt;/stafcmd>

        &lt;if expr="RC != 0">
          &lt;return>RC&lt;/return>
          &lt;else>
            &lt;message>
              'Machine %s has STAF Version %s' % (machName,STAFResult)
            &lt;/message>
          &lt;/else>
        &lt;/if>

        &lt;stafcmd name="'STAF Command: SERVICE LIST'">
          &lt;location>machName&lt;/location>
          &lt;service>'service'&lt;/service>
          &lt;request>'list'&lt;/request>
        &lt;/stafcmd>

        &lt;if expr="RC != 0">
          &lt;return>RC&lt;/return>
          &lt;else>
            &lt;message>
              'Machine %s has STAF services:\n%s' % (machName,STAFResult)
            &lt;/message>
          &lt;/else>
        &lt;/if>

        &lt;return>0&lt;/return>

      &lt;/sequence>

    &lt;/block>

  &lt;/function>

  &lt;function name="PASS-if-0" scope="local">

    &lt;function-prolog>
      This function checks if a value is 0.  If 0, it sets the
      testcase status result to 'pass'; otherwise, it sets it
      to 'fail' and sends a message to the STAXMonitor.
    &lt;/function-prolog>

    &lt;function-single-arg>
      &lt;function-required-arg name="value">
        Value (usually RC or STAXResult variable) to compare with 0
      &lt;/function-required-arg>
    &lt;/function-single-arg>

    &lt;if expr="value == 0">
      &lt;tcstatus result="'pass'"/>
      &lt;else>
        &lt;tcstatus result="'fail'">
          'value=%d. Expected 0.' % value
        &lt;/tcstatus>
      &lt;/else>
    &lt;/if>
  &lt;/function>

&lt;/stax>
</pre>

<hr>
<h3><a name="Header_SampleJob2" href="#ToC_SampleJob2">
Sample STAX Job 2 - Executing Tests in Parallel on Multiple Machines</a></h3>

This STAX job executes a set of automated tests on multiple machines in parallel.

<pre>&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">
&lt;!--
&nbsp;&nbsp; j13auto.xml

&nbsp;&nbsp; XML Sample for STAX (STAf eXecution)&nbsp;&nbsp;

&nbsp;&nbsp; Job Description:

&nbsp;&nbsp;&nbsp; This job executes a set of automated tests on each machine&nbsp;
&nbsp;&nbsp;&nbsp; defined in the "TestMachines" List. Each machine executes&nbsp;
&nbsp;&nbsp;&nbsp; in parallel.&nbsp; The setup and tests run serially on each machine.&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; On each machine, the "Setup" Function is executed, and then the&nbsp;
&nbsp;&nbsp;&nbsp; "RunVariations" Function is executed first for the "Java2D API&nbsp;
&nbsp;&nbsp;&nbsp; variations" list and then for the "Print API variations" List.

&nbsp;&nbsp;&nbsp; This job imports functions from STAXUtil.xml.
-->

&lt;stax>

&nbsp; &lt;defaultcall function="j13auto"/>
&nbsp;&nbsp;
&nbsp; &lt;script>
&nbsp;   # Make sure the importDir is where you put STAXUtil.xml
&nbsp;   importDir = 'C:/staf/services/stax/libraries'
&nbsp;   TestCaseServer = 'AL1B4'
&nbsp;   TestCaseDir = 'D:/jdk13/tests/api'
&nbsp;   TestCaseFiles = ['Java2DAPI.jar','PrintAPI.jar']
&nbsp;   TestMachines = ['AL2C4','AM3D4','AA3B4','CE1A4','AH2D4']
&nbsp;   Java2DAPI = ['AlphaComposite001',&nbsp;&nbsp;&nbsp;&nbsp; 'AlphaComposite002',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'AlphaComposite003',&nbsp;&nbsp;&nbsp;&nbsp; 'GraphicsEnvironment001',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'GraphicsEnvironment002','ICC_ProfileRGB001',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'ICC_ProfileRGB002',&nbsp;&nbsp;&nbsp;&nbsp; 'ICC_ProfileRGB003',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'ICC_ProfileRGB004',&nbsp;&nbsp;&nbsp;&nbsp; 'ICC_ProfileRGB005',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'ICC_ProfileRGB006',&nbsp;&nbsp;&nbsp;&nbsp; 'GlyphMetrics001',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'GlyphMetrics002',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'DirectColorModel001',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'DirectColorModel002',&nbsp;&nbsp; 'DirectColorModel003',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'DirectColorModel004',&nbsp;&nbsp; 'DirectColorModel005']
&nbsp;   PrintAPI =  ['PageFormat001',&nbsp;&nbsp;&nbsp;&nbsp; 'PageFormat002',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'PrinterJob001',&nbsp;&nbsp;&nbsp;&nbsp; 'PrinterJob002',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'PrinterJob003',&nbsp;&nbsp;&nbsp;&nbsp; 'PrinterJob004',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'PageAttributes001', 'PageAttributes002',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'PageAttributes003']
&nbsp; &lt;/script>

&nbsp; &lt;function name="j13auto">

&nbsp;&nbsp;&nbsp; &lt;sequence>
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;import machine="'local'" file="'%s/STAXUtil.xml' % importDir"/>
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;paralleliterate var="machName" in="TestMachines">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;call function="'Setup'"/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;testcase name="Java2D">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;script>variationList = Java2DAPI[:]&lt;/script>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;script>jarName = '%s/%s' % (TestCaseDir, TestCaseFiles[0])&lt;/script>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;call function="'RunVariations'"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/sequence>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/testcase>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;testcase name="Print">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;script>variationList = PrintAPI[:]&lt;/script>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;script>jarName = '%s/%s' % (TestCaseDir, TestCaseFiles[1])&lt;/script>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;call function="'RunVariations'"/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/sequence>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/testcase>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/sequence>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/paralleliterate>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

&nbsp;&nbsp;&nbsp; &lt;/sequence>

&nbsp; &lt;/function>
&nbsp;&nbsp;
&nbsp; &lt;function name="Setup">
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &lt;iterate var="file" in="TestCaseFiles">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stafcmd>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>TestCaseServer&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service>'FS'&lt;/service>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;request>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'COPY FILE %s/%s TOMACHINE %s' % (TestCaseDir, file, machName)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/request>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/stafcmd>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &lt;/iterate>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &lt;/function>
&nbsp;&nbsp;
&nbsp; &lt;function name="RunVariations">
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &lt;testcase name="machName">
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;iterate var="variationName" in="variationList">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;sequence>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;location>machName&lt;/location>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;command>'java'&lt;/command>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parms>'-jar ' + jarName + ' ' + variationName&lt;/parms>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/process>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;call> function="'STAXUtilCheckSuccess'">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   { 'result': RC == 0,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      'failMsg': 'Process failed. RC=%s Result=%s' % (RC, STAFResult),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      'sendToMonitor': 1, 'recordStatus': 1 }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/call>
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/sequence>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/iterate>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &lt;/testcase>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &lt;/function>&nbsp;&nbsp;

&lt;/stax></pre>

<p>If you performed a STAX EXECUTE request specifying a file containing
the above sample XML file and then ran the following STAX request to query
the job's testcase information right before the job completed:
<pre>&nbsp; LIST JOB 15 TESTCASES</pre>
you would see output similar to the following (depending on how many testcase
variations passed or failed on each machine) if "Log TC Elapsed Time" and
"Log TC Num Starts" are disabled:
<pre>Java2D.AL2C4;18;0
Java2D.AM3D4;16;2
Java2D.AA3B4;5;13
Java2D.CE1C4;18;0
Java2D.AH2D4;18;0
Print.AL2C4;9;0
Print.AM3D4;9;0
Print.AA3B4;7;2
Print.CE1C4;8;1
Print.AH2D4;9;0</pre>

<hr>
<h3><a name="Header_SampleJob3" href="#ToC_SampleJob3">
Sample STAX Job 3 - Creating a STAF Handle and Using it's Queue</a></h3>

This STAX job demonstrates how to create your own STAF handle within a
STAX job and use it's queue to get messages.
<br>Note that you should not use the STAX job handle's queue as that
can interfere with the use of the queue by the STAX service as described
in the <a href="#Header_Concepts">Concepts</a> section, sub-section "Queues".
<p>
A new STAF handle can be created within a STAX job using the Java constructor
for STAFHandle.  The com.ibm.staf.STAFHandle class must be imported before
using it.  See the <a href="http://staf.sourceforge.net/current/STAFJava.htm">
STAF Java User's Guide</a> for more information.
Note that Jython allows you to access Java classes, so that's why this works.
<pre>
  &lt;script> 
    from com.ibm.staf import STAFHandle 
 
    # Create a STAF handle 
    myHandle = STAFHandle("MySTAXJobHandle") 
  &lt;/script>
</pre>
 
Then you can use this newly created handle to submit a <tt>GET WAIT 60000</tt>
request to the QUEUE service (which waits for a message to be placed on
the queue for up to 60 seconds) using the Java STAFHandle's submit2 method.
You can customize this QUEUE GET request to meet your needs.
Again, see the <a href="http://staf.sourceforge.net/current/STAFJava.htm">
STAF Java User's Guide</a> for more information on the submit2 method
and it's result. 
<pre>
  &lt;script> 
    # Submit a STAF request using this handle 
 
    request = 'GET WAIT 60000' 
    result = myHandle.submit2('local', 'QUEUE', request) 
  &lt;/script>
</pre>
 
If the <tt>QUEUE GET WAIT 60000</tt> request is successful, it's result
is a marshalled string.  The result must be unmarshalled to get the
marshalling context and it's root object which is a map containing the
queued message information.  See the <a href="#Header_StaxPythonInterfaces">
"STAX Python Interfaces"</a> section for a description of the Python
marshalling functions available like STAFMarshalling.unmarshall()
and STAFMarshalling.formatObject().
<pre>
  &lt;script> 
    mc = STAFMarshalling.unmarshall(result.result) 
    queueMsgMap = mc.getRootObject(); 
  &lt;/script> 
</pre>

Then you can do whatever you want with the message you get from the queue.
This job simply logs the message map info (using the
STAFMarshalling.formatObject() method to "pretty print" it).
It also shows how to access the "message" element in the message map.
You can access other elements in the message map similarly (e.g. 'type',
'handle', etc).  The keys for this map are documented in the
<a href="http://staf.sourceforge.net/current/STAFUG.htm">STAF User's Guide</a> 
under the result from a QUEUE service's GET request. 
<pre>
  &lt;log message="1"> 
    STAFMarshalling.formatObject(mc) 
  &lt;/log> 
 
  &lt;log message="1"> 
    'Queued message: %s' % (queueMsgMap['message']) 
  &lt;/log> 
</pre>

This job uses a &lt;loop> element to continually check the
queue for a message.  Note that anytime the job is waiting on the
STAFHandle to get data off the queue, a STAX Thread is being used.
If you have too many jobs/threads waiting on STAF queues, the STAX
service can run out of STAX Threads.  You can largely get around this by
not doing an infinite wait using the QUEUE GET command.  Instead,
provide a timeout, like <tt>QUEUE GET WAIT 60000</tt> (which waits
for a message for 60 seconds).  This causes a polling loop, which is
generally not a good thing, but it will prevent any deadlocking in STAX.
<p> 
To show how this STAX job works, you can execute this STAX job via the
STAX Monitor and while it's running, from the command line submit a
QUEUE request to the STAX machine specifying the handle that you created
(which is logged by the STAX job to the STAX Job User log and is sent to
the STAX Monitor).  For example, if the handle you created in the STAX
job is 133 (and you're submitting this request from the STAX machine):
<pre>  STAF local QUEUE QUEUE HANDLE 133 MESSAGE "Hello"
  STAF local QUEUE QUEUE HANDLE 133 MESSAGE "Hello again"</pre>

You'll see that the STAX job then gets these messages and logs them.
<p> 
To stop the loop that the job is in waiting for more messages on
it's queue (and to terminate the job), you could send a message
to the queue that tells it to stop waiting for more messages.
For example, this job checks for a message of type "MyJob/StopGettingMsgs"
and breaks out of the loop when it receives any message with this type.
<pre>  STAF local QUEUE QUEUE HANDLE 133 TYPE MyJob/StopGettingMsgs MESSAGE Goodbye</pre>

Here's the sample STAX job that demonstrates how to create your own
STAF handle within a STAX job and use it's queue to get messages:

<pre>
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
&lt;!DOCTYPE stax SYSTEM "stax.dtd">

&lt;stax>

  &lt;defaultcall function="QueueGetMessage"/>
  
  &lt;function name="QueueGetMessage">
    &lt;sequence>

      &lt;script>
        from com.ibm.staf import STAFHandle
 
        # Create a STAF handle
        myHandle = STAFHandle("MySTAXJobHandle")
      &lt;/script>

      &lt;log message="1">
        'MySTAXJobHandle handle #: %s' % (myHandle.getHandle())
      &lt;/log>    

      &lt;loop>
        &lt;sequence>

          &lt;script>
            # Submit a STAF request using this handle

            request = 'GET WAIT 60000'
            result = myHandle.submit2('local', 'QUEUE', request)
          &lt;/script>

          &lt;if expr="result.rc == STAFRC.Ok">
            &lt;sequence>

              &lt;script>
                # The result is a marshalled string so need to unmarshall
                # it to get the marshalling context and it's root object
                # which is a map containing the queued message information
                # with keys documented in the STAF User's Guide for the
                # QUEUE service's GET request.

                mc = STAFMarshalling.unmarshall(result.result)
                queueMsgMap = mc.getRootObject();
              &lt;/script>

              &lt;if expr="queueMsgMap['type'] == 'MyJob/StopGettingMsgs'">
                &lt;break/>
              &lt;/if>

              &lt;log message="1">
                STAFMarshalling.formatObject(mc)
              &lt;/log>

              &lt;log message="1">
                'Queued message: %s' % (queueMsgMap['message'])
              &lt;/log>

            &lt;/sequence>
          &lt;/if>

        &lt;/sequence>
      &lt;/loop>

      &lt;script>
        # Unregister the STAF handle
        myHandle.unRegister()
      &lt;/script>

    &lt;/sequence>
  &lt;/function>

&lt;/stax></pre>

<hr>

<h1><a name="Header_StaxErrorCodes" href="#ToC_StaxErrorCodes">Appendix B: STAX Service Error Code Reference</a></h1>

In addition to the common STAF return codes, the following STAX service
return codes are defined:
<br>&nbsp;
<table BORDER WIDTH="100%" BGCOLOR="#FFFF00" >
<tr>
<td><b><font face="Comic Sans MS">Error Code</font></b></td>

<td><b><font face="Comic Sans MS">Meaning&nbsp;</font></b></td>

<td><b><font face="Comic Sans MS">Comment&nbsp;</font></b></td>
</tr>

<tr>
<td>4001</td>

<td>Error submitting execute request</td>

<td>Additional information about the error is put into the STAF Result.
An example of additional information that may be provided is:
<p>
Caught com.ibm.staf.service.stax.STAXXMLParseException:
<br>
Line 78: The element type "sequence" must be terminated by the matching end-tag "&lt;/sequence>".
<p>
In this case, it indicates an error in your XML file that you must correct.
</td>
</tr>

<tr>
<td>4002</td>

<td>Block not held</td>

<td>Requested to release a block that is not held.</td>
</tr>

<tr>
<td>4003</td>

<td>Block already held</td>

<td>Requested to hold a block that is already held.</td>
</tr>
</table>

<hr>

<h1><a name="Header_StaxDTD" href="#ToC_StaxDTD">Appendix C: STAX Document Type Definition (DTD)</a></h1>

This section contains the DTD for the STAX service (without any extensions).  You can
display the DTD that the STAX service is using (including any extensions) by
issuing the GET DTD request and you can redirect the output to a file to create
a stax.dtd file as described in section <a href="#Header_Get">GET DTD</a>.
<pre>
&lt;!--
   STAf eXecution (STAX) Document Type Definition (DTD)

   STAX Version: 3.5.0 Beta 1

   STAX Extension Elements: []

   Generated Date: 20101020-16:00:06

   This DTD module is identified by the SYSTEM identifier:

     SYSTEM 'stax.dtd'

-->

&lt;!-- Parameter entities referenced in Element declarations -->

&lt;!ENTITY % stax-elems 'function | script | signalhandler'>

&lt;!ENTITY % task       'timer | log | parallel |
                       call | stafcmd | script |
                       tcstatus | message | iterate |
                       sequence | import | raise |
                       job | nop | process |
                       try | break | testcase |
                       paralleliterate | continue | throw |
                       breakpoint | release | signalhandler |
                       rethrow | block | hold |
                       terminate | return | if |
                       call-with-list | loop | call-with-map'>

&lt;!--================= STAX Job Definition ========================== -->
&lt;!--
     The root element STAX contains all other elements.  It consists
     of an optional defaultcall element and any number of function,
     script, and/or signalhandler elements.
-->
&lt;!ELEMENT stax         ((%stax-elems;)*, defaultcall?, (%stax-elems;)*)>

&lt;!--================= The Default Call Function Element ============ -->
&lt;!--
     The defaultcall element defines the function to call by default
     to start the job.  This can be overridden by the 'FUNCTION'
     parameter when submitting the job to be executed.
     The function attribute's value is a literal.
-->
&lt;!ELEMENT defaultcall  (#PCDATA)>
&lt;!ATTLIST defaultcall
          function     IDREF    #REQUIRED
>

&lt;!--================= Continue Element ============================= -->
&lt;!--
     The continue element can be used to continue to the top of a loop
     or iterate element.
-->
&lt;!ELEMENT continue   EMPTY>

&lt;!--================= Break Element ================================ -->
&lt;!--
     The break element can be used to break out of a loop or iterate
     element.
-->
&lt;!ELEMENT break      EMPTY>

&lt;!--================= The Call-With-Map Element ==================== -->
&lt;!--
     Perform a function with the referenced name with any number of
     arguments in the form of a map of named arguments.  The function
     and name attribute values as well as the argument value are
     evaluated via Python.
-->
&lt;!ELEMENT call-with-map       (call-map-arg*)>
&lt;!ATTLIST call-with-map
          function   CDATA    #REQUIRED
>

&lt;!ELEMENT call-map-arg        (#PCDATA)>
&lt;!ATTLIST call-map-arg
          name       CDATA    #REQUIRED
>

&lt;!--================= The No Operation Element ===================== -->
&lt;!--
     No operation action.
-->
&lt;!ELEMENT nop        EMPTY>

&lt;!--================= The Function Element ========================= -->
&lt;!--
     The function element defines a named task which can be called.
     The name, requires, and scope attribute values are literals.
     If desired, the function can be described using a function-prolog
     element (or the deprecated function-description element) and/or a
     function-epilog element.  Also, if desired, the function element
     can define the arguments that can be passed to the function.
     The function element can also define any number of function-import
     elements if it requires functions from other xml files.  The
     function-import element must specify either the file or directory
     attribute.
-->
&lt;!ELEMENT function     ((function-prolog | function-description)?,
                        (function-epilog)?,
                        (function-import)*,
                        (function-no-args | function-single-arg |
                         function-list-args | function-map-args)?,
                        (%task;))>
&lt;!ATTLIST function
          name         ID       #REQUIRED
          requires     IDREFS   #IMPLIED
          scope        (local | global) "global"
>

&lt;!ELEMENT function-prolog       (#PCDATA)>

&lt;!ELEMENT function-epilog       (#PCDATA)>

&lt;!ELEMENT function-description  (#PCDATA)>

&lt;!ELEMENT function-import       (#PCDATA)>
&lt;!ATTLIST function-import
          file         CDATA    #IMPLIED
          directory    CDATA    #IMPLIED
          machine      CDATA    #IMPLIED
>

&lt;!ELEMENT function-no-args      EMPTY>

&lt;!ELEMENT function-single-arg   (function-required-arg |
                                 function-optional-arg |
                                 function-arg-def)>

&lt;!ELEMENT function-list-args    ((((function-required-arg+,
                                    function-optional-arg*) |
                                  (function-required-arg*,
                                    function-optional-arg+)),
                                 (function-other-args)?) |
                                 function-arg-def+)>

&lt;!ELEMENT function-map-args     (((function-required-arg |
                                   function-optional-arg)+,
                                  (function-other-args+)?) |
                                  function-arg-def+)>

&lt;!ELEMENT function-required-arg (#PCDATA)>
&lt;!ATTLIST function-required-arg
          name         CDATA    #REQUIRED
>

&lt;!ELEMENT function-optional-arg (#PCDATA)>
&lt;!ATTLIST function-optional-arg
          name         CDATA    #REQUIRED
          default      CDATA    "None"
>

&lt;!ELEMENT function-other-args   (#PCDATA)>
&lt;!ATTLIST function-other-args
          name         CDATA    #REQUIRED
>

&lt;!ELEMENT function-arg-def      (function-arg-description?,
                                 function-arg-private?,
                                 function-arg-property*)>
&lt;!ATTLIST function-arg-def
          name         CDATA    #REQUIRED
          type         (required | optional | other) "required"
          default      CDATA    "None"
>

&lt;!ELEMENT function-arg-description  (#PCDATA)>

&lt;!ELEMENT function-arg-private   EMPTY>

&lt;!ELEMENT function-arg-property  (function-arg-property-description?,
                                 function-arg-property-data*)>
&lt;!ATTLIST function-arg-property
          name         CDATA    #REQUIRED
          value        CDATA    #IMPLIED
>

&lt;!ELEMENT function-arg-property-description  (#PCDATA)>

&lt;!ELEMENT function-arg-property-data (function-arg-property-data)*>
&lt;!ATTLIST function-arg-property-data
          type         CDATA    #REQUIRED
          value        CDATA    #IMPLIED
>

&lt;!--================= The Iterate Element ========================= -->
&lt;!--
     The iterate element iterates through a list of items, performing
     its contained task while substituting each item in the list.
     The iterated tasks are performed in sequence.
-->
&lt;!ELEMENT iterate  (%task;)>
&lt;!-- var      is the name of the variable which will contain the
              current item in the list or tuple being iterated.
              It is a literal.
     in       is the list or tuple to be iterated.  It is evaluated
              via Python and must evaluate to be a list or tuple.
     indexvar is the name of a variable which will contain the index of
              the current item in the list or tuple being iterated.
              It is a literal.  The value for the first index is 0.
-->
&lt;!ATTLIST iterate
          var        CDATA    #REQUIRED
          in         CDATA    #REQUIRED
          indexvar   CDATA    #IMPLIED
>

&lt;!--================= The Log Element ============================== -->
&lt;!--
     Writes a message and its log level to a STAX Job User Log file.
     The message must evaluate via Python to a string.

     The log level specified defaults to 'info'.  If specified, it
     must evaluate via Python to a string containing one of the
     following STAF Log Service Log levels:
       fatal, warning, info, trace, trace2, trace3, debug, debug2,
       debug3, start, stop, pass, fail, status, user1, user2, user3,
       user4, user5, user6, user7, user8
     The message attribute is evaluated via Python.  If it evaluates
     to true, the message text will also be sent to the STAX Job Monitor
     in addition to being logged.  The message attribute defaults to the
     STAXMessageLog variable whose value defaults to 0 (false) but can
     be changed within the STAX job to turn on messaging.
     If an if attribute is specified and it evaluates via Python to
     false, then the log element is ignored.
-->
&lt;!ELEMENT log         (#PCDATA)>
&lt;!ATTLIST log
          level       CDATA       "'info'"
          message     CDATA       "STAXMessageLog"
          if          CDATA       "1"
>

&lt;!--================= The Parallel Iterate Element ================ -->
&lt;!--
     The parallel iterate element iterates through a list of items,
     performing its contained task while substituting each item in
     the list.  The iterated tasks are performed in parallel.
-->
&lt;!ELEMENT paralleliterate  (%task;)>
&lt;!-- var      is the name of a variable which will contain the current
              item in the list or tuple being iterated.
              It is a literal.
     in       is the list or tuple to be iterated.  It is evaluated
              via Python and must evaluate to be a list or tuple.
     indexvar is the name of a variable which will contain the index of
              the current item in the list or tuple being iterated.
              It is a literal.  The value of the first index is 0.
     maxthreads is the maximum number of STAX-Threads that can be running
              simultaneously at a time.  It must evaluate to an integer
              value >= 0 via Python.  The default is 0 which means
              there is no maximum.
-->
&lt;!ATTLIST paralleliterate
          var        CDATA    #REQUIRED
          in         CDATA    #REQUIRED
          indexvar   CDATA    #IMPLIED
          maxthreads CDATA    "0"
>

&lt;!--================= The Throw Element ============================ -->
&lt;!--
     The throw element specifies an exception to throw.
     The exception attribute value and any additional information
     is evaluated via Python.
-->
&lt;!ELEMENT throw      (#PCDATA)>
&lt;!ATTLIST throw
          exception  CDATA        #REQUIRED
>

&lt;!--================= The Breakpoint Element ============================ -->
&lt;!--
     The breakpoint element allows you to denote a breakpoint.
-->
&lt;!ELEMENT breakpoint     EMPTY>

&lt;!--================= The Block Element ============================ -->
&lt;!--
     Defines a task block that can be held, released, or terminated.
     Used in conjunction with the hold/terminate/release elements to
     define a task block that can be held, terminated, or released.
     The name attribute value is evaluated via Python.
-->
&lt;!ELEMENT block      (%task;)>
&lt;!ATTLIST block
          name       CDATA    #REQUIRED
>

&lt;!--=============== The Try / Catch / Finally Elements ============= --> 
&lt;!-- 
     The try element allows you to perform a task and to catch 
     exceptions that are thrown.  Also, if a finally element is 
     specified, then the finally task is executed, no matter whether 
     the try task completes normally or abruptly, and no matter whether 
     a catch element is first given control. 
--> 
&lt;!ELEMENT try        ((%task;), ((catch+) | ((catch*), finally)))> 
&lt;!-- 
     The catch element performs a task when the specified exception is 
     caught.  The var attribute specifies the name of the variable to 
     receive the data specified within the throw element.  The typevar 
     attribute specifies the name of the variable to receive the type 
     of the exception.  The sourcevar attribute specifies the name
     of the variable to receive the source information for the exception.
 
--> 
&lt;!ELEMENT catch      (%task;)> 
&lt;!ATTLIST catch 
          exception  CDATA        #REQUIRED 
          var        CDATA        #IMPLIED 
          typevar    CDATA        #IMPLIED 
          sourcevar  CDATA        #IMPLIED 
> 
&lt;!ELEMENT finally    (%task;)> 

&lt;!--================= The Terminate Element ======================== -->
&lt;!--
     The terminate element specifies to terminate a block in the job.
     If an if attribute is specified and it evaluates via Python to
     false, then the log element is ignored.
-->
&lt;!ELEMENT terminate  EMPTY>
&lt;!ATTLIST terminate
          block      CDATA    #IMPLIED
          if         CDATA    "1"
>

&lt;!--================= The Sequence Element ========================= -->
&lt;!--
     The sequence element performs one or more tasks in sequence.
-->
&lt;!ELEMENT sequence   (%task;)+>

&lt;!--================= The Timer Element ============================ -->
&lt;!--
     The timer element runs a task for a specified duration.
     If the task is still running at the end of the specified duration,
     then the RC variable is set to 1, else if the task ended before
     the specified duration, the RC variable is set to 0, else if the
     timer could not start due to an invalid duration, the RC variable
     is set to -1.
-->
&lt;!ELEMENT timer     (%task;)>
&lt;!-- duration is the maximum length of time to run the task.
       Time can be expressed in milliseconds, seconds, minutes,
       hours, days, weeks, or years.  It is evaluated via Python.
         Examples:  duration='50'    (50 milliseconds)
                    duration='90s'   (90 seconds)
                    duration='5m'    ( 5 minutes)
                    duration='36h'   (36 hours)
                    duration='3d'    ( 3 days)
                    duration='1w'    ( 1 week)
                    duration='1y'    ( 1 year)
-->
&lt;!ATTLIST timer
          duration   CDATA        #REQUIRED
>

&lt;!--================= The Message Element ========================== -->
&lt;!--
     Generates an event and makes the message value available to the
     STAX Job Monitor.  The message must evaluate via Python to a string.

     The log attribute is evaluated via Python to a boolean.  If it
     evaluates to true, the message text will also be logged in the STAX
     Job User log.  The log attribute defaults to the STAXLogMessage
     variable whose value defaults to 0 (false) but can by changed within
     the STAX job to turn on logging.

     The log level is ignored if the log attribute does not evaluate to
     true.  It defaults to 'info'.  If specified, it must evaluate via
     Python to a string containing one of the following STAF Log Service
     logging levels:
       fatal, warning, info, trace, trace2, trace3, debug, debug2,
       debug3, start, stop, pass, fail, status, user1, user2, user3,
       user4, user5, user6, user7, user8

     If an if attribute is specified and it evaluates via Python to
     false, the message element is ignored.
-->
&lt;!ELEMENT message     (#PCDATA)>
&lt;!ATTLIST message
          log         CDATA       "STAXLogMessage"
          level       CDATA       "'info'"
          if          CDATA       "1"
>

&lt;!--================= The Signal Handler Element =================== -->
&lt;!--
     The signalhandler element defines how to handle a specified signal.
     The signal attribute value is evaluated via Python.
-->
&lt;!ELEMENT signalhandler (%task;)>
&lt;!ATTLIST signalhandler
          signal     CDATA        #REQUIRED
>

&lt;!--================= The Testcase Element ========================= -->
&lt;!--
     Defines a testcase.  Used in conjunction with the tcstatus
     element to mark the status for a testcase.
     The name attribute value is evaluated via Python.
-->
&lt;!ELEMENT testcase   (%task;)>
&lt;!ATTLIST testcase
          name       CDATA    #REQUIRED
          mode       CDATA    "'default'"
>

&lt;!--================= The Import Element =========================== -->
&lt;!--
     Allows importing of functions from other STAX XML job file(s).
     Either the file or directory attribute must be specified.
     All attributes and sub-elements are evaluated via Python.
-->
&lt;!ELEMENT import         (import-include?, import-exclude?)?>
&lt;!ATTLIST import
          file           CDATA    #IMPLIED
          directory      CDATA    #IMPLIED
          machine        CDATA    #IMPLIED
          replace        CDATA    "0"
          mode           CDATA    "'error'"
>
&lt;!ELEMENT import-include (#PCDATA)>
&lt;!ELEMENT import-exclude (#PCDATA)>

&lt;!--================= The Hold Element ============================= -->
&lt;!--
     The hold element specifies to hold a block in the job.
     If an if attribute is specified and it evaluates via Python to
     false, then the hold element is ignored.
-->
&lt;!ELEMENT hold       EMPTY>
&lt;!ATTLIST hold
          block      CDATA    #IMPLIED
          if         CDATA    "1"
>

&lt;!--================= The Conditional Element (if-then-else) ======= -->
&lt;!--
     Allows you to write an if or a case construct with zero or more
     elseifs and one or no else statements.

     The expr attribute value is evaluated via Python and must evaluate
     to a boolean value.
-->
&lt;!ELEMENT if         ((%task;), elseif*, else?)>
&lt;!ATTLIST if
          expr       CDATA   #REQUIRED
>
&lt;!ELEMENT elseif     (%task;)>
&lt;!ATTLIST elseif
          expr       CDATA   #REQUIRED
>
&lt;!ELEMENT else       (%task;)>

&lt;!--================= The STAF Command Element ===================== -->
&lt;!--
     Specifies a STAF command to be executed.
     Its name and all of its element values are evaluated via Python.
-->
&lt;!ELEMENT stafcmd    (location, service, request)>
&lt;!ATTLIST stafcmd
          name       CDATA   #IMPLIED
>
&lt;!ELEMENT service    (#PCDATA)>
&lt;!ELEMENT request    (#PCDATA)>

&lt;!--================= The STAF Process Element ===================== -->
&lt;!--
     Specifies a STAF process to be started.
     All of its non-empty element values are evaluated via Python.
-->
&lt;!ENTITY % procgroup1 '((parms?, workdir?) | (workdir?, parms?))'>
&lt;!ENTITY % procgroup2 '((title?, workload?) | (workload?, title?))'>
&lt;!ENTITY % procgroup1a '((parms?, workload?) | (workload?, parms?))'>
&lt;!ENTITY % procgroup2a '((title?, workdir?) | (workdir?, title?))'>
&lt;!ENTITY % procgroup3 '(((vars | var | envs | env)*, useprocessvars?) |
                        (useprocessvars?, (vars | var | envs | env)*))'>
&lt;!ENTITY % procgroup4 '(((username, password?)?, disabledauth?) |
                        ((disabledauth?, (username, password?)?)))'>
&lt;!ENTITY % procgroup5 '((stdin?, stdout?, stderr?) |
                        (stdout?, stderr?, stdin?) |
                        (stderr?, stdin?, stdout?) |
                        (stdin?, stderr?, stdout?) |
                        (stdout?, stdin?, stderr?) |
                        (stderr?, stdout?, stdin?))'>
&lt;!ENTITY % returnfileinfo '(returnfiles | returnfile)*'>
&lt;!ENTITY % procgroup5a '((%returnfileinfo;, returnstdout?, returnstderr?) |
                        (returnstdout?, returnstderr?, %returnfileinfo;) |
                        (returnstderr?, %returnfileinfo;, returnstdout?) |
                        (%returnfileinfo;, returnstderr?, returnstdout?) |
                        (returnstdout?, %returnfileinfo;, returnstderr?) |
                        (returnstderr?, returnstdout?, %returnfileinfo;))'>
&lt;!ENTITY % procgroup6 '((stopusing?, console?, focus?, statichandlename?) |
                        (stopusing?, console?, statichandlename?, focus?) |
                        (stopusing?, focus?, console?, statichandlename?) |
                        (stopusing?, focus?, statichandlename?, console?) |
                        (stopusing?, statichandlename?, console?, focus?) |
                        (stopusing?, statichandlename?, focus?, console?) |
                        (console?, focus?, stopusing?, statichandlename?) |
                        (console?, focus?, statichandlename?, stopusing?) |
                        (console?, stopusing?, focus?, statichandlename?) |
                        (console?, stopusing?, statichandlename?, focus?) |
                        (console?, statichandlename?, focus?, stopusing?) |
                        (console?, statichandlename?, stopusing?, focus?) |
                        (focus?, console?, stopusing?, statichandlename?) |
                        (focus?, console?, statichandlename?, stopusing?) |
                        (focus?, stopusing?, console?, statichandlename?) |
                        (focus?, stopusing?, statichandlename?, console?) |
                        (focus?, statichandlename?, console?, stopusing?) |
                        (focus?, statichandlename?, stopusing?, console?) |
                        (statichandlename?, stopusing?, console?, focus?) |
                        (statichandlename?, stopusing?, focus?, console?) |
                        (statichandlename?, console?, focus?, stopusing?) |
                        (statichandlename?, console?, stopusing?, focus?) |
                        (statichandlename?, focus?, console?, stopusing?) |
                        (statichandlename?, focus?, stopusing?, console?))'>

&lt;!ELEMENT process    (location, command,
                      ((%procgroup1;, %procgroup2;) |
                       (%procgroup2;, %procgroup1;) |
                       (%procgroup1a;, %procgroup2a;) |
                       (%procgroup2a;, %procgroup1a;)),
                      %procgroup3;,
                      ((%procgroup4;, %procgroup5;, %procgroup5a;, %procgroup6;) |
                       (%procgroup4;, %procgroup6;, %procgroup5;, %procgroup5a;) |
                       (%procgroup5;, %procgroup5a;, %procgroup4;, %procgroup6;) |
                       (%procgroup5;, %procgroup5a;, %procgroup6;, %procgroup4;) |
                       (%procgroup6;, %procgroup4;, %procgroup5;, %procgroup5a;) |
                       (%procgroup6;, %procgroup5;, %procgroup5a;, %procgroup4;)),
                      other?, process-action?)>
&lt;!ATTLIST process
          name        CDATA   #IMPLIED
>

&lt;!--
     The process element must contain a location element and a
     command element.
-->
&lt;!ELEMENT location            (#PCDATA)>
&lt;!ELEMENT command             (#PCDATA)>
&lt;!ATTLIST command
          mode      CDATA     "'default'"
          shell     CDATA     #IMPLIED
>

&lt;!--
     The parms element specifies any parameters that you wish to
     pass to the command.
     The value is evaluated via Python to a string.
-->
&lt;!ELEMENT parms               (#PCDATA)>
&lt;!ATTLIST parms
          if        CDATA     "1"
>

&lt;!--
     The workdir element specifies the directory from which the
     command should be executed.  If you do not specify this
     element, the command will be started from whatever directory
     STAFProc is currently in.
     The value is evaluated via Python to a string.
-->
&lt;!ELEMENT workdir             (#PCDATA)>
&lt;!ATTLIST workdir
          if        CDATA     "1"
>

&lt;!--
     The title element specifies the program title of the process.
     Unless overridden by the process, the title will be the text
     that is displayed on the title bar of the application.
     The value is evaluated via Python to a string.
-->
&lt;!ELEMENT title               (#PCDATA)>
&lt;!ATTLIST title
          if        CDATA     "1"
>

&lt;!--
     The workload element specifies the name of the workload for
     which this process is a member.  This may be useful in
     conjunction with other process elements.
     The value is evaluated via Python to a string.
-->
&lt;!ELEMENT workload            (#PCDATA)>
&lt;!ATTLIST workload
          if        CDATA     "1"
>

&lt;!--
     The vars (and var) elements specify STAF variables that go into the
     process specific STAF variable pool.
     The value must evaluate via Python to a string or a list of
     strings. Multiple vars elements may be specified for a process.
     The format for each variable is:
       'varname=value'
     So, a list containing 3 variables could look like:
       ['var1=value1', 'var2=value2', 'var3=value3']
     Specifying only one variable could look like either:
       ['var1=value1']      or
       'var1=value1'
-->
&lt;!ELEMENT vars                (#PCDATA)>
&lt;!ATTLIST vars
          if        CDATA     "1"
>

&lt;!ELEMENT var                 (#PCDATA)>
&lt;!ATTLIST var
          if        CDATA     "1"
>

&lt;!--
     The envs (and env) elements specify environment variables that will
     be set for the process.  Environment variables may be mixed case,
     however most programs assume environment variable names will
     be uppercase, so, in most cases, ensure that your environment
     variable names are uppercase.
     The value must evaluate via Python to a string or a list of
     strings. Multiple envs elements may be specified for a process.
     The format for each variable is:
       'varname=value'
     So, a list containing 3 variables could look like:
       ['ENV_VAR_1=value1', 'ENV_VAR_2=value2', 'ENV_VAR_3=value3']
     Specifying only one variable could look like either:
       ['ENV_VAR_1=value1']      or
       'ENV_VAR_1=value1'
-->
&lt;!ELEMENT envs                (#PCDATA)>
&lt;!ATTLIST envs
          if        CDATA     "1"
>

&lt;!ELEMENT env                 (#PCDATA)>
&lt;!ATTLIST env
          if        CDATA     "1"
>
&lt;!--
     The useprocessvars element specifies that STAF variable
     references should try to be resolved from the STAF variable
     pool associated with the process being started first.
     If the STAF variable is not found in this pool, the STAF
     global variable pool should then be searched.
-->
&lt;!ELEMENT useprocessvars      EMPTY>
&lt;!ATTLIST useprocessvars
          if        CDATA     "1"
>

&lt;!--
     The username element specifies the username under which
     the process should be started.
     The value is evaluated via Python to a string.
-->
&lt;!ELEMENT username            (#PCDATA)>
&lt;!ATTLIST username
          if        CDATA     "1"
>

&lt;!--
     The password element specifies the password with which to
     authenticate the user specified with the username element.
     The value is evaluated via Python to a string.
-->
&lt;!ELEMENT password            (#PCDATA)>
&lt;!ATTLIST password
          if        CDATA     "1"
>

&lt;!-- The disabledauth element specifies the action to take if a
     username/password is specified but authentication has been disabled.

     action  Must evaluate via Python to a string containing either:
             - 'error' specifies that an error should be returned.
             - 'ignore'  specifies that any username/password specified
               is ignored if authentication is desabled.
             This action overrides any default specified in the STAF
             configuration file.
-->
&lt;!ELEMENT disabledauth        EMPTY>
&lt;!ATTLIST disabledauth
          if        CDATA     "1"
          action    CDATA     #REQUIRED
>

&lt;!--
     The stdin element specifies the name of the file from which
     standard input will be read.  The value is evaluated via
     Python to a string.
-->
&lt;!ELEMENT stdin               (#PCDATA)>
&lt;!ATTLIST stdin
          if        CDATA     "1"
>

&lt;!--
     The stdout element specifies the name of the file to which
     standard output will be redirected.
     The value is evaluated via Python to a string.
-->
&lt;!ELEMENT stdout              (#PCDATA)>
&lt;!--  mode  specifies what to do if the file already exists.
            The value must evaluate via Python to one of the
            following:
            'replace' - specifies that the file will be replaced.
            'append'  - specifies that the process' standard
                        output will be appended to the file.
-->
&lt;!ATTLIST stdout
          if        CDATA     "1"
          mode      CDATA     "'replace'"
>

&lt;!--
     The stderr element specifies the file to which standard error will
     be redirected. The mode and filename are evaluated via Python to a
     string.
-->
&lt;!ELEMENT stderr              (#PCDATA)>
&lt;!-- mode   specifies what to do if the file already exists or to
            redirect standard error to the same file as standard output.
            The value must evaluate via Python to one of the following:
            'replace' - specifies that the file will be replaced.
            'append'  - specifies that the process's standard error will
                        be appended to the file.
            'stdout'  - specifies to redirect standard error to the
                        same file to which standard output is redirected.
                        If a file name is specified, it is ignored.
-->
&lt;!ATTLIST stderr
          if        CDATA     "1"
          mode      CDATA     "'replace'"
>

&lt;!--
     The returnstdout element specifies to return in STAXResult
     the contents of the file where standard output was redirected
     when the process completes.
-->
&lt;!ELEMENT returnstdout        EMPTY>
&lt;!ATTLIST returnstdout
          if        CDATA     "1"
>

&lt;!--
     The returnstderr element specifies to return in STAXResult
     the contents of the file where standard error was redirected
     when the process completes.
-->
&lt;!ELEMENT returnstderr        EMPTY>
&lt;!ATTLIST returnstderr
          if        CDATA     "1"
>

&lt;!--
     The returnfiles (and returnfile) elements specify that the
     contents of the specified file(s) should be returned in
     STAXResult when the process completes.  The value must evaluate
     via Python to a string or a list of strings. Multiple returnfile(s)
     elements may be specified for a process.
-->
&lt;!ELEMENT returnfiles         (#PCDATA)>
&lt;!ATTLIST returnfiles
          if        CDATA     "1"
>

&lt;!ELEMENT returnfile          (#PCDATA)>
&lt;!ATTLIST returnfile
          if        CDATA     "1"
>

&lt;!--
     The stopusing element allows you to specify the method by
     which this process will be STOPed, if not overridden on the
     STOP command.
     The value is evaluated via Python to a string.
-->
&lt;!ELEMENT stopusing           (#PCDATA)>
&lt;!ATTLIST stopusing
          if        CDATA     "1"
>

&lt;!--
     The console element allows you to specify if the process should
     get a new console window or share the STAFProc console.

     use    Must evaluate via Python to a string containing either:
            - 'new' specifies that the process should get a new console
              window.  This option only has effect on Windows systems.
              This is the default for Windows systems.
            - 'same' specifies that the process should share the
              STAFProc console.  This option only has effect on Windows
              systems.  This is the default for Unix systems.
-->
&lt;!ELEMENT console             EMPTY>
&lt;!ATTLIST console
          if        CDATA     "1"
          use       CDATA     #REQUIRED
>

&lt;!--
     The focus element allows you to specify the focus that is to be
     given to any new windows opened when starting a process on a Windows
     system.  The window(s) it effects depends on whether you are using
     the 'default' or the 'shell' command mode:
       - Default command mode (no SHELL option):  The focus specified is
         given to any new windows opened by the command specified.
       - Shell command mode:  The focus specified is given only to the
         new shell command window opened, not to any windows opened by
         the specified command.

     The focus element only has effect on Windows systems and requires
     STAF V3.1.4 or later on the machine where the process is run.

     mode   Must evaluate via Python to a string containing one of the
            following values:
            - 'background' specifies to display a window in the background
              (e.g. not give it focus) in its most recent size and position.
              This is the default.
            - 'foreground' specifies to display a window in the foreground
              (e.g. give it focus) in its most recent size and position.
            - 'minimized' specifies to display a window as minimized.
-->
&lt;!ELEMENT focus               EMPTY>
&lt;!ATTLIST focus
          if        CDATA     "1"
          mode      CDATA     #REQUIRED
>

&lt;!--
     Specifies that a static handle should be created for this process.
     The value is evaluated via Python to a string.  It will be the
     registered name of the static handle.  Using this option will also
     cause the environment variable STAF_STATIC_HANDLE to be set
     appropriately for the process.
-->
&lt;!ELEMENT statichandlename    (#PCDATA)>
&lt;!ATTLIST statichandlename
          if        CDATA     "1"
>

&lt;!--
     The process-action element specifies a task to be executed
     when a process has started.
-->
&lt;!ELEMENT process-action      (%task;)>
&lt;!ATTLIST process-action
          if        CDATA     "1"
>

&lt;!--
     The other element specifies any other STAF parameters that
     may arise in the future.  It is used to pass additional data
     to the STAF PROCESS START request.
     The value is evaluated via Python to a string.
-->
&lt;!ELEMENT other               (#PCDATA)>
&lt;!ATTLIST other
          if        CDATA     "1"
>

&lt;!--================== The STAX Job Element ===================== -->
&lt;!--
     Specifies a STAX sub-job to be executed.  This element is equivalent
     to a STAX EXECUTE request.

     The name attribute specifies the name of the job. The job name
     defaults to the value of the function name called to start the job.
     Its name and all of its element values are evaluated via Python.
     The job element must contain a location element and either a
     file or data element.  This attribute is equivalent to the
     JOBNAME option for a STAX EXECUTE command.

     The clearlogs attribute specifies to delete the STAX Job and Job
     User logs before the job is executed to ensure that only one job's
     contents are in the log.  This attribute is equivalent to the
     CLEARLOGS option for a STAX EXECUTE command.  The default is the
     same option that was specified for the parent job.  Valid values
     include 'parent', 'default', 'enabled', and 'disabled'.

     The monitor attribute specifies whether to automatically monitor the
     subjob.  Note that 'Automatically monitor recommended sub-jobs' must
     be selected in the STAX Job Monitor properties in order for it to be
     used.  The default value for the monitor attribute is 0, a false
     value.

     The logtcelapsedtime attribute specifies to log the elapsed time
     for a testcase in the summary record in the STAX Job log and on a
     LIST TESTCASES request.  This attribute is equivalent to the
     LOGTCELAPSEDTIME option for a STAX EXECUTE command.  The default is
     the same option that was specified for the parent job.  Valid values
     include 'parent', 'default', 'enabled', and 'disabled'.

     The logtcnumstarts attribute specifies to log the number of starts
     for a testcase in the summary record in the STAX Job log and on a
     LIST TESTCASES request.  This attribute is equivalent to the
     LOGNUMSTARTS option for a STAX EXECUTE command.  The default is
     the same option that was specified for the parent job.  Valid values
     include 'parent', 'default', 'enabled', and 'disabled'.

     The logtcstartstop attribute specifies to log start/stop records
     for testcases in the STAX Job log.  This attribute is equivalent to
     the LOGTCSTARTSTOP option for a STAX EXECUTE command.  The default
     is the same option that was specified for the parent job.  Valid
     values include 'parent', 'default', 'enabled', and 'disabled'.

     The pythonoutput attribute specifies where to write Python stdout/stderr
     (e.g. from a print statement in a script element).  This attribute
     is equivalent to the PYTHONOUTPUT option for a STAX EXECUTE command.
     The default is the same option that was specified for the parent job.
     Valid values include 'parent', 'default', 'jobuserlog', 'message',
     'jobuserlogandmsg', and 'jvmlog'.

     The pythonloglevel attribute specifies the log level to use when writing
     Python stdout (e.g. from a print statement in a script element) if the
     python output is written to the STAX Job User Log.  This attribute is
     equivalent to the PYTHONLOGLEVEL option for a STAX EXECUTE command.
     The default is the same option that was specified for the parent job.
     Valid values include 'parent', 'default', or a valid STAF log level
     such as 'Info', 'Trace', 'User1', etc.

     The job element must contain either a job-file or job-data element.

     The job element has the following optional elements:
       job-function, job-function-args, job-scriptfile(s), and job-script

     Each of these optional elements may specify an if attribute.
     The if attribute must evaluate via Python to a true or false value.
     If it does not evaluate to a true value, the element is ignored.
     The default value for the if attribute is 1, a true value.
     Note that in Python, true means any nonzero number or nonempty
     object; false means not true, such as a zero number, an empty
     object, or None. Comparisons and equality tests return 1 or 0
     (true or false).
-->
&lt;!ELEMENT job        ((job-file | job-data),
                      job-function?, job-function-args?,
                      (job-scriptfile | job-scriptfiles)?,
                      job-script*, job-action?)>
&lt;!ATTLIST job
          name              CDATA   #IMPLIED
          clearlogs         CDATA   "'parent'"
          monitor           CDATA   #IMPLIED
          logtcelapsedtime  CDATA   "'parent'"
          logtcnumstarts    CDATA   "'parent'"
          logtcstartstop    CDATA   "'parent'"
          pythonoutput      CDATA   "'parent'"
          pythonloglevel    CDATA   "'parent'"
>

&lt;!--
     The job-file element specifies the fully qualified name of a file
     containing the XML document for the STAX job to be executed.
     The job-file element is equivalent to the FILE option for a STAX
     EXECUTE command.

     The machine attribute specifies the name of the machine where the
     xml file is located.  If not specified, it defaults to Python
     variable STAXJobXMLMachine.  The machine attribute is equivalent
     to the MACHINE option for a STAX EXECUTE command.
  -->
&lt;!ELEMENT job-file           (#PCDATA)>
&lt;!ATTLIST job-file
          machine    CDATA   "STAXJobXMLMachine"
>

&lt;!--
     The job-data element specifies a string containing the XML document
     for the job to be executed.  This element is equivalent to the
     DATA option for a STAX EXECUTE command.

     The eval attribute specifies whether the data is be evaluated by
     Python in the parent job.  For example, if the job-data information
     is dynamically generated and assigned to a Python variable, rather
     than just containing the literal XML information, then you would
     need to set the eval attribute to true (e.g. eval="1").
     The default for the eval attribute is false ("0").
  -->
&lt;!ELEMENT job-data           (#PCDATA)>
&lt;!ATTLIST job-data
          eval       CDATA   "0"
>

&lt;!--
     The job-function element specifies the name of the function element
     to call to start the job, overriding the defaultcall element, if any,
     specified in the XML document. The &lt;function name> must be the name of
     a function element specified in the XML document. This element is
     equivalent to the FUNCTION option for a STAX EXECUTE command.
-->
&lt;!ELEMENT job-function       (#PCDATA)>
&lt;!ATTLIST job-function
          if         CDATA   "1"
>

&lt;!--
     The job-function-args element specifies arguments to pass to the
     function element called to start the job, overriding the arguments,
     if any, specified for the defaultcall element in the XML document.
     This element is equivalent to the ARGS option for a STAX EXECUTE
     command.

     The eval attribute specifies whether the data is to be evaluated
     by Python in the parent job.  The default for the eval attribute
     is false ("0").
-->
&lt;!ELEMENT job-function-args  (#PCDATA)>
&lt;!ATTLIST job-function-args
          if         CDATA   "1"
          eval       CDATA   "0"
>

&lt;!--
     The job-script element specifies Python code to be executed.
     This element is equivalent to the SCRIPT option for a STAX
     EXECUTE command.  Multiple job-script elements may be specified.

     The eval attribute specifies whether the data is to be evaluated
     by Python in the parent job.  The default for the eval attribute
     is false ("0").
-->
&lt;!ELEMENT job-script         (#PCDATA)>
&lt;!ATTLIST job-script
          if         CDATA   "1"
          eval       CDATA   "0"
>

&lt;!--
     The job-scriptfile element (equivalent to the job-scriptfiles
     element) specifies the fully qualified name of a file containing
     Python code to be executed, or a list of file names containing
     Python code to be executed. The value must evaluate via Python to
     a string or a list of strings. This element is equivalent to the
     SCRIPTFILE option for a STAX EXECUTE command.

     Specifying only one scriptfile could look like either:
       ['C:/stax/scriptfiles/scriptfile1.py']      or
       'C:/stax/scriptfiles/scriptfiel1.py'
     Specifying a list containing 3 scriptfiles could look like:
       ['C:/stax/scriptfiles/scriptfile1.py',
        'C:/stax/scriptfiles/scriptfile2.py',
         C:/stax/scriptfiles/scriptfile2.py' ]

     The machine attribute specifies the name of the machine where the
     SCRIPTFILE(s) are located. If not specified, it defaults to Python
     variable STAXJobScriptFileMachine.  This attribute is equivalent
     to the SCRIPTFILEMACHINE option for a STAX EXECUTE command.
-->
&lt;!ELEMENT job-scriptfile     (#PCDATA)>
&lt;!ATTLIST job-scriptfile
          if         CDATA   "1"
          machine    CDATA   "STAXJobScriptFileMachine"
>

&lt;!ELEMENT job-scriptfiles    (#PCDATA)>
&lt;!ATTLIST job-scriptfiles
          if         CDATA   "1"
          machine    CDATA   "STAXJobScriptFileMachine"
>

&lt;!--
     The job-action element specifies a task to be executed after the
     sub-job has started. This task will be executed in parallel with
     the sub-job via a new STAX-Thread. The task will be able to use the
     STAXSubJobID variable to obtain the sub-job ID in order to interact
     with the job. If the job completes before the task completes, the
     job will remain in a non-complete state until the task completes.
     If the job cannot be started, the job-action task is not executed.
-->
&lt;!ELEMENT job-action         (%task;)>
&lt;!ATTLIST job-action
          if        CDATA    "1"
>

&lt;!--================= The Call-With-List Element =================== -->
&lt;!--
     Perform a function with the referenced name with any number of
     arguments in the form of a list.  The function attribute value
     and argument values are evaluated via Python.
-->
&lt;!ELEMENT call-with-list      (call-list-arg*)>
&lt;!ATTLIST call-with-list
          function   CDATA    #REQUIRED
>

&lt;!ELEMENT call-list-arg       (#PCDATA)>

&lt;!--================= The Testcase Status Element ================== -->
&lt;!--
     Marks status result ('pass' or 'fail' or 'info') for a testcase
     and allows additional information to be specified.  The status
     result and the additional info is evaluated via Python.

-->
&lt;!ELEMENT tcstatus   (#PCDATA)>
&lt;!ATTLIST tcstatus
          result     CDATA  #REQUIRED
>

&lt;!--================= The Return Element =========================== -->
&lt;!--
     Specifies a value to return from a function.
-->
&lt;!ELEMENT return     (#PCDATA)>

&lt;!--================= The Release Element ========================== -->
&lt;!--
     The release element specifies to release a block in the job.
     If an if attribute is specified and it evaluates via Python to
     false, then the release element is ignored.
-->
&lt;!ELEMENT release    EMPTY>
&lt;!ATTLIST release
          block      CDATA    #IMPLIED
          if         CDATA    "1"
>

&lt;!--================= The Rethrow Element ========================= -->
&lt;!--
     The rethrow element specifies to rethrow the current exception.
-->
&lt;!ELEMENT rethrow      EMPTY>

&lt;!--================= The Raise Element ============================ -->
&lt;!--
     A raise signal element raises a specified signal.
     Signals can also be raised by the STAX execution engine.
     The signal attribute value is evaluated via Python.
-->
&lt;!ELEMENT raise      EMPTY>
&lt;!ATTLIST raise
          signal     CDATA        #REQUIRED
>

&lt;!--================= The Call Element ============================= -->
&lt;!--
     Perform a function with the referenced name.
     The function attribute value is evaluated via Python.
     Arguments can be specified as data to the call element.
     Arguments are evaluated via Python.
-->
&lt;!ELEMENT call       (#PCDATA)>
&lt;!ATTLIST call
          function   CDATA    #REQUIRED
>

&lt;!--================= The Loop Element ============================= -->
&lt;!--
     The loop element performs a task a specified number of times,
     allowing specification of an upper and lower bound with an
     increment value and where the index counter is available to
     sub-tasks.  Also, while and/or until expressions can be
     specified.
-->
&lt;!ELEMENT loop       (%task;)>
&lt;!-- var      is the name of a variable which will contain the loop
              index variable.  It is a literal.
     from     is the starting value of the loop index variable.
              It must evaluate to an integer value via Python.
     to       is the maximum value of the loop index variable
              It must evaluate to an integer value via Python.
     by       is the increment value for the loop index variable
              It must evaluate to an integer value via Python.
     while    is an expression that must evaluate to a boolean value
              and is performed at the top of each loop.  If it
              evaluates to false, it breaks out of the loop.
     until    is an expression that must evaluate to a boolean value
              and is performed at the bottom of each loop.  If it
              evaluates to false, it breaks out of the loop.
-->
&lt;!ATTLIST loop
          var        CDATA    #IMPLIED
          from       CDATA    '1'
          to         CDATA    #IMPLIED
          by         CDATA    '1'
          while      CDATA    #IMPLIED
          until      CDATA    #IMPLIED
>

&lt;!--================= The Script Element =========================== -->
&lt;!--
     Specifies Python code to be executed.
-->
&lt;!ELEMENT script     (#PCDATA)>

&lt;!--================= The Parallel Element ========================= -->
&lt;!--
     The parallel element performs one or more tasks in parallel.
-->
&lt;!ELEMENT parallel   (%task;)+>

</pre>

<hr>

<h1><a name="Header_ExtDTD" href="#ToC_ExtDTD">Appendix D: STAX Extensions Document Type Definition (DTD)</a></h1>

This section contains the DTD for defining STAX Extensions to be registered for the STAX service.

<pre>
&lt;!--
   STAX Extensions Document Type Definition (DTD)

   This DTD module is identified by the SYSTEM identifier:

     SYSTEM 'stax-extensions.dtd'

   This DTD is used for files specified using the EXTENSIONXMLFILE
   parameter when registering the STAX service with extensions.

-->

&lt;!--================= STAX Extension File Definition =============== -->
&lt;!--
     The root element extensions contains all other elements.  It
     consists of one or more extension elements.
-->
&lt;!ELEMENT stax-extensions    (extension+)>

&lt;!--================= The Extension Element ======================== -->
&lt;!--
     Specifies a STAX extension.  It can consist of 0 or more
     parameter elements, followed by 0 or more include-element or
     0 or more exclude-element elements.
-->
&lt;!ELEMENT extension          (parameter*,
                              (include-element* | exclude-element*))>
&lt;!ATTLIST extension
          jarfile            CDATA   #REQUIRED
>

&lt;!--================= The Parameter Element ======================== -->
&lt;!--
     Specifies a parameter for a STAX extension.
-->
&lt;!ELEMENT parameter          EMPTY>
&lt;!ATTLIST parameter
          name               CDATA   #REQUIRED
          value              CDATA   #REQUIRED
>

&lt;!--================= The Include Element ========================= -->
&lt;!--
     Specifies to only register this element for a STAX extension
     instead of registering all elements specified in the extension
     jar file's manifest file.
-->
&lt;!ELEMENT include-element    EMPTY>
&lt;!ATTLIST include-element
          name               CDATA   #REQUIRED
>

&lt;!--================= The Exclude Element ========================= -->
&lt;!--
     Specifies to excluce registering this element for a STAX extension
     instead of registering all elements specified in the extension
     jar file's manifest file.
-->
&lt;!ELEMENT exclude-element    EMPTY>
&lt;!ATTLIST exclude-element
          name               CDATA   #REQUIRED
>
</pre>

<hr>

<h1><a name="Header_References" href="#ToC_References">Appendix E: References</a></h1>

<ul>
<li>
See the <a href="http://www.jython.org">http://www.jython.org</a> website
for more information about Jython.</li>

<li>
See the <a href="http://www.python.org">http://www.python.org</a> website
for more information about Python.</li>

<li>
See the <a href="http://www.w3c.org/xml">http://www.w3c.org</a> website for more information about XML.
See the <a href="http://www.xml.org/xml/resources_focus_beginnerguide.shtml">http://www.xml.org/xml/resources_focus_beginnerguide.shtml</a> website
for an XML Beginner's Guide.</li>

<li>
For more information about the XML Parser for Java used by STAX to validate and parse
XML documents:
    <ul compact>
    <li>See the <a href="http://w3.xml.ibm.com/xml4j">http://w3.xml.ibm.com/xml4j</a> website.</li>
    <li>Otherwise, see the <a href="http://xml.apache.org/xerces2-j">http://xml.apache.org/xerces2-j</a> website.</li>
    </ul>
</li>
</ul>

<hr>

<h1><a name="Header_CPythonDiffs" href="#ToC_CPythonDiffs">Appendix F: Jython and CPython Differences</a></h1>

Although in most cases Jython behavior is identical to the C-language
implementation of Python (CPython), there are still cases where the
two implementations differ.  If you are already a CPython programmer,
or are hoping to use CPython code under Jython, you need to be aware
of these differences.  Also, there is a time lag between a new CPython
release and the corresponding Jython release.  STAX V3.5.0 and later
uses Jython 2.5.2 which is based on Python 2.5.2.  Jython 2.5.2 cannot
execute Python code that uses functions that were provided in later
versions of Python, such as Python 2.6.
<p>
Most Python modules that are written in Python work fine in Jython.
A few types of modules will not run under Jython such as:
<p>
<ul>
<li>Modules that contain functionality not included in a JVM
    <p>
    Some standard CPython modules depend on operating system calls
    that are not available under Java.  The most notable of these
    is <i>os</i>, which actually does run in Jython, but is missing
    much of its functionality.
<p>
<li>Modules that are implemented in C
    <p>
    A number of common CPython modules are implemented in C rather
    than Python, either for a speed boost or because the module is
    a C wrapper around an external C library.  The C modules, or
    any modules that depend on them, will not run in Jython.
</ul>
<p>
See the "Jython Essentials" book, written by Samuele Pedroni and
Noel Rappin, for more information about the differences between
Jython and CPython.
<p>
<hr>

<h1><a name="Header_Licenses" href="#ToC_Licenses">Appendix G: Licenses and Acknowledgements</a></h1>

<h2>Jython</h2>

Jython is an implementation of the high-level, dynamic, object-oriented language Python
written in 100% Pure Java, and seamlessly integrated with the Java platform. It thus
allows you to run Python on any Java platform.

<h3>Acknowledgement</h3>

This product includes software developed by the Jython Developers (http://www.jython.org/).

<h3>Licence</h3>
<pre>
PYTHON SOFTWARE FOUNDATION LICENSE VERSION 2
--------------------------------------------

1. This LICENSE AGREEMENT is between the Python Software Foundation
("PSF"), and the Individual or Organization ("Licensee") accessing and
otherwise using this software ("Jython") in source or binary form and
its associated documentation.

2. Subject to the terms and conditions of this License Agreement, PSF
hereby grants Licensee a nonexclusive, royalty-free, world-wide
license to reproduce, analyze, test, perform and/or display publicly,
prepare derivative works, distribute, and otherwise use Jython alone
or in any derivative version, provided, however, that PSF's License
Agreement and PSF's notice of copyright, i.e., "Copyright (c) 2007
Python Software Foundation; All Rights Reserved" are retained in
Jython alone or in any derivative version prepared by Licensee.

3. In the event Licensee prepares a derivative work that is based on
or incorporates Jython or any part thereof, and wants to make
the derivative work available to others as provided herein, then
Licensee hereby agrees to include in any such work a brief summary of
the changes made to Jython.

4. PSF is making Jython available to Licensee on an "AS IS"
basis.  PSF MAKES NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR
IMPLIED.  BY WAY OF EXAMPLE, BUT NOT LIMITATION, PSF MAKES NO AND
DISCLAIMS ANY REPRESENTATION OR WARRANTY OF MERCHANTABILITY OR FITNESS
FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF JYTHON WILL NOT
INFRINGE ANY THIRD PARTY RIGHTS.

5. PSF SHALL NOT BE LIABLE TO LICENSEE OR ANY OTHER USERS OF JYTHON
FOR ANY INCIDENTAL, SPECIAL, OR CONSEQUENTIAL DAMAGES OR LOSS AS
A RESULT OF MODIFYING, DISTRIBUTING, OR OTHERWISE USING JYTHON,
OR ANY DERIVATIVE THEREOF, EVEN IF ADVISED OF THE POSSIBILITY THEREOF.

6. This License Agreement will automatically terminate upon a material
breach of its terms and conditions.

7. Nothing in this License Agreement shall be deemed to create any
relationship of agency, partnership, or joint venture between PSF and
Licensee.  This License Agreement does not grant permission to use PSF
trademarks or trade name in a trademark sense to endorse or promote
products or services of Licensee, or any third party.

8. By copying, installing or otherwise using Jython, Licensee
agrees to be bound by the terms and conditions of this License
Agreement.
 
Jython 2.0, 2.1 License
================================

Copyright (c) 2000-2009 Jython Developers.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions
are met:

 - Redistributions of source code must retain the above copyright
   notice, this list of conditions and the following disclaimer.

 - Redistributions in binary form must reproduce the above copyright
   notice, this list of conditions and the following disclaimer in
   the documentation and/or other materials provided with the distribution.

 - Neither the name of the Jython Developers nor the names of
   its contributors may be used to endorse or promote products
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE REGENTS OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</pre>

<h2>XML Parser for Java (Xerces)</h2>

XML Parser for Java is a validating XML parser and processor written in 100% pure
Java; it is a library for parsing and generating XML documents. This parser easily
enables an application to read and write XML data.

<h3>Acknowledgement</h3>

This product includes software developed by the Apache Software Foundation (http://www.apache.org/).

<h3>License</h3>
<pre>
/*
 * The Apache Software License, Version 1.1
 *
 *
 * Copyright (c) 1999-2004 The Apache Software Foundation.  All rights
 * reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 *
 * 3. The end-user documentation included with the redistribution,
 *    if any, must include the following acknowledgment:
 *       "This product includes software developed by the
 *        Apache Software Foundation (http://www.apache.org/)."
 *    Alternately, this acknowledgment may appear in the software itself,
 *    if and wherever such third-party acknowledgments normally appear.
 *
 * 4. The names "Xerces" and "Apache Software Foundation" must
 *    not be used to endorse or promote products derived from this
 *    software without prior written permission. For written
 *    permission, please contact apache@apache.org.
 *
 * 5. Products derived from this software may not be called "Apache",
 *    nor may "Apache" appear in their name, without prior written
 *    permission of the Apache Software Foundation.
 *
 * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
 * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 * ====================================================================
 *
 * This software consists of voluntary contributions made by many
 * individuals on behalf of the Apache Software Foundation and was
 * originally based on software copyright (c) 1999, International
 * Business Machines, Inc., http://www.ibm.com.  For more
 * information on the Apache Software Foundation, please see
 * &lt;http://www.apache.org/>.
 */
</pre>

<h2>Xalan-Java</h2>

Xalan-Java is an XSLT processor for transforming XML documents into HTML, text, 
or other XML document types.

<h3>Acknowledgement</h3>

This product includes software developed by the Apache Software Foundation (http://www.apache.org/).

<h3>License</h3>
<pre>
                                Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

      "License" shall mean the terms and conditions for use, reproduction,
      and distribution as defined by Sections 1 through 9 of this document.

      "Licensor" shall mean the copyright owner or entity authorized by
      the copyright owner that is granting the License.

      "Legal Entity" shall mean the union of the acting entity and all
      other entities that control, are controlled by, or are under common
      control with that entity. For the purposes of this definition,
      "control" means (i) the power, direct or indirect, to cause the
      direction or management of such entity, whether by contract or
      otherwise, or (ii) ownership of fifty percent (50%) or more of the
      outstanding shares, or (iii) beneficial ownership of such entity.

      "You" (or "Your") shall mean an individual or Legal Entity
      exercising permissions granted by this License.

      "Source" form shall mean the preferred form for making modifications,
      including but not limited to software source code, documentation
      source, and configuration files.

      "Object" form shall mean any form resulting from mechanical
      transformation or translation of a Source form, including but
      not limited to compiled object code, generated documentation,
      and conversions to other media types.

      "Work" shall mean the work of authorship, whether in Source or
      Object form, made available under the License, as indicated by a
      copyright notice that is included in or attached to the work
      (an example is provided in the Appendix below).

      "Derivative Works" shall mean any work, whether in Source or Object
      form, that is based on (or derived from) the Work and for which the
      editorial revisions, annotations, elaborations, or other modifications
      represent, as a whole, an original work of authorship. For the purposes
      of this License, Derivative Works shall not include works that remain
      separable from, or merely link (or bind by name) to the interfaces of,
      the Work and Derivative Works thereof.

      "Contribution" shall mean any work of authorship, including
      the original version of the Work and any modifications or additions
      to that Work or Derivative Works thereof, that is intentionally
      submitted to Licensor for inclusion in the Work by the copyright owner
      or by an individual or Legal Entity authorized to submit on behalf of
      the copyright owner. For the purposes of this definition, "submitted"
      means any form of electronic, verbal, or written communication sent
      to the Licensor or its representatives, including but not limited to
      communication on electronic mailing lists, source code control systems,
      and issue tracking systems that are managed by, or on behalf of, the
      Licensor for the purpose of discussing and improving the Work, but
      excluding communication that is conspicuously marked or otherwise
      designated in writing by the copyright owner as "Not a Contribution."

      "Contributor" shall mean Licensor and any individual or Legal Entity
      on behalf of whom a Contribution has been received by Licensor and
      subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      copyright license to reproduce, prepare Derivative Works of,
      publicly display, publicly perform, sublicense, and distribute the
      Work and such Derivative Works in Source or Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      (except as stated in this section) patent license to make, have made,
      use, offer to sell, sell, import, and otherwise transfer the Work,
      where such license applies only to those patent claims licensable
      by such Contributor that are necessarily infringed by their
      Contribution(s) alone or by combination of their Contribution(s)
      with the Work to which such Contribution(s) was submitted. If You
      institute patent litigation against any entity (including a
      cross-claim or counterclaim in a lawsuit) alleging that the Work
      or a Contribution incorporated within the Work constitutes direct
      or contributory patent infringement, then any patent licenses
      granted to You under this License for that Work shall terminate
      as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions:

      (a) You must give any other recipients of the Work or
          Derivative Works a copy of this License; and

      (b) You must cause any modified files to carry prominent notices
          stating that You changed the files; and

      (c) You must retain, in the Source form of any Derivative Works
          that You distribute, all copyright, patent, trademark, and
          attribution notices from the Source form of the Work,
          excluding those notices that do not pertain to any part of
          the Derivative Works; and

      (d) If the Work includes a "NOTICE" text file as part of its
          distribution, then any Derivative Works that You distribute must
          include a readable copy of the attribution notices contained
          within such NOTICE file, excluding those notices that do not
          pertain to any part of the Derivative Works, in at least one
          of the following places: within a NOTICE text file distributed
          as part of the Derivative Works; within the Source form or
          documentation, if provided along with the Derivative Works; or,
          within a display generated by the Derivative Works, if and
          wherever such third-party notices normally appear. The contents
          of the NOTICE file are for informational purposes only and
          do not modify the License. You may add Your own attribution
          notices within Derivative Works that You distribute, alongside
          or as an addendum to the NOTICE text from the Work, provided
          that such additional attribution notices cannot be construed
          as modifying the License.

      You may add Your own copyright statement to Your modifications and
      may provide additional or different license terms and conditions
      for use, reproduction, or distribution of Your modifications, or
      for any such Derivative Works as a whole, provided Your use,
      reproduction, and distribution of the Work otherwise complies with
      the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state otherwise,
      any Contribution intentionally submitted for inclusion in the Work
      by You to the Licensor shall be under the terms and conditions of
      this License, without any additional terms or conditions.
      Notwithstanding the above, nothing herein shall supersede or modify
      the terms of any separate license agreement you may have executed
      with Licensor regarding such Contributions.

   6. Trademarks. This License does not grant permission to use the trade
      names, trademarks, service marks, or product names of the Licensor,
      except as required for reasonable and customary use in describing the
      origin of the Work and reproducing the content of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
      agreed to in writing, Licensor provides the Work (and each
      Contributor provides its Contributions) on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied, including, without limitation, any warranties or conditions
      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
      PARTICULAR PURPOSE. You are solely responsible for determining the
      appropriateness of using or redistributing the Work and assume any
      risks associated with Your exercise of permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
      whether in tort (including negligence), contract, or otherwise,
      unless required by applicable law (such as deliberate and grossly
      negligent acts) or agreed to in writing, shall any Contributor be
      liable to You for damages, including any direct, indirect, special,
      incidental, or consequential damages of any character arising as a
      result of this License or out of the use or inability to use the
      Work (including but not limited to damages for loss of goodwill,
      work stoppage, computer failure or malfunction, or any and all
      other commercial damages or losses), even if such Contributor
      has been advised of the possibility of such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
      the Work or Derivative Works thereof, You may choose to offer,
      and charge a fee for, acceptance of support, warranty, indemnity,
      or other liability obligations and/or rights consistent with this
      License. However, in accepting such obligations, You may act only
      on Your own behalf and on Your sole responsibility, not on behalf
      of any other Contributor, and only if You agree to indemnify,
      defend, and hold each Contributor harmless for any liability
      incurred by, or claims asserted against, such Contributor by reason
      of your accepting any such warranty or additional liability.

   END OF TERMS AND CONDITIONS

   APPENDIX: How to apply the Apache License to your work.

      To apply the Apache License to your work, attach the following
      boilerplate notice, with the fields enclosed by brackets "[]"
      replaced with your own identifying information. (Don't include
      the brackets!)  The text should be enclosed in the appropriate
      comment syntax for the file format. We also recommend that a
      file or class name and description of purpose be included on the
      same "printed page" as the copyright notice for easier
      identification within third-party archives.

   Copyright [yyyy] [name of copyright owner]

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
</pre>

</ul>

</body>
</html>

